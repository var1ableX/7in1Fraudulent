webpackJsonp([3,23,32,36],{"+/oj":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");n("jAPW"),(0,a.default)(function(){(0,a.default)(document).on("click",".js-read_more",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),r=t.find(".js-less"),i=t.find(".js-more");r.addClass("hide"),r.find(".video-player").trigger("ksr_video:pause"),i.removeClass("hide"),a.default.scrollTo(t),n&&(0,o.track)(n+" Read More"),e.preventDefault()}),(0,a.default)(document).on("click",".js-read_less",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),r=t.find(".js-less"),i=t.find(".js-more");r.removeClass("hide"),i.addClass("hide"),i.find(".video-player").trigger("ksr_video:pause"),a.default.scrollTo(t),n&&(0,o.track)(n+" Read Less"),e.preventDefault()})})},"+4Bd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unboundValidator=t.validate=t.isValid=t.convertErrorsToObject=t.getErrors=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("p5aI");t.getErrors=function(e){var t=o(e());return t.isSuccess?{}:a(t.value)};var a=t.convertErrorsToObject=function(e){var t=e.errors;return Object.keys(t).reduce(function(e,n){var i=t[n];return r({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,i.value))},{})},o=(t.isValid=function(e){return o(e()).isSuccess},t.validate=function(e){return e.reduce(function(e,t){return e.concat(t)},(0,i.Success)())});t.unboundValidator=function(e){return function(t){var n=t.state,r=t.fields,i=n.touched,a=n.errors,o=r.filter(function(e){return!(!i[e]||!a[e])}).map(function(e){return a[e]}).reduce(function(e,t){return e.concat(t)},[]).map(function(t){return e[t]||t});return o.length>0?o:null}}},"+4yP":function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("9VV1")),o=l(n("wmCY")),s=l(n("c5nH"));function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)("body").on("DOMNodeInserted","form#new_comment",function(){var e=(0,r.default)(this);e.on("click",":submit",function(t){if(s.default&&s.default.get("comments_loaded")&&s.default.get("comments_count")-s.default.get("comments_loaded")>50)return!0;t.preventDefault();var n=e.find("input.submit"),l=n.val(),u=function(){var t=e.closest(".js-comments").find(".list-comments li.comment:first");if(s.default&&s.default.get("comments_loaded")&&t.length)return parseInt(t.attr("id").match(/\d+/)[0],10)}(),c=i.default.reduce(e.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});u&&(c.cursor=u),n.hasClass("disabled")||(n.addClass("disabled"),n.val(o.default.t("onloads.views.comments.form.Posting")),r.default.ajax({type:e.attr("method"),url:e.attr("action"),dataType:"json",data:c,success:function(t){var n=e.closest(".js-comments"),o=n.find(".list-comments"),l=n.find("header");i.default.isArray(t.flash)&&i.default.isArray(t.flash[0])&&(t.flash=i.default.object(t.flash)),(0,a.default)(t.flash),t.html&&(e.each(function(){void 0!==this.reset&&this.reset()}),o.length||(o=(0,r.default)('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),l.length?l.after(o):n.append(o)),t.comments_count&&s.default&&s.default.get("comments_loaded")&&(s.default.set("comments_loaded",s.default.get("comments_loaded")+(0,r.default)(t.html).length),s.default.set("comments_count",t.comments_count)),(0,r.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)+1}),o.closest(".project_preview_comments").addClass("has_comments"),(0,r.default)("body#proposals_show").length?o.append(t.html):o.find(".page ol.comments").prepend(t.html))},complete:function(){n.removeClass("disabled"),n.val(l)}}))})})})},"+V2Z":function(e,t,n){"use strict";var r,i=n("I1z3"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");o.browser=a.default},"+YRa":function(e,t,n){"use strict";n("452R"),n("v6Dq"),n("mjY1");var r=p(n("rXeC")),i=p(n("hBlz")),a=p(n("shXp")),o=p(n("eF8u")),s=p(n("8NzR")),l=p(n("L3hI")),u=n("4RZc"),c=n("Z6GA"),d=p(n("GiK3")),f=p(n("O27J")),h=n("31kD");function p(e){return e&&e.__esModule?e:{default:e}}(0,s.default)("#discover_advanced",function(e){var t,n,s,p=(0,r.default)(document.body),m=e.find("#advanced_container"),g=e.find("#NS_discover__landing"),v=(0,r.default)("#NS__discover_advanced_sentence").find("form"),_=e.find("#projects_list"),y=e.find(".load_more"),b=e.find(".NS_discover__spotlight_projects"),w=e.find(".NS_discover__footer"),E=500,k=!1,S=_.data("seed"),C=1,T=!0;function A(){return a.default.map(_.find(".row > li > .project-card, .js-react-proj-card"),function(e){return(0,r.default)(e).data("pid")})}function R(e){var t=A();return a.default.filter(e,function(e){return-1===a.default.indexOf(t,e.id)})}function x(e){var t=document.createElement("div");return t.setAttribute("data-project",JSON.stringify(e)),t.className="js-react-async-proj-card col-full col-sm-12-24 col-lg-8-24",t.id=e.slug+"-"+(0,c.uuidNoDashes)(),t}function P(e,t){return e.filter(function(e){return(0,r.default)(e).data("project").state===t})}function I(e){var t=document.createElement("div");t.className="grid-row flex flex-wrap";var n=document.createDocumentFragment();return e.forEach(function(e){return n.appendChild(e)}),t.appendChild(n),t}function O(e,t){var n=(t||{}).append_results;if(n||(_.children().remove(),S=e.seed,y.show(),_.siblings(".title").find(".count").text(l.default.format_number(e.total_hits,{precision:0})+l.default.pluralize(" project",e.total_hits)).siblings(".category").hide()),e.projects.length>0){m.removeClass("no_results");var i=document.createElement("div");if(i.className="grid-row flex flex-wrap",_.is("[data-discover_past_project_header]")){var a=R(e.projects).map(x),o=P(a,"live"),s=P(a,"successful");if(o.length&&_.append(I(o)),s.length){if(!_.children().find("#js-past-projects-header").length){var u=_.children().last()[0];f.default.render(d.default.createElement(h.ExploreHeader,{projectCount:e.past_projects_count}),u)}_.append(I(s))}}else{var c=document.createDocumentFragment();R(e.projects).map(x).forEach(function(e){return c.appendChild(e)}),i.appendChild(c),_.append(i)}(0,r.default)(document).trigger("discovery:loaded_more")}else y.hide(),n||D()}function j(e,o){o=o||{},k=!0,(e=v.length?e||(0,i.default)("?"+v.serialize()).query(!0):e||(0,i.default)().query(!0)).seed=S,e=a.default.pick(e||{},a.default.filter(a.default.keys(e),function(t){return!!e[t]})),t&&t.abort(),o.paging?(e.page=C+1,m.addClass("loading-pagination")):(e.page=C=1,m.addClass("loading")),clearTimeout(n),n=setTimeout(function(){t=r.default.ajax({url:"/discover/advanced?google_chrome_workaround",data:e,dataType:"json",success:function(t){O(t,{append_results:o.paging}),t.has_more||(T=!1,y.hide()),History.replaceState({},document.title,"/discover/advanced?"+r.default.param(e)),C=e.page},complete:function(e){0!==e.status&&m.removeClass("loading loading-pagination"),t=!1,k=!1}})},E)}function D(){var e=(0,i.default)().query(!0);m.addClass("no_results"),(e.social||e.backed||e.starred)&&a.default.isUndefined(o.default)?(m.find(".requires_login_empty_state").show(),m.find(".general_empty_state").hide()):(m.find(".requires_login_empty_state").hide(),m.find(".general_empty_state").show())}function N(){var e=s;s=p.scrollTop()||(0,r.default)(window).scrollTop(),!k&&T&&s>e&&p.height()-s<2e3&&j(void 0,{paging:!0})}y.on("click",function(e){e.preventDefault(),s=p.scrollTop(),(0,r.default)(document).on("scroll",N),j(void 0,{paging:!0}),_.children().children().show()}),e.find(".login, .signup").on("click",function(e){window.location=(0,r.default)(this).data("url")+"?then="+encodeURIComponent(window.location.href),e.preventDefault()}),e.find("li.sample_search a").on("click",function(e){var t=(0,r.default)(this).closest("li").data("sample")||{};t.category_id=(t.category||{}).id,t.location_id=(t.location||{}).id,t.tag_id=(t.tag||{}).id,(0,r.default)(document).trigger("discovery:sentence:load_sample",t),(0,r.default)(document).trigger("discovery:categories:load_sample",t),(0,r.default)(document).trigger("discovery:locations:load_sample",t),(0,r.default)(document).trigger("discovery:sorts:load_sample",t),(0,r.default)(document).trigger("discovery:filters:load_sample",t),(0,r.default)(document).trigger("discovery:sentence:show_sentence",t),g.hide(),b.hide(),w.hide(),(0,u.track)("Discovery Sample Sentence Click",{discover_sample_sentence_ref:t.mp_ref}),e.preventDefault()}),e.on("click",".project-card-wrap .project-meta li a",function(e){var t=(0,r.default)(this).data("location");(0,r.default)(document).trigger("discovery:locations:load_sample",{location:t}),(0,u.track)("Discover Baseball Card Location Clicked"),e.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(e,t){1===parseInt(t.social,10)?_.addClass("social"):_.removeClass("social"),0===t.category_id?(g.hide(),b.hide()):v.is(":visible")&&(g.remove(),b.remove()),j(t)}),(0,r.default)(document).on("discovery:sentence:term_changed",function(e,t){j(t)}),(0,r.default)(document).on("discovery:hero:select_subcategory",function(){g.hide(),b.hide()}),(0,r.default)(document).on("discovery:hero:unselect_subcategory",function(){g.show(),b.show()});var L=A().length;L||D(),L<6&&y.hide()})},"+btr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n("GiK3")),i=n("NTrA"),a=c(n("L3hI")),o=c(n("2TQX")),s=n("MnH5"),l=n("Z5jf"),u=n("ci1u");function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.location,n=e.variant,i=e.horizontal,a=e.refTag;return"with_location"===n&&r.default.createElement("div",{className:(0,s.computedAtoms)("type-12","mb2","mt3","ml4","medium","inline-block",i&&"hide")},r.default.createElement(u.Icon,{name:"map-pin",size:"12",atoms:["mr1_2","mb1_6","fill-dark-grey-500"]}),r.default.createElement("a",{className:"dark-grey-500 hover-soft-black text-underline",href:(0,o.default)(t.urls.web.discover,{ref:a},null,{noBaseEncode:!0})},t.short_name))},f=function(e){var t=e.horizontal,n=e.catUrl,i=e.category;return r.default.createElement("div",{className:(0,s.computedAtoms)("type-12","mb2","mt3","medium","inline-block",t&&"hide")},r.default.createElement("a",{className:"dark-grey-500 hover-soft-black text-underline",href:n},i.name))},h=function(e){var t=e.backers,n=e.variant,i=t.totalCount;return"with_no_of_backers"===n&&r.default.createElement("div",{className:"type-13 mr2 dark-grey-500 medium"},r.default.createElement("span",null,(0,l.boundT)("project_card.backers",{count:i,formatted_count:i})))},p=function(e){var t=e.formattedPercentRaised;return"no_percentage"!==e.variant&&r.default.createElement("div",{className:"type-13 mr2 dark-grey-500 medium"},r.default.createElement("span",null,t),r.default.createElement("span",{className:"ml1 normal"},(0,l.boundT)("project_card.funded")))},m=function(e){var t=e.jsEndDate,n=(0,i.projectRemainingTime)(t),a=n.remainingNumber,o=n.remainingString;return r.default.createElement("div",{className:"type-13 ksr_page_timer mr2 dark-grey-500 medium","data-end_time":t},r.default.createElement("span",{className:"js-num"},a),r.default.createElement("span",{className:"js-text ml1"},o))},g=function(e){var t=e.pledged,n=e.currency,i=e.variant,o=e.goal;return r.default.createElement("div",{className:"type-13 mr2"},r.default.createElement("span",null,a.default.money(t.amount,{precision:0,currency:n})),r.default.createElement("span",{className:"ml1 normal"},function(e){return"with_pledge_goal"===e?(0,l.boundT)("project_card.pledged_out_of",{goalAmount:a.default.money(o.amount,{precision:0,currency:n})}):(0,l.boundT)("project_card.pledged")}(i)))},v=function(e){var t=e.progressBarStyle;return"no_pledge_bar"!==e.variant&&r.default.createElement("div",{"data-test":"pledge-bar",className:"bg-grey-400 mb3 w100p"},r.default.createElement("div",{className:"bg-ksr-green-700 h1_2",style:t}))};t.default=function(e){var t=e.refTag,n=e.category,i=e.horizontal,u=e.jsEndDate,c=e.percentFunded,_=e.pledged,y=e.variant,b=e.location,w=e.goal,E=e.backers,k=a.default.percent(c,{precision:0,delimiter:(0,l.boundT)("number.currency.format.delimiter")}),S={width:Math.min(100,c)+"%"},C=_.currency,T=t&&n?(0,o.default)(n.url,{ref:t},null,{noBaseEncode:!0}):n.url;return r.default.createElement("div",{className:(0,s.computedAtoms)("pb3","pt3","px3-sm",!i&&"px4")},r.default.createElement("div",{className:"h20-sm pt1_6"},r.default.createElement(v,{variant:y,progressBarStyle:S}),r.default.createElement("div",{className:"ksr-green-700 medium"},r.default.createElement(g,{pledged:_,currency:C,variant:y,goal:w}),r.default.createElement(p,{formattedPercentRaised:k,variant:y}),r.default.createElement(m,{jsEndDate:u}),r.default.createElement(h,{backers:E,variant:y}),r.default.createElement(f,{horizontal:i,catUrl:T,category:n}),r.default.createElement(d,{location:b,variant:y,horizontal:i,refTag:t}))))}},"+cTw":function(e,t,n){(function(t){var n=1/0,r=9007199254740991,i="[object Arguments]",a="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")();function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var f=Object.prototype,h=f.hasOwnProperty,p=f.toString,m=c.Symbol,g=f.propertyIsEnumerable,v=m?m.isConcatSpreadable:void 0,_=Math.max;function y(e){return w(e)||function(e){return function(e){return E(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==a||t==o}(e)}(e)}(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||p.call(e)==i)}(e)||!!(v&&e&&e[v])}function b(e){if("string"==typeof e||function(e){return"symbol"==typeof e||E(e)&&p.call(e)==s}(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}var w=Array.isArray;function E(e){return!!e&&"object"==typeof e}var k,S,C=(k=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=e[o];n(s,o)&&(a[o]=s)}return a}(e=Object(e),t,function(t,n){return n in e})}(e,function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(function e(t,n,r,i,a){var o=-1,s=t.length;for(r||(r=y),a||(a=[]);++o<s;){var l=t[o];n>0&&r(l)?n>1?e(l,n-1,r,i,a):d(a,l):i||(a[a.length]=l)}return a}(t,1),b))},S=_(void 0===S?k.length-1:S,0),function(){for(var e=arguments,t=-1,n=_(e.length-S,0),r=Array(n);++t<n;)r[t]=e[S+t];t=-1;for(var i=Array(S+1);++t<S;)i[t]=e[t];return i[S]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(k,this,i)});e.exports=C}).call(t,n("DuR2"))},"+fgJ":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){"use strict";e(n("l/Rs"))}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var r,i,a,o=n.initialIframeSrc||"javascript:false;";return{send:function(s,l){(r=e('<form style="display:none;"></form>')).attr("accept-charset",n.formAcceptCharset),a=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+a+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+a+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+a+"_method=PATCH",n.type="POST"),i=e('<iframe src="'+o+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,a=e.isArray(n.paramName)?n.paramName:[n.paramName];i.unbind("load").bind("load",function(){var t;try{if(!(t=i.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+o+'"></iframe>').appendTo(r),window.setTimeout(function(){r.remove()},0)}),r.prop("target",i.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(r)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",a[t]||n.paramName)}),r.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),r.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")).attr("form",i.attr("form")),i.replaceWith(r)})}),r.append(i).appendTo(document.body)},abort:function(){i&&i.unbind("load").prop("src",o),r&&r.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})},"/RUt":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_spotlight_projects__carousel",function(e){var t=e.find(".featured-projects-list"),n=e.find(".next"),i=e.find(".previous"),o=640;function s(){(0,r.default)(window).width()<o?t.cycle("destroy"):t.cycle({autoHeight:0,timeout:0,slides:".project-group",speed:600,fx:"scrollHorz",pager:".dots",next:".next",prev:".previous",log:!1})}t.on("cycle-after cycle-before",function(e,t){1===t.slideNum?(n.addClass("visible"),i.removeClass("visible")):t.slideNum===t.slideCount?(i.addClass("visible"),n.removeClass("visible")):(i.addClass("visible"),n.addClass("visible")),"cycle-after"===e.type&&(0,a.track)("Watch Cycle Featured Projects")}),(0,r.default)(document).resize(function(){s()}),s()})},"/V0p":function(e,t,n){(function(r){var i;!function(){var a;function o(e){var t,n,r,i="",a=-1;if(e&&e.length)for(r=e.length;(a+=1)<r;)t=e.charCodeAt(a),n=a+1<r?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a+=1),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}function u(e,t){for(var n,r=t?"0123456789ABCDEF":"0123456789abcdef",i="",a=0,o=e.length;a<o;a+=1)n=e.charCodeAt(a),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i}function c(e){var t,n=32*e.length,r="";for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return r}function d(e){var t,n=32*e.length,r="";for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function f(e){var t,n=8*e.length,r=Array(e.length>>2),i=r.length;for(t=0;t<i;t+=1)r[t]=0;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function h(e){var t,n=8*e.length,r=Array(e.length>>2),i=r.length;for(t=0;t<i;t+=1)r[t]=0;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return r}function p(e,t){var n,r,i,a,o,s,l,u,c=t.length,d=Array();for(a=(s=Array(Math.ceil(e.length/2))).length,n=0;n<a;n+=1)s[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;s.length>0;){for(o=Array(),i=0,n=0;n<s.length;n+=1)i=(i<<16)+s[n],i-=(r=Math.floor(i/c))*c,(o.length>0||r>0)&&(o[o.length]=r);d[d.length]=i,s=o}for(l="",n=d.length-1;n>=0;n--)l+=t.charAt(d[n]);for(u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=l.length;n<u;n+=1)l=t[0]+l;return l}function m(e,t){var n,r,i,a="",o=e.length;for(t=t||"=",n=0;n<o;n+=3)for(i=e.charCodeAt(n)<<16|(n+1<o?e.charCodeAt(n+1)<<8:0)|(n+2<o?e.charCodeAt(n+2):0),r=0;r<4;r+=1)8*n+6*r>8*e.length?a+=t:a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63);return a}a={VERSION:"1.0.6",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",n=!0;this.encode=function(r){var i,a,s,l="",u=r.length;for(t=t||"=",r=n?o(r):r,i=0;i<u;i+=3)for(s=r.charCodeAt(i)<<16|(i+1<u?r.charCodeAt(i+1)<<8:0)|(i+2<u?r.charCodeAt(i+2):0),a=0;a<4;a+=1)l+=8*i+6*a>8*u?t:e.charAt(s>>>6*(3-a)&63);return l},this.decode=function(r){var i,a,o,s,l,u,c,d,f="",h=[];if(!r)return r;i=d=0,r=r.replace(new RegExp("\\"+t,"gi"),"");do{a=(c=e.indexOf(r.charAt(i+=1))<<18|e.indexOf(r.charAt(i+=1))<<12|(l=e.indexOf(r.charAt(i+=1)))<<6|(u=e.indexOf(r.charAt(i+=1))))>>16&255,o=c>>8&255,s=255&c,h[d+=1]=64===l?String.fromCharCode(a):64===u?String.fromCharCode(a,o):String.fromCharCode(a,o,s)}while(i<r.length);return f=h.join(""),f=n?function(e){var t,n,r,i,a,o,s=[];if(t=n=r=i=a=0,e&&e.length)for(o=e.length,e+="";t<o;)n+=1,(r=e.charCodeAt(t))<128?(s[n]=String.fromCharCode(r),t+=1):r>191&&r<224?(i=e.charCodeAt(t+1),s[n]=String.fromCharCode((31&r)<<6|63&i),t+=2):(i=e.charCodeAt(t+1),a=e.charCodeAt(t+2),s[n]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a),t+=3);return s.join("")}(f):f},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},CRC32:function(e){var t,n,r,i=0,a=0;for(e=o(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),i^=-1,n=0,r=e.length;n<r;n+=1)a=255&(i^e.charCodeAt(n)),i=i>>>8^"0x"+t.substr(9*a,8);return(-1^i)>>>0},MD5:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,n=e&&"string"==typeof e.pad?e.pad:"=",r=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return d(c(f(e=r?o(e):e),8*e.length))}function a(e,t){var n,i,a,s,l;for(e=r?o(e):e,t=r?o(t):t,(n=f(e)).length>16&&(n=c(n,8*e.length)),i=Array(16),a=Array(16),l=0;l<16;l+=1)i[l]=909522486^n[l],a[l]=1549556828^n[l];return s=c(i.concat(f(t)),512+8*t.length),d(c(a.concat(s),640))}function c(e,t){var n,r,i,a,o,l=1732584193,u=-271733879,c=-1732584194,d=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,n=0;n<e.length;n+=16)r=l,i=u,a=c,o=d,u=y(u=y(u=y(u=y(u=_(u=_(u=_(u=_(u=v(u=v(u=v(u=v(u=g(u=g(u=g(u=g(u,c=g(c,d=g(d,l=g(l,u,c,d,e[n+0],7,-680876936),u,c,e[n+1],12,-389564586),l,u,e[n+2],17,606105819),d,l,e[n+3],22,-1044525330),c=g(c,d=g(d,l=g(l,u,c,d,e[n+4],7,-176418897),u,c,e[n+5],12,1200080426),l,u,e[n+6],17,-1473231341),d,l,e[n+7],22,-45705983),c=g(c,d=g(d,l=g(l,u,c,d,e[n+8],7,1770035416),u,c,e[n+9],12,-1958414417),l,u,e[n+10],17,-42063),d,l,e[n+11],22,-1990404162),c=g(c,d=g(d,l=g(l,u,c,d,e[n+12],7,1804603682),u,c,e[n+13],12,-40341101),l,u,e[n+14],17,-1502002290),d,l,e[n+15],22,1236535329),c=v(c,d=v(d,l=v(l,u,c,d,e[n+1],5,-165796510),u,c,e[n+6],9,-1069501632),l,u,e[n+11],14,643717713),d,l,e[n+0],20,-373897302),c=v(c,d=v(d,l=v(l,u,c,d,e[n+5],5,-701558691),u,c,e[n+10],9,38016083),l,u,e[n+15],14,-660478335),d,l,e[n+4],20,-405537848),c=v(c,d=v(d,l=v(l,u,c,d,e[n+9],5,568446438),u,c,e[n+14],9,-1019803690),l,u,e[n+3],14,-187363961),d,l,e[n+8],20,1163531501),c=v(c,d=v(d,l=v(l,u,c,d,e[n+13],5,-1444681467),u,c,e[n+2],9,-51403784),l,u,e[n+7],14,1735328473),d,l,e[n+12],20,-1926607734),c=_(c,d=_(d,l=_(l,u,c,d,e[n+5],4,-378558),u,c,e[n+8],11,-2022574463),l,u,e[n+11],16,1839030562),d,l,e[n+14],23,-35309556),c=_(c,d=_(d,l=_(l,u,c,d,e[n+1],4,-1530992060),u,c,e[n+4],11,1272893353),l,u,e[n+7],16,-155497632),d,l,e[n+10],23,-1094730640),c=_(c,d=_(d,l=_(l,u,c,d,e[n+13],4,681279174),u,c,e[n+0],11,-358537222),l,u,e[n+3],16,-722521979),d,l,e[n+6],23,76029189),c=_(c,d=_(d,l=_(l,u,c,d,e[n+9],4,-640364487),u,c,e[n+12],11,-421815835),l,u,e[n+15],16,530742520),d,l,e[n+2],23,-995338651),c=y(c,d=y(d,l=y(l,u,c,d,e[n+0],6,-198630844),u,c,e[n+7],10,1126891415),l,u,e[n+14],15,-1416354905),d,l,e[n+5],21,-57434055),c=y(c,d=y(d,l=y(l,u,c,d,e[n+12],6,1700485571),u,c,e[n+3],10,-1894986606),l,u,e[n+10],15,-1051523),d,l,e[n+1],21,-2054922799),c=y(c,d=y(d,l=y(l,u,c,d,e[n+8],6,1873313359),u,c,e[n+15],10,-30611744),l,u,e[n+6],15,-1560198380),d,l,e[n+13],21,1309151649),c=y(c,d=y(d,l=y(l,u,c,d,e[n+4],6,-145523070),u,c,e[n+11],10,-1120210379),l,u,e[n+2],15,718787259),d,l,e[n+9],21,-343485551),l=s(l,r),u=s(u,i),c=s(c,a),d=s(d,o);return Array(l,u,c,d)}function h(e,t,n,r,i,a){return s(l(s(s(t,e),s(r,a)),i),n)}function g(e,t,n,r,i,a,o){return h(t&n|~t&r,e,t,i,a,o)}function v(e,t,n,r,i,a,o){return h(t&r|n&~r,e,t,i,a,o)}function _(e,t,n,r,i,a,o){return h(t^n^r,e,t,i,a,o)}function y(e,t,n,r,i,a,o){return h(n^(t|~r),e,t,i,a,o)}this.hex=function(e){return u(i(e),t)},this.b64=function(e){return m(i(e),n)},this.any=function(e,t){return p(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,n){return u(a(e,n),t)},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},SHA1:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,n=e&&"string"==typeof e.pad?e.pad:"=",r=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return c(d(h(e=r?o(e):e),8*e.length))}function a(e,t){var n,i,a,s,l;for(e=r?o(e):e,t=r?o(t):t,(n=h(e)).length>16&&(n=d(n,8*e.length)),i=Array(16),a=Array(16),s=0;s<16;s+=1)i[s]=909522486^n[s],a[s]=1549556828^n[s];return l=d(i.concat(h(t)),512+8*t.length),c(d(a.concat(l),672))}function d(e,t){var n,r,i,a,o,u,c,d,h=Array(80),p=1732584193,m=-271733879,v=-1732584194,_=271733878,y=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,n=0;n<e.length;n+=16){for(a=p,o=m,u=v,c=_,d=y,r=0;r<80;r+=1)h[r]=r<16?e[n+r]:l(h[r-3]^h[r-8]^h[r-14]^h[r-16],1),i=s(s(l(p,5),f(r,m,v,_)),s(s(y,h[r]),g(r))),y=_,_=v,v=l(m,30),m=p,p=i;p=s(p,a),m=s(m,o),v=s(v,u),_=s(_,c),y=s(y,d)}return Array(p,m,v,_,y)}function f(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function g(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}this.hex=function(e){return u(i(e),t)},this.b64=function(e){return m(i(e),n)},this.any=function(e,t){return p(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},SHA256:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,n=e&&"string"==typeof e.pad?e.pad:"=",r=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e,t){return c(b(h(e=t?o(e):e),8*e.length))}function a(e,t){e=r?o(e):e,t=r?o(t):t;var n,i=0,a=h(e),s=Array(16),l=Array(16);for(a.length>16&&(a=b(a,8*e.length));i<16;i+=1)s[i]=909522486^a[i],l[i]=1549556828^a[i];return n=b(s.concat(h(t)),512+8*t.length),c(b(l.concat(n),768))}function l(e,t){return e>>>t|e<<32-t}function d(e,t){return e>>>t}function f(e,t,n){return e&t^~e&n}function g(e,t,n){return e&t^e&n^t&n}function v(e){return l(e,2)^l(e,13)^l(e,22)}function _(e){return l(e,6)^l(e,11)^l(e,25)}function y(e){return l(e,7)^l(e,18)^d(e,3)}function b(e,n){var r,i,a,o,u,c,h,p,m,b,w,E,k,S=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],C=new Array(64);for(e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n,m=0;m<e.length;m+=16){for(r=S[0],i=S[1],a=S[2],o=S[3],u=S[4],c=S[5],h=S[6],p=S[7],b=0;b<64;b+=1)C[b]=b<16?e[b+m]:s(s(s(l(k=C[b-2],17)^l(k,19)^d(k,10),C[b-7]),y(C[b-15])),C[b-16]),w=s(s(s(s(p,_(u)),f(u,c,h)),t[b]),C[b]),E=s(v(r),g(r,i,a)),p=h,h=c,c=u,u=s(o,w),o=a,a=i,i=r,r=s(w,E);S[0]=s(r,S[0]),S[1]=s(i,S[1]),S[2]=s(a,S[2]),S[3]=s(o,S[3]),S[4]=s(u,S[4]),S[5]=s(c,S[5]),S[6]=s(h,S[6]),S[7]=s(p,S[7])}return S}this.hex=function(e){return u(i(e,r))},this.b64=function(e){return m(i(e,r),n)},this.any=function(e,t){return p(i(e,r),t)},this.raw=function(e){return i(e,r)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this},t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,n=e&&"string"==typeof e.pad?e.pad:"=",r=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return c(s(h(e=r?o(e):e),8*e.length))}function a(e,t){e=r?o(e):e,t=r?o(t):t;var n,i=0,a=h(e),l=Array(32),u=Array(32);for(a.length>32&&(a=s(a,8*e.length));i<32;i+=1)l[i]=909522486^a[i],u[i]=1549556828^a[i];return n=s(l.concat(h(t)),1024+8*t.length),c(s(u.concat(n),1536))}function s(e,n){var r,i,a,o=new Array(80),s=new Array(16),u=[new l(1779033703,-205731576),new l(-1150833019,-2067093701),new l(1013904242,-23791573),new l(-1521486534,1595750129),new l(1359893119,-1377402159),new l(-1694144372,725511199),new l(528734635,-79577749),new l(1541459225,327033209)],c=new l(0,0),h=new l(0,0),p=new l(0,0),m=new l(0,0),w=new l(0,0),E=new l(0,0),k=new l(0,0),S=new l(0,0),C=new l(0,0),T=new l(0,0),A=new l(0,0),R=new l(0,0),x=new l(0,0),P=new l(0,0),I=new l(0,0),O=new l(0,0),j=new l(0,0);for(void 0===t&&(t=[new l(1116352408,-685199838),new l(1899447441,602891725),new l(-1245643825,-330482897),new l(-373957723,-2121671748),new l(961987163,-213338824),new l(1508970993,-1241133031),new l(-1841331548,-1357295717),new l(-1424204075,-630357736),new l(-670586216,-1560083902),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,-704662302),new l(1925078388,-226784913),new l(-2132889090,991336113),new l(-1680079193,633803317),new l(-1046744716,-815192428),new l(-459576895,-1628353838),new l(-272742522,944711139),new l(264347078,-1953704523),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,-1119749164),new l(1996064986,-2096016459),new l(-1740746414,-295247957),new l(-1473132947,766784016),new l(-1341970488,-1728372417),new l(-1084653625,-1091629340),new l(-958395405,1034457026),new l(-710438585,-1828018395),new l(113926993,-536640913),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,-1651133473),new l(1695183700,-1951439906),new l(1986661051,1014477480),new l(-2117940946,1206759142),new l(-1838011259,344077627),new l(-1564481375,1290863460),new l(-1474664885,-1136513023),new l(-1035236496,-789014639),new l(-949202525,106217008),new l(-778901479,-688958952),new l(-694614492,1432725776),new l(-200395387,1467031594),new l(275423344,851169720),new l(430227734,-1194143544),new l(506948616,1363258195),new l(659060556,-544281703),new l(883997877,-509917016),new l(958139571,-976659869),new l(1322822218,-482243893),new l(1537002063,2003034995),new l(1747873779,-692930397),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(-2067236844,-1578062990),new l(-1933114872,442776044),new l(-1866530822,593698344),new l(-1538233109,-561857047),new l(-1090935817,-1295615723),new l(-965641998,-479046869),new l(-903397682,-366583396),new l(-779700025,566280711),new l(-354779690,-840897762),new l(-176337025,-294727304),new l(116418474,1914138554),new l(174292421,-1563912026),new l(289380356,-1090974290),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,-1676669620),new l(1288033470,-885112138),new l(1501505948,-60457430),new l(1607167915,987167468),new l(1816402316,1246189591)]),i=0;i<80;i+=1)o[i]=new l(0,0);for(e[n>>5]|=128<<24-(31&n),e[31+(n+128>>10<<5)]=n,a=e.length,i=0;i<a;i+=32){for(d(p,u[0]),d(m,u[1]),d(w,u[2]),d(E,u[3]),d(k,u[4]),d(S,u[5]),d(C,u[6]),d(T,u[7]),r=0;r<16;r+=1)o[r].h=e[i+2*r],o[r].l=e[i+2*r+1];for(r=16;r<80;r+=1)f(I,o[r-2],19),g(O,o[r-2],29),v(j,o[r-2],6),R.l=I.l^O.l^j.l,R.h=I.h^O.h^j.h,f(I,o[r-15],1),f(O,o[r-15],8),v(j,o[r-15],7),A.l=I.l^O.l^j.l,A.h=I.h^O.h^j.h,y(o[r],R,o[r-7],A,o[r-16]);for(r=0;r<80;r+=1)x.l=k.l&S.l^~k.l&C.l,x.h=k.h&S.h^~k.h&C.h,f(I,k,14),f(O,k,18),g(j,k,9),R.l=I.l^O.l^j.l,R.h=I.h^O.h^j.h,f(I,p,28),g(O,p,2),g(j,p,7),A.l=I.l^O.l^j.l,A.h=I.h^O.h^j.h,P.l=p.l&m.l^p.l&w.l^m.l&w.l,P.h=p.h&m.h^p.h&w.h^m.h&w.h,b(c,T,R,x,t[r],o[r]),_(h,A,P),d(T,C),d(C,S),d(S,k),_(k,E,c),d(E,w),d(w,m),d(m,p),_(p,c,h);_(u[0],u[0],p),_(u[1],u[1],m),_(u[2],u[2],w),_(u[3],u[3],E),_(u[4],u[4],k),_(u[5],u[5],S),_(u[6],u[6],C),_(u[7],u[7],T)}for(i=0;i<8;i+=1)s[2*i]=u[i].h,s[2*i+1]=u[i].l;return s}function l(e,t){this.h=e,this.l=t}function d(e,t){e.h=t.h,e.l=t.l}function f(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function g(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function v(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function _(e,t,n){var r=(65535&t.l)+(65535&n.l),i=(t.l>>>16)+(n.l>>>16)+(r>>>16),a=(65535&t.h)+(65535&n.h)+(i>>>16),o=(t.h>>>16)+(n.h>>>16)+(a>>>16);e.l=65535&r|i<<16,e.h=65535&a|o<<16}function y(e,t,n,r,i){var a=(65535&t.l)+(65535&n.l)+(65535&r.l)+(65535&i.l),o=(t.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(a>>>16),s=(65535&t.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(o>>>16),l=(t.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(s>>>16);e.l=65535&a|o<<16,e.h=65535&s|l<<16}function b(e,t,n,r,i,a){var o=(65535&t.l)+(65535&n.l)+(65535&r.l)+(65535&i.l)+(65535&a.l),s=(t.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(a.l>>>16)+(o>>>16),l=(65535&t.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(65535&a.h)+(s>>>16),u=(t.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(a.h>>>16)+(l>>>16);e.l=65535&o|s<<16,e.h=65535&l|u<<16}this.hex=function(e){return u(i(e))},this.b64=function(e){return m(i(e),n)},this.any=function(e,t){return p(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return m(a(e,t),n)},this.any_hmac=function(e,t,n){return p(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},RMD160:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t=e&&"string"==typeof e.pad?e.pa:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8,r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],i=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function d(e){return g(v(f(e=n?o(e):e),8*e.length))}function h(e,t){e=n?o(e):e,t=n?o(t):t;var r,i,a=f(e),s=Array(16),l=Array(16);for(a.length>16&&(a=v(a,8*e.length)),r=0;r<16;r+=1)s[r]=909522486^a[r],l[r]=1549556828^a[r];return i=v(s.concat(f(t)),512+8*t.length),g(v(l.concat(i),672))}function g(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function v(e,t){var n,o,u,d,f,h,p,m,g,v,w,E,k,S,C=1732584193,T=4023233417,A=2562383102,R=271733878,x=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,d=e.length,u=0;u<d;u+=16){for(f=v=C,h=w=T,p=E=A,m=k=R,g=S=x,o=0;o<=79;o+=1)n=s(l(n=s(n=s(n=s(f,_(o,h,p,m)),e[u+r[o]]),y(o)),a[o]),g),f=g,g=m,m=l(p,10),p=h,h=n,n=s(l(n=s(n=s(n=s(v,_(79-o,w,E,k)),e[u+i[o]]),b(o)),c[o]),S),v=S,S=k,k=l(E,10),E=w,w=n;n=s(T,s(p,k)),T=s(A,s(m,S)),A=s(R,s(g,v)),R=s(x,s(f,w)),x=s(C,s(h,E)),C=n}return[C,T,A,R,x]}function _(e,t,n,r){return 0<=e&&e<=15?t^n^r:16<=e&&e<=31?t&n|~t&r:32<=e&&e<=47?(t|~n)^r:48<=e&&e<=63?t&r|n&~r:64<=e&&e<=79?t^(n|~r):"rmd160_f: j out of range"}function y(e){return 0<=e&&e<=15?0:16<=e&&e<=31?1518500249:32<=e&&e<=47?1859775393:48<=e&&e<=63?2400959708:64<=e&&e<=79?2840853838:"rmd160_K1: j out of range"}function b(e){return 0<=e&&e<=15?1352829926:16<=e&&e<=31?1548603684:32<=e&&e<=47?1836072691:48<=e&&e<=63?2053994217:64<=e&&e<=79?0:"rmd160_K2: j out of range"}this.hex=function(e){return u(d(e))},this.b64=function(e){return m(d(e),t)},this.any=function(e,t){return p(d(e),t)},this.raw=function(e){return d(e)},this.hex_hmac=function(e,t){return u(h(e,t))},this.b64_hmac=function(e,n){return m(h(e,n),t)},this.any_hmac=function(e,t,n){return p(h(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return void 0!==e&&(t=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}}},t&&"object"==typeof r&&r&&r.global,void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(t,n("DuR2"))},"/Vlt":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSelects=t.createShippingSelects=t.TotalCostInput=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("Z5jf"),l=n("oLWu"),u=n("Z6GA"),c=n("9vef"),d=n("h+ZX"),f=n("J1uj"),h=n("YzsH"),p=n("B7AS"),m=n("8UPI");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,f.addSibling)(function(e){var t,n,r,i=e.pledgeData,a=e.idForKey;return o.default.createElement("div",{key:a,className:"new-form__currency-box"},o.default.createElement("span",{className:"new-form__currency-box__text"},(n=(t=i).currencySymbol,r=t.usdSymbol,"$"===n&&"international"===r?"US$":n)))}),_=(0,f.addFooter)(function(e){var t=e.convert,n=e.conversionAtoms,r=e.idForKey,i=e.pledgeData,a=e.value,s=Math.floor(+a*i.currentFxRate),l=""+i.currentCurrencySymbol+s;return!!t&&o.default.createElement(m.ConversionEstimate,{key:"currency-"+r,amount:l,atoms:n})}),y=(0,u.compose)(f.addHeaderLabel,v,_,f.addErrors)(f.NumberInputField),b=(t.TotalCostInput=function(e){var t=e.convert,n=e.errors,r=e.idForField,i=e.idForKey,a=e.label,c=e.minPledge,d=e.onBlurField,f=e.onChange,h=e.onClick,p=e.onSelect,m=e.pledgeData,g=e.value,v=void 0===g?c.amount:g,_=(0,u.computedAtoms)("new-form__amount",m.isRight&&"new-form__amount--right",m.isSymbolic&&"new-form__amount--symbol"),b=a?(0,s.boundT)("project_page.reward_form.Pledge_amount"):null;return o.default.createElement(y,{"aria-invalid":!!n,"aria-required":"true",convert:t,conversionAtoms:["block text-uppercase type-10 track-loose pt2"],errors:n,headerLabel:b,id:r,idForKey:i,inputAtoms:["new-form__input--numbers"],name:"name",onBlur:d,onChange:f,onClick:h,onSelect:p,pledgeData:m,value:(0,l.floatsOnly)(v),wrapperAtoms:_})},t.createShippingSelects=function(e){return(0,c.createAsyncDropdown)(d.getShippingRules)(e)});t.generateSelects=function(e){if(!Array.isArray(e))return{shippingDropdowns:{},shippingReducers:{},shippingStates:{}};return e.reduce(function(e,t){var n,r=t.id,a=b(r),o=a.reducers,s=a.Component;return e.shippingDropdowns[r]=s,e.shippingReducers=i({},e.shippingReducers,i({},o)),e.shippingStates=i({},e.shippingStates,(g(n={},r+"-async",p.initialState),g(n,r+"-select",h.baseSelectState),n)),e},{shippingDropdowns:{},shippingReducers:{},shippingStates:{}})}},"/b7f":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("wmCY")),a=o(n("TGXB"));function o(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,r.default)(function(){var e=".NS_comments__comment";(0,r.default)(".js-could-have-comments").length&&((0,r.default)(document).on("click",e+" a.report_spam",function(e){e.preventDefault();var t=(0,r.default)(this),n=this,o=t.closest(".comment");r.default.modal_confirm(function(){return a.default.get(t.data("url"),"post",o.find(".ajax-container"),n)},{message:i.default.t("onloads.views.comments.comment.We_review_all_reports_with_care_but_please_keep_in_mind"),title:i.default.t("onloads.views.comments.comment.Report_this_comment_to_Kickstarter"),confirm_text:i.default.t("onloads.views.comments.comment.Yes_report_as_spam")})}),(0,r.default)(document).on("ksr_json:complete",e+" .spam_reported",function(e,t){var n=(0,r.default)(this).closest(".comment"),i=n.find(".report_spam");i.hide(),200!==t.status||i.is(".admin")||n.find(".body").hide()}))})},"/fAy":function(e,t,n){"use strict";var r=o(n("8NzR")),i=o(n("+bVi")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,r.default)("#happening_layouts_show",function(e){var t=e.find(".js-load-more");t.loadMore(),t.on("mobius:loading_page",function(){(0,a.track)("Happening See More Click")}),i.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},"/qyH":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#site_press",function(){(0,r.default)(".js-stats-button").click(function(){(0,a.track)("About KSR Press Stats Button Click")}),(0,r.default)(".js-faq-list input").click(function(){(0,a.track)("About KSR Press FAQ Item Click")}),(0,r.default)(".js-toggle-founding-story").click(function(){(0,a.track)("About KSR Press Founding Story Toggle")})})},"01q7":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("MA+5"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS-assets__list",function(e){var t=new window.AssetsListController(e.data("assets"),e.data("assets_list_options"));e.on("assets_list:item_added",function(e,n){t.add_item(n)}),e.define_renderer(function(t){e.html(t.map(function(t,n){var i=t.get();i.item_index=n;var o=(0,a.default)(e.data("assets_list_options").item_template,i,["assets/_fields_template"]),s=(0,r.default)(o);return s.on("click",".js-asset-destroy",function(e){e.preventDefault(),t.set("_destroy",!0)}),s}))}),t.attach(e)})},"0GqO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectFlagging=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("xQXO"),l=n("Gks7"),u=n("3zBZ"),c=n("7e+d"),d=n("Z5jf"),f=n("wJt9"),h=n("b04z"),p=n("ci1u");t.ProjectFlagging=function(e){var t=e.state,n=e.dispatch,r=e.DropdownComponent,a=window.current_user?{onClick:function(){return n((0,s.initFlaggingAction)((0,l.currentProjectSlug)()))}}:{href:"/login?then="+(0,l.currentProjectEncodedPath)()};switch(t.container.flaggingStatus){case u.USER_HAS_FLAGGED_PROJECT:return o.default.createElement("p",null,o.default.createElement(d.BoundTranslate,{i18nKey:"project_page.flagging.Already_flagged",ourRulesLink:o.default.createElement("a",{target:"blank",href:"/rules"},(0,d.boundT)("project_page.flagging.Our_rules")),communityGuidelinesLink:c.communityGuidelinesLink}));case u.USER_HAS_NOT_FLAGGED_PROJECT:return o.default.createElement(f.FlaggingWorkflow,{state:t,dispatch:n,DropdownComponent:r});case u.FLAGGING_UNKNOWN:return o.default.createElement(h.Button,i({color:"white"},a),o.default.createElement(d.BoundTranslate,{i18nKey:"project_page.flagging.Report_project"}));case u.FETCHING_FLAGGING:return o.default.createElement("div",null,o.default.createElement(p.Icon,{size:"large",name:"icon--circle-loader"}));case u.FLAGGING_FETCH_FAILED:return o.default.createElement("div",{className:"red"},(0,d.boundT)("project_page.flagging.Fetch_flagging_failed_message"));default:return o.default.createElement("div",null,(0,d.boundT)("project_page.flagging.Unknown_error"))}}},"0JET":function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){e.fn.preload_background_image=function(){return this.each(function(){var t=function(e){var t=e.css("backgroundImage");try{return/[("]([^()"]+)[")]/.exec(t)[1]}catch(e){return!1}}(e(this));t&&((new Image).src=t)})}}(r)},"0SSf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_pledged_at=(0,i.format)("ll",1e3*e.pledged_at),e.formatted_survey_answered_at=(0,i.format)("ll",1e3*e.survey_answered_at),e.formatted_amount=r.default.money(e.amount,{precision:2,currency:a.default.get("currency")}),e.name=e.is_registered?e.is_deleted?s.default.t("backer_report.row.Deleted_backer_name"):e.name:s.default.t("backer_report.row.Guest",{backer_uid:e.backer_uid}),e.is_deleted&&(e.name_hover=s.default.t("backer_report.row.Deleted_backer_explanation")),e.isCreator=a.default.get("creator.id")===o.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var r=l(n("L3hI")),i=n("kVy0"),a=l(n("c5nH")),o=l(n("eF8u")),s=l(n("wmCY"));function l(e){return e&&e.__esModule?e:{default:e}}},"0n0W":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GET_COMMENTS_COUNT=t.GET_COMMENT_WITH_REPLIES=t.GET_COMMENTS=void 0;var r,i=f(["\n    fragment CommentInfo on ProjectComment {\n      id\n      body\n      createdAt\n      parentId\n      author {\n        id\n        imageUrl(width: 200)\n        name\n        isSuperBacker\n        isKsrAdmin\n      }\n      authorIsProjectCreator\n      authorIsProjectCollaborator\n      canReport\n      hasFlaggings\n    }\n  "],["\n    fragment CommentInfo on ProjectComment {\n      id\n      body\n      createdAt\n      parentId\n      author {\n        id\n        imageUrl(width: 200)\n        name\n        isSuperBacker\n        isKsrAdmin\n      }\n      authorIsProjectCreator\n      authorIsProjectCollaborator\n      canReport\n      hasFlaggings\n    }\n  "]),a=f(["\n    fragment CommentReplies on ProjectComment {\n      replies(last: ",", before: $replyCursor) {\n        totalCount\n        nodes {\n          ...CommentInfo\n        }\n        pageInfo {\n          startCursor\n          hasPreviousPage\n        }\n      }\n    }\n  "],["\n    fragment CommentReplies on ProjectComment {\n      replies(last: ",", before: $replyCursor) {\n        totalCount\n        nodes {\n          ...CommentInfo\n        }\n        pageInfo {\n          startCursor\n          hasPreviousPage\n        }\n      }\n    }\n  "]),o=f(["\n  query($pid: String!, $cursor: String, $replyCursor: String) {\n    project(slug: $pid) {\n      id\n      name\n      url\n      backing {\n        id\n      }\n      creator {\n        id\n      }\n      comments(last: ",", before: $cursor) {\n        totalCount\n        edges {\n          node {\n            ...CommentInfo\n            ...CommentReplies\n          }\n        }\n        pageInfo {\n          startCursor\n          hasPreviousPage\n          endCursor\n        }\n      }\n    }\n    me {\n      id\n      name\n      imageUrl(width:200)\n      isKsrAdmin\n      isSuperBacker\n    }\n  }\n  ","\n  ","\n"],["\n  query($pid: String!, $cursor: String, $replyCursor: String) {\n    project(slug: $pid) {\n      id\n      name\n      url\n      backing {\n        id\n      }\n      creator {\n        id\n      }\n      comments(last: ",", before: $cursor) {\n        totalCount\n        edges {\n          node {\n            ...CommentInfo\n            ...CommentReplies\n          }\n        }\n        pageInfo {\n          startCursor\n          hasPreviousPage\n          endCursor\n        }\n      }\n    }\n    me {\n      id\n      name\n      imageUrl(width:200)\n      isKsrAdmin\n      isSuperBacker\n    }\n  }\n  ","\n  ","\n"]),s=f(["\n  query($id: ID!, $replyCursor: String) {\n    node(id: $id) {\n      ...CommentInfo\n      ...CommentReplies\n    }\n  }\n  ","\n  ","\n"],["\n  query($id: ID!, $replyCursor: String) {\n    node(id: $id) {\n      ...CommentInfo\n      ...CommentReplies\n    }\n  }\n  ","\n  ","\n"]),l=f(["\n  query($pid: String!) {\n    project(slug: $pid) {\n      comments {\n        totalCount\n      }\n    }\n  }\n"],["\n  query($pid: String!) {\n    project(slug: $pid) {\n      comments {\n        totalCount\n      }\n    }\n  }\n"]),u=n("tlQw"),c=(r=u)&&r.__esModule?r:{default:r},d=n("P4S0");function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h={commentInfo:(0,c.default)(i),commentReplies:(0,c.default)(a,d.PAGE_SIZE.REPLIES)};t.GET_COMMENTS=(0,c.default)(o,d.PAGE_SIZE.COMMENTS,h.commentInfo,h.commentReplies),t.GET_COMMENT_WITH_REPLIES=(0,c.default)(s,h.commentInfo,h.commentReplies),t.GET_COMMENTS_COUNT=(0,c.default)(l)},"0qc1":function(e,t,n){var r,i,a,o,l,u;n("l/Rs"),n("l/Rs");"undefined"==typeof jwplayer&&(jwplayer=function(){if(jwplayer.api)return jwplayer.api.selectPlayer.apply(this,arguments)},jwplayer.version="6.12.4956",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var e={},t=Array.prototype,n=Object.prototype,r=t.slice,i=t.concat,a=n.toString,o=n.hasOwnProperty,s=t.map,l=t.forEach,u=t.filter,c=t.every,d=t.some,f=t.indexOf,h=(n=Array.isArray,Object.keys),p=function(e){return e instanceof p?e:this instanceof p?void 0:new p(e)},m=p.each=p.forEach=function(t,n,r){if(null==t)return t;if(l&&t.forEach===l)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++)if(n.call(r,t[i],i,t)===e)return}else{var o=p.keys(t);for(i=0,a=o.length;i<a;i++)if(n.call(r,t[o[i]],o[i],t)===e)return}return t};p.map=p.collect=function(e,t,n){var r=[];return null==e?r:s&&e.map===s?e.map(t,n):(m(e,function(e,i,a){r.push(t.call(n,e,i,a))}),r)},p.find=p.detect=function(e,t,n){var r;return g(e,function(e,i,a){if(t.call(n,e,i,a))return r=e,!0}),r},p.filter=p.select=function(e,t,n){var r=[];return null==e?r:u&&e.filter===u?e.filter(t,n):(m(e,function(e,i,a){t.call(n,e,i,a)&&r.push(e)}),r)},p.every=p.all=function(t,n,r){n||(n=p.identity);var i=!0;return null==t?i:c&&t.every===c?t.every(n,r):(m(t,function(t,a,o){if(!(i=i&&n.call(r,t,a,o)))return e}),!!i)};var g=p.some=p.any=function(t,n,r){n||(n=p.identity);var i=!1;return null==t?i:d&&t.some===d?t.some(n,r):(m(t,function(t,a,o){if(i||(i=n.call(r,t,a,o)))return e}),!!i)};p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.after=function(e,t){return function(){if(1>--e)return t.apply(this,arguments)}},p.sortedIndex=function(e,t,n,r){t=(n=null==n?p.identity:p.isFunction(n)?n:p.property(n)).call(r,t);for(var i=0,a=e.length;i<a;){var o=i+a>>>1;n.call(r,e[o])<t?i=o+1:a=o}return i},p.find=p.detect=function(e,t,n){var r;return g(e,function(e,i,a){if(t.call(n,e,i,a))return r=e,!0}),r},g=p.some=p.any=function(t,n,r){n||(n=p.identity);var i=!1;return null==t?i:d&&t.some===d?t.some(n,r):(m(t,function(t,a,o){if(i||(i=n.call(r,t,a,o)))return e}),!!i)},p.contains=p.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=p.values(e)),0<=p.indexOf(e,t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.difference=function(e){var n=i.apply(t,r.call(arguments,1));return p.filter(e,function(e){return!p.contains(n,e)})},p.without=function(e){return p.difference(e,r.call(arguments,1))},p.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=p.sortedIndex(e,t)]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(f&&e.indexOf===f)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},p.partial=function(e){var t=r.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,a=r.length;i<a;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},p.memoize=function(e,t){var n={};return t||(t=p.identity),function(){var r=t.apply(this,arguments);return p.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},p.delay=function(e,t){var n=r.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(r.call(arguments,1)))},p.keys=function(e){if(!p.isObject(e))return[];if(h)return h(e);var t,n=[];for(t in e)p.has(e,t)&&n.push(t);return n},p.pick=function(e){var n={},a=i.apply(t,r.call(arguments,1));return m(a,function(t){t in e&&(n[t]=e[t])}),n},p.isArray=n||function(e){return"[object Array]"==a.call(e)},p.isObject=function(e){return e===Object(e)},m("Arguments Function String Number Date RegExp".split(" "),function(e){p["is"+e]=function(t){return a.call(t)=="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return!(!e||!p.has(e,"callee"))}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!=+e},p.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==a.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return o.call(e,t)},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},p.result=function(e,t){if(null!=e){var n=e[t];return p.isFunction(n)?n.call(e):n}},this._=p}.call(jwplayer),function(e){function t(e){return function(){return o(e)}}function n(e,t,n,i,a){return function(){var o,s;if(a)n(e);else{try{if((o=e.responseXML)&&(s=o.firstChild,o.lastChild&&"parsererror"===o.lastChild.nodeName))return void(i&&i("Invalid XML",t,e))}catch(e){}if(o&&s)return n(e);(o=r.parseXML(e.responseText))&&o.firstChild?(e=r.extend({},e,{responseXML:o}),n(e)):i&&i(e.responseText?"Invalid XML":t,t,e)}}}var r=e.utils={},i=e._;r.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},r.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},r.getAbsolutePath=function(e,t){if(r.exists(t)||(t=document.location.href),r.exists(e)){var n;if(r.exists(e)){n=e.indexOf("://");var i=e.indexOf("?");n=0<n&&(0>i||i>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var a;i=t.substring(n.length,t.indexOf("/",n.length+1));0===e.indexOf("/")?a=e.split("/"):a=(a=(a=t.split("?")[0]).substring(n.length+i.length+1,a.lastIndexOf("/"))).split("/").concat(e.split("/"));for(var o=[],s=0;s<a.length;s++)a[s]&&r.exists(a[s])&&"."!==a[s]&&(".."===a[s]?o.pop():o.push(a[s]));return n+i+"/"+o.join("/")}},r.extend=function(){var e=Array.prototype.slice.call(arguments,0);if(1<e.length){for(var t=e[0],n=function(e,n){void 0!==n&&null!==n&&(t[e]=n)},i=1;i<e.length;i++)r.foreach(e[i],n);return t}return null};var a=window.console=window.console||{log:function(){}};r.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof a.log?a.log(e):a.log.apply(a,e)};var o=i.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});r.isFF=t(/firefox/i),r.isChrome=t(/chrome/i),r.isIPod=t(/iP(hone|od)/i),r.isIPad=t(/iPad/i),r.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),r.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("trident/.+rv:\\s*"+e,"i"))):o(/trident/i)},r.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("msie\\s*"+e,"i"))):o(/msie/i)},r.isIE=function(e){return e?11<=(e=parseFloat(e).toFixed(1))?r.isIETrident(e):r.isMSIE(e):r.isMSIE()||r.isIETrident()},r.isSafari=function(){return o(/safari/i)&&!o(/chrome/i)&&!o(/chromium/i)&&!o(/android/i)},r.isIOS=function(e){return o(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},r.isAndroidNative=function(e){return r.isAndroid(e,!0)},r.isAndroid=function(e,t){return!(t&&o(/chrome\/[123456789]/i)&&!o(/chrome\/18/))&&(e?(r.isInt(e)&&!/\./.test(e)&&(e+="."),o(RegExp("Android\\s*"+e,"i"))):o(/Android/i))},r.isMobile=function(){return r.isIOS()||r.isAndroid()},r.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},r.saveCookie=function(e,t){document.cookie="jwplayer."+e+"="+t+"; path=/"},r.getCookies=function(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var r=t[n].split("=");0===r[0].indexOf("jwplayer.")&&(e[r[0].substring(9,r[0].length)]=r[1])}return e},r.isInt=function(e){return 0==parseFloat(e)%1},r.typeOf=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&i.isArray(e)?"array":t},r.translateEventResponse=function(t,n){var i=r.extend({},n);if(t!==e.events.JWPLAYER_FULLSCREEN||i.fullscreen)if("object"==typeof i.data){var a=i.data;delete i.data,i=r.extend(i,a)}else"object"==typeof i.metadata&&r.deepReplaceKeyName(i.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else i.fullscreen="true"===i.message,delete i.message;return r.foreach(["position","duration","offset"],function(e,t){i[t]&&(i[t]=Math.round(1e3*i[t])/1e3)}),i},r.flashVersion=function(){if(r.isAndroid())return 0;var e,t=navigator.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(e){}if(void 0!==window.ActiveXObject)try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(e){}return 0},r.getScriptPath=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src;if(r&&0<=r.indexOf(e))return r.substr(0,r.indexOf(e))}return""},r.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var a=0;a<t.length;a++)t[a]=e.utils.deepReplaceKeyName(t[a],n,i);break;case"object":r.foreach(t,function(r,a){var o;if(n instanceof Array&&i instanceof Array){if(n.length!==i.length)return;o=n}else o=[n];for(var s=r,l=0;l<o.length;l++)s=s.replace(RegExp(n[l],"g"),i[l]);t[s]=e.utils.deepReplaceKeyName(a,n,i),r!==s&&delete t[r]})}return t};var s=r.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};r.getPluginPathType=function(e){if("string"==typeof e){var t=(e=e.split("?")[0]).indexOf("://");if(0<t)return s.ABSOLUTE;var n=e.indexOf("/");return e=r.extension(e),!(0>t&&0>n)||e&&isNaN(e)?s.RELATIVE:s.CDN}},r.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},r.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},r.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},r.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(e){return""}},r.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},r.foreach=function(e,t){var n;for(n in e)"function"===r.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&t(n,e[n]):t(n,e[n])},r.isHTTPS=function(){return 0===window.location.href.indexOf("https")},r.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{r.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(e){}return t},r.versionCheck=function(t){t=("0"+t).split(/\W/);var n=e.version.split(/\W/),r=parseFloat(t[0]),i=parseFloat(n[0]);return!(r>i||r===i&&parseFloat("0"+t[1])>parseFloat(n[1]))},r.ajax=function(e,t,i,a){var o,s=!1;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!==window.location.href.split("/")[2]&&r.exists(window.XDomainRequest))(o=new window.XDomainRequest).onload=n(o,e,t,i,a),o.ontimeout=o.onprogress=function(){},o.timeout=5e3;else{if(!r.exists(window.XMLHttpRequest))return i&&i("",e,o),o;var l=o=new window.XMLHttpRequest,u=e;o.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:n(l,u,t,i,a)();break;case 404:i("File not found",u,l)}}}o.overrideMimeType&&o.overrideMimeType("text/xml");var c=e,d=o;o.onerror=function(){i("Error loading file",c,d)};try{o.open("GET",e,!0)}catch(e){s=!0}return setTimeout(function(){if(s)i&&i(e,e,o);else try{o.send()}catch(t){i&&i(e,e,o)}},0),o},r.parseXML=function(e){var t;try{if(window.DOMParser){if((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes&&t.childNodes.length&&"parsererror"===t.childNodes[0].firstChild.nodeName)return}else(t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){return}return t},r.between=function(e,t,n){return Math.max(Math.min(e,n),t)},r.seconds=function(e){if(i.isNumber(e))return e;var t=(e=e.replace(",",".")).split(":"),n=0;return"s"===e.slice(-1)?n=parseFloat(e):"m"===e.slice(-1)?n=60*parseFloat(e):"h"===e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3===t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},r.serialize=function(e){return null===e?null:"true"===e.toString().toLowerCase()||"false"!==e.toString().toLowerCase()&&(isNaN(Number(e))||5<e.length||0===e.length?e:Number(e))},r.addClass=function(e,t){var n=i.isString(e.className)?e.className.split(" "):[],a=i.isArray(t)?t:t.split(" ");i.each(a,function(e){i.contains(n,e)||n.push(e)}),e.className=r.trim(n.join(" "))},r.removeClass=function(e,t){var n=i.isString(e.className)?e.className.split(" "):[],a=i.isArray(t)?t:t.split(" ");e.className=r.trim(i.difference(n,a).join(" "))},r.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},r.indexOf=i.indexOf,r.noop=function(){},r.canCast=function(){var t=e.cast;return!(!t||!i.isFunction(t.available)||!t.available())}}(jwplayer),function(e){function t(e){var t=document.createElement("style");return e&&t.appendChild(document.createTextNode(e)),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t}function n(e,t,n){return o.exists(t)?(n=n?" !important":"","string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&0>t.indexOf("url")?"url("+t+")":t+n:0===t||"z-index"===e||"opacity"===e?""+t+n:/color/i.test(e)?"#"+o.pad(t.toString(16).replace(/^0x/i,""),6)+n:Math.ceil(t)+"px"+n):""}function r(e,t){for(var n=0;n<e.length;n++){var r,i,a=e[n];if(void 0!==a&&null!==a)for(r in t){i=(i=r).split("-");for(var o=1;o<i.length;o++)i[o]=i[o].charAt(0).toUpperCase()+i[o].slice(1);i=i.join(""),a.style[i]!==t[r]&&(a.style[i]=t[r])}}}function i(e){var t,n,r,i=s[e].sheet;if(i){t=i.cssRules,n=c[e];var a=l[r=e];for(var o in r+=" { ",a)r+=o+": "+a[o]+"; ";if(r+="}",void 0!==n&&n<t.length&&t[n].selectorText===e){if(r===t[n].cssText)return;i.deleteRule(n)}else n=t.length,c[e]=n;try{i.insertRule(r,n)}catch(e){}}}var a,o=e.utils,s={},l={},u=null,c={};o.cssKeyframes=function(e,n){(r=s.keyframes)||(r=t(),s.keyframes=r);var r=r.sheet,i="@keyframes "+e+" { "+n+" }";try{r.insertRule(i,r.cssRules.length)}catch(e){}i=i.replace(/(keyframes|transform)/g,"-webkit-$1");try{r.insertRule(i,r.cssRules.length)}catch(e){}};var d=o.css=function(e,r,o){l[e]||(l[e]={});var c=l[e];o=o||!1;var d,f,h=!1;for(d in r)""!==(f=n(d,r[d],o))?f!==c[d]&&(c[d]=f,h=!0):void 0!==c[d]&&(delete c[d],h=!0);h&&(s[e]||(r=a&&a.sheet&&a.sheet.cssRules&&a.sheet.cssRules.length||0,(!a||5e4<r)&&(a=t()),s[e]=a),null!==u?u.styleSheets[e]=l[e]:i(e))};d.style=function(t,i,a){if(void 0!==t&&null!==t){void 0===t.length&&(t=[t]);var o,s={};for(o in i)s[o]=n(o,i[o]);if(null===u||a)r(t,s);else{for(var l in i=(i=t.__cssRules)||{},s)i[l]=s[l];t.__cssRules=i,0>e._.indexOf(u.elements,t)&&u.elements.push(t)}}},d.block=function(e){null===u&&(u={id:e,styleSheets:{},elements:[]})},d.unblock=function(e){if(u&&(!e||u.id===e)){for(var t in u.styleSheets)i(t);for(e=0;e<u.elements.length;e++)r(t=u.elements[e],t.__cssRules);u=null}},o.clearCss=function(e){for(var t in l)0<=t.indexOf(e)&&delete l[t];for(var n in s)0<=n.indexOf(e)&&i(n)},o.transform=function(e,t){var n={};t=t||"",n.transform=t,n["-webkit-transform"]=t,n["-ms-transform"]=t,n["-moz-transform"]=t,n["-o-transform"]=t,"string"==typeof e?d(e,n):d.style(e,n)},o.dragStyle=function(e,t){d(e,{"-webkit-user-select":t,"-moz-user-select":t,"-ms-user-select":t,"-webkit-user-drag":t,"user-select":t,"user-drag":t})},o.transitionStyle=function(e,t){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||d(e,{"-webkit-transition":t,"-moz-transition":t,"-o-transition":t,transition:t})},o.rotate=function(e,t){o.transform(e,"rotate("+t+"deg)")},o.rgbHex=function(e){return 3===(e=String(e).replace("#","")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e.substr(-6)},o.hexToRgba=function(e,t){var n="rgb",r=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)];return void 0!==t&&100!==t&&(n+="a",r.push(t/100)),n+"("+r.join(",")+")"}}(jwplayer),r=jwplayer.utils,i=jwplayer._,a=r.foreach,l={mp4:(o={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"}).mp4,f4v:o.mp4,m4v:o.mp4,mov:o.mp4,m4a:o.aac,f4a:o.aac,aac:o.aac,mp3:o.mp3,ogv:o.ogg,ogg:o.ogg,oga:o.vorbis,vorbis:o.vorbis,webm:o.webm,m3u8:o.hls,m3u:o.hls,hls:o.hls},u=r.extensionmap={},a(l,function(e,t){u[e]={html5:t}}),a({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(e,t){u[e]||(u[e]={}),u[e].flash=t}),u.types=o,u.mimeType=function(e){var t;return i.find(o,function(n,r){if(n===e)return t=r,!0}),t},u.extType=function(e){return u.mimeType(l[e])},function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};e.scriptloader=function(n){function r(e){s=t.ERROR,o.sendEvent(a.ERROR,e)}function i(e){s=t.COMPLETE,o.sendEvent(a.COMPLETE,e)}var a=jwplayer.events,o=e.extend(this,new a.eventdispatcher),s=t.NEW;this.load=function(){if(s===t.NEW){var o=e.scriptloader.loaders[n];if(o&&2>(s=o.getStatus()))return o.addEventListener(a.ERROR,r),void o.addEventListener(a.COMPLETE,i);var l=document.getElementsByTagName("head")[0]||document.documentElement,u=document.createElement("script"),c=!1;u.onload=u.onreadystatechange=function(e){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0,i(e),u.onload=u.onreadystatechange=null,l&&u.parentNode&&l.removeChild(u))},u.onerror=r,u.src=n,l.insertBefore(u,l.firstChild),s=t.LOADING,e.scriptloader.loaders[n]=this}},this.getStatus=function(){return s}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){return e&&"rtmp"!==e.substr(0,4)?(t=-1<e.indexOf("(format=m3u8-")&&"m3u8")?t:-1<(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0:"";var t},e.stringToColor=function(e){return 3===(e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(r){function i(e){e.type===n?(l=!0,c=o(f.DRAG_START,e)):e.type===t?l&&(d||(a(f.DRAG_START,e,c),d=!0),a(f.DRAG,e)):(l&&(d?a(f.DRAG_END,e):(e.cancelBubble=!0,a(f.TAP,e))),l=d=!1,c=null)}function a(e,t,n){u[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n||o(e,t))&&u[e](t)}function o(e,t){var n=null;if(t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]),!n)return null;var r=s.getBoundingClientRect();n={type:e,target:s,x:n.pageX-window.pageXOffset-r.left,y:n.pageY,deltaX:0,deltaY:0};return e!==f.TAP&&c&&(n.deltaX=n.x-c.x,n.deltaY=n.y-c.y),n}var s=r,l=!1,u={},c=null,d=!1,f=e.touchEvents;return document.addEventListener(t,i),document.addEventListener("touchend",function(e){l&&d&&a(f.DRAG_END,e),l=d=!1,c=null}),document.addEventListener("touchcancel",i),r.addEventListener(n,i),r.addEventListener("touchend",i),this.addEventListener=function(e,t){u[e]=t},this.removeEventListener=function(e){delete u[e]},this}}(jwplayer.utils),jwplayer.utils.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"},function(e){e.key=function(t){var n,r,i;this.edition=function(){return i&&i.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return r},e.exists(t)||(t="");try{var a=(t=e.tea.decrypt(t,"36QXq4W@GSBV^teR")).split("/");(n=a[0])?/^(free|pro|premium|enterprise|ads)$/i.test(n)?(r=a[1],a[2]&&0<parseInt(a[2])&&(i=new Date).setTime(String(a[2]))):n="invalid":n="free"}catch(e){n="invalid"}}}(jwplayer.utils),function(e){var t=jwplayer.utils.tea={};t.encrypt=function(e,i){if(0==e.length)return"";var a=t.strToLongs(r.encode(e));1>=a.length&&(a[1]=0);for(var o,s=t.strToLongs(r.encode(i).slice(0,16)),l=a.length,u=a[l-1],c=a[0],d=Math.floor(6+52/l),f=0;0<d--;){o=(f+=2654435769)>>>2&3;for(var h=0;h<l;h++)u=(u>>>5^(c=a[(h+1)%l])<<2)+(c>>>3^u<<4)^(f^c)+(s[3&h^o]^u),u=a[h]+=u}return a=t.longsToStr(a),n.encode(a)},t.decrypt=function(e,i){if(0==e.length)return"";for(var a,o=t.strToLongs(n.decode(e)),s=t.strToLongs(r.encode(i).slice(0,16)),l=o.length,u=o[l-1],c=o[0],d=2654435769*Math.floor(6+52/l);0!=d;){a=d>>>2&3;for(var f=l-1;0<=f;f--)u=((u=o[0<f?f-1:l-1])>>>5^c<<2)+(c>>>3^u<<4)^(d^c)+(s[3&f^a]^u),c=o[f]-=u;d-=2654435769}return o=(o=t.longsToStr(o)).replace(/\0+$/,""),r.decode(o)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var i,a,o,s,l,u,c=[],d="",f=n.code;if(0<(l=(u=void 0!==t&&t?r.encode(e):e).length%3))for(;3>l++;)d+="=",u+="\0";for(l=0;l<u.length;l+=3)i=(s=(i=u.charCodeAt(l))<<16|(a=u.charCodeAt(l+1))<<8|(o=u.charCodeAt(l+2)))>>18&63,a=s>>12&63,o=s>>6&63,s&=63,c[l/3]=f.charAt(i)+f.charAt(a)+f.charAt(o)+f.charAt(s);return(c=c.join("")).slice(0,c.length-d.length)+d},decode:function(e,t){t=void 0!==t&&t;var i,a,o,s,l,u,c=[],d=n.code;u=t?r.decode(e):e;for(var f=0;f<u.length;f+=4)i=(o=(i=d.indexOf(u.charAt(f)))<<18|(a=d.indexOf(u.charAt(f+1)))<<12|(s=d.indexOf(u.charAt(f+2)))<<6|(l=d.indexOf(u.charAt(f+3))))>>>16&255,a=o>>>8&255,o&=255,c[f/4]=String.fromCharCode(i,a,o),64==l&&(c[f/4]=String.fromCharCode(i,a)),64==s&&(c[f/4]=String.fromCharCode(i));return s=c.join(""),t?r.decode(s):s}},r={encode:function(e){return(e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)})).replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},decode:function(e){return(e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)})).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(),jwplayer.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"},function(e){var t=e.utils;e.events.eventdispatcher=function(n,r){function i(e,n,r){if(e)for(var i=0;i<e.length;i++){var a=e[i];if(a){null!==a.count&&0==--a.count&&delete e[i];try{a.listener(n)}catch(e){t.log('Error handling "'+r+'" event listener ['+i+"]: "+e.toString(),a.listener,n)}}}}var a,o;this.resetEventListeners=function(){a={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,r){try{t.exists(a[e])||(a[e]=[]),"string"===t.typeOf(n)&&(n=new Function("return "+n)()),a[e].push({listener:n,count:r||null})}catch(e){t.log("error",e)}return!1},this.removeEventListener=function(e,n){var r;if(a[e]){try{if(void 0===n)return void(a[e]=[]);for(r=0;r<a[e].length;r++)if(a[e][r].listener.toString()===n.toString()){a[e].splice(r,1);break}}catch(e){t.log("error",e)}return!1}},this.addGlobalListener=function(e,n){try{"string"===t.typeOf(e)&&(e=new Function("return "+e)()),o.push({listener:e,count:n||null})}catch(e){t.log("error",e)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=o.length;n--;)o[n].listener.toString()===e.toString()&&o.splice(n,1)}catch(e){t.log("error",e)}return!1}},this.sendEvent=function(s,l){t.exists(l)||(l={}),t.extend(l,{id:n,version:e.version,type:s}),r&&t.log(s,l),i(a[s],l,s),i(o,l,s)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(r,i){return n[r]=new e.plugins.pluginloader(new e.plugins.model(t),i),n[r]},e.plugins.registerPlugin=function(n,r,i,a){var o=e.utils.getPluginName(n);t[o]||(t[o]=new e.plugins.plugin(n)),t[o].registerPlugin(n,r,i,a)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var r=e.utils.getPluginName(n);return t[r]||(t[r]=new e.plugins.plugin(n)),t[r]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(r){function i(){switch(t.getPluginPathType(r)){case t.pluginPathType.ABSOLUTE:return r;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(r,window.location.href)}}function a(){c=setTimeout(function(){d=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},1e3)}function o(){d=t.loaderstatus.ERROR,f.sendEvent(n.ERROR,{url:r})}var s,l,u,c,d=t.loaderstatus.NEW,f=new n.eventdispatcher;t.extend(this,f),this.load=function(){if(d===t.loaderstatus.NEW)if(0<r.lastIndexOf(".swf"))s=r,d=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else if(t.getPluginPathType(r)===t.pluginPathType.CDN)d=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else{d=t.loaderstatus.LOADING;var e=new t.scriptloader(i());e.addEventListener(n.COMPLETE,a),e.addEventListener(n.ERROR,o),e.load()}},this.registerPlugin=function(e,r,i,a){c&&(clearTimeout(c),c=void 0),u=r,i&&a?(s=a,l=i):"string"==typeof i?s=i:"function"==typeof i?l=i:!i&&!a&&(s=e),d=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},this.getStatus=function(){return d},this.getPluginName=function(){return t.getPluginName(r)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return 0<r.lastIndexOf(".swf")?t.getAbsolutePath(s,window.location.href):t.getAbsolutePath(s,i())}return null},this.getJS=function(){return l},this.getTarget=function(){return u},this.getPluginmode=function(){return void 0!==s&&void 0!==l?e.pluginmodes.HYBRID:void 0!==s?e.pluginmodes.FLASH:void 0!==l?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return r}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,r=e._,i=t.foreach;e.plugins.pluginloader=function(e,a){function o(){d||(d=!0,c=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE))}function s(){if(!p&&((!f||0===r.keys(f).length)&&o(),!d)){var i=e.getPlugins();u=r.after(h,o),t.foreach(f,function(e){e=t.getPluginName(e),e=(r=i[e]).getJS();var r,a=r.getTarget();(r=r.getStatus())===t.loaderstatus.LOADING||r===t.loaderstatus.NEW||(e&&!t.versionCheck(a)&&m.sendEvent(n.ERROR,{message:"Incompatible player version"}),u())})}}function l(e){p||(m.sendEvent(n.ERROR,{message:"File not found"}),e.url&&t.log("File not found",e.url),s())}var u,c=t.loaderstatus.NEW,d=!1,f=a,h=r.size(f),p=!1,m=new n.eventdispatcher;t.extend(this,m),this.setupPlugins=function(n,r,a){var o={length:0,plugins:{}},s=0,l={},u=e.getPlugins();return i(r.plugins,function(e,i){var c=t.getPluginName(e),d=u[c],f=d.getFlashPath(),h=d.getJS(),p=d.getURL();f&&(o.plugins[f]=t.extend({},i),o.plugins[f].pluginmode=d.getPluginmode(),o.length++);try{if(h&&r.plugins&&r.plugins[p]){var m=document.createElement("div");m.id=n.id+"_"+c,m.style.position="absolute",m.style.top=0,m.style.zIndex=s+10,l[c]=d.getNewInstance(n,t.extend({},r.plugins[p]),m),s++,n.onReady(a(l[c],m,!0)),n.onResize(a(l[c],m))}}catch(e){t.log("ERROR: Failed to load "+c+".")}}),n.plugins=l,o},this.load=function(){if(!t.exists(a)||"object"===t.typeOf(a)){c=t.loaderstatus.LOADING,i(a,function(r){t.exists(r)&&((r=e.addPlugin(r)).addEventListener(n.COMPLETE,s),r.addEventListener(n.ERROR,l))});var r=e.getPlugins();i(r,function(e,t){t.load()})}s()},this.destroy=function(){p=!0,m&&(m.resetEventListeners(),m=null)},this.pluginFailed=l,this.getStatus=function(){return c}}}(jwplayer),function(e){e.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(t){return t?t.textContent?e.utils.trim(t.textContent):t.text?e.utils.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,r){for(var i=[],a=[],o=e.utils.xmlAttribute,s=0;s<n.childNodes.length;s++){var l=n.childNodes[s];if("jwplayer"===l.prefix){var u=t.localName(l);"source"===u?(delete r.sources,i.push({file:o(l,"file"),default:o(l,"default"),label:o(l,"label"),type:o(l,"type")})):"track"===u?(delete r.tracks,a.push({file:o(l,"file"),default:o(l,"default"),kind:o(l,"kind"),label:o(l,"label")})):(r[u]=e.utils.serialize(t.textContent(l)),"file"===u&&r.sources&&delete r.sources)}r.file||(r.file=r.link)}if(i.length)for(r.sources=[],s=0;s<i.length;s++)0<i[s].file.length&&(i[s].default="true"===i[s].default,i[s].label.length||delete i[s].label,r.sources.push(i[s]));if(a.length)for(r.tracks=[],s=0;s<a.length;s++)0<a[s].file.length&&(a[s].default="true"===a[s].default,a[s].kind=a[s].kind.length?a[s].kind:"captions",a[s].label.length||delete a[s].label,r.tracks.push(a[s]));return r}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,r=e.localName,i=e.textContent,a=e.numChildren,o=e.mediaparser=function(){};o.parseGroup=function(e,s){var l,u,c=[];for(u=0;u<a(e);u++)if("media"===(l=e.childNodes[u]).prefix&&r(l))switch(r(l).toLowerCase()){case"content":n(l,"duration")&&(s.duration=t.seconds(n(l,"duration"))),0<a(l)&&(s=o.parseGroup(l,s)),n(l,"url")&&(s.sources||(s.sources=[]),s.sources.push({file:n(l,"url"),type:n(l,"type"),width:n(l,"width"),label:n(l,"label")}));break;case"title":s.title=i(l);break;case"description":s.description=i(l);break;case"guid":s.mediaid=i(l);break;case"thumbnail":s.image||(s.image=n(l,"url"));break;case"group":o.parseGroup(l,s);break;case"subtitle":var d={};if(d.file=n(l,"url"),d.kind="captions",0<n(l,"lang").length){var f=d,h={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};l=h[l=n(l,"lang")]?h[l]:l,f.label=l}c.push(d)}for(s.hasOwnProperty("tracks")||(s.tracks=[]),u=0;u<c.length;u++)s.tracks.push(c[u]);return s}}(jwplayer.parsers),function(e){function t(t){for(var i={},a=0;a<t.childNodes.length;a++){var s=t.childNodes[a],l=o(s);if(l)switch(l.toLowerCase()){case"enclosure":i.file=n.xmlAttribute(s,"url");break;case"title":i.title=r(s);break;case"guid":i.mediaid=r(s);break;case"pubdate":i.date=r(s);break;case"description":i.description=r(s);break;case"link":i.link=r(s);break;case"category":i.tags=i.tags?i.tags+r(s):r(s)}}return i=e.mediaparser.parseGroup(t,i),i=e.jwparser.parseEntry(t,i),new jwplayer.playlist.item(i)}var n=jwplayer.utils,r=e.textContent,i=e.getChildNode,a=e.numChildren,o=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],r=0;r<a(e);r++){var s=i(e,r);if("channel"===o(s).toLowerCase())for(var l=0;l<a(s);l++){var u=i(s,l);"item"===o(u).toLowerCase()&&n.push(t(u))}}return n}}(jwplayer.parsers),function(e){var t=e.utils,n=e._;e.playlist=function(t){var r=[];return t=n.isArray(t)?t:[t],n.each(t,function(t){r.push(new e.playlist.item(t))}),r},e.playlist.filterPlaylist=function(e,i){var a=[];return n.each(e,function(e){if((e=t.extend({},e)).sources=r(e.sources,!1,i),e.sources.length){for(var n=0;n<e.sources.length;n++)e.sources[n].label=e.sources[n].label||n.toString();a.push(e)}}),a};var r=e.playlist.filterSources=function(r,i,a){var o,s=[],l=i?e.embed.flashCanPlay:e.embed.html5CanPlay;if(r)return n.each(r,function(e){if(e&&e.file){var n=t.trim(""+e.file),r=e.type;r||(r=t.extension(n),r=t.extensionmap.extType(r)),e=t.extend({},e,{file:n,type:r})}else e=void 0;e&&l(e.file,e.type,a)&&(o=o||e.type,e.type===o&&s.push(e))}),s}}(jwplayer),function(e){var t=e.item=function(n){var r,i,a=jwplayer.utils,o=a.extend({},t.defaults,n);for(o.tracks=n&&a.exists(n.tracks)?n.tracks:[],0===o.sources.length&&(o.sources=[new e.source(o)]),r=0;r<o.sources.length;r++)i=o.sources[r].default,o.sources[r].default=!!i&&"true"===i.toString(),o.sources[r]=new e.source(o.sources[r]);if(o.captions&&!a.exists(n.tracks)){for(n=0;n<o.captions.length;n++)o.tracks.push(o.captions[n]);delete o.captions}for(r=0;r<o.tracks.length;r++)o.tracks[r]=new e.track(o.tracks[r]);return o};t.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,r=e.parsers;e.playlist.loader=function(){function i(t){try{var i=t.responseXML.childNodes;t="";for(var a=0;a<i.length&&8===(t=i[a]).nodeType;a++);if("xml"===r.localName(t)&&(t=t.nextSibling),"rss"!==r.localName(t))o("Not a valid RSS feed");else{var l=new e.playlist(r.rssparser.parse(t));s.sendEvent(n.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(e){o()}}function a(e){o(e.match(/invalid/i)?"Not a valid RSS feed":"")}function o(e){s.sendEvent(n.JWPLAYER_ERROR,{message:e||"Error loading file"})}var s=new n.eventdispatcher;t.extend(this,s),this.load=function(e){t.ajax(e,i,a)}}}(jwplayer),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,default:void 0};e.source=function(e){var r=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(r[n]=e[n],delete e[n])}),r.type&&0<r.type.indexOf("/")&&(r.type=t.extensionmap.mimeType(r.type)),"m3u8"===r.type&&(r.type="hls"),"smil"===r.type&&(r.type="rtmp"),r}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions",default:!1};e.track=function(e){var r=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(r[n]=e[n],delete e[n])}),r}}(jwplayer.playlist),function(e){function t(e,t,r){var i=e.style;i.backgroundColor="#000",i.color="#FFF",i.width=n.styleDimension(r.width),i.height=n.styleDimension(r.height),i.display="table",i.opacity=1,(i=(r=document.createElement("p")).style).verticalAlign="middle",i.textAlign="center",i.display="table-cell",i.font="15px/20px Arial, Helvetica, sans-serif",r.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(r)}var n=e.utils,r=e.events,i=e._,a=e.embed=function(o){function s(){if(!w){var t=p.playlist;if(i.isArray(t)){if(0===t.length)return void c();if(!(1!==t.length||t[0].sources&&0!==t[0].sources.length&&t[0].sources[0].file))return void c()}if(!b)if(i.isString(t))(h=new e.playlist.loader).addEventListener(r.JWPLAYER_PLAYLIST_LOADED,function(e){p.playlist=e.playlist,b=!1,s()}),h.addEventListener(r.JWPLAYER_ERROR,function(e){b=!1,c(e)}),b=!0,h.load(p.playlist);else if(y.getStatus()===n.loaderstatus.COMPLETE){for(t=0;t<p.modes.length;t++){var u=p.modes[t],f=u.type;if(f&&a[f]){var m=n.extend({},p);if((E=new a[f](C,u,m,y,o)).supportsConfig())return E.addEventListener(r.ERROR,l),E.embed(),n.css("object.jwswf, .jwplayer:focus",{outline:"none"}),n.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),o}}p.fallback?(d(t="No suitable players found and fallback enabled",!0),n.log(t),new a.download(C,p,c)):(d(t="No suitable players found and fallback disabled",!1),n.log(t))}}}function l(e){f(v+e.message)}function u(e){o.dispatchEvent(r.JWPLAYER_ERROR,{message:"Could not load plugin: "+e.message})}function c(e){e&&e.message?f("Error loading playlist: "+e.message):f(v+"No playable sources found")}function d(e,t){clearTimeout(k),k=setTimeout(function(){o.dispatchEvent(r.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function f(e){w||(_.parentNode.replaceChild(C,_),p.fallback?(w=!0,t(C,e,p),d(e,!0)):d(e,!1))}var h,p=new a.config(o.config),m=p.width,g=p.height,v="Error loading player: ",_=document.getElementById(o.id),y=e.plugins.loadPlugins(o.id,p.plugins),b=!1,w=!1,E=null,k=-1;p.id=o.id,p.aspectratio?o.config.aspectratio=p.aspectratio:delete o.config.aspectratio;var S=o;n.foreach(p.events,function(e,t){var n=S[e];"function"==typeof n&&n.call(S,t)});var C=document.createElement("div");return C.id=_.id,C.style.width=0<m.toString().indexOf("%")?m:m+"px",C.style.height=0<g.toString().indexOf("%")?g:g+"px",this.embed=function(){w||(y.addEventListener(r.COMPLETE,s),y.addEventListener(r.ERROR,u),y.load())},this.destroy=function(){E&&(E.destroy(),E=null),y&&(y.destroy(),y=null),h&&(h.resetEventListeners(),h=null)},this.errorScreen=f,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new i(e.playlist[t]);else{var a={};r.foreach(i.defaults,function(t){n(e,a,t)}),a.sources||(e.levels?(a.sources=e.levels,delete e.levels):(n(e,t={},"file"),n(e,t,"type"),a.sources=t.file?[t]:[])),e.playlist=[new i(a)]}}function n(e,t,n){r.exists(e[n])&&(t[n]=e[n],delete e[n])}var r=e.utils,i=e.playlist.item;(e.embed.config=function(n){var i={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:r.getScriptPath("jwplayer.js"),aspectratio:""},a=(i={type:"html5",src:(n=r.extend({},i,e.defaults,n)).base+"jwplayer.html5.js"},{type:"flash",src:n.base+"jwplayer.flash.swf"});if(n.modes="flash"===n.primary?[a,i]:[i,a],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(a.src=n.flashplayer),n.html5player&&(i.src=n.html5player),t(n),"string"==typeof(a=n.aspectratio)&&r.exists(a)){var o=a.indexOf(":");-1===o?i=0:(i=parseFloat(a.substr(0,o)),a=parseFloat(a.substr(o+1)),i=0>=i||0>=a?0:a/i*100+"%")}else i=0;return-1===n.width.toString().indexOf("%")?delete n.aspectratio:i?n.aspectratio=i:delete n.aspectratio,n}).addConfig=function(e,n){return t(n),r.extend(e,n)}}(jwplayer),function(e){function t(e,t){function r(e,t){i[a].style[e]=t}for(var i=document.querySelectorAll(e),a=0;a<i.length;a++)n.foreach(t,r)}var n=e.utils;e.embed.download=function(e,r,i){function a(e,t,n){return e=document.createElement(e),t&&(e.className="jwdownload"+t),n&&n.appendChild(e),e}var o,s,l,u,c,d,f,h,p=n.extend({},r),m=p.width?p.width:480,g=p.height?p.height:320;if(r=r.logo?r.logo:{prefix:n.repo(),file:"logo.png",margin:10},u=p.playlist,p=["mp4","aac","mp3"],u&&u.length){for(d=(c=u[0]).sources,u=0;u<d.length;u++)(f=d[u]).file&&(h=f.type||n.extensionmap.extType(n.extension(f.file)),0<=n.indexOf(p,h)?(o=f.file,s=c.image):n.isYouTube(f.file,h)&&(l=f.file));o?(i=o,e&&(a("div","icon",o=a("a","display",e)),a("div","logo",o),i&&o.setAttribute("href",n.getAbsolutePath(i))),i="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",t(i+"display",{width:n.styleDimension(Math.max(320,m)),height:n.styleDimension(Math.max(180,g)),background:"black center no-repeat "+(s?"url("+s+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),t(i+"display div",{position:"absolute",width:"100%",height:"100%"}),t(i+"logo",{top:r.margin+"px",right:r.margin+"px",background:"top right no-repeat url("+r.prefix+r.file+")"}),t(i+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):l?(r=l,(e=a("iframe","",e)).src="http://www.youtube.com/embed/"+n.youTubeID(r),e.width=m,e.height=g,e.style.border="none"):i()}}}(jwplayer),function(e){var t=e.utils,n=e.events,r={};(e.embed.flash=function(a,o,s,l,u){function c(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function d(e,t,n){return function(){try{n&&document.getElementById(u.id+"_wrapper").appendChild(t);var r=document.getElementById(u.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(r.width,r.height),t.style.left=r.x,t.style.top=r.h}catch(e){}}}var f=new e.events.eventdispatcher,h=t.flashVersion();t.extend(this,f),this.embed=function(){if(s.id=u.id,10>h)return f.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,i,p=a.id,m=u.config.listbar,g=t.extend({},s);if((e=document.getElementById(u.id)).parentNode.replaceChild(a,e),p+"_wrapper"===a.parentNode.id)e=document.getElementById(p+"_wrapper");else{if(e=document.createElement("div"),(i=document.createElement("div")).style.display="none",i.id=p+"_aspect",e.id=p+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(g.width),e.style.height=t.styleDimension(g.height),u.config.aspectratio){var v=parseFloat(u.config.aspectratio);i.style.display="block",i.style.marginTop=u.config.aspectratio,e.style.height="auto",e.style.display="inline-block",m&&("bottom"===m.position?i.style.paddingBottom=m.size+"px":"right"===m.position&&(i.style.marginBottom=-1*m.size*(v/100)+"px"))}a.parentNode.replaceChild(e,a),e.appendChild(a),e.appendChild(i)}for(0<(m=l.setupPlugins(u,g,d)).length?t.extend(g,function(e){if(!e)return{};var n={},r=[];return t.foreach(e,function(e,i){var a=t.getPluginName(e);r.push(e),t.foreach(i,function(e,t){n[a+"."+e]=t})}),n.plugins=r.join(","),n}(m.plugins)):delete g.plugins,void 0!==g["dock.position"]&&"false"===g["dock.position"].toString().toLowerCase()&&(g.dock=g["dock.position"],delete g["dock.position"]),m=g.wmode||(g.height&&40>=g.height?"transparent":"opaque"),i="height width modes events primary base fallback volume".split(" "),v=0;v<i.length;v++)delete g[i[v]];i=t.getCookies(),t.foreach(i,function(e,t){void 0===g[e]&&(g[e]=t)}),(i=window.location.href.split("/")).splice(i.length-1,1),i=i.join("/"),g.base=i+"/",r[p]=g,t.isMSIE()?(a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+p+'" name="'+p+'" tabindex="0"><param name="movie" value="'+o.src+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="seamlesstabbing" value="true"><param name="wmode" value="'+m+'"><param name="bgcolor" value="#000000"></object>',(e=e.getElementsByTagName("object")[0]).style.outline="none"):((e=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),e.setAttribute("data",o.src),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("bgcolor","#000000"),e.setAttribute("id",p),e.setAttribute("name",p),e.className="jwswf",c(e,"allowfullscreen","true"),c(e,"allowscriptaccess","always"),c(e,"seamlesstabbing","true"),c(e,"wmode",m),a.parentNode.replaceChild(e,a)),u.config.aspectratio&&(e.style.position="absolute",e.style.left="0"),u.container=e,u.setPlayer(e,"flash")},this.supportsConfig=function(){if(h){if(!s)return!0;if("string"===t.typeOf(s.playlist))return!0;try{var e=s.playlist[0].sources;if(void 0===e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&i(e[n].file,e[n].type))return!0}catch(e){}}return!1},this.destroy=function(){}}).getVars=function(e){return r[e]};var i=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e,n)||t.isRtmp(e,n)||"hls"===n)return!0;var r=t.extensionmap[n||t.extension(e)];return!!r&&!!r.flash}}(jwplayer),function(e){var t,n=e.utils,r=n.extensionmap,i=e.events;e.embed.html5=function(r,a,o,s,l){function u(e,t,n){return function(){try{var i=document.querySelector("#"+r.id+" .jwmain");n&&i.appendChild(t),"function"==typeof e.resize&&(e.resize(i.clientWidth,i.clientHeight),setTimeout(function(){e.resize(i.clientWidth,i.clientHeight)},400)),t.left=i.style.left,t.top=i.style.top}catch(e){}}}var c=new i.eventdispatcher;n.extend(this,c),this.embed=function(){if(e.html5){s.setupPlugins(l,o,u),n.emptyElement(r);var t=e.utils.extend({},o);delete t.volume,t=new e.html5.player(t),l.setPlayer(t,"html5")}else this.loadEmbedder()},this.loadEmbedder=function(){(t=t||new n.scriptloader(a.src)).addEventListener(i.ERROR,this.loadError),t.addEventListener(i.COMPLETE,this.embed),t.load()},this.loadError=function(e){this.sendEvent(e.type,{message:"HTML5 player not found"})},this.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"===n.typeOf(o.playlist))return!0;for(var t=o.playlist[0].sources,r=0;r<t.length;r++)if(e.embed.html5CanPlay(t[r].file,t[r].type,o.androidhls))return!0}catch(e){}return!1},this.destroy=function(){t&&(t.resetEventListeners(),t=null)}},e.embed.html5CanPlay=function(t,i,a){if(null!==navigator.userAgent.match(/BlackBerry/i)||n.isIE(9))return!1;if(n.isYouTube(t,i))return!0;var o,s=n.extension(t);if("hls"===(i=i||r.extType(s)))if(a){if((a=n.isAndroidNative)(2)||a(3)||a("4.0"))return!1;if(n.isAndroid())return!0}else if(n.isAndroid())return!1;if(n.isRtmp(t,i))return!1;if(!(t=r[i]||r[s])||t.flash&&!t.html5)return!1;e:if(t=t.html5){try{o=!!e.vid.canPlayType(t);break e}catch(e){}o=!1}else o=!0;return o}}(jwplayer),function(e){var t=e.embed,n=e.embed.html5CanPlay,r=e.utils,i=e._,a=/\.(js|swf)$/;e.cast=e.cast||{},e.embed=r.extend(function(n){function i(){o="Adobe SiteCatalyst Error: Could not find Media Module"}var o,s=r.repo(),l=r.extend({},e.defaults),u=r.extend({},l,n.config),c=n.config,d=u.plugins,f=u.analytics,h=s+"jwpsrv.js",p=s+"sharing.js",m=s+"related.js",g=s+"gapro.js",v=(l=e.key?e.key:l.key,new e.utils.key(l).edition());d=d||{};switch("ads"==v&&u.advertising&&(a.test(u.advertising.client)?d[u.advertising.client]=u.advertising:d[s+u.advertising.client+".js"]=u.advertising),delete c.advertising,c.key=l,u.analytics&&a.test(u.analytics.client)&&(h=u.analytics.client),delete c.analytics,f&&"ads"!==v&&"enterprise"!==v&&delete f.enabled,"free"!=v&&f&&!1===f.enabled||(d[h]=f||{}),delete d.sharing,delete d.related,v){case"ads":case"enterprise":if(c.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(n):i()}catch(e){i()}case"premium":u.related&&(a.test(u.related.client)&&(m=u.related.client),d[m]=u.related),u.ga&&(a.test(u.ga.client)&&(g=u.ga.client),d[g]=u.ga);case"pro":u.sharing&&(a.test(u.sharing.client)&&(p=u.sharing.client),d[p]=u.sharing),u.skin&&(c.skin=u.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,r.repo()+"skins/$1.xml"))}return c.plugins=d,n.config=c,n=new t(n),o&&n.errorScreen(o),n},e.embed),e.embed.html5CanPlay=function(t,r){var a={file:t,type:r};return!!(e.html5&&e.html5.chooseProvider?e.html5.chooseProvider(a)!==e.html5.VideoProvider:i.any(e.unregisteredProviders,function(e){return e.supports(a)}))||n.apply(this,arguments)}}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){f.debug&&t.log(e)}function r(e){return(e=(e=(e=e.split("/"))[e.length-1]).split("?"))[0]}function i(){if(!p){p=!0;var e=d.getPosition();n("stop: "+o+" : "+e),s.Media.stop(o,e)}}function a(){m||(i(),m=!0,n("close: "+o),s.Media.close(o),c=!0,u=0)}var o,l,u,c,d=e,f=t.extend({},d.config.sitecatalyst),h={onPlay:function(){if(!c){var e=d.getPosition();p=!1,n("play: "+o+" : "+e),s.Media.play(o,e)}},onPause:i,onBuffer:i,onIdle:a,onPlaylistItem:function(e){try{var n;if(c=!0,a(),u=0,f.mediaName)n=f.mediaName;else{var i=d.getPlaylistItem(e.index);n=i.title?i.title:i.file?r(i.file):i.sources&&i.sources.length?r(i.sources[0].file):""}o=n,l=f.playerName?f.playerName:d.id}catch(e){t.log(e)}},onTime:function(){if(c){var e=d.getDuration();if(-1==e)return;m=p=c=!1,n("open: "+o+" : "+e+" : "+l),s.Media.open(o,e,l),n("play: "+o+" : 0"),s.Media.play(o,0)}if(e=d.getPosition(),3<=Math.abs(e-u)){var t=u;n("seek: "+t+" to "+e),n("stop: "+o+" : "+t),s.Media.stop(o,t),n("play: "+o+" : "+e),s.Media.play(o,e)}u=e},onComplete:a},p=!0,m=!0;t.foreach(h,function(e){d[e](h[e])})}}(jwplayer.embed),function(e){function t(e,t){e[t]&&(e[t]=n.getAbsolutePath(e[t]))}var n=e.utils,r=e._,i=window.location.href;e.cast.setupCastConfig=function(r,a){var o=n.extend({},r.config);o.cast=n.extend({pageUrl:i},a);for(var s="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar events".split(" "),l=s.length;l--;)delete o[s[l]];for(var u in s=o.plugins,delete o.plugins,s)if(s.hasOwnProperty(u)){var c=s[u];if(c.client&&(/[\.\/]/.test(c.client)&&t(c,"client"),-1<c.client.indexOf("vast"))){if(l=o,(c=n.extend({},c)).client="vast",delete c.companiondiv,c.schedule){var d=void 0;for(d in c.schedule)c.schedule.hasOwnProperty(d)&&t(c.schedule[d].ad||c.schedule[d],"tag")}t(c,"tag"),l.advertising=c}}return r.position&&(o.position=r.position),0<r.item&&(o.item=r.item),o.captionLabel=n.getCookies().captionLabel,o.playerVersion=e.version,o},e.cast.setupFlashCastConfig=function(t){var i,a=t.config;return a.playlist=t.getPlaylist(),(i=r.find(a.plugins,function(e,t){return 0<t.indexOf("vast.js")}))?(i.client="vast",i={advertising:i}):i={},(a=r.pick(a,"id captionLabel cast key playlist repeat".split(" "))).cast.pageUrl=window.location.href,n.extend(a,{playerVersion:e.version,captionLabel:n.getCookies().captionLabel,volume:t.getVolume(),mute:t.getMute(),id:t.id,position:t.getPosition(),item:t.getPlaylistIndex()},i),a}}(window.jwplayer),function(e,t){function n(e,t){e[t]&&(e[t]=i.getAbsolutePath(e[t]))}var r=t.cast,i=t.utils,a=t.events,o=a.state,s={};r.NS="urn:x-cast:com.longtailvideo.jwplayer",r.debug=!1,r.availability=null,r.available=function(t){t=t||r.availability;var n=e.chrome,i="available";return n.cast&&n.cast.ReceiverAvailability&&(i=n.cast.ReceiverAvailability.AVAILABLE),t===i},r.controller=function(l,u){var c,d;function f(e,t){r.log("send command",e,t);var n={command:e};void 0!==t&&(n.args=t),O.sendMessage(r.NS,n,P,function(e){r.log("error message",e),"Invalid namespace"===e.description&&_()})}function h(e,n){var i=JSON.parse(n);if(!i)throw"Message not proper JSON";if(i.reconcile){B.removeMessageListener(r.NS,h);var o=i.diff,s=B;o.id&&i.appid&&i.pageUrl||(o.id=t().id,i.appid=I.appid,i.pageUrl=N,B=O=null),o.id===l.id&&i.appid===I.appid&&i.pageUrl===N&&(O||(l.jwInstreamState()&&l.jwInstreamDestroy(!0),b(s),u.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.oldstate,newstate:o.newstate})),C(i)),B=null}}function p(e){var t;j.active=!!e,e=j,t=O&&O.receiver?O.receiver.friendlyName:"",e.deviceName=t,m(a.JWPLAYER_CAST_SESSION)}function m(e){var t=i.extend({},j);u.sendEvent(e,t)}function g(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(r.log("Cast Session Error:",t,O),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function v(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(r.log("Cast Session Error:",t,O),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function _(){O?(k(),O.stop(E,y),T({item:0}),C({type:"state",diff:{buffer:0,position:0,duration:0}})):E()}function y(e){r.error("Cast Session Stop error:",e,O),E()}function b(n){if(r.log("Session started:",n),O)_(),U=n;else{(O=n).addMessageListener(r.NS,S),O.addUpdateListener(w),l.jwPause(!0),l.jwSetFullscreen(!1),F=u.getVideo(),c=u.volume,d=u.mute,(L=new r.provider(f)).init(),u.setVideoProvider(L),l.jwPlay=function(e){!1===e?L.pause():L.play()},l.jwPause=function(e){l.jwPlay(!!e)},l.jwLoad=function(e){"number"===i.typeOf(e)&&u.setItem(e),L.load(e)},l.jwPlaylistItem=function(e){"number"===i.typeOf(e)&&u.setItem(e),L.playlistItem(e)},l.jwPlaylistNext=function(){l.jwPlaylistItem(u.item+1)},l.jwPlaylistPrev=function(){l.jwPlaylistItem(u.item-1)},l.jwSetVolume=function(e){i.exists(e)&&(R(e=0|Math.min(Math.max(0,e),100))&&(e=Math.max(0,Math.min(e/100,1)),O.setReceiverVolumeLevel(e,A,function(e){r.error("set volume error",e),A()})))},l.jwSetMute=function(e){i.exists(e)||(e=!D.mute),x(e)&&O.setReceiverMuted(!!e,A,function(e){r.error("set muted error",e),A()})},l.jwGetVolume=function(){return 0|D.volume},l.jwGetMute=function(){return!!D.mute},l.jwIsBeforePlay=function(){return!1};var s=l.jwSetCurrentCaptions;l.jwSetCurrentCaptions=function(e){s(e),L.sendCommand("caption",e)},l.jwSkipAd=function(e){M&&(M.skipAd(e),(e=M.getAdModel()).complete=!0,u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,e))},l.jwClickAd=function(n){if(M&&300<M.timeSinceClick()&&(M.clickAd(n),u.state!==o.PAUSED)){var r={tag:n.tag};n.sequence&&(r.sequence=n.sequence),n.podcount&&(r.podcount=n.podcount),t(l.id).dispatchEvent(a.JWPLAYER_AD_CLICK,r),e.open(n.clickthrough)}},l.jwPlayAd=l.jwPauseAd=l.jwSetControls=l.jwForceState=l.jwReleaseState=l.jwSetFullscreen=l.jwDetachMedia=l.jwAttachMedia=P;var h=t(l.id).plugins;h.vast&&h.vast.jwPauseAd!==P&&(H={jwPlayAd:h.vast.jwPlayAd,jwPauseAd:h.vast.jwPauseAd},h.vast.jwPlayAd=h.vast.jwPauseAd=P),A(),p(!0),n!==B&&(L.setup(t.cast.setupCastConfig(u,I),u),t.cast.loader.sendDummyMedia(n))}}function w(e){r.log("Cast Session status",e),e?A():(L.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:u.state,newstate:o.BUFFERING}),E())}function E(){if(r.log("_sessionStopped"),O&&(k(),O=null),F){delete l.jwSkipAd,delete l.jwClickAd,l.initializeAPI();var e=t(l.id).plugins;e.vast&&i.extend(e.vast,H),u.volume=c,u.mute=d,u.setVideoProvider(F),u.duration=0,L&&(L.destroy(),L=null),M&&(M.destroy(),M=null),u.state!==o.IDLE?i.isIPad()||i.isIPod()?(l.jwStop(!0),F.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE})):(u.state=o.IDLE,l.jwPlay(!0),l.jwSeek(u.position)):F.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE}),F=null}p(!1),null!==U&&(b(U),U=null)}function k(){O.removeUpdateListener(w),O.removeMessageListener(r.NS,S)}function S(e,t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";C(n)}function C(e){if("state"===e.type)M&&(e.diff.newstate||e.diff.position)&&(M.destroy(),M=null,u.setVideoProvider(L),u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,{done:!0})),L.updateModel(e.diff,e.type),T(e.diff);else if("ad"===e.type){null===M&&((M=new r.adprovider(r.NS,O)).init(),u.setVideoProvider(M)),M.updateModel(e.diff,e.type);var t=M.getAdModel();e.diff.clickthrough&&(t.onClick=l.jwClickAd),e.diff.skipoffset&&(t.onSkipAd=l.jwSkipAd),u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,t),e.diff.complete&&M.resetAdModel()}else"connection"===e.type?!0===e.closed&&_():r.error("received unhandled message",e.type,e)}function T(e){void 0!==e.item&&u.item!==e.item&&(u.item=e.item,u.sendEvent(a.JWPLAYER_PLAYLIST_ITEM,{index:u.item}))}function A(){if(O&&O.receiver){var e=O.receiver.volume;if(e){var t=100*e.level|0;x(!!e.muted),R(t)}}}function R(e){var t=D.volume!==e;return t&&(D.volume=e,L.sendEvent(a.JWPLAYER_MEDIA_VOLUME,{volume:e})),t}function x(e){var t=D.mute!==e;return t&&(D.mute=e,L.sendEvent(a.JWPLAYER_MEDIA_MUTE,{mute:e})),t}function P(){}var I,O=null,j={available:!1,active:!1,deviceName:""},D={volume:null,mute:null},N=i.getAbsolutePath(e.location.href),L=null,M=null,F=null;c=u.volume,d=u.mute;var B=null,U=null,H=null;n(I=i.extend({},s,u.cast),"loadscreen"),n(I,"endscreen"),n(I,"logo"),!I.appid||e.cast&&e.cast.receiver||(r.loader.addEventListener("availability",function(e){e=!!r.available(e.availability),j.available!==e&&(j.available=e,m(a.JWPLAYER_CAST_AVAILABLE))}),r.loader.addEventListener("session",function(e){r.log("existing session",e),!O&&!B&&(B=e.session).addMessageListener(r.NS,h)}),r.loader.initialize(I.appid)),this.startCasting=function(){O||l.jwInstreamState()||e.chrome.cast.requestSession(b,g)},this.stopCasting=_,this.openExtension=function(){l.jwInstreamState()||e.chrome.cast.requestSession(b,v)}},r.log=function(){if(r.debug){var e=Array.prototype.slice.call(arguments,0);console.log.apply(console,e)}},r.error=function(){var e=Array.prototype.slice.call(arguments,0);console.error.apply(console,e)}}(window,jwplayer),function(e){function t(e){g.log("existing session",e),!m&&!h&&(h=e.session).addMessageListener(g.NS,n)}function n(t,r){var i=JSON.parse(r),o=h;if(!i)throw"Message not proper JSON";i.reconcile&&(h.removeMessageListener(g.NS,n),i.receiverFriendlyName=h.receiver.friendlyName,i.pageUrl&&i.diff.id&&i.appid||(i.pageUrl=E,i.diff.id=e().id,i.appid=f,h=m=null),b[i.diff.id]&&f===i.appid&&i.pageUrl===E&&(d=i.diff.id,f=i.appid,u(d,"jwInstreamDestroy"),a(o),u(d,w.message,i),h=null))}function r(){m&&(m.removeUpdateListener(l),m.removeMessageListener(g.NS,o),m.stop(function(){void 0!==p&&null!==p&&(a(p),p=null)}.bind(this),s.bind(this)),m=null),u(d,w.cleanup)}function i(e,t){m.sendMessage(g.NS,{command:e,args:t},v.noop,function(e){g.error("message send error",e)})}function a(t){var n=e(d);m?(r(),p=t):((m=t).addMessageListener(g.NS,o),m.addUpdateListener(l),n=e.cast.setupFlashCastConfig(n),h!==m&&(i("setup",n),e.cast.loader.sendDummyMedia(m)),u(d,w.connected,{receiverFriendlyName:t.receiver.friendlyName}))}function o(e,t){if(t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";u(d,w.message,n)}}function s(e){u(d,w.error,e||{})}function l(e){e?c():r()}function u(t,n,r){r?e(t).callInternal(n,r):e(t).callInternal(n)}function c(){if(m&&m.receiver&&(n=m.receiver.volume)){var t=100*n.level|0,n=!!n.muted;e(d).setVolume(t).setMute(n)}}var d,f,h,p,m,g=e.cast,v=e.utils,_=e._,y=window.chrome||{},b={},w={},E=v.getAbsolutePath(window.location.href);g.NS="urn:x-cast:com.longtailvideo.jwplayer",g.flash={checkAvailability:function(e,n,r){w=r,f=n,b[e]=!0,g.loader.addEventListener("availability",function(t){"available"===t.availability&&u(e,w.available,t)}),g.loader.addEventListener("session",t),g.loader.initialize(n)},startCasting:function(e){d=e,y.cast.requestSession(a.bind(this),s.bind(this))},stopCasting:r,openExtension:function(e){d=e,y.cast.requestSession(a.bind(this),s.bind(this))},mute:function(e){m.setReceiverMuted(e,c,function(e){g.error("set muted error",e)})},volume:function(e){e=Math.max(0,Math.min(e/100,1)),m.setReceiverVolumeLevel(e,c,function(e){g.error("set volume error",e)})},messageReceiver:i,canCastItem:function(t){return _.any(t.levels,function(t){return e.embed.html5CanPlay(t.file,t.type)||"hls"===t.type})}}}(window.jwplayer),function(e,t){function n(e){var n=new t.cast.media.MediaInfo("");n.contentType="video/mp4",(n=new t.cast.media.LoadRequest(n)).autoplay=!1,e.loadMedia(n)}function r(){t&&t.cast&&t.cast.isAvailable&&!c.apiConfig?(c.apiConfig=new t.cast.ApiConfig(new t.cast.SessionRequest(p),s,l,t.cast.AutoJoinPolicy.ORIGIN_SCOPED),t.cast.initialize(c.apiConfig,o,a)):15>h++&&setTimeout(r,1e3)}function i(){u&&(u.resetEventListeners(),u=null)}function a(){c.apiConfig=null}function o(){}function s(e){m.sendEvent("session",{session:e}),e.sendMessage(c.NS,{whoami:1}),0===e.media.length&&n(e)}function l(e){c.availability=e,m.sendEvent("availability",{availability:e})}window.chrome=t;var u,c=e.cast,d=e.utils,f=e.events,h=0,p=null,m=d.extend({initialize:function(e){p=e,null!==c.availability?m.sendEvent("availability",{availability:c.availability}):t&&t.cast?r():u||((u=new d.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js")).addEventListener(f.ERROR,i),u.addEventListener(f.COMPLETE,r),u.load())}},new f.eventdispatcher("cast.loader"));e.cast.loader=m,e.cast.loader.sendDummyMedia=n}(window.jwplayer,window.chrome||{}),function(e,t){var n=[],r=e.utils,i=e.events,a=e._,o=0,s=i.state,l="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),u="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),c={onBufferChange:i.JWPLAYER_MEDIA_BUFFER,onBufferFull:i.JWPLAYER_MEDIA_BUFFER_FULL,onError:i.JWPLAYER_ERROR,onSetupError:i.JWPLAYER_SETUP_ERROR,onFullscreen:i.JWPLAYER_FULLSCREEN,onMeta:i.JWPLAYER_MEDIA_META,onMute:i.JWPLAYER_MEDIA_MUTE,onPlaylist:i.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:i.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:i.JWPLAYER_PLAYLIST_COMPLETE,onReady:i.API_READY,onResize:i.JWPLAYER_RESIZE,onComplete:i.JWPLAYER_MEDIA_COMPLETE,onSeek:i.JWPLAYER_MEDIA_SEEK,onTime:i.JWPLAYER_MEDIA_TIME,onVolume:i.JWPLAYER_MEDIA_VOLUME,onBeforePlay:i.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:i.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:i.JWPLAYER_DISPLAY_CLICK,onControls:i.JWPLAYER_CONTROLS,onQualityLevels:i.JWPLAYER_MEDIA_LEVELS,onQualityChange:i.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:i.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:i.JWPLAYER_CAPTIONS_CHANGED,onAdError:i.JWPLAYER_AD_ERROR,onAdClick:i.JWPLAYER_AD_CLICK,onAdImpression:i.JWPLAYER_AD_IMPRESSION,onAdTime:i.JWPLAYER_AD_TIME,onAdComplete:i.JWPLAYER_AD_COMPLETE,onAdCompanions:i.JWPLAYER_AD_COMPANIONS,onAdSkipped:i.JWPLAYER_AD_SKIPPED,onAdPlay:i.JWPLAYER_AD_PLAY,onAdPause:i.JWPLAYER_AD_PAUSE,onAdMeta:i.JWPLAYER_AD_META,onCast:i.JWPLAYER_CAST_SESSION,onAudioTrackChange:i.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:i.JWPLAYER_AUDIO_TRACKS},d={onBuffer:s.BUFFERING,onPause:s.PAUSED,onPlay:s.PLAYING,onIdle:s.IDLE};e.api=function(o){function f(e,t){r.foreach(e,function(e,n){y[e]=function(e){return t(n,e)}})}function h(e,t){var n="jw"+t.charAt(0).toUpperCase()+t.slice(1);y[t]=function(){var t=g.apply(this,[n].concat(Array.prototype.slice.call(arguments,0)));return e?y:t}}function p(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+y.id+'").dispatchEvent("'+t+'", dat); }')}catch(e){if("flash"===y.renderingMode){var n=document.createElement("a");n.href=v.data,n.protocol!==location.protocol&&r.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+n.protocol+"] are hosted using different protocols")}r.log("Could not add internal listener")}}function m(e,t){return b[e]||(b[e]=[],v&&E&&p(v,e)),b[e].push(t),y}function g(){if(E){if(v){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof v[t]){switch(e.length){case 6:return v[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return v[t](e[0],e[1],e[2],e[3],e[4]);case 4:return v[t](e[0],e[1],e[2],e[3]);case 3:return v[t](e[0],e[1],e[2]);case 2:return v[t](e[0],e[1]);case 1:return v[t](e[0])}return v[t]()}}return null}k.push(arguments)}var v,_,y=this,b={},w={},E=!1,k=[],S={},C={};return y.container=o,y.id=o.id,y.setup=function(t){if(e.embed){e.api.destroyPlayer(y.id);var n=new e.api(y.container);return e.api.addPlayer(n),n.config=t,n._embedder=new e.embed(n),n._embedder.embed(),n}return y},y.getContainer=function(){return y.container},y.addButton=function(e,t,n,i){try{C[i]=n,g("jwDockAddButton",e,t,'jwplayer("'+y.id+'").callback("'+i+'")',i)}catch(e){r.log("Could not add dock button"+e.message)}},y.removeButton=function(e){g("jwDockRemoveButton",e)},y.callback=function(e){C[e]&&C[e]()},y.getMeta=function(){return y.getItemMeta()},y.getPlaylist=function(){var e=g("jwGetPlaylist");return"flash"===y.renderingMode&&r.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},y.getPlaylistItem=function(e){return r.exists(e)||(e=y.getPlaylistIndex()),y.getPlaylist()[e]},y.getRenderingMode=function(){return y.renderingMode},y.setFullscreen=function(e){return r.exists(e)?g("jwSetFullscreen",e):g("jwSetFullscreen",!g("jwGetFullscreen")),y},y.setMute=function(e){return r.exists(e)?g("jwSetMute",e):g("jwSetMute",!g("jwGetMute")),y},y.lock=function(){return y},y.unlock=function(){return y},y.load=function(t){return g("jwInstreamDestroy"),e(y.id).plugins.googima&&g("jwDestroyGoogima"),g("jwLoad",t),y},y.playlistItem=function(e){return g("jwPlaylistItem",parseInt(e,10)),y},y.resize=function(e,t){if("flash"!==y.renderingMode)g("jwResize",e,t);else{var n=document.getElementById(y.id+"_wrapper"),i=document.getElementById(y.id+"_aspect");i&&(i.style.display="none"),n&&(n.style.display="block",n.style.width=r.styleDimension(e),n.style.height=r.styleDimension(t))}return y},y.play=function(e){if(e!==t)return g("jwPlay",e),y;e=y.getState();var n=_&&_.getState();return n&&(n===s.IDLE||n===s.PLAYING||n===s.BUFFERING?g("jwInstreamPause"):g("jwInstreamPlay")),e===s.PLAYING||e===s.BUFFERING?g("jwPause"):g("jwPlay"),y},y.pause=function(e){return e===t?(e=y.getState())===s.PLAYING||e===s.BUFFERING?g("jwPause"):g("jwPlay"):g("jwPause",e),y},y.createInstream=function(){return new e.api.instream(this,v)},y.setInstream=function(e){return _=e},y.loadInstream=function(e,t){return(_=y.setInstream(y.createInstream()).init(t)).loadItem(e),_},y.destroyPlayer=function(){E=!0,g("jwPlayerDestroy")},y.playAd=function(t){var n=e(y.id).plugins;n.vast?n.vast.jwPlayAd(t):g("jwPlayAd",t)},y.pauseAd=function(){var t=e(y.id).plugins;t.vast?t.vast.jwPauseAd():g("jwPauseAd")},f(d,function(e,t){return w[e]||(w[e]=[],m(i.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n===e){var r=w[n];if(r)for(var i=0;i<r.length;i++){var a=r[i];"function"==typeof a&&a.call(this,{oldstate:t,newstate:n})}}})),w[e].push(t),y}),f(c,m),r.foreach(l,function(e,t){h(!1,t)}),r.foreach(u,function(e,t){h(!0,t)}),y.remove=function(){this._embedder&&this._embedder.destroy&&this._embedder.destroy(),k=[];var e=1<a.size(a.where(n,{id:y.id}));e||r.clearCss("#"+y.id);var t=document.getElementById(y.id+("flash"===y.renderingMode?"_wrapper":""));if(t){if("html5"===y.renderingMode)y.destroyPlayer();else if(r.isMSIE(8)){var i=document.getElementById(y.id);if(i&&i.parentNode){for(var o in i.style.display="none",i)"function"==typeof i[o]&&(i[o]=null);i.parentNode.removeChild(i)}}e||((e=document.createElement("div")).id=y.id,t.parentNode.replaceChild(e,t))}n=a.filter(n,function(e){return e.uniqueId!==y.uniqueId})},y.registerPlugin=function(t,n,r,i){e.plugins.registerPlugin(t,n,r,i)},y.setPlayer=function(e,t){v=e,y.renderingMode=t},y.detachMedia=function(){if("html5"===y.renderingMode)return g("jwDetachMedia")},y.attachMedia=function(e){if("html5"===y.renderingMode)return g("jwAttachMedia",e)},y.getAudioTracks=function(){return g("jwGetAudioTracks")},y.removeEventListener=function(e,t){var n=b[e];if(n)for(var r=n.length;r--;)n[r]===t&&n.splice(r,1)},y.dispatchEvent=function(e,t){if(n=b[e])for(var n=n.slice(0),a=r.translateEventResponse(e,t),o=0;o<n.length;o++){var s=n[o];if("function"==typeof s)try{e===i.JWPLAYER_PLAYLIST_LOADED&&r.deepReplaceKeyName(a.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),s.call(this,a)}catch(e){r.log("There was an error calling back an event handler",e)}}},y.dispatchInstreamEvent=function(e){_&&_.dispatchEvent(e,arguments)},y.callInternal=g,y.playerReady=function(e){for(E=!0,v||y.setPlayer(document.getElementById(e.id)),y.container=document.getElementById(y.id),r.foreach(b,function(e){p(v,e)}),m(i.JWPLAYER_PLAYLIST_ITEM,function(){S={}}),m(i.JWPLAYER_MEDIA_META,function(e){r.extend(S,e.metadata)}),m(i.JWPLAYER_VIEW_TAB_FOCUS,function(e){var t=y.getContainer();!0===e.hasFocus?r.addClass(t,"jw-tab-focus"):r.removeClass(t,"jw-tab-focus")}),y.dispatchEvent(i.API_READY);0<k.length;)g.apply(y,k.shift())},y.getItemMeta=function(){return S},y},e.playerReady=function(t){var n=e.api.playerById(t.id);n||(n=e.api.selectPlayer(t.id)),n.playerReady(t)},e.api.selectPlayer=function(t){var i;return r.exists(t)||(t=0),t.nodeType?i=t:"string"==typeof t&&(i=document.getElementById(t)),i?(t=e.api.playerById(i.id))?t:new e.api(i):"number"==typeof t?n[t]:null},e.api.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id===e)return n[t];return null},e.api.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]===e)return e;return o++,e.uniqueId=o,n.push(e),e},e.api.destroyPlayer=function(e){e=a.where(n,{id:e}),a.each(e,a.partial(a.result,a,"remove"))}}(window.jwplayer),function(e){var t=e.events,n=e.utils,r=t.state;e.api.instream=function(e,i){function a(t,n){return u[t]||(u[t]=[],i.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),u[t].push(n),this}function o(e,n){return c[e]||(c[e]=[],a(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,r=t.oldstate;if(n===e){var i=c[n];if(i)for(var a=0;a<i.length;a++){var o=i[a];"function"==typeof o&&o.call(this,{oldstate:r,newstate:n,type:t.type})}}})),c[e].push(n),this}var s,l,u={},c={},d=this;d.type="instream",d.init=function(){return e.callInternal("jwInitInstream"),d},d.loadItem=function(t,r){s=t,l=r||{},"array"===n.typeOf(t)?e.callInternal("jwLoadArrayInstream",s,l):e.callInternal("jwLoadItemInstream",s,l)},d.removeEvents=function(){u=c={}},d.removeEventListener=function(e,t){var n=u[e];if(n)for(var r=n.length;r--;)n[r]===t&&n.splice(r,1)},d.dispatchEvent=function(e,t){if(r=u[e])for(var r=r.slice(0),i=n.translateEventResponse(e,t[1]),a=0;a<r.length;a++){var o=r[a];"function"==typeof o&&o.call(this,i)}},d.onError=function(e){return a(t.JWPLAYER_ERROR,e)},d.onMediaError=function(e){return a(t.JWPLAYER_MEDIA_ERROR,e)},d.onFullscreen=function(e){return a(t.JWPLAYER_FULLSCREEN,e)},d.onMeta=function(e){return a(t.JWPLAYER_MEDIA_META,e)},d.onMute=function(e){return a(t.JWPLAYER_MEDIA_MUTE,e)},d.onComplete=function(e){return a(t.JWPLAYER_MEDIA_COMPLETE,e)},d.onPlaylistComplete=function(e){return a(t.JWPLAYER_PLAYLIST_COMPLETE,e)},d.onPlaylistItem=function(e){return a(t.JWPLAYER_PLAYLIST_ITEM,e)},d.onTime=function(e){return a(t.JWPLAYER_MEDIA_TIME,e)},d.onBuffer=function(e){return o(r.BUFFERING,e)},d.onPause=function(e){return o(r.PAUSED,e)},d.onPlay=function(e){return o(r.PLAYING,e)},d.onIdle=function(e){return o(r.IDLE,e)},d.onClick=function(e){return a(t.JWPLAYER_INSTREAM_CLICK,e)},d.onInstreamDestroyed=function(e){return a(t.JWPLAYER_INSTREAM_DESTROYED,e)},d.onAdSkipped=function(e){return a(t.JWPLAYER_AD_SKIPPED,e)},d.play=function(e){i.jwInstreamPlay(e)},d.pause=function(e){i.jwInstreamPause(e)},d.hide=function(){e.callInternal("jwInstreamHide")},d.destroy=function(){d.removeEvents(),e.callInternal("jwInstreamDestroy")},d.setText=function(e){i.jwInstreamSetText(e||"")},d.getState=function(){return i.jwInstreamState()},d.setClick=function(e){i.jwInstreamClick&&i.jwInstreamClick(e)}}}(jwplayer),function(e){var t=e.api,n=t.selectPlayer,r=e._;t.selectPlayer=function(t){var r=n.apply(this,arguments);return r||{registerPlugin:function(t,n,r){"jwpsrv"!==t&&e.plugins.registerPlugin(t,n,r)}}},e.unregisteredProviders=[],t.registerProvider=function(t){e&&e.html5&&r.isFunction(e.html5.registerProvider)?e.html5.registerProvider(t):e.unregisteredProviders.push(t)}}(jwplayer))},"141G":function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".NS-project_faqs__edit",function(e){var t=(0,r.default)("#faq-template").children().clone(),n=e.find("ul.faqs");function i(){n.find("li.js-faq:not(.deleted) input.position").each(function(e,t){(0,r.default)(t).val(e+1)})}e.on("click","form .js-link-to-new-question",function(){var e=t.clone_form_template();return e.find(".js-delete").val(0),e.removeClass("hidden").appendTo(n),i(),!1}),e.on("click",".js-delete",function(){var e=(0,r.default)(this).closest("li.js-faq").find("input.js-delete").attr("id");(0,r.default)(".js-faq-delete-modal").find(".js-mark-to-delete").data("delete-input",e)}),(0,r.default)(".js-faq-delete-modal").on("click",".js-mark-to-delete",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".js-faq-delete-modal"),n=(0,r.default)(this).data("delete-input"),i=(0,r.default)("#"+n),a=i.closest("li.js-faq");return i.val(1),a.addClass("deleted").fadeOut("slow"),t.trigger("close"),!1}),n.sortable({containment:".NS-project_faqs__edit",placeholder:"project-faq-placeholder",handle:".js-move",axis:"y",tolerance:"pointer",items:"li.js-faq",start:function(e,t){(0,r.default)(".project-faq-placeholder").css("height",t.item.height()+"px"),t.item.addClass("reordering")},stop:function(e,t){t.item.removeClass("reordering")},update:i})})},"16WZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupScrollLocking=t.rebindScroll=t.combineHeight=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=o(n("l/Rs")),a=o(n("shXp"));function o(e){return e&&e.__esModule?e:{default:e}}var s=[],l=function(e){var t=e.element,n=e.offsets,r=void 0===n?[]:n,a=e.styles,o=void 0===a?function(){return{onLock:{},offLock:{}}}:a,s=(0,i.default)(t);return s.length?{styles:o,options:e,element:s,offsetTop:s.parent().offset().top,eventName:"scroll."+s.selector,offset:c(r)}:null},u=function(e){var t=e.element,n=e.eventName,a=e.offsetTop,o=e.offset,s=!1,l=(0,e.styles)();(0,i.default)(window).off(n).on(n,function(){var e=this.scrollY;!s&&e>=a-o?(t.addClass("fixed").css(r({top:o+"px"},l.onLock)),s=!0):s&&e<a-o&&(t.removeClass("fixed").css(r({top:""},l.offLock)),s=!1)}).trigger(n)},c=t.combineHeight=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return(0,i.default)(e).height()}).reduce(function(e,t){return e+t})},d=t.rebindScroll=function(){return s.forEach(function(e){return u(l(e.options))})};t.setupScrollLocking=function(e){(0,i.default)(document).on("ready",function(){var t=l(e);t&&(s=s.concat(t),u(t))})};(0,i.default)(window).on("resize",a.default.debounce(d,250))},"17bY":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),(0,a.default)("span.character_counter").livequery(function(){var e=(0,a.default)(this);(0,a.default)(document).on("keyup",e.attr("rel"),function(){e.html(parseInt((0,a.default)(this).attr("maxlength"),10)-(0,a.default)(this).val().length)})})},"1B3E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlaggingForm=t.SubmitButtonContainer=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("b04z"),s=n("JIXV"),l=n("Z5jf"),u=n("ci1u");var c=t.SubmitButtonContainer=function(e){var t=e.state,n=e.dispatch,r=e.kind,i=t.details;switch(t.flaggingFormStatus){case s.FLAGGING_SUBMITTED:return a.default.createElement("div",null,a.default.createElement(u.Icon,{size:"large",name:"icon--circle-loader",atoms:["ml1"]}),a.default.createElement("em",{className:"ml2 dark-grey-300"},(0,l.boundT)("project_page.flagging.Submitting")));case s.FLAGGING_FAILED:return a.default.createElement("p",{className:"red ml1"},(0,l.boundT)("project_page.flagging.Flagging_failed_message"));default:return a.default.createElement(o.Button,{color:"blue",disabled:!r,onClick:function(){return n((0,s.submitFlaggingAction)(r,i))}},(0,l.boundT)("project_page.flagging.Report_project_submit"))}};t.FlaggingForm=function(e){var t=e.state,n=e.dispatch,r=e.kind,i=e.placeholder,o=t.flaggingFormStatus===s.FLAGGING_SUBMITTED;return a.default.createElement("div",null,a.default.createElement("div",{className:"field mt2"},a.default.createElement("textarea",{onChange:function(e){return n((0,s.updateDetailsAction)(e))},value:t.details,className:"textarea mb2 p3",rows:"5",disabled:o,placeholder:i})),a.default.createElement(c,{state:t,dispatch:n,kind:r}))}},"1C6n":function(e,t,n){"use strict";var r=a(n("8NzR")),i=a(n("l/Rs"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("#events_fourth_birthday",function(){var e;(0,i.default)("#the_right_way").hover(function(){(0,i.default)("body").addClass("reveal")},function(){(0,i.default)("body").removeClass("reveal")}),e=["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"],(0,i.default)(e).each(function(){(new Image).src=this})})},"1LFw":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=new Array(n),i=arguments.length>=2?arguments[1]:void 0,a=0;a<n;a++)a in t&&(r[a]=e.call(i,t[a],a,t));return r});var t="A".charCodeAt(0),n="Z".charCodeAt(0);function r(e){return(e=(e=e.toUpperCase()).substr(4)+e.substr(0,4)).split("").map(function(e){var r=e.charCodeAt(0);return r>=t&&r<=n?r-t+10:e}).join("")}function i(e){for(var t,n=e;n.length>2;)t=n.slice(0,9),n=parseInt(t,10)%97+n.slice(t.length);return parseInt(n,10)%97}function a(e,t,n,r){this.countryCode=e,this.length=t,this.structure=n,this.example=r}a.prototype._regex=function(){return this._cachedRegex||(this._cachedRegex=(e=this.structure,t=e.match(/(.{3})/g).map(function(e){var t,n=e.slice(0,1),r=parseInt(e.slice(1),10);switch(n){case"A":t="0-9A-Za-z";break;case"B":t="0-9A-Z";break;case"C":t="A-Za-z";break;case"F":t="0-9";break;case"L":t="a-z";break;case"U":t="A-Z";break;case"W":t="0-9a-z"}return"(["+t+"]{"+r+"})"}),new RegExp("^"+t.join("")+"$")));var e,t},a.prototype.isValid=function(e){return this.length==e.length&&this.countryCode===e.slice(0,2)&&this._regex().test(e.slice(4))&&1==i(r(e))},a.prototype.toBBAN=function(e,t){return this._regex().exec(e.slice(4)).slice(1).join(t)},a.prototype.fromBBAN=function(e){if(!this.isValidBBAN(e))throw new Error("Invalid BBAN");var t=("0"+(98-i(r(this.countryCode+"00"+e)))).slice(-2);return this.countryCode+t+e},a.prototype.isValidBBAN=function(e){return this.length-4==e.length&&this._regex().test(e)};var o={};function s(e){o[e.countryCode]=e}s(new a("AD",24,"F04F04A12","AD1200012030200359100100")),s(new a("AE",23,"F03F16","AE070331234567890123456")),s(new a("AL",28,"F08A16","AL47212110090000000235698741")),s(new a("AT",20,"F05F11","AT611904300234573201")),s(new a("AZ",28,"U04A20","AZ21NABZ00000000137010001944")),s(new a("BA",20,"F03F03F08F02","BA391290079401028494")),s(new a("BE",16,"F03F07F02","BE68539007547034")),s(new a("BG",22,"U04F04F02A08","BG80BNBG96611020345678")),s(new a("BH",22,"U04A14","BH67BMAG00001299123456")),s(new a("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1")),s(new a("CH",21,"F05A12","CH9300762011623852957")),s(new a("CR",21,"F03F14","CR0515202001026284066")),s(new a("CY",28,"F03F05A16","CY17002001280000001200527600")),s(new a("CZ",24,"F04F06F10","CZ6508000000192000145399")),s(new a("DE",22,"F08F10","DE89370400440532013000")),s(new a("DK",18,"F04F09F01","DK5000400440116243")),s(new a("DO",28,"U04F20","DO28BAGR00000001212453611324")),s(new a("EE",20,"F02F02F11F01","EE382200221020145685")),s(new a("ES",24,"F04F04F01F01F10","ES9121000418450200051332")),s(new a("FI",18,"F06F07F01","FI2112345600000785")),s(new a("FO",18,"F04F09F01","FO6264600001631634")),s(new a("FR",27,"F05F05A11F02","FR1420041010050500013M02606")),s(new a("GB",22,"U04F06F08","GB29NWBK60161331926819")),s(new a("GE",22,"U02F16","GE29NB0000000101904917")),s(new a("GI",23,"U04A15","GI75NWBK000000007099453")),s(new a("GL",18,"F04F09F01","GL8964710001000206")),s(new a("GR",27,"F03F04A16","GR1601101250000000012300695")),s(new a("GT",28,"A04A20","GT82TRAJ01020000001210029690")),s(new a("HR",21,"F07F10","HR1210010051863000160")),s(new a("HU",28,"F03F04F01F15F01","HU42117730161111101800000000")),s(new a("IE",22,"U04F06F08","IE29AIBK93115212345678")),s(new a("IL",23,"F03F03F13","IL620108000000099999999")),s(new a("IS",26,"F04F02F06F10","IS140159260076545510730339")),s(new a("IT",27,"U01F05F05A12","IT60X0542811101000000123456")),s(new a("KW",30,"U04A22","KW81CBKU0000000000001234560101")),s(new a("KZ",20,"F03A13","KZ86125KZT5004100100")),s(new a("LB",28,"F04A20","LB62099900000001001901229114")),s(new a("LI",21,"F05A12","LI21088100002324013AA")),s(new a("LT",20,"F05F11","LT121000011101001000")),s(new a("LU",20,"F03A13","LU280019400644750000")),s(new a("LV",21,"U04A13","LV80BANK0000435195001")),s(new a("MC",27,"F05F05A11F02","MC5811222000010123456789030")),s(new a("MD",24,"U02F18","MD24AG000225100013104168")),s(new a("ME",22,"F03F13F02","ME25505000012345678951")),s(new a("MK",19,"F03A10F02","MK07250120000058984")),s(new a("MR",27,"F05F05F11F02","MR1300020001010000123456753")),s(new a("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S")),s(new a("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR")),s(new a("NL",18,"U04F10","NL91ABNA0417164300")),s(new a("NO",15,"F04F06F01","NO9386011117947")),s(new a("PK",24,"U04A16","PK36SCBL0000001123456702")),s(new a("PL",28,"F08F16","PL61109010140000071219812874")),s(new a("PS",29,"U04A21","PS92PALS000000000400123456702")),s(new a("PT",25,"F04F04F11F02","PT50000201231234567890154")),s(new a("RO",24,"U04A16","RO49AAAA1B31007593840000")),s(new a("RS",22,"F03F13F02","RS35260005601001611379")),s(new a("SA",24,"F02A18","SA0380000000608010167519")),s(new a("SE",24,"F03F16F01","SE4550000000058398257466")),s(new a("SI",19,"F05F08F02","SI56263300012039086")),s(new a("SK",24,"F04F06F10","SK3112000000198742637541")),s(new a("SM",27,"U01F05F05A12","SM86U0322509800000000270100")),s(new a("TN",24,"F02F03F13F02","TN5910006035183598478831")),s(new a("TR",26,"F05A01A16","TR330006100519786457841326")),s(new a("VG",24,"U04F16","VG96VPVG0000012345678901")),s(new a("AO",25,"F21","AO69123456789012345678901")),s(new a("BF",27,"F23","BF2312345678901234567890123")),s(new a("BI",16,"F12","BI41123456789012")),s(new a("BJ",28,"F24","BJ39123456789012345678901234")),s(new a("CI",28,"U01F23","CI17A12345678901234567890123")),s(new a("CM",27,"F23","CM9012345678901234567890123")),s(new a("CV",25,"F21","CV30123456789012345678901")),s(new a("DZ",24,"F20","DZ8612345678901234567890")),s(new a("IR",26,"F22","IR861234568790123456789012")),s(new a("JO",30,"A04F22","JO15AAAA1234567890123456789012")),s(new a("MG",27,"F23","MG1812345678901234567890123")),s(new a("ML",28,"U01F23","ML15A12345678901234567890123")),s(new a("MZ",25,"F21","MZ25123456789012345678901")),s(new a("QA",29,"U04A21","QA30AAAA123456789012345678901")),s(new a("SN",28,"U01F23","SN52A12345678901234567890123")),s(new a("UA",29,"F25","UA511234567890123456789012345"));var l=/[^a-zA-Z0-9]/g,u=/(.{4})(?!$)/g;function c(e){return"string"==typeof e||e instanceof String}e.isValid=function(e){if(!c(e))return!1;e=this.electronicFormat(e);var t=o[e.slice(0,2)];return!!t&&t.isValid(e)},e.toBBAN=function(e,t){void 0===t&&(t=" "),e=this.electronicFormat(e);var n=o[e.slice(0,2)];if(!n)throw new Error("No country with code "+e.slice(0,2));return n.toBBAN(e,t)},e.fromBBAN=function(e,t){var n=o[e];if(!n)throw new Error("No country with code "+e);return n.fromBBAN(this.electronicFormat(t))},e.isValidBBAN=function(e,t){if(!c(t))return!1;var n=o[e];return n&&n.isValidBBAN(this.electronicFormat(t))},e.printFormat=function(e,t){return void 0===t&&(t=" "),this.electronicFormat(e).replace(u,"$1"+t)},e.electronicFormat=function(e){return e.replace(l,"").toUpperCase()},e.countries=o}(t)},"1Tla":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSelect=t.handleKeyDown=t.checkForNewSelection=t.reducer=t.noopAction=t.onValidKeyDown=t.onKeyDown=t.changeHighlightedIndex=t.changeSelectedIndex=t.closeSelect=t.checkForBlur=t.toggleSelect=t.initialState=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("EIRz"),l=n("Tvaj"),u=n("Z6GA"),c=n("ci1u"),d=n("uA/L"),f=n("4RZc"),h=n("Z5jf"),p=n("X2U3");var m=t.initialState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{isOpen:!1,currentIndex:e,highlightedIndex:e,isKeySelectionEngaged:!1}},g=t.toggleSelect=function(){return{type:"TOGGLE_SELECT"}},v=t.checkForBlur=function(e){return{type:"ON_BLUR",currentTarget:e.currentTarget}},_=t.closeSelect=function(){return{type:"CLOSE_SELECT"}},y=t.changeSelectedIndex=function(e,t,n){return{type:"CHANGE_SELECTED_INDEX",e:e,newSelectedIndex:t,trackingId:n}},b=t.changeHighlightedIndex=function(e){return{type:"CHANGE_HIGHLIGHTED_INDEX",newHighlightedIndex:e}},w=t.onKeyDown=function(e,t){return{type:"ON_KEYDOWN",options:e,e:t}},E=t.onValidKeyDown=function(e,t){return{type:"ON_VALID_KEYDOWN",keyCode:e,options:t}},k=t.noopAction=function(){return{type:"NOOP"}},S=(t.reducer=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(),n=arguments[1];switch(n.type){case"TOGGLE_SELECT":var r=t.isOpen?A:T;return(0,s.loop)(i({},t,{isOpen:!t.isOpen,highlightedIndex:t.currentIndex}),s.Cmd.run(r,{args:[e]}));case"CLOSE_SELECT":return(0,s.loop)(i({},t,{isOpen:!1}),s.Cmd.run(A,{args:[e]}));case"ON_BLUR":return(0,s.loop)(t,s.Cmd.run(I,{args:[n.currentTarget],successActionCreator:_}));case"CHANGE_SELECTED_INDEX":var a=S(t,n.newSelectedIndex),o=a.currentIndex!==t.currentIndex?s.Cmd.run(R,{args:[e,n.trackingId]}):s.Cmd.none;return(0,s.loop)(a,s.Cmd.batch([s.Cmd.run(x,{args:[n.e]}),o]));case"ON_KEYDOWN":return(0,s.loop)(t,s.Cmd.action(P(n.e,t.isOpen,n.options)));case"ON_VALID_KEYDOWN":return C(t,n.keyCode,n.options);case"CHANGE_HIGHLIGHTED_INDEX":return i({},t,{highlightedIndex:n.newHighlightedIndex});case"NOOP":default:return t}}},t.checkForNewSelection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.highlightedIndex;return t!==e.currentIndex?i({},e,{currentIndex:t,isOpen:!1,isKeySelectionEngaged:!1}):i({},e,{isOpen:!1,isKeySelectionEngaged:!1})}),C=t.handleKeyDown=function(e,t,n){if((0,l.isLetter)(t)){var r=n.findIndex(function(e){return e.label.charAt(0).toUpperCase().charCodeAt(0)==t});return i({},e,{currentIndex:r,highlightedIndex:r,isKeySelectionEngaged:!0})}switch(t){case l.SPACE:return e.isOpen?S(e):i({},e,{isOpen:!0});case l.ENTER:return e.isOpen?S(e):i({},e);case l.ESC:return i({},e,{isOpen:!1,highlightedIndex:e.currentIndex,isKeySelectionEngaged:!1});case l.UP:var a=e.highlightedIndex-1,o=Math.max(a,0);return i({},e,{highlightedIndex:o,isKeySelectionEngaged:!0});case l.DOWN:var s=n.length-1,u=e.highlightedIndex+1,c=Math.min(u,s);return i({},e,{highlightedIndex:c,isKeySelectionEngaged:!0});default:return e}},T=function(e){(0,f.track)("Opened Select",{context:e})},A=function(e){(0,f.track)("Closed Select",{context:e})},R=function(e,t){(0,f.track)("Selected Item",{context:e,id:t})},x=function(e){e.stopPropagation()},P=function(e,t,n){var r=[l.ENTER,l.SPACE,l.ESC,l.DOWN,l.UP].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l.LETTERS));return e.which===l.TAB&&t?(e.preventDefault(),k()):r.includes(e.which)?(e.preventDefault(),E(e.which,n)):k()},I=(0,u.wait)(0,function(e){return e.contains(document.activeElement)?Promise.reject("error"):Promise.resolve()}),O=(t.CustomSelect=function(e){var t=e.theme,n=void 0===t?p.defaultTheme:t,r=e.atoms,a=void 0===r?[]:r,s=e.placeholder,l=e.state,c=e.onStateChange,f=e.onBlur,h=e.options,m=e.small,_=e.titleString,E=e.toLabel,k=e.toId,S=e.hasErrors,C=void 0!==S&&S,T=e.shadow,A=void 0===T||T,R=l.isOpen,x=l.currentIndex,P=l.highlightedIndex,I=m?"h7":"h9",D=m?"body-100":"subhead-300",N=m?"py1":"py2",L=m?"px2 px3-sm":"px3",M=(0,u.computedAtoms)("absolute","w100p","shadow-3","border","shadow-card","scroll-y","max-h50","p1","bg-white","mt1","mb10","rounded","z-dropdown-3","border-box",D,a,"border-"+n["primary-light"],!R&&"visually-hide"),F=null!==x?h[x]:null,B=h.map(function(e,t){var r=x===t,a=P===t;return o.default.createElement(j,i({onOptionSelect:(0,u.compose)(c,y),onOptionHover:(0,u.compose)(c,b)},{option:e,key:t,index:t,isCurrent:r,isHighlighted:a,isOpen:R,toLabel:E,toId:k,theme:n,typeSize:D,yPaddingClass:N}))}),U=(0,u.compose)(c,v,function(e){return f&&f(),e});return o.default.createElement("div",{className:"navy-700"},_&&o.default.createElement(d.Label,{type:"body-100",weight:"medium",atoms:["mb2","soft-black"],"aria-hidden":"true"},_),o.default.createElement("div",{role:"listbox","aria-labelledby":"custom-select-heading-label",onBlur:U,onKeyDown:(0,u.compose)(c,function(e){return w(h,e)}),className:"relative w100p pointer input-keyboard-focusable-"+n["primary-light"]},o.default.createElement(O,{onDropdownContainerClick:(0,u.compose)(c,g),label:F?E(F):s,color:F?"soft-black":"dark-grey-500",heightSize:I,shadow:A,typeSize:D,yPaddingClass:N,xPaddingClasses:L,theme:n,hasErrors:C}),o.default.createElement("ul",{className:M,role:"presentation"},B)))},function(e){var t=e.color,n=e.heightSize,r=e.hasErrors,i=e.label,a=e.onDropdownContainerClick,s=e.shadow,l=e.theme,f=e.typeSize,p=e.yPaddingClass,m=e.xPaddingClasses,g=s?"border-transparent":"border-grey-400",v=(0,u.computedAtoms)(s&&"shadow-hover","border",r?"border-red-400":g,"hover-border-"+l["primary-light"],"transition-all","rounded",p,m,"bg-white flex","items-center",s&&"shadow-2",n,"input-keyboard-focusable-"+l["primary-light"]);return o.default.createElement("div",{className:v,onClick:a,"aria-hidden":"true","aria-label":(0,h.boundT)("components.custom_select.select_an_option"),tabIndex:"0"},o.default.createElement(d.Span,{id:"custom-select-heading-label",type:f,atoms:["grow-1","text-truncate","pr1","book",t]},i),o.default.createElement(c.Icon,{name:"delta-down",size:"10",atoms:["flex-noshrink"]}))}),j=function(e){var t=e.option,n=e.index,r=e.isOpen,i=e.onOptionSelect,a=e.onOptionHover,s=e.isCurrent,l=e.isHighlighted,u=e.toLabel,f=e.toId,h=e.theme,p=e.typeSize,m=e.yPaddingClass,g=["px2 flex items-center transition-all lh3 soft-black"].concat(l?["bg-grey-400"]:[]).concat([m]).join(" ");return o.default.createElement("li",{role:"option",tabIndex:r?"0":"-1","aria-selected":s,onClick:function(e){return i(e,n,f(t))},onMouseOver:function(){return a(n)},className:g,onKeyDown:function(){},onFocus:function(){}},o.default.createElement(d.Span,{id:"custom-select-heading-label",type:p,atoms:["mr2"]},u(t)),s&&o.default.createElement("span",{className:"circle flex-noshrink h3 w3 bg-"+h["primary-accent"]+" inline-flex justify-center items-center"},o.default.createElement(c.Icon,{name:"check",size:"9",atoms:["relative","fill-white"]})))}},"1Vzf":function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("h8C7"),n("LNuh"),(0,i.default)(".js-asset-uploads",function(e){var t=e.find(".js-asset-uploads--tracks");e.on("ksr_uploader:uploaded",function(e,n){var i=(0,r.default)(this).data("subtitles-path");i&&0!==t.length&&(t.empty(),r.default.ajax({url:i,method:"GET",data:{captionable_id:n.id,captionable_type:n.type}}).success(function(e){t.html(e.html)}))}),e.on("ksr_uploader:remove",function(){t.empty()})}),(0,r.default)(".js-asset-uploads--tracks").livequery(function(){(0,r.default)(this).videoTracksEditor()})},"1gbM":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("click",".location_list .big_locations li",function(){window.location=(0,a.default)(this).find(".name a").attr("href")})})},"1h7p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("kVy0");t.Time=function(e){var t=e.format,n=e.date;return a.default.createElement("time",{dateTime:n},(0,o.format)(t,n))}},"1i/z":function(e,t,n){var r,i,a,o;o=function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function r(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var s=/\S/;function l(e){return!function(e,t){return o.call(e,t)}(s,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,d=/\s+/,f=/\s*=/,h=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var i,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(t=s.view,i=e.split("."),o=0;null!=t&&o<i.length;)o===i.length-1&&(l=a(t,i[o])),t=t[i[o++]];else t=s.view[e],l=a(s.view,e);if(l)break;s=s.parent}n[e]=t}return r(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,r){var a=this.cache,o=a[t];return null==o&&(o=a[t]=function(t,r){if(!t)return[];var a,o,s,u=[],g=[],v=[],_=!1,y=!1;function b(){if(_&&!y)for(;v.length;)delete g[v.pop()];else v=[];_=!1,y=!1}function w(e){if("string"==typeof e&&(e=e.split(d,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(i(e[0])+"\\s*"),o=new RegExp("\\s*"+i(e[1])),s=new RegExp("\\s*"+i("}"+e[1]))}w(r||e.tags);for(var E,k,S,C,T,A,R=new m(t);!R.eos();){if(E=R.pos,S=R.scanUntil(a))for(var x=0,P=S.length;x<P;++x)l(C=S.charAt(x))?v.push(g.length):y=!0,g.push(["text",C,E,E+1]),E+=1,"\n"===C&&b();if(!R.scan(a))break;if(_=!0,k=R.scan(p)||"name",R.scan(c),"="===k?(S=R.scanUntil(f),R.scan(f),R.scanUntil(o)):"{"===k?(S=R.scanUntil(s),R.scan(h),R.scanUntil(o),k="&"):S=R.scanUntil(o),!R.scan(o))throw new Error("Unclosed tag at "+R.pos);if(T=[k,S,E,R.pos],g.push(T),"#"===k||"^"===k)u.push(T);else if("/"===k){if(!(A=u.pop()))throw new Error('Unopened section "'+S+'" at '+E);if(A[1]!==S)throw new Error('Unclosed section "'+A[1]+'" at '+E)}else"name"===k||"{"===k||"&"===k?y=!0:"="===k&&w(S)}if(A=u.pop())throw new Error('Unclosed section "'+A[1]+'" at '+R.pos);return function(e){for(var t,n=[],r=n,i=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(g))}(t,r)),o},v.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof g?t:new g(t);return this.renderTokens(r,i,n,e)},v.prototype.renderTokens=function(e,t,n,r){for(var i,a,o,s="",l=0,u=e.length;l<u;++l)o=void 0,"#"===(a=(i=e[l])[0])?o=this.renderSection(i,t,n,r):"^"===a?o=this.renderInverted(i,t,n,r):">"===a?o=this.renderPartial(i,t,n,r):"&"===a?o=this.unescapedValue(i,t):"name"===a?o=this.escapedValue(i,t):"text"===a&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},v.prototype.renderSection=function(e,t,i,a){var o=this,s="",l=t.lookup(e[1]);if(l){if(n(l))for(var u=0,c=l.length;u<c;++u)s+=this.renderTokens(e[4],t.push(l[u]),i,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),i,a);else if(r(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),function(e){return o.render(e,t,i)}))&&(s+=l)}else s+=this.renderTokens(e[4],t,i,a);return s}},v.prototype.renderInverted=function(e,t,r,i){var a=t.lookup(e[1]);if(!a||n(a)&&0===a.length)return this.renderTokens(e[4],t,r,i)},v.prototype.renderPartial=function(e,t,n){if(n){var i=r(n)?n(e[1]):n[e[1]];return null!=i?this.renderTokens(this.parse(i),t,n,i):void 0}},v.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},v.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},v.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var _=new v;return e.clearCache=function(){return _.clearCache()},e.parse=function(e,t){return _.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return _.render(e,t,r)},e.to_html=function(t,n,i,a){var o=e.render(t,n,i);if(!r(a))return o;a(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return u[e]})},e.Scanner=m,e.Context=g,e.Writer=v,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(i=[t],void 0===(a="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=a))},"1olO":function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var a in e)t.hasOwnProperty(a)?i.length&&(r[a]=i,i=[]):i.push(a);var o=void 0,s={};for(var l in t){if(r.hasOwnProperty(l))for(o=0;o<r[l].length;o++){var u=r[l][o];s[r[l][o]]=n(u)}s[l]=n(l)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s};var r=n("GiK3")},"1sZt":function(e,t,n){"use strict";var r,i,a,o=d(n("l/Rs")),s=d(n("shXp")),l=d(n("hBlz")),u=n("ZG75"),c=d(n("WO7S"));function d(e){return e&&e.__esModule?e:{default:e}}r=u.ApplicationModel.extend(),i={},a={},void 0!==window.project_profile_color_defaults&&(a=(0,c.default)(window.project_profile_color_defaults)),r.prototype.COLOR_DEFAULTS=a,r.prototype.publishSuccess=function(){this.syncDiscardState(),this.get("feature_image_attributes._destroy")&&this.replace("feature_image_attributes",{}),this.get("background_image_attributes._destroy")&&this.replace("background_image_attributes",{})},r.prototype.syncDiscardState=function(){this.setDiscardState(this.data)},r.prototype.setDiscardState=function(e){i=o.default.extend(!0,{},e)},r.prototype.discard=function(){this.set(i,{overwrite:!0})},r.prototype.tryFixValidationErrors=function(e){var t=this,n=(e=e||{}).default_url;["name","blurb","link_text","link_url"].forEach(function(e){var n=t.get(e);n&&t.set(e,n.trim())});var r=this.get("link_url"),i=this.get("link_text");if(!r&&/^http|^www/.test(i)){var a=this.validateURL(i);this.set("link_url",a),this.set("link_text",this.trimURL(a))}else!r&&i?this.set("link_url",n):r&&!/^http/.test(r)&&this.set("link_url","http://"+r)},r.prototype.validateURL=function(e){return/^http/.test(e)?e:"http://"+e},r.prototype.trimURL=function(e){return new l.default(e).hostname()},r.prototype.validate=function(){var e={};return""===this.get("name").trim()&&(e.name=!0),e},r.prototype.data_for_rails=function(){return s.default.reduce(this.data,function(e,t,n){return e["project_profile["+n+"]"]=t,e},{})},r.set_computed_value("background_image_opacity_percent",function(){return 100*this.background_image_opacity},{changes_on:["background_image_opacity"]}),r.set_computed_value("text_color_or_default",function(){return this.text_color?"#"+this.text_color:"#"+r.prototype.COLOR_DEFAULTS.text_color},{changes_on:["text_color"]}),r.set_computed_value("link_text_color_or_default",function(){return this.link_text_color?"#"+this.link_text_color:"#"+r.prototype.COLOR_DEFAULTS.link_text_color},{changes_on:["link_text_color"]}),r.set_computed_value("background_color_or_default",function(){return""!==this.background_color?"#"+this.background_color:this.background_image_attributes.id&&!this.background_image_attributes._destroy?"#"+r.prototype.COLOR_DEFAULTS.background_color_with_image:"#"+r.prototype.COLOR_DEFAULTS.background_color},{changes_on:["background_image_attributes","background_color"]}),r.set_computed_value("link_background_color_or_default",function(){var e=this.link_background_color;return e?"#"+e:"#"+r.prototype.COLOR_DEFAULTS.link_background_color},{changes_on:["link_background_color"]}),window.CurrentProjectProfile=r},"1w/n":function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("8NzR")),o=l(n("+bVi")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,a.default)("body#discover_index",function(e){var t,n=e.find(".js-adjectives-container"),a=e.find(".js-adjectives-list"),l=e.find(".slides"),u=e.find(".js-potd"),c=640,d=!1,f=!0,h=6;function p(t){t=t||{},d=!0,l.cycle({autoHeight:0,timeout:0,slides:".slide",speed:600,fx:"scrollHorz",startingSlide:t.starting_slide||l.children().length-1,next:e.find(".js-next"),prev:e.find(".js-previous"),allowWrap:!1,log:!1})}function m(){d=!1,l.cycle("destroy")}function g(){var e=(0,r.default)(window).width();d&&e<c?m():!d&&e>=c&&p()}function v(){var e=a.find(".js-adjective").eq(h);a.find(".js-adjective").removeClass("active"),e.addClass("active"),n.css({height:e.outerHeight(!0),width:e.find("span").width()}),a.css({top:-e.position().top})}l.on("cycle-before",function(e,t){f&&2===t.nextSlide&&r.default.ajax({url:u.data("potds"),data:{page:parseInt(l.children().length/10+1,10)},dataType:"json",success:function(e){f=10===e.results.length,m();var t=l.children().length;i.default.each(e.results,function(e){l.prepend(e)}),p({starting_slide:l.children().length-t+2})}})}),l.on("cycle-next",function(e,t){(0,s.track)("Discover POTD Next Clicked",{discover_potd_slide:l.children().length-1-t.nextSlide})}),l.on("cycle-prev",function(e,t){(0,s.track)("Discover POTD Previous Clicked",{discover_potd_slide:t.slideCount-1-t.nextSlide})}),o.default["not-touchable"]&&skrollr.init({forceHeight:!1}),(0,r.default)(document).resize(function(){g(),v()}),window.setTimeout(function(){n.removeClass("opacity-0"),v()},500),g(),clearInterval(t),t=setInterval(function(){(h+=1)>=a.find(".js-adjective").length&&(h=0),v()},5e3)})},"2/5V":function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".refund_checkouts_form",function(e){e.on("change","select#refund_checkout_amount",function(){var e=(0,r.default)(this),t=e.closest("li").find(".refund_amount_wrapper"),n=t.find("input#refund_checkout_amount"),i=!1;""===e.val()?(t.addClass("partial"),i=!0):t.removeClass("partial"),n.prop("disabled",!n.is(":visible")),i&&n.focus()}).trigger("change"),-1===r.default.inArray((0,r.default)("input#refund_checkout_amount").val(),[(0,r.default)("select#refund_checkout_amount").val(),""])&&e.find("select#refund_checkout_amount").val("").trigger("change")})},"2OQB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projArrayToObject=t.reducer=t.loadProjectData=t.loadContainerData=t.clickedWatching=t.initialState=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("EIRz"),a=n("wWf7");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=t.initialState={byId:{}},l=(t.clickedWatching=function(e){return{type:"CLICKED_WATCHING",project:e}},t.loadContainerData=function(e,t){return{type:"LOAD_CONTAINER_DATA",container:e,projectIds:t}},t.loadProjectData=function(e){return{type:"LOAD_PROJECT_DATA",projects:e}},t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"LOAD_PROJECT_DATA":return r({},e,{byId:r({},e.byId,l(t.projects))});case"LOAD_CONTAINER_DATA":return r({},e,o({},t.container,t.projectIds));case"CLICKED_WATCHING":return(0,i.loop)(e,i.Cmd.action((0,a.initiateWatchingUpdate)(t.project)));case"WATCHING_UPDATE_SUCCESS":var n=t.pid;return r({},e,{byId:r({},e.byId,o({},n,r({},e.byId[n],{isWatched:t.isWatching})))});case"NOOP":default:return e}},function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e[t.pid]=t,e},{})});t.projArrayToObject=l},"2TxY":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){var n=e(this),r=n.find(".field_with_icon"),i=r.find("input.text"),a=n.find("ol.search-selected,ul.search-selected"),o=i.siblings(".ss-search"),s=n.find(".template"),l=t;l.url=t.url||n.closest("form").attr("action"),i.livesearch_input_dropdown(l),t.sortable&&a.sortable({containment:"document",axis:"y",update:function(){a.find("input.position").each(function(t){e(this).val(t)})}}),n.addClass("search"),a.find("li").each(function(){var n,r;n=e(this),r=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>"),n.append(r)}),n.on("click","a.cancel-link",function(t){var n=e(this).closest("li"),r=n.find(".destroy");t.preventDefault(),n.fadeOut(function(){r.length?r.val("1"):n.remove()})}),i.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),i.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),n.on("livesearch:selected",function(n,o){if(o){var l=s.clone_form_template();l.find("input.destroy").val(!1),l.find(".name").html(o[0]),l.find(".value").val(o[1]),a.append(l),t.sortable&&a.find("input.position").each(function(t){e(this).val(t)}),i.val(""),r.siblings(".results").slideUp(),i.trigger("livesearch:cancel")}})})}}(r)},"2fYv":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("UQDk"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_banners__social_prompt",function(e){var t=e.data("url");t&&r.default.ajax({url:(0,a.default)(t),type:"get",success:function(t){var n=t.remotely_followed_count;n>0&&(e.find(".js-friend-count").html(n),e.removeClass("banner--is-hidden"))}})})},3:function(e,t,n){n("YBD5"),e.exports=n("Ciuv")},"3+HK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.updateApplePayCapable=function(e){return{type:"REWARD_UPDATE_APPLE_PAY",newValue:e}},t.onApplePayCheckoutFailure=function(e){return{type:"APPLE_PAY_CHECKOUT_FAILURE",err:e}},t.onApplePayRequestFailure=function(e){return{type:"APPLE_PAY_REQ_FAILURE",err:e}},t.onApplePayTrackingError=function(e){return{type:"APPLE_PAY_TRACKING_ERROR",err:e}},t.onApplePayVendorErrors=function(e){return{type:"APPLE_PAY_VENDOR_ERROR",err:e}}},"31kD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreHeader=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf");t.ExploreHeader=function(e){var t=e.projectCount;return a.default.createElement("h3",{className:"normal mb3 mb5-sm ml3 title clearfix pt2",id:"js-past-projects-header"},(0,o.boundT)("discovery.advanced.Explore"),a.default.createElement("b",{className:"count ksr-green-500"}," ",(0,o.boundT)("discovery.advanced.Past_Projects",{count:t})))}},"3C9o":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("ci1u");t.default=function(e){var t=e.size,n=void 0===t?"large":t;return a.default.createElement(o.Icon,{name:"icon--circle-loader",size:n})}},"3Y6g":function(e,t){t.version="2.2.5"},"3e15":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toggleSelect=function(){return{type:"TOGGLE_SELECT"}},t.onBlur=function(){return{type:"ON_BLUR"}},t.closeSelect=function(){return{type:"CLOSE_SELECT"}},t.changeSelectedIndex=function(e,t){return{type:"CHANGE_SELECTED_INDEX",newSelectedIndex:e,trackingId:t}},t.changeHighlightedIndex=function(e){return{type:"CHANGE_HIGHLIGHTED_INDEX",newHighlightedIndex:e}},t.onKeyDown=function(e,t){return{type:"ON_KEYDOWN",keyCode:e,options:t}},t.onListScroll=function(){return{type:"ON_LIST_SCROLL"}},t.noopAction=function(){return{type:"NOOP"}},t.selectedValueUpdated=function(e){return{type:"SELECT_ON_VALUE_UPDATE",value:e}}},"3tbO":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_backer_backing_notes__form",function(){var e=(0,a.default)(this);e.trigger("backer_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},"3txR":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("yYdC");var o=n("4RZc");(0,a.default)(function(){var e,t,n,r,i,s=(0,a.default)(".js-mega-footer");s.length&&(t=0,n=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],r=0,(i=(0,a.default)("span.scissors",s)).click(function(){e||(e=(0,a.default)(".js-mega-footer__content").width()/3),t+=1,function e(t){t>9||(i.removeClass(n[r]),(r+=1)===n.length&&(r=0),i.addClass(n[r]),setTimeout(function(){e(t+1)},100))}(0),i.animate({marginLeft:e*t},1e3,function(){3===t&&(i.hide(),s.height(s.height()),s.addClass("gone"),(0,a.default)("html").addClass("gone"),(0,a.default)(".js-mini-footer").hide(),s.find(".js-mega-footer__content").animate({marginTop:[s.height(),"easeInOutExpo"],opacity:0},1e3,function(){(0,a.default)(".js-mega-footer__newsletter-signup").fadeIn()}))})}),(0,a.default)(document).on("change",".js-change-language",function(e){var t=e.target.value,n=(0,a.default)("body").attr("id");(0,o.track)("Selected Chosen Language",{property:t,context:n}),(0,a.default)(this).submit()}),(0,a.default)(document).on("change",".js-change-currency",function(e){var t=(0,a.default)(this),n=e.target.value,r=(0,a.default)("body").attr("id");(0,a.default)("#currency-modal").modal_dialog({event:e}),(0,a.default)(".currency-submit").on("click",function(){(0,o.track)("Selected Chosen Currency",{property:n,context:r}),t.submit()})}))})},"3w6W":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("+bVi"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#NS_discover__categories",function(e){var t,n,i,o=e.hasClass("refresh_enabled");function s(){var t;(0,r.default)(window).width()>599?(t=o?n.find(".js-subcategories.block"):e.find("ul.expanded")).length?e.height(Math.max(i.height(),t.height())):e.height(i.height()):e.css({height:""})}o?(t=e.find(".js-categories"),n=e.find(".js-subcategories_container"),i=e.find(".js-root-categories")):(t=e.find(".categories"),n=e.find(".subcategories_container"),i=e.find(".root-categories")),t.find("> li > a").on("click",function(i){var l=(0,r.default)(this),u=l.closest("li"),c=u.data("category")||{},d=c.id||0,f=e.find("#category_"+d+"_subcategories");o?(t.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),l.addClass("ksr-green-500").removeClass("black")):(t.find(".selected").removeClass("selected"),u.addClass("selected")),o?(n.find(".js-subcategories.block").removeClass("block").addClass("display-none"),f.addClass("block").removeClass("display-none")):(n.find("ul.expanded").removeClass("expanded"),f.addClass("expanded")),f.length?o?((0,r.default)(window).width()>599&&e.css({width:"600px"}),n.removeClass("o-none"),f.find("li.js-subcategory > a").first().trigger("click")):(e.addClass("expanded"),f.find("li.subcategory > a").first().trigger("click")):((0,r.default)(document).trigger("discovery:categories:changed",c),e.trigger("ksr_popover:close"),o?(e.css({width:""}),n.addClass("o-none")):e.removeClass("expanded")),a.default["not-mobile"]&&s(),i.preventDefault()}),n.find("li > a").on("click",function(t){var n=(0,r.default)(this),i=n.closest("li"),a=n.closest("ul"),s=i.data("category");o?(a.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.addClass("ksr-green-500").removeClass("black")):(a.find(".selected").removeClass("selected"),i.addClass("selected")),(0,r.default)(document).trigger("discovery:categories:changed",s),t.originalEvent?e.trigger("ksr_popover:close"):e.trigger("ksr_popover:reposition"),t.preventDefault()}),(0,r.default)(document).on("ksr_popover:opened",function(t,i){if(i.$popover.is(e)){if(o)e.find(".js-subcategories.block").length&&(n.removeClass("o-none"),(0,r.default)(window).width()>599?e.css({width:"600px"}):e.css({width:""}));a.default["not-mobile"]&&s()}}),(0,r.default)(document).on("discovery:sentence:changed",function(t,r){r.category_id||(o?(e.css({width:""}),n.find(".js-subcategories.block").removeClass("block").addClass("display-none"),e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),e.find("li:first a").addClass("ksr-green-500").removeClass("black")):(e.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),e.find("li:first").addClass("selected")))}),(0,r.default)(document).on("discovery:categories:load_sample",function(t,n){var r=(n.category||{}).id;e.find("#category_"+r).trigger("click")})})},"3zBZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=t.USER_HAS_NOT_FLAGGED_PROJECT=t.USER_HAS_FLAGGED_PROJECT=t.FLAGGING_FETCH_FAILED=t.FETCHING_FLAGGING=t.FLAGGING_UNKNOWN=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("EIRz"),a=n("O2m/"),o=n("xQXO"),s=n("Gks7"),l=t.FLAGGING_UNKNOWN="unknown",u=t.FETCHING_FLAGGING="fetching_flagging",c=t.FLAGGING_FETCH_FAILED="flagging_fetch_failed",d=t.USER_HAS_FLAGGED_PROJECT="user_has_flagged",f=t.USER_HAS_NOT_FLAGGED_PROJECT="user_has_not_flagged",h=t.initialState={flaggingStatus:l,hasBackedProject:!1,projectState:null};t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case"INIT_FLAGGING":return(0,i.loop)(r({},e,{flaggingStatus:u}),i.Cmd.run(a.fetchProjectFlagging,{successActionCreator:o.flaggingFetchSuccessAction,failActionCreator:o.flaggingFetchFailAction,args:[t.projectSlug]}));case"FLAGGING_FETCH_SUCCESS":if(!t.response.data.project)return(0,i.loop)(e,i.Cmd.action((0,o.flaggingFetchFailAction)(t.response.errors)));var n=t.response.data.project,l=n.backing,p=n.flagging,m=n.state;return r({},e,{flaggingStatus:p?d:f,hasBackedProject:!!l,projectState:m});case"FLAGGING_FETCH_FAIL":return(0,i.loop)(r({},e,{flaggingStatus:c}),i.Cmd.run(s.notifyFetchFailure));default:return e}}},"3zLD":function(e,t,n){(function(e,t,r,i){"use strict";function a(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!i.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var o,s,l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},c=function(){function e(){this.observableQueries=[]}return e.prototype.recycle=function(e){e.setOptions({fetchPolicy:"standby",pollInterval:0,fetchResults:!1}),this.observableQueries.push({observableQuery:e,subscription:e.subscribe({})})},e.prototype.reuse=function(e){if(this.observableQueries.length<=0)return null;var t=this.observableQueries.pop(),n=t.observableQuery;t.subscription.unsubscribe();e.ssr,e.skip,e.client;var r=u(e,["ssr","skip","client"]);return a(r.variables||{},n.variables)?(n.setOptions(l({},r,{pollInterval:e.pollInterval,fetchPolicy:e.fetchPolicy})),n):null},e}(),d=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e){function n(t){var n=e.call(this,t)||this;return n.recyclers=new WeakMap,n.getQueryRecycler=n.getQueryRecycler.bind(n),n}return d(n,e),n.prototype.componentWillReceiveProps=function(e,t){this.context.client!==t.client&&(this.recyclers=new WeakMap)},n.prototype.getQueryRecycler=function(e){return this.recyclers.has(e)||this.recyclers.set(e,new c),this.recyclers.get(e)},n.prototype.getChildContext=function(){return{getQueryRecycler:this.getQueryRecycler}},n.prototype.render=function(){return t.Children.only(this.props.children)},n.propTypes={children:r.element.isRequired},n.contextTypes={client:r.object},n.childContextTypes={getQueryRecycler:r.func.isRequired},n}(t.Component),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=n("crWv"),m=function(e){function n(t,n){var r=e.call(this,t,n)||this;return p(t.client,'ApolloClient was not passed a client instance. Make sure you pass in your client via the "client" prop.'),r}return h(n,e),n.prototype.getChildContext=function(){return{client:this.props.client}},n.prototype.render=function(){return t.createElement(f,null,t.Children.only(this.props.children))},n.propTypes={client:r.object.isRequired,children:r.element.isRequired},n.childContextTypes={client:r.object.isRequired},n}(t.Component),g=n("crWv");!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(s||(s={}));var v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y=n("crWv"),b=n("BEQ0"),w=n("+cTw"),E=n("hYij"),k=function(){return{}},S=function(e){return e},C=function(){return!1};function T(e){var t=w(e,"variables","refetch","fetchMore","updateQuery","startPolling","stopPolling","subscribeToMore");return Object.keys(t).forEach(function(n){"function"==typeof t[n]&&(t[n]=t[n].bind(e))}),t}function A(e){return e.displayName||e.name||"Component"}var R=0;var x=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=n("crWv"),I=n("BEQ0"),O=n("hYij");var j=n("BEQ0");function D(e,n){var r=e.rootElement,i=e.rootContext;void 0===n&&(n=!0);var a=[];return function e(n,r,i){if(Array.isArray(n))n.forEach(function(t){return e(t,r,i)});else if(null!=n){var a=n.type;if("function"==typeof a){var o=j({},a.defaultProps,n.props),s=r,l=void 0;if(a.prototype&&a.prototype.isReactComponent){var u=new a(o,r);if(u.props=u.props||o,u.context=u.context||r,u.state=u.state||null,u.setState=function(e){"function"==typeof e&&(e=e(u.state,u.props,u.context)),u.state=j({},u.state,e)},u.componentWillMount&&u.componentWillMount(),u.getChildContext&&(s=j({},r,u.getChildContext())),!1===i(n,u,r))return;l=u.render()}else{if(!1===i(n,null,r))return;l=a(o,r)}l&&(Array.isArray(l)?l.forEach(function(t){return e(t,r,i)}):e(l,s,i))}else{if(!1===i(n,null,r))return;n.props&&n.props.children&&t.Children.forEach(n.props.children,function(t){t&&e(t,r,i)})}}}(r,void 0===i?{}:i,function(e,t,i){var o=!n&&e===r;if(t&&"function"==typeof t.fetchData&&!o){var s=t.fetchData();if(s)return a.push({query:s,element:e,context:i}),!1}}),a}e.compose=i,e.ApolloProvider=m,e.graphql=function(e,n){void 0===n&&(n={});var i=n.options,o=void 0===i?k:i,l=n.skip,u=void 0===l?C:l,c=n.alias,d=void 0===c?"Apollo":c,f=o;"function"!=typeof f&&(f=function(){return o});var h=u;"function"!=typeof h&&(h=function(){return u});var p=n.props,m=function(e){var t,n;g(!!e&&!!e.kind,"Argument of "+e+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var r=e.definitions.filter(function(e){return"FragmentDefinition"===e.kind}),i=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"query"===e.operation}),a=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}),o=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation});g(!r.length||i.length||a.length||o.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),g(i.length+a.length+o.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+e+" had "+i.length+" queries, "+o.length+" subscriptions and "+a.length+" mutations. You can use 'compose' to join multiple operation types to a component"),n=i.length?s.Query:s.Mutation,i.length||a.length||(n=s.Subscription);var l=i.length?i:a.length?a:o;g(1===l.length,"react-apollo only supports one defintion per HOC. "+e+" had "+l.length+" definitions. You can use 'compose' to join multiple operation types to a component");var u=l[0];return t=u.variableDefinitions||[],{name:u.name&&"Name"===u.name.kind?u.name.value:"data",type:n,variables:t}}(e),w=R++;return function(i){var o=d+"("+A(i)+")",l=function(l){function u(e,t){var n=l.call(this,e,t)||this;return n.previousData={},n.version=w,n.type=m.type,n.dataForChildViaMutation=n.dataForChildViaMutation.bind(n),n.setWrappedInstance=n.setWrappedInstance.bind(n),n}return v(u,l),u.prototype.componentWillMount=function(){this.shouldSkip(this.props)||this.setInitialProps()},u.prototype.componentDidMount=function(){if(this.hasMounted=!0,this.type!==s.Mutation&&!this.shouldSkip(this.props)&&(this.subscribeToQuery(),this.refetcherQueue)){var e=this.refetcherQueue,t=e.args,n=e.resolve,r=e.reject;this.queryObservable.refetch(t).then(n).catch(r)}},u.prototype.componentWillReceiveProps=function(e,t){if(this.shouldSkip(e))this.shouldSkip(this.props)||this.unsubscribeFromQuery();else{var r=f(e).client;if(!a(this.props,e)||this.client!==r&&this.client!==t.client){if(this.shouldRerender=!0,this.client!==r&&this.client!==t.client)return this.client=r||t.client,this.unsubscribeFromQuery(),this.queryObservable=null,this.previousData={},this.updateQuery(e),void(this.shouldSkip(e)||this.subscribeToQuery());if(this.type!==s.Mutation){if(this.type===s.Subscription&&n.shouldResubscribe&&n.shouldResubscribe(this.props,e))return this.unsubscribeFromQuery(),delete this.queryObservable,this.updateQuery(e),void this.subscribeToQuery();this.updateQuery(e),this.subscribeToQuery()}}}},u.prototype.componentWillUnmount=function(){if(this.type===s.Query){if(this.queryObservable){var e=this.getQueryRecycler();e&&(e.recycle(this.queryObservable),delete this.queryObservable)}this.unsubscribeFromQuery()}this.type===s.Subscription&&this.unsubscribeFromQuery(),this.hasMounted=!1},u.prototype.getQueryRecycler=function(){return this.context.getQueryRecycler&&this.context.getQueryRecycler(u)},u.prototype.getClient=function(e){if(this.client)return this.client;var t=f(e).client;return this.client=t||this.context.client,y(!!this.client,'Could not find "client" in the context of "'+o+'". Wrap the root component in an <ApolloProvider>'),this.client},u.prototype.calculateOptions=function(e,t){void 0===e&&(e=this.props);var n=f(e);if(t&&t.variables&&(t.variables=b({},n.variables,t.variables)),t&&(n=b({},n,t)),n.variables||!m.variables.length)return n;for(var r={},a=0,s=m.variables;a<s.length;a++){var l=s[a],u=l.variable,c=l.type;u.name&&u.name.value&&(void 0===e[u.name.value]?"NonNullType"===c.kind?y(void 0!==e[u.name.value],"The operation '"+m.name+"' wrapping '"+A(i)+"' is expecting a variable: '"+u.name.value+"' but it was not found in the props passed to '"+o+"'"):r[u.name.value]=null:r[u.name.value]=e[u.name.value])}return n=_({},n,{variables:r})},u.prototype.calculateResultProps=function(e){var t=this.type===s.Mutation?"mutate":"data";n.name&&(t=n.name);var r,i,a=((r={})[t]=e,r.ownProps=this.props,r);return p?p(a):((i={})[t]=S(e),i)},u.prototype.setInitialProps=function(){if(this.type!==s.Mutation){var e=this.calculateOptions(this.props);this.createQuery(e)}},u.prototype.createQuery=function(t,n){if(void 0===n&&(n=this.props),this.type===s.Subscription)this.queryObservable=this.getClient(n).subscribe(b({query:e},t));else{var r=this.getQueryRecycler(),i=null;r&&(i=r.reuse(t)),this.queryObservable=null===i?this.getClient(n).watchQuery(b({query:e,metadata:{reactComponent:{displayName:o}}},t)):i}},u.prototype.updateQuery=function(e){var t=this.calculateOptions(e);this.queryObservable||this.createQuery(t,e),this.queryObservable._setOptionsNoResult?this.queryObservable._setOptionsNoResult(t):this.queryObservable.setOptions&&this.queryObservable.setOptions(t).catch(function(){return null})},u.prototype.fetchData=function(){if(this.shouldSkip())return!1;if(m.type===s.Mutation||m.type===s.Subscription)return!1;var t=this.calculateOptions();if(!1===t.ssr)return!1;"network-only"!==t.fetchPolicy&&"cache-and-network"!==t.fetchPolicy||(t.fetchPolicy="cache-first");var n=this.getClient(this.props).watchQuery(b({query:e},t));return!!n.currentResult().loading&&n.result()},u.prototype.subscribeToQuery=function(){var e=this;if(!this.querySubscription){var t=function(t){e.type===s.Subscription&&(e.lastSubscriptionData=t);var n=Object.keys(T(t.data));y(0===n.length,"the result of the '"+o+"' operation contains keys that conflict with the return object."+n.map(function(e){return"'"+e+"'"}).join(", ")+" not allowed."),e.forceRenderChildren()};this.querySubscription=this.queryObservable.subscribe({next:t,error:function(e){if(e.hasOwnProperty("graphQLErrors"))return t({error:e});throw e}})}},u.prototype.unsubscribeFromQuery=function(){this.querySubscription&&(this.querySubscription.unsubscribe(),delete this.querySubscription)},u.prototype.shouldSkip=function(e){return void 0===e&&(e=this.props),h(e)||f(e).skip},u.prototype.forceRenderChildren=function(){this.shouldRerender=!0,this.hasMounted&&this.forceUpdate()},u.prototype.getWrappedInstance=function(){return y(n.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},u.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},u.prototype.dataForChildViaMutation=function(t){var n=this.calculateOptions(this.props,t);return void 0===n.variables&&delete n.variables,n.mutation=e,this.getClient(this.props).mutate(n)},u.prototype.dataForChild=function(){var e=this;if(this.type===s.Mutation)return this.dataForChildViaMutation;var t=this.calculateOptions(this.props),n={};if(b(n,T(this.queryObservable)),this.type===s.Subscription)b(n,{loading:!this.lastSubscriptionData,variables:t.variables},this.lastSubscriptionData&&this.lastSubscriptionData.data);else{var r=this.queryObservable.currentResult(),i=r.loading,a=r.error,l=r.networkStatus;b(n,{loading:i,networkStatus:l});var u=setTimeout(function(){a&&console.error("Unhandled (in react-apollo:"+o+")",a.stack||a)},10);Object.defineProperty(n,"error",{configurable:!0,enumerable:!0,get:function(){return clearTimeout(u),a}}),i?b(n,this.previousData,r.data):a?b(n,(this.queryObservable.getLastResult()||{}).data):(b(n,r.data),this.previousData=r.data),this.querySubscription||(n.refetch=function(t){return new Promise(function(n,r){e.refetcherQueue={resolve:n,reject:r,args:t}})})}return n},u.prototype.render=function(){if(this.shouldSkip())return n.withRef?t.createElement(i,b({},this.props,{ref:this.setWrappedInstance})):t.createElement(i,this.props);var e=this.shouldRerender,r=this.renderedElement,a=this.props;if(this.shouldRerender=!1,!e&&r&&r.type===i)return r;var o=this.dataForChild(),s=this.calculateResultProps(o),l=b({},a,s);return n.withRef&&(l.ref=this.setWrappedInstance),this.renderedElement=t.createElement(i,l),this.renderedElement},u.displayName=o,u.WrappedComponent=i,u.contextTypes={client:r.object,getQueryRecycler:r.func},u}(t.Component);return E(l,i,{})}},e.withApollo=function(e,n){void 0===n&&(n={});var i="withApollo("+function(e){return e.displayName||e.name||"Component"}(e)+")",a=function(a){function o(e,t){var n=a.call(this,e,t)||this;return n.client=t.client,n.setWrappedInstance=n.setWrappedInstance.bind(n),P(!!n.client,'Could not find "client" in the context of "'+i+'". Wrap the root component in an <ApolloProvider>'),n}return x(o,a),o.prototype.getWrappedInstance=function(){return P(n.withRef,"To access the wrapped instance, you need to specify { withRef: true } in the options"),this.wrappedInstance},o.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},o.prototype.render=function(){var r=I({},this.props);return r.client=this.client,n.withRef&&(r.ref=this.setWrappedInstance),t.createElement(e,r)},o.displayName=i,o.WrappedComponent=e,o.contextTypes={client:r.object.isRequired},o}(t.Component);return O(a,e,{})},e.getDataFromTree=function e(t,n,r){void 0===n&&(n={}),void 0===r&&(r=!0);var i=D({rootElement:t,rootContext:n},r);if(!i.length)return Promise.resolve();var a=[],o=i.map(function(t){var n=t.query,r=t.element,i=t.context;return n.then(function(t){return e(r,i,!1)}).catch(function(e){return a.push(e)})});return Promise.all(o).then(function(e){if(a.length>0){var t=1===a.length?a[0]:new Error(a.length+" errors were thrown when executing your GraphQL queries.");throw t.queryErrors=a,t}})},Object.defineProperty(e,"__esModule",{value:!0})})(t,n("GiK3"),n("KSGD"),n("5fhp"))},"452R":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n,r=e.console||void 0,i=e.document,a=e.navigator,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,u=e.clearInterval,c=e.JSON,d=e.alert,f=e.History=e.History||{},h=e.history;try{n=e.sessionStorage||!1,sessionStorage.setItem("TEST","1"),sessionStorage.removeItem("TEST")}catch(e){n=!1}if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,void 0!==f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return void 0!==f.Adapter&&(void 0!==f.initCore&&f.initCore(),void 0!==f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(t){if(void 0!==f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||i.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)u(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,n,a,o,s=!(void 0===r||void 0===r.log||void 0===r.log.apply),l=i.getElementById("log");for(s?(e=(a=Array.prototype.slice.call(arguments)).shift(),void 0!==r.debug?r.debug.apply(r,[e,a]):r.log.apply(r,[e,a])):e="\n"+arguments[0]+"\n",t=1,n=arguments.length;t<n;++t){if("object"==typeof(o=arguments[t])&&void 0!==c)try{o=c.stringify(o)}catch(e){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached=void 0!==f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached=void 0!==f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(a.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(a.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=c.stringify(e),n=c.parse(t)):n={},n},f.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},f.getBaseHref=function(){var e=i.getElementsByTagName("base"),t="";return 1===e.length&&(t=e[0].href.replace(/[^\/]+$/,"")),(t=t.replace(/\/+$/,""))&&(t+="/"),t},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){return((f.getState(!1,!1)||{}).url||f.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?f.getRootUrl()+e.replace(/^\/+/,""):"#"===r?f.getPageUrl().replace(/#.*/,"")+e:"?"===r?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),r=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return(e=e||i).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&((n=f.cloneObject(n)).url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),void 0!==f.stateToId[t])n=f.stateToId[t];else if(void 0!==f.store.stateToId[t])n=f.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==f.idToState[n]||void 0!==f.store.idToState[n];);f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={}).normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&!0!==f.options.disableSuid&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=f.normalizeState(r)},f.getStateById=function(e){return e=String(e),f.idToState[e]||f.store.idToState[e]||void 0},f.getStateString=function(e){var t;return t={data:f.normalizeState(e).data,title:e.title,url:e.url},c.stringify(t)},f.getStateId=function(e){return f.normalizeState(e).id},f.getHashByState=function(e){return f.normalizeState(e).hash},f.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,(t=/(.*)\&_suid=([0-9]+)$/.exec(n))&&t[1]||e,(t?String(t[2]||""):"")||!1},f.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},f.extractState=function(e,t,n){var r,i,a=null;return t=t||!1,(r=f.extractId(e))&&(a=f.getStateById(r)),a||(i=f.getFullUrl(e),(r=f.getIdByUrl(i)||!1)&&(a=f.getStateById(r)),a||!t||f.isTraditionalAnchor(e)||(a=f.createStateObject(null,n||null,i))),a},f.getIdByUrl=function(e){return f.urlToId[e]||f.store.urlToId[e]||void 0},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||void 0},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||void 0},f.hasUrlDuplicate=function(e){var t;return(t=f.extractState(e.url))&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t=!1;return f.savedStates.length&&(t=e.id===f.getLastSavedState().id),t},f.saveState=function(e){return!f.isLastSavedState(e)&&(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){return void 0===e?f.savedStates[f.savedStates.length-1]:e<0?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t=f.getLocationHref(e);return f.getHashByUrl(t)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(e,t){var n,r;return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),(n=f.extractState(e,!0))&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(r=f.getPageUrl(),f.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0))&&t.url===e.url&&(n=t.title),n||(n=f.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return i.title=n,f},f.queues=[],f.busy=function(e){if(void 0!==e?f.busy.flag=e:void 0===f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function(){var e,n,r;if(!f.busy.flag)for(e=f.queues.length-1;e>=0;--e)0!==(n=f.queues[e]).length&&(r=n.shift(),f.fireQueueItem(r),f.busy.timeout=o(t,f.options.busyDelay))};f.busy.timeout=o(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=o(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t=f.extractState(f.getLocationHref());if(!f.isLastSavedState(t))return t||f.createStateObject(),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)f.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var p=function(){};f.pushState=f.pushState||p,f.replaceState=f.replaceState||p}else f.onPopState=function(t,n){var r,i,a,o=!1;return f.doubleCheckComplete(),(i=f.getHash())?((a=f.extractState(i||f.getLocationHref(),!0))?f.replaceState(a.data,a.title,a.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):((o=(r=f.Adapter.extractEventData("state",t,n)||!1)?f.getStateById(r):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()))||(o=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(o)?(f.busy(!1),!1):(f.storeState(o),f.saveState(o),f.setTitle(o),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,r,i){if(f.getHashByUrl(r)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:i}),!1;f.busy(!0);var a=f.createStateObject(t,n,r);return f.isLastSavedState(a)?f.busy(!1):(f.storeState(a),f.expectedStateId=a.id,h.pushState(a.id,a.title,a.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,r,i){if(f.getHashByUrl(r)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:i}),!1;f.busy(!0);var a=f.createStateObject(t,n,r);return f.isLastSavedState(a)?f.busy(!1):(f.storeState(a),f.expectedStateId=a.id,h.replaceState(a.id,a.title,a.url),f.Adapter.trigger(e,"popstate")),!0};if(n){try{f.store=c.parse(n.getItem("History.store"))||{}}catch(e){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0,i.title))),n&&(f.onUnload=function(){var e,t,r;try{e=c.parse(n.getItem("History.store"))||{}}catch(t){e={}}for(t in e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{},f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),r=c.stringify(e);try{sessionStorage.setItem("History.store",r)}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR||1014===e.code)try{sessionStorage.length&&(sessionStorage.removeItem("History.store"),sessionStorage.setItem("History.store",r))}catch(e){}}},f.intervalList.push(l(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(l(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==a.vendor&&"Mozilla"!==(a.appCodeName||"")||(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}}(window)},"45vE":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,n){var r=new RegExp(n.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),i=e.makeArray(arguments);return i.shift(),t.replace(r,function(t,n){var r,a,o,s,l=n.split(".");for(r=0;r<i.length;r++)if(o=i[r]){if(l.length>1)for(s=o,a=0;a<l.length;a++)o=s,s=s[l[a]]||n;else s=o[n];if(e.isFunction(s))return s.apply(o,i);if(void 0!==s&&null!==s&&s!=n)return s}return n})}})}(r)},"49v0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateApplePayCapable=t.toggleApplePayClasses=t.thanksPage=t.reducer=t.paymentCompletion=t.paddedString=t.onApplePayVendorErrors=t.onApplePayTrackingError=t.onApplePayRequestFailure=t.onApplePayCheckoutFailure=t.notify=t.initApplePay=t.finalizeCharge=t.createPledge=t.createApplePayCheckout=t.checkApplePay=t.canMakePaymentsWithApplePayCard=t.buildRequest=void 0;var r=n("3+HK"),i=n("tV3C"),a=n("tAtq");t.buildRequest=i.buildRequest,t.canMakePaymentsWithApplePayCard=i.canMakePaymentsWithApplePayCard,t.checkApplePay=i.checkApplePay,t.createApplePayCheckout=i.createApplePayCheckout,t.createPledge=i.createPledge,t.finalizeCharge=i.finalizeCharge,t.initApplePay=i.initApplePay,t.notify=a.notify,t.onApplePayCheckoutFailure=r.onApplePayCheckoutFailure,t.onApplePayRequestFailure=r.onApplePayRequestFailure,t.onApplePayTrackingError=r.onApplePayTrackingError,t.onApplePayVendorErrors=r.onApplePayVendorErrors,t.paddedString=i.paddedString,t.paymentCompletion=i.paymentCompletion,t.reducer=a.reducer,t.thanksPage=i.thanksPage,t.toggleApplePayClasses=i.toggleApplePayClasses,t.updateApplePayCapable=r.updateApplePayCapable},"4Apx":function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r};n("axe2"),(0,a.default)(".NS_video_tracks__caption_video",function(){var e=new window.VideoTrack(window.videoTrackJSON);new window.VideoTrackView({model:e,el:"#video_track"}).render()})},"4C6Z":function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){"use strict";!function(e){function t(t){var n="dragover"===t;return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var i=r.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:r}))&&(r.preventDefault(),n&&(i.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;return(!this.bitrate||!n||r>n)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var r,i=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&i-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=i,r=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=r-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=r,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(i,r,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,r=this,i=t.files[0],a=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),a&&!t.blob&&this._isInstanceOf("File",i)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"'),a?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:o,value:t.blob}):e.each(t.files,function(r,i){n.push({name:"array"===e.type(t.paramName)&&t.paramName[r]||o,value:i})})):(r._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(o,t.blob,i.name):e.each(t.files,function(i,a){(r._isInstanceOf("File",a)||r._isInstanceOf("Blob",a))&&n.append("array"===e.type(t.paramName)&&t.paramName[i]||o,a,a.uploadName||a.name)})),t.data=n):(t.contentType=i.type||"application/octet-stream",t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;i;)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),a=i.promise();return n=n||this.options.context||a,!0===t?i.resolveWith(n,r):!1===t&&i.rejectWith(n,r),a.abort=i.promise,this._enhancePromise(a)},_addConvenienceMethods:function(t,n){var r=this,i=function(t){return e.Deferred().resolveWith(r,t).promise()};n.process=function(t,a){return(t||a)&&(n._processQueue=this._processQueue=(this._processQueue||i([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(r,[n]).promise():i(arguments)}).then(t,a)),this._processQueue||i([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},n.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===r._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var r,i,a=this,o=t.files[0],s=o.size,l=t.uploadedBytes,u=t.maxChunkSize||s,c=this._blobSlice,d=e.Deferred(),f=d.promise();return!(!(this._isXHRUpload(t)&&c&&(l||u<s))||t.data)&&(!!n||(l>=s?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(i=function(){var n=e.extend({},t),f=n._progress.loaded;n.blob=c.call(o,l,l+u,o.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,a._initXHRData(n),a._initProgressListener(n),r=(!1!==a._trigger("chunksend",null,n)&&e.ajax(n)||a._getXHRPromise(!1,n.context)).done(function(r,o,u){l=a._getUploadedBytes(u)||l+n.chunkSize,f+n.chunkSize-n._progress.loaded&&a._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=r,n.textStatus=o,n.jqXHR=u,a._trigger("chunkdone",null,n),a._trigger("chunkalways",null,n),l<s?i():d.resolveWith(n.context,[r,o,u])}).fail(function(e,t,r){n.jqXHR=e,n.textStatus=t,n.errorThrown=r,a._trigger("chunkfail",null,n),a._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,r])})},this._enhancePromise(f),f.abort=function(){return r.abort()},i(),f)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,r,i){var a=i._progress.total,o=i._response;i._progress.loaded<a&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a,total:a}),i),o.result=i.result=t,o.textStatus=i.textStatus=n,o.jqXHR=i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){var i=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),i.jqXHR=r.jqXHR=e,i.textStatus=r.textStatus=t,i.errorThrown=r.errorThrown=n,this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var r,i,a,o,s=this,l=s._getAJAXSettings(n),u=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,r=r||((i||!1===s._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&s._getXHRPromise(!1,l.context,i)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){s._onDone(e,t,n,l)}).fail(function(e,t,n){s._onFail(e,t,n,l)}).always(function(e,t,n){if(s._onAlways(e,t,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var r=s._slots.shift();r;){if("pending"===s._getDeferredState(r)){r.resolve();break}r=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),o=a.then(u)):(this._sequence=this._sequence.then(u,u),o=this._sequence),o.abort=function(){return i=[void 0,"abort","abort"],r?r.abort():(a&&a.rejectWith(l.context,i),u())},this._enhancePromise(o)):u()},_onAdd:function(t,n){var r,i,a,o,s=this,l=!0,u=e.extend({},this.options,n),c=n.files,d=c.length,f=u.limitMultiFileUploads,h=u.limitMultiFileUploadSize,p=u.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(u),v=0;if(!d)return!1;if(h&&void 0===c[0].size&&(h=void 0),(u.singleFileUploads||f||h)&&this._isXHRUpload(u))if(u.singleFileUploads||h||!f)if(!u.singleFileUploads&&h)for(a=[],r=[],o=0;o<d;o+=1)m+=c[o].size+p,(o+1===d||m+c[o+1].size+p>h||f&&o+1-v>=f)&&(a.push(c.slice(v,o+1)),(i=g.slice(v,o+1)).length||(i=g),r.push(i),v=o+1,m=0);else r=g;else for(a=[],r=[],o=0;o<d;o+=f)a.push(c.slice(o,o+f)),(i=g.slice(o,o+f)).length||(i=g),r.push(i);else a=[c],r=[g];return n.originalFiles=c,e.each(a||c,function(i,o){var u=e.extend({},n);return u.files=a?o:[o],u.paramName=r[i],s._initResponseObject(u),s._initProgressObject(u),s._addConvenienceMethods(t,u),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),u)}),l},_replaceFileInput:function(t){var n=t.fileInput,r=n.clone(!0),i=n.is(document.activeElement);t.fileInputClone=r,e("<form></form>").append(r)[0].reset(),n.after(r).detach(),i&&r.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?r[0]:t}),n[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,n){var r,i=this,a=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])},s=function(){r.readEntries(function(e){e.length?(l=l.concat(e),s()):function(e){i._handleFileTreeEntries(e,n+t.name+"/").done(function(e){a.resolve(e)}).fail(o)}(l)},o)},l=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,a.resolve(t._file)):t.file(function(e){e.relativePath=n,a.resolve(e)},o):t.isDirectory?(r=t.createReader(),s()):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var n=(t=t||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var n,r,i=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(i&&i.length)return this._handleFileTreeEntries(i);if((n=e.makeArray(t.prop("files"))).length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(r=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:r.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(i){r.files=i,n.options.replaceFileInput&&n._replaceFileInput(r),!1!==n._trigger("change",e.Event("change",{delegatedEvent:t}),r)&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,r=t.dataTransfer,i={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){i.files=r,!1!==n._trigger("drop",e.Event("drop",{delegatedEvent:t}),i)&&n._onAdd(t,i)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,r=this.element.data();e.each(this.element[0].attributes,function(e,i){var a,o=i.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),a=r[o],t._isRegExpOption(o,a)&&(a=t._getRegExp(a)),n[o]=a)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,r,i=this,a=e.Deferred(),o=a.promise();return o.abort=function(){return r=!0,n?n.abort():(a.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){r||(e.length?(t.files=e,(n=i._onSend(null,t)).then(function(e,t,n){a.resolve(e,t,n)},function(e,t,n){a.reject(e,t,n)})):a.reject())}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}(n("l/Rs"),n("v4vi"))}()},"4D4H":function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("8NzR")),o=l(n("+bVi")),s=n("Tvaj");function l(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#NS_discover__filters",function(e){var t,n,a,l,u,c,d,f,h,p,m,g,v=e.hasClass("refresh_enabled"),_=e.find(".tags");function y(){e.trigger("ksr_popover:close"),(0,r.default)(document).trigger("discovery:filters:changed",b())}function b(){var e={};return e.term=t.val(),e.state=f.find("select").val(),e.goal=h.find("select").val(),e.pledged=p.find("select").val(),e.raised=m.find("select").val(),v?(e.recommended=l.find("a").is(".ksr-green-500"),e.staff_picks=a.find("a").is(".ksr-green-500"),e.starred=u.find("a").is(".ksr-green-500"),e.social=c.find("a").is(".ksr-green-500"),e.backed=d.find("a").is(".ksr-green-500")):(e.recommended=l.is(".selected"),e.staff_picks=a.is(".selected"),e.starred=u.is(".selected"),e.social=c.is(".selected"),e.backed=d.is(".selected")),e}function w(e){t.val(e.term);var n={recommended:l,staff_picks:a,starred:u,social:c,backed:d};i.default.forEach(n,function(t,n){v?e[n]?t.find("a").addClass("ksr-green-500").removeClass("black"):t.find("a").removeClass("ksr-green-500").addClass("black"):e[n]?t.addClass("selected"):t.removeClass("selected")}),_.find(".selected").removeClass("selected"),_.find("#tag_"+(e.tag_id||0)).addClass("selected"),f.find("select").ksr_val(e.state||""),h.find("select").ksr_val(e.goal||""),p.find("select").ksr_val(e.pledged||""),m.find("select").ksr_val(e.raised||"")}v?(t=e.find(".js-search_term input"),n=e.find(".js-featured"),a=n.find(".js-staff_picks"),l=n.find(".js-recommended"),u=n.find(".js-starred"),c=n.find(".js-social"),d=n.find(".js-backed"),f=e.find(".js-states"),h=e.find(".js-goals"),p=e.find(".js-pledged"),m=e.find(".js-raised")):(t=e.find(".search_term input"),n=e.find(".featured"),a=n.find(".staff_picks"),l=n.find(".recommended"),u=n.find(".starred"),c=n.find(".social"),d=n.find(".backed"),f=e.find(".states"),h=e.find(".goals"),p=e.find(".pledged"),m=e.find(".raised")),t.on("cut paste input keydown",function(t){t.keyCode===s.ENTER?y():-1===i.default.indexOf(s.NOT_INPUT,t.keyCode)&&((0,r.default)(document).trigger("discovery:filters:term_changed",b()),e.trigger("ksr_popover:reposition"))}),e.find(".js-search_term_button").on("click",function(){y()}).on("keydown",function(e){e.keyCode!==s.ENTER&&e.keyCode!==s.SPACE||y()}),n.find("li > a").on("click",function(t){var n=(0,r.default)(this),i=n.closest("li");v?n.toggleClass("ksr-green-500").toggleClass("black"):i.toggleClass("selected"),(0,r.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"),t.preventDefault()}),_.find("li > a").on("click",function(t){var n=(0,r.default)(this).closest("li");n.siblings(".selected").removeClass("selected"),n.toggleClass("selected"),(0,r.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"),t.preventDefault()}),e.find("select").on("change",function(){(0,r.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition")}),(0,r.default)(document).on("discovery:sentence:changed",function(e,t){w(t)}),(0,r.default)(document).on("discovery:sentence:term_changed",function(e,n){t.val(n.term)}),(0,r.default)(document).on("discovery:filters:load_sample",function(e,t){w({tag_id:(t.tag||{}).id})}),e.on("ksr_popover:opened",function(){g=t.val()||"",o.default["not-touchable"]&&t.focus()}),e.on("ksr_popover:closed",function(){var n=t.val()||"";r.default.trim(n)!==r.default.trim(g)&&((0,r.default)(document).trigger("discovery:filters:changed",b()),e.trigger("ksr_popover:reposition"))})})},"5ErT":function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)("body#events_filmfest2014_brooklyn",function(){(0,o.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet")})},"5GF7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}},"5RPx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_created_at=(0,o.format)("ll",1e3*e.created_at),e.is_recipient=void 0!==a.default&&a.default.get("id")===e.recipient_id,e.sender_is_registered=e.sender.is_registered,e};var r,i=n("eF8u"),a=(r=i)&&r.__esModule?r:{default:r},o=n("kVy0")},"5Sqi":function(e,t,n){"use strict";var r,i=n("rXeC"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(".mobius.click").livequery(function(){var e,t,n=(0,a.default)(this),r=n.parent().find("a.load_more"),i=n.parent().find(".loading");function o(){e=n.find("*[data-cursor]:last")}o(),t=e.length,n.mobius({trigger_next:r,prepend_next:!n.data("mobius_append"),url:n.data("mobius_url")||!1,page_param:t?"cursor":"page",extra_params:n.data("mobius_extra_params"),page_by:function(n){return t?(o(),e.data("cursor")):n?n+1:1}}),n.data("mobius"),n.on("mobius:loading_page",function(){i.show(),r.parent().hide()}),n.on("mobius:loaded_page",function(e,t,a){n.parent().find(".count .current").text(n.find("li.item").length),i.hide(),a.data("last_page")?r.parent().hide():r.parent().show()})}),(0,a.default)(".mobius:not(.click)").livequery(function(){var e,t,n,r,i,o=(0,a.default)(this);function s(){r=o.find("*[data-cursor]:last")}o.find(".page").data("last_page")||(s(),i=r.length,e=o.mobius({url:o.data("url"),paused:o.is(".paused"),page_param:i?"cursor":"page",extra_params:o.data("extra_params")||"",page_by:function(e){return i?(s(),r.data("cursor")):e?e+1:1}}).data("mobius"),o.length&&(t=(0,a.default)(".js-mini-footer--sticky"),(0,a.default)(".js-mini-footer__links").mouseenter(function(){t.addClass("is-visible")}),t.mouseleave(function(){t.removeClass("is-visible")}),o.on("mobius:loaded_page",function(r,i,s){s.data("last_page")?(e.pause(),o.siblings(".load_more").hide(),n=t.clone(),t.remove()):(e.play(),o.siblings(".load_more").show(),(0,a.default)("body").append(n))})))})})},"5Sqs":function(e,t,n){n("l/Rs"),n("l/Rs");!function(){"use strict";var e=0,t={};function n(r){if(!r)throw new Error("No options passed to Waypoint constructor");if(!r.element)throw new Error("No element option passed to Waypoint constructor");if(!r.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=n.Adapter.extend({},n.defaults,r),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=r.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),t[this.key]=this,e+=1}n.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},n.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete t[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(e){var n=[];for(var r in t)n.push(t[r]);for(var i=0,a=n.length;i<a;i++)n[i][e]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){for(var e in n.Context.refreshAll(),t)t[e].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}var t=0,n={},r=window.Waypoint,i=window.onload;function a(e){this.element=e,this.Adapter=r.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+t,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,n[e.waypointContextKey]=this,t+=1,r.windowContext||(r.windowContext=!0,r.windowContext=new a(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}a.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},a.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),r=this.element==this.element.window;e&&t&&!r&&(this.adapter.off(".waypoints"),delete n[this.key])},a.prototype.createThrottledResizeHandler=function(){var e=this;function t(){e.handleResize(),e.didResize=!1}this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,r.requestAnimationFrame(t))})},a.prototype.createThrottledScrollHandler=function(){var e=this;function t(){e.handleScroll(),e.didScroll=!1}this.adapter.on("scroll.waypoints",function(){e.didScroll&&!r.isTouch||(e.didScroll=!0,r.requestAnimationFrame(t))})},a.prototype.handleResize=function(){r.Context.refreshAll()},a.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var r=t[n],i=r.newScroll>r.oldScroll?r.forward:r.backward;for(var a in this.waypoints[n]){var o=this.waypoints[n][a];if(null!==o.triggerPoint){var s=r.oldScroll<o.triggerPoint,l=r.newScroll>=o.triggerPoint;(s&&l||!s&&!l)&&(o.queueTrigger(i),e[o.group.id]=o.group)}}}for(var u in e)e[u].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},a.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},a.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},a.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},a.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var r=0,i=e.length;r<i;r++)e[r].destroy()},a.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),i={};for(var a in this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var o=e[a];for(var s in this.waypoints[a]){var l,u,c,d,f=this.waypoints[a][s],h=f.options.offset,p=f.triggerPoint,m=0,g=null==p;f.element!==f.element.window&&(m=f.adapter.offset()[o.offsetProp]),"function"==typeof h?h=h.apply(f):"string"==typeof h&&(h=parseFloat(h),f.options.offset.indexOf("%")>-1&&(h=Math.ceil(o.contextDimension*h/100))),l=o.contextScroll-o.contextOffset,f.triggerPoint=Math.floor(m+l-h),u=p<o.oldScroll,c=f.triggerPoint>=o.oldScroll,d=!u&&!c,!g&&(u&&c)?(f.queueTrigger(o.backward),i[f.group.id]=f.group):!g&&d?(f.queueTrigger(o.forward),i[f.group.id]=f.group):g&&o.oldScroll>=f.triggerPoint&&(f.queueTrigger(o.forward),i[f.group.id]=f.group)}}return r.requestAnimationFrame(function(){for(var e in i)i[e].flushTriggers()}),this},a.findOrCreateByElement=function(e){return a.findByElement(e)||new a(e)},a.refreshAll=function(){for(var e in n)n[e].refresh()},a.findByElement=function(e){return n[e.waypointContextKey]},window.onload=function(){i&&i(),a.refreshAll()},r.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},r.Context=a}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}var n={vertical:{},horizontal:{}},r=window.Waypoint;function i(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}i.prototype.add=function(e){this.waypoints.push(e)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var r=this.triggerQueues[n],i="up"===n||"left"===n;r.sort(i?t:e);for(var a=0,o=r.length;a<o;a+=1){var s=r[a];(s.options.continuous||a===r.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},i.prototype.next=function(t){this.waypoints.sort(e);var n=r.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},i.prototype.previous=function(t){this.waypoints.sort(e);var n=r.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},i.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},i.prototype.remove=function(e){var t=r.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(e){return n[e.axis][e.name]||new i(e)},r.Group=i}(),function(){"use strict";var e=window.jQuery,t=window.Waypoint;function n(t){this.$element=e(t)}e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){n.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),e.each(["extend","inArray","isEmptyObject"],function(t,r){n[r]=e[r]}),t.adapters.push({name:"jquery",Adapter:n}),t.Adapter=n}(),function(){"use strict";var e=window.Waypoint;function t(t){return function(){var n=[],r=arguments[0];return t.isFunction(arguments[0])&&((r=t.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var i=t.extend({},r,{element:this});"string"==typeof i.context&&(i.context=t(this).closest(i.context)[0]),n.push(new e(i))}),n}}window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},"5T2m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=h(n("GiK3")),o=h(n("KSGD")),s=n("Z5jf"),l=h(n("9VV1")),u=n("tryQ"),c=n("0n0W"),d=h(n("kDLH")),f=n("x0LT");function h(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={body:"",errors:[]},n.onChange=n.onChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.onMutate=n.onMutate.bind(n),n.lengthCheck=n.maxLengthCheck.bind(n),n.maxLength=9001,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"maxLengthCheck",value:function(e){return e.length>=this.maxLength}},{key:"onChange",value:function(e){var t=e.target.value;this.maxLengthCheck(t)?this.setState(function(e){var t=(0,s.boundT)("project_page.comments.Youve_reached_maximum");return{errors:[].concat(p(e.errors),[t])}}):this.setState(function(){return{body:t,errors:[]}})}},{key:"onMutate",value:function(){var e=this;return this.props.mutate({variables:{body:this.state.body,projectId:this.props.projectId,parentId:this.props.parentId||null},optimisticResponse:(0,f.createOptimisticComment)(this.state,this.props),update:function(t,n){var i=n.data.createProjectComment,a=t.readQuery({query:c.GET_COMMENTS,variables:{pid:e.props.pid,cursor:null,replyCursor:null}}),o=r({},a,{project:r({},a.project,{comments:r({},a.project.comments,{totalCount:e.props.parentId?a.project.comments.totalCount:a.project.comments.totalCount+1,edges:e.props.parentId?(0,f.commentsWithNewReply)(a.project.comments.edges,i.comment):(0,f.commentsWithNewComment)(a.project.comments.edges,i.comment)})})});t.writeQuery({query:c.GET_COMMENTS,variables:{pid:e.props.pid,cursor:null,replyCursor:null},data:o})}})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),0!==this.state.body.replace(/\s/g,"").length)return this.onMutate().then(function(){t.setState(function(){return{body:"",errors:[]}},t.props.onSuccess||function(){})}).catch(function(e){u.Honeybadger.notify(JSON.stringify(e),{context:{tags:"backer_experience"}}),(0,l.default)({error:(0,s.boundT)("project_page.comments.Something_went_wrong_comment")})});this.setState(function(e){var t=(0,s.boundT)("project_page.comments.Comment_body_cant_be");return{errors:[].concat(p(e.errors),[t])}})}},{key:"render",value:function(){return a.default.createElement(d.default,{onSubmit:this.onSubmit,imageUrl:this.props.author.imageUrl,projectId:this.props.projectId,onChange:this.onChange,body:this.state.body,errors:this.state.errors,maxLength:this.maxLength})}}]),t}();m.propTypes={pid:o.default.oneOfType([o.default.string,o.default.number]),projectId:o.default.string,author:o.default.shape({id:o.default.string,imageUrl:o.default.string,name:o.default.string,isSuperBacker:o.default.bool,isKsrAdmin:o.default.bool}),currentCursor:o.default.string,replyCursor:o.default.string,parentId:o.default.string,onSuccess:o.default.func},t.default=m},"5Xbz":function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function i(e){return r(e)===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,a=1;a<t.length;a++){var o=t[a],s=r(o);if(s<o.length&&(null===n||s<n)&&0===(n=s))break}if(n)for(var l=1;l<t.length;l++)t[l]=t[l].slice(n);for(;t.length>0&&i(t[0]);)t.shift();for(;t.length>0&&i(t[t.length-1]);)t.pop();return t.join("\n")}},"5fhp":function(e,t,n){(function(t){var n="Expected a function",r=9007199254740991,i="[object Arguments]",a="[object Function]",o="[object GeneratorFunction]",s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=s||l||Function("return this")();function c(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var d=Object.prototype,f=d.hasOwnProperty,h=d.toString,p=u.Symbol,m=d.propertyIsEnumerable,g=p?p.isConcatSpreadable:void 0,v=Math.max;function _(e){return y(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?h.call(e):"";return t==a||t==o}(e)}(e)}(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||h.call(e)==i)}(e)||!!(g&&e&&e[g])}var y=Array.isArray;var b,w,E,k=(b=!0,w=function(e){var t=(e=function e(t,n,r,i,a){var o=-1,s=t.length;for(r||(r=_),a||(a=[]);++o<s;){var l=t[o];n>0&&r(l)?n>1?e(l,n-1,r,i,a):c(a,l):i||(a[a.length]=l)}return a}(e,1)).length,r=t;for(b&&e.reverse();r--;)if("function"!=typeof e[r])throw new TypeError(n);return function(){for(var n=0,r=t?e[n].apply(this,arguments):arguments[0];++n<t;)r=e[n].call(this,r);return r}},E=v(void 0===E?w.length-1:E,0),function(){for(var e=arguments,t=-1,n=v(e.length-E,0),r=Array(n);++t<n;)r[t]=e[E+t];t=-1;for(var i=Array(E+1);++t<E;)i[t]=e[t];return i[E]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(w,this,i)});e.exports=k}).call(t,n("DuR2"))},"5ln5":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("change","body#site_privacy form.select_country",function(){(0,a.default)(this).submit()})})},"5ns8":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("hsYx"),(0,a.default)(function(){["history","banner_canada_projects_animated","banner_canada_hide","banner_iphone_animated","banner_iphone_hide","banner_social_animated","banner_social_hide","banner_stripe_build_transition_hide","banner_verified_identity_hide","banner_yir_animated","ppjun2016","yir_banner_hide","yir_launch_banner","yir_takeover_hide","history_v1","video_mode_projects_seen","video_mode_seen"].forEach(function(e){KSR.store.removeItem(e)}),KSR.store.getItem("dismiss_post_funding_onboarding")&&KSR.store.setItem("dismiss_spotlight_onboarding","true"),KSR.store.removeItem("dismiss_post_funding_onboarding")})},"6CtT":function(e,t,n){"use strict";var r,i=n("shXp"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");!function(e){e.fn.serialize_without_blank=function(){var t,n=[];return this.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(n.push(this),this.disabled=!0)}),t=this.serialize(),a.default.each(n,function(e){e.disabled=!1}),t}}(o)},"6F/s":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("wmCY")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS_backers__info";(0,r.default)(document).on("click",e+" .pledge .reward_details",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".pledge");t.find(".description").toggle(),t.find(".description_short").toggle(),t.trigger("resize")}),(0,r.default)(document).on("click",e+" a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(e){var t,n=(0,r.default)(this),i=n.is(".completed");r.default.ajax({url:n.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!i},success:function(e){n.trigger("backer_completed",[n.data("backer_id"),!i,e.backer_completed_at]),n.toggleClass("completed",!i),e.backer_completed_at&&n.find("span.date").text(e.backer_completed_at)}}),n.closest(".modal_dialog").length?t="backer_modal":n.closest("td.completed").length&&(t="backer_row"),i?(0,a.track)("Rewards Sent Unchecked",{context:t}):(0,a.track)("Rewards Sent Checked",{context:t}),e.preventDefault()}),(0,r.default)(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=(0,r.default)(this).attr("rel"),i=(0,r.default)("."+n);(0,r.default)(e+" .panel").hide(),i.show(),(0,r.default)(".tab-nav li").removeClass("selected"),(0,r.default)(this).closest("li").addClass("selected"),(0,a.track)("Backings Show Toggle Tab",{toggled_to:n})}),(0,r.default)(document).on("ksr_json:complete",e+" .messages_panel",function(){var e=(0,r.default)(this),t=e.find(".message").length+1;e.trigger("message_sent",[e.data("backing-id"),t])}),(0,r.default)(document).on("message_sent",e+" .messages_panel",function(t,n,a){(0,r.default)(this).closest(e).find(".messages_link").html(i.default.t("onloads.views.backers.info.Messages_count",{count:a}))})})},"6JMX":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),(0,a.default)(function(){(0,a.default)(".video_player").livequery(function(){(0,a.default)(this).ksr_video()})})},"6TZa":function(e,t,n){"use strict";var r=n("Tvaj"),i=n("l/Rs");n("l/Rs");!function(e){function t(t){t.each(function(){var t=e(this),n=t.find("option:selected");t.siblings(".js-title, .title").text(n.text().trim()||n.data("altLabel"))})}e.fn.ksrSelect=function(){var n=e(this);n.find(".js-ksr-select").livequery(function(){t(e(this).find("select"))}),n.on("focus blur",".js-ksr-select select",function(){e(this).parent().toggleClass("is-focus")}),n.on("change",".js-ksr-select select",function(){t(e(this))}),n.on("keydown",".ksr-icon__arrow-down, .ss-delete, .js-filter-arrow, .js-filter-delete",function(t){var n=e(this),i=t.keyCode;i!==r.ENTER&&i!==r.SPACE||(t.preventDefault(),(n.hasClass("ss-delete")||n.hasClass("js-filter-delete"))&&n.parent().find(".ksr-icon__arrow-down, .js-filter-arrow").focus(),n.click())})},e.fn.ksr_val=function(n){var r=e(this);if(void 0!==n){var i=r.val(n);return t(r),i}return r.val()}}(i)},"6djF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={pageX:function(e){return e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX}};t.default=r},"6fBM":function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r};n("M1ti"),(0,a.default)("body#events_blockparty.not-touchable",function(){skrollr.init()})},"6fpj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntaxError=function(e,t,n){return new r.GraphQLError("Syntax Error: "+n,void 0,e,[t])};var r=n("QmgZ")},"6u75":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e,t){var n="string"==typeof e?new r.Source(e):e;if(!(n instanceof r.Source))throw new TypeError("Must provide Source. Received: "+String(n));return function(e){var t=e.token;Y(e,a.TokenKind.SOF);var n=[];do{n.push(u(e))}while(!K(e,a.TokenKind.EOF));return{kind:o.Kind.DOCUMENT,definitions:n,loc:W(e,t)}}((0,a.createLexer)(n,t||{}))},t.parseValue=function(e,t){var n="string"==typeof e?new r.Source(e):e,i=(0,a.createLexer)(n,t||{});Y(i,a.TokenKind.SOF);var o=E(i,!1);return Y(i,a.TokenKind.EOF),o},t.parseType=function(e,t){var n="string"==typeof e?new r.Source(e):e,i=(0,a.createLexer)(n,t||{});Y(i,a.TokenKind.SOF);var o=x(i);return Y(i,a.TokenKind.EOF),o},t.parseConstValue=S,t.parseTypeReference=x,t.parseNamedType=P;var r=n("gyRD"),i=n("Qhe+"),a=n("AxoS"),o=n("Jko5"),s=n("nC2W");function l(e){var t=Y(e,a.TokenKind.NAME);return{kind:o.Kind.NAME,value:t.value,loc:W(e,t)}}function u(e){if(V(e,a.TokenKind.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return c(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"extend":case"directive":return I(e)}else{if(V(e,a.TokenKind.BRACE_L))return c(e);if(O(e))return I(e)}throw X(e)}function c(e){if(V(e,a.TokenKind.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return d(e);case"fragment":return function(e){var t=e.token;if(Q(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:o.Kind.FRAGMENT_DEFINITION,name:w(e),variableDefinitions:h(e),typeCondition:(Q(e,"on"),P(e)),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)};return{kind:o.Kind.FRAGMENT_DEFINITION,name:w(e),typeCondition:(Q(e,"on"),P(e)),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}(e)}else if(V(e,a.TokenKind.BRACE_L))return d(e);throw X(e)}function d(e){var t=e.token;if(V(e,a.TokenKind.BRACE_L))return{kind:o.Kind.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:g(e),loc:W(e,t)};var n=f(e),r=void 0;return V(e,a.TokenKind.NAME)&&(r=l(e)),{kind:o.Kind.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:h(e),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}function f(e){var t=Y(e,a.TokenKind.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw X(e,t)}function h(e){return V(e,a.TokenKind.PAREN_L)?J(e,a.TokenKind.PAREN_L,p,a.TokenKind.PAREN_R):[]}function p(e){var t=e.token;return{kind:o.Kind.VARIABLE_DEFINITION,variable:m(e),type:(Y(e,a.TokenKind.COLON),x(e)),defaultValue:K(e,a.TokenKind.EQUALS)?E(e,!0):void 0,loc:W(e,t)}}function m(e){var t=e.token;return Y(e,a.TokenKind.DOLLAR),{kind:o.Kind.VARIABLE,name:l(e),loc:W(e,t)}}function g(e){var t=e.token;return{kind:o.Kind.SELECTION_SET,selections:J(e,a.TokenKind.BRACE_L,v,a.TokenKind.BRACE_R),loc:W(e,t)}}function v(e){return V(e,a.TokenKind.SPREAD)?function(e){var t=e.token;if(Y(e,a.TokenKind.SPREAD),V(e,a.TokenKind.NAME)&&"on"!==e.token.value)return{kind:o.Kind.FRAGMENT_SPREAD,name:w(e),directives:A(e,!1),loc:W(e,t)};var n=void 0;"on"===e.token.value&&(e.advance(),n=P(e));return{kind:o.Kind.INLINE_FRAGMENT,typeCondition:n,directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}(e):function(e){var t=e.token,n=l(e),r=void 0,i=void 0;K(e,a.TokenKind.COLON)?(r=n,i=l(e)):i=n;return{kind:o.Kind.FIELD,alias:r,name:i,arguments:_(e,!1),directives:A(e,!1),selectionSet:V(e,a.TokenKind.BRACE_L)?g(e):void 0,loc:W(e,t)}}(e)}function _(e,t){var n=t?b:y;return V(e,a.TokenKind.PAREN_L)?J(e,a.TokenKind.PAREN_L,n,a.TokenKind.PAREN_R):[]}function y(e){var t=e.token;return{kind:o.Kind.ARGUMENT,name:l(e),value:(Y(e,a.TokenKind.COLON),E(e,!1)),loc:W(e,t)}}function b(e){var t=e.token;return{kind:o.Kind.ARGUMENT,name:l(e),value:(Y(e,a.TokenKind.COLON),S(e)),loc:W(e,t)}}function w(e){if("on"===e.token.value)throw X(e);return l(e)}function E(e,t){var n=e.token;switch(n.kind){case a.TokenKind.BRACKET_L:return function(e,t){var n=e.token,r=t?S:C;return{kind:o.Kind.LIST,values:function(e,t,n,r){Y(e,t);var i=[];for(;!K(e,r);)i.push(n(e));return i}(e,a.TokenKind.BRACKET_L,r,a.TokenKind.BRACKET_R),loc:W(e,n)}}(e,t);case a.TokenKind.BRACE_L:return function(e,t){var n=e.token;Y(e,a.TokenKind.BRACE_L);var r=[];for(;!K(e,a.TokenKind.BRACE_R);)r.push(T(e,t));return{kind:o.Kind.OBJECT,fields:r,loc:W(e,n)}}(e,t);case a.TokenKind.INT:return e.advance(),{kind:o.Kind.INT,value:n.value,loc:W(e,n)};case a.TokenKind.FLOAT:return e.advance(),{kind:o.Kind.FLOAT,value:n.value,loc:W(e,n)};case a.TokenKind.STRING:case a.TokenKind.BLOCK_STRING:return k(e);case a.TokenKind.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:o.Kind.BOOLEAN,value:"true"===n.value,loc:W(e,n)}):"null"===n.value?(e.advance(),{kind:o.Kind.NULL,loc:W(e,n)}):(e.advance(),{kind:o.Kind.ENUM,value:n.value,loc:W(e,n)});case a.TokenKind.DOLLAR:if(!t)return m(e)}throw X(e)}function k(e){var t=e.token;return e.advance(),{kind:o.Kind.STRING,value:t.value,block:t.kind===a.TokenKind.BLOCK_STRING,loc:W(e,t)}}function S(e){return E(e,!0)}function C(e){return E(e,!1)}function T(e,t){var n=e.token;return{kind:o.Kind.OBJECT_FIELD,name:l(e),value:(Y(e,a.TokenKind.COLON),E(e,t)),loc:W(e,n)}}function A(e,t){for(var n=[];V(e,a.TokenKind.AT);)n.push(R(e,t));return n}function R(e,t){var n=e.token;return Y(e,a.TokenKind.AT),{kind:o.Kind.DIRECTIVE,name:l(e),arguments:_(e,t),loc:W(e,n)}}function x(e){var t=e.token,n=void 0;return K(e,a.TokenKind.BRACKET_L)?(n=x(e),Y(e,a.TokenKind.BRACKET_R),n={kind:o.Kind.LIST_TYPE,type:n,loc:W(e,t)}):n=P(e),K(e,a.TokenKind.BANG)?{kind:o.Kind.NON_NULL_TYPE,type:n,loc:W(e,t)}:n}function P(e){var t=e.token;return{kind:o.Kind.NAMED_TYPE,name:l(e),loc:W(e,t)}}function I(e){var t=O(e)?e.lookahead():e.token;if(t.kind===a.TokenKind.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Q(e,"schema");var n=A(e,!0),r=J(e,a.TokenKind.BRACE_L,D,a.TokenKind.BRACE_R);return{kind:o.Kind.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:W(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=j(e);Q(e,"scalar");var r=l(e),i=A(e,!0);return{kind:o.Kind.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:W(e,t)}}(e);case"type":return function(e){var t=e.token,n=j(e);Q(e,"type");var r=l(e),i=N(e),a=A(e,!0),s=L(e);return{kind:o.Kind.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:a,fields:s,loc:W(e,t)}}(e);case"interface":return function(e){var t=e.token,n=j(e);Q(e,"interface");var r=l(e),i=A(e,!0),a=L(e);return{kind:o.Kind.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:a,loc:W(e,t)}}(e);case"union":return function(e){var t=e.token,n=j(e);Q(e,"union");var r=l(e),i=A(e,!0),a=U(e);return{kind:o.Kind.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:a,loc:W(e,t)}}(e);case"enum":return function(e){var t=e.token,n=j(e);Q(e,"enum");var r=l(e),i=A(e,!0),a=H(e);return{kind:o.Kind.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:a,loc:W(e,t)}}(e);case"input":return function(e){var t=e.token,n=j(e);Q(e,"input");var r=l(e),i=A(e,!0),a=z(e);return{kind:o.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:a,loc:W(e,t)}}(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===a.TokenKind.NAME)switch(t.value){case"scalar":return function(e){var t=e.token;Q(e,"extend"),Q(e,"scalar");var n=l(e),r=A(e,!0);if(0===r.length)throw X(e);return{kind:o.Kind.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:W(e,t)}}(e);case"type":return function(e){var t=e.token;Q(e,"extend"),Q(e,"type");var n=l(e),r=N(e),i=A(e,!0),a=L(e);if(0===r.length&&0===i.length&&0===a.length)throw X(e);return{kind:o.Kind.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:a,loc:W(e,t)}}(e);case"interface":return function(e){var t=e.token;Q(e,"extend"),Q(e,"interface");var n=l(e),r=A(e,!0),i=L(e);if(0===r.length&&0===i.length)throw X(e);return{kind:o.Kind.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:W(e,t)}}(e);case"union":return function(e){var t=e.token;Q(e,"extend"),Q(e,"union");var n=l(e),r=A(e,!0),i=U(e);if(0===r.length&&0===i.length)throw X(e);return{kind:o.Kind.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:W(e,t)}}(e);case"enum":return function(e){var t=e.token;Q(e,"extend"),Q(e,"enum");var n=l(e),r=A(e,!0),i=H(e);if(0===r.length&&0===i.length)throw X(e);return{kind:o.Kind.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:W(e,t)}}(e);case"input":return function(e){var t=e.token;Q(e,"extend"),Q(e,"input");var n=l(e),r=A(e,!0),i=z(e);if(0===r.length&&0===i.length)throw X(e);return{kind:o.Kind.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:W(e,t)}}(e)}throw X(e,t)}(e);case"directive":return function(e){var t=e.token,n=j(e);Q(e,"directive"),Y(e,a.TokenKind.AT);var r=l(e),i=F(e);Q(e,"on");var s=function(e){K(e,a.TokenKind.PIPE);var t=[];do{t.push(q(e))}while(K(e,a.TokenKind.PIPE));return t}(e);return{kind:o.Kind.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:s,loc:W(e,t)}}(e)}throw X(e,t)}function O(e){return V(e,a.TokenKind.STRING)||V(e,a.TokenKind.BLOCK_STRING)}function j(e){if(O(e))return k(e)}function D(e){var t=e.token,n=f(e);Y(e,a.TokenKind.COLON);var r=P(e);return{kind:o.Kind.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:W(e,t)}}function N(e){var t=[];if("implements"===e.token.value){e.advance(),K(e,a.TokenKind.AMP);do{t.push(P(e))}while(K(e,a.TokenKind.AMP)||e.options.allowLegacySDLImplementsInterfaces&&V(e,a.TokenKind.NAME))}return t}function L(e){return e.options.allowLegacySDLEmptyFields&&V(e,a.TokenKind.BRACE_L)&&e.lookahead().kind===a.TokenKind.BRACE_R?(e.advance(),e.advance(),[]):V(e,a.TokenKind.BRACE_L)?J(e,a.TokenKind.BRACE_L,M,a.TokenKind.BRACE_R):[]}function M(e){var t=e.token,n=j(e),r=l(e),i=F(e);Y(e,a.TokenKind.COLON);var s=x(e),u=A(e,!0);return{kind:o.Kind.FIELD_DEFINITION,description:n,name:r,arguments:i,type:s,directives:u,loc:W(e,t)}}function F(e){return V(e,a.TokenKind.PAREN_L)?J(e,a.TokenKind.PAREN_L,B,a.TokenKind.PAREN_R):[]}function B(e){var t=e.token,n=j(e),r=l(e);Y(e,a.TokenKind.COLON);var i=x(e),s=void 0;K(e,a.TokenKind.EQUALS)&&(s=S(e));var u=A(e,!0);return{kind:o.Kind.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:s,directives:u,loc:W(e,t)}}function U(e){var t=[];if(K(e,a.TokenKind.EQUALS)){K(e,a.TokenKind.PIPE);do{t.push(P(e))}while(K(e,a.TokenKind.PIPE))}return t}function H(e){return V(e,a.TokenKind.BRACE_L)?J(e,a.TokenKind.BRACE_L,G,a.TokenKind.BRACE_R):[]}function G(e){var t=e.token,n=j(e),r=l(e),i=A(e,!0);return{kind:o.Kind.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:W(e,t)}}function z(e){return V(e,a.TokenKind.BRACE_L)?J(e,a.TokenKind.BRACE_L,B,a.TokenKind.BRACE_R):[]}function q(e){var t=e.token,n=l(e);if(s.DirectiveLocation.hasOwnProperty(n.value))return n;throw X(e,t)}function W(e,t){if(!e.options.noLocation)return new $(t,e.lastToken,e.source)}function $(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function V(e,t){return e.token.kind===t}function K(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function Y(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw(0,i.syntaxError)(e.source,n.start,"Expected "+t+", found "+(0,a.getTokenDesc)(n))}function Q(e,t){var n=e.token;if(n.kind===a.TokenKind.NAME&&n.value===t)return e.advance(),n;throw(0,i.syntaxError)(e.source,n.start,'Expected "'+t+'", found '+(0,a.getTokenDesc)(n))}function X(e,t){var n=t||e.token;return(0,i.syntaxError)(e.source,n.start,"Unexpected "+(0,a.getTokenDesc)(n))}function J(e,t,n,r){Y(e,t);for(var i=[n(e)];!K(e,r);)i.push(n(e));return i}$.prototype.toJSON=$.prototype.inspect=function(){return{start:this.start,end:this.end}}},"7HQH":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var n=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",r=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(n,function(e){t.API.next()}),t.container.on(r,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,n,r){if(!t.allowWrap){var i=t.disabledClass,a=t.API.getComponent("next"),o=t.API.getComponent("prev"),s=t._prevBoundry||0,l=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==l?a.addClass(i).prop("disabled",!0):a.removeClass(i).prop("disabled",!1),t.currSlide===s?o.addClass(i).prop("disabled",!0):o.removeClass(i).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(r)},"7IIE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchThanksPageRecsQuery=void 0;var r=n("Z6GA"),i=n("uVwQ");t.fetchThanksPageRecsQuery=function(e){var t=e.projectId,n=e.imageWidth,a=e.optOutOfRecommendation;return(0,r.fetchGraph)(i.FetchThanksPageRecommendedProjects,{imageWidth:n,projectId:a?null:t,recommended:!a,staffPicks:a||null})}},"7Tqv":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("+bVi"));function o(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,i.default)("body#site_spotlight",function(){a.default["not-touchable"]&&window.setTimeout(function(){skrollr.init({forceHeight:!1})},1e3),(0,r.default)(".js-explore-bar").on("click",function(e){(0,r.default)("html, body").animate({scrollTop:(0,r.default)("#js-spotlight-projects").offset().top},500,"easeOutExpo"),e.preventDefault()})})},"7VtR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("b04z"),s=n("Z5jf");t.default=function(e){var t=e.onSubmit;return e.hasFlaggings?a.default.createElement("span",{className:"h7 flex items-center p3 border-box"},(0,s.boundT)("project_page.comments.Reported")):a.default.createElement(o.Button,{color:"white",onClick:t},(0,s.boundT)("project_page.comments.Report"))}},"7dY0":function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("c5nH")),a=s(n("8NzR")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("body#pledges_new",function(){(0,o.track)("Viewed Pledge Checkout Page"),(0,r.default)("a.show_all_rewards").click(function(e){(0,r.default)(this).parents(".checkout_rewards").find("li:hidden").show(),(0,r.default)(this).parents(".checkout_rewards").removeClass("clicked_reward"),(0,r.default)(this).parents(".show_all").hide(),e.preventDefault(),(0,r.default)(document).trigger("shifted"),(0,o.track)("Expanded Rewards")}),(0,r.default)(".flash-error").livequery(function(){var e,t=parseInt((0,r.default)(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);e=void 0!==(0,r.default)(".radio:checked").attr("alt")?parseInt((0,r.default)(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null,(0,o.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,r.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),-1!==location.search.indexOf("edit_from_interstitial=shipping")?(0,o.track)("Clicked Edit Shipping",{shipping_enabled:(0,r.default)(".radio:checked").parent().data("shipping_enabled"),project_country:i.default.get("country")}):-1!==location.search.indexOf("edit_from_interstitial=amount")&&(0,o.track)("Clicked Edit Amount",{shipping_enabled:(0,r.default)(".radio:checked").parent().data("shipping_enabled"),project_country:i.default.get("country")})})},"7e+d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trademarkPolicyLink=t.copyrightPolicyLink=t.communityGuidelinesLink=t.prohibitedItemsLink=t.ourRulesLink=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf");t.ourRulesLink=a.default.createElement("a",{target:"blank",href:"/rules"},(0,o.boundT)("project_page.flagging.Our_rules")),t.prohibitedItemsLink=a.default.createElement("a",{target:"blank",href:"/rules/prohibited"},(0,o.boundT)("project_page.flagging.Prohibited_items")),t.communityGuidelinesLink=a.default.createElement("a",{target:"blank",href:"/help/community"},(0,o.boundT)("project_page.flagging.Community_guidelines")),t.copyrightPolicyLink=a.default.createElement("a",{target:"blank",href:"/help/copyright"},(0,o.boundT)("project_page.flagging.Copyright_policy")),t.trademarkPolicyLink=a.default.createElement("a",{target:"blank",href:"/help/trademark"},(0,o.boundT)("project_page.flagging.Trademark_policy"))},"7fY0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButtonLabel=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r};t.RadioButtonLabel=function(e){var t=e.labelHeader,n=e.labelBody;return a.default.createElement("div",null,a.default.createElement("strong",null,t),a.default.createElement("br",null),n)}},"7hji":function(e,t,n){"use strict";var r=l(n("l/Rs")),i=n("4RZc"),a=l(n("8NzR")),o=l(n("wmCY")),s=l(n("1LFw"));function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,a.default)("#new-sepa-account",function(e){if(!((0,r.default)("#react-payments-form").length>0)){var t={account_name_presence:o.default.t("sepa.errors.account_name_presence"),account_number_presence:o.default.t("sepa.errors.account_number_presence"),account_number_invalid:o.default.t("sepa.errors.account_number_invalid"),account_terms_accepted:o.default.t("sepa.errors.account_terms"),unknown_error:o.default.t("onloads.views.credit_cards.form.Embarrassing_unknown_error_occurred"),stripe_timeout:o.default.t("onloads.views.credit_cards.form.Embarrassing_processing_your_pledge")},n=e.find("#new_sepa_account_form"),a=n.find(".errored"),l=(0,r.default)("#saving-layer"),u=n.data("public-key"),c=n.find(":input"),d=n.find("input[name=sepa_account_name]"),f=n.find("input[name=sepa_account_number]"),h=n.find("input[name=sepa_accept_terms]"),p=n.find("input[name=reusable]"),m=n.data("checkout-reward-id"),g=n.data("checkout-id"),v=""===n.data("checkout-is-guest"),_=function(e,t){(0,i.track)("Checkout Error",{type:e,context:t,checkout_reward_id:m,checkout_id:g,checkout_is_guest:v})},y=function(e,n){var i=(0,r.default)(n),a=i.data("error");t.hasOwnProperty(a)&&(_(a),i.closest("li").addClass("invalid").find(".js-error-message").removeClass("hide h0").addClass("block mb1").text(t[a]))},b=function(e,t){(0,r.default)(t).data("error",null).closest("li").removeClass("invalid").find(".js-error-message").removeClass("block mb1").addClass("hide h0")};d.validates_presence({error:"account_name_presence"}),f.validates_presence({error:"account_number_presence"}).validates_custom(function(e){return 0===e.indexOf("DE")&&s.default.isValid(e)},{error:"account_number_invalid"}),h.validates_custom(function(){return h.is(":checked")},{error:"account_terms_accepted"}),c.on("paste keyup cut change input click",function(e){setTimeout(function(){(0,r.default)(e.target).validate()},0)}).on("blur",function(e){return(0,r.default)(e.target).each(y)}).on("validate:valid",function(e){return(0,r.default)(e.target).each(b)}).on("validate:invalid",function(e,t){return(0,r.default)(e.target).data("error",t)});var w=(0,r.default)("#js-stripe_form"),E=w.find("input[name=stripe_card_id]"),k=w.find("input[name=payment_type]"),S=w.find("input[name=reusable]");e.on("click",".sepa-terms__toggle",function(e){e.preventDefault(),(0,r.default)(".sepa-terms__mandate").toggleClass("sepa-terms__mandate--expanded")}),n.on("submit",function(e){if(e.preventDefault(),n.validate()){a.hide(),l.show();var t=setTimeout(function(){l.removeClass("spinning").find(".modal_dialog_body").html(o.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")),_("stripe_timeout")},3e4);Stripe.setPublishableKey(u),Stripe.source.create({currency:"eur",sepa_debit:{iban:f.val()},owner:{name:d.val()},type:"sepa_debit"},function(e,n){clearTimeout(t),l.hide(),C(n)})}else c.each(y)});var C=function(e){e.error?(a.html(e.error.message),a.show(),_("stripe_token",e.error.message)):(k.val("bank_account"),E.val(e.id),S.val(p.val()),w.submit())};(0,r.default)(document).on("change click","input.account_toggle",function(){(0,r.default)(this).closest(".payment_option").addClass("selected");var e=(0,r.default)("input.card_toggle");e.closest(".payment_option").removeClass("selected"),e.prop("checked",!1),n.slideDown(400,"easeOutQuad"),(0,r.default)("#new_card_form").slideUp(400,"easeOutQuad")}),(0,r.default)(document).on("change click","input.card_toggle",function(){(0,r.default)("input.account_toggle").prop("checked",!1),(0,r.default)("input.account_toggle").closest(".payment_option").removeClass("selected"),n.slideUp(400,"easeOutQuad")})}})},"7zD0":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,r.default)("form.requires-confirmation","submit").livequery(function(e){var t=(0,r.default)(this);(0,r.default)(this).find("input.confirmation").is(":checked")||(setTimeout(function(){t.removeClass("submitting-non-ajax")},100),(0,i.default)({error:a.default.t("onloads.initializers.form_requires_confirmation.Please_accept_the_Rules")}),e.preventDefault())})},"8+5l":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e)||(e.className=e.className+" "+t)};var r,i=n("Hgtn"),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},"84+x":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){var t;function n(t,n){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},n),this.url=this.options.url||this.$form.attr("action"),this.options.file_extension?this.ajax_url=this.ensure_file_extension(this.options.file_extension):this.ajax_url=this.url,this.last_search=!1,this.search_xhr=!1,this.options.client_side_cache?this.cache={}:this.cache=!1,this.active=!0,this._attach()}e.fn.livesearch=function(t){return t=t||{},e(this).each(function(){var r=e(this).data("livesearch");r||(r=new n(e(this),t),e(this).data("livesearch",r))})},e.extend(n.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(t),t=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),n=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(n,function(t,n,r,i){return n+"."+e+i})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,n=this.options.serialize.serialize();this.options.process_data&&"object"==typeof(n=this.options.process_data.apply(this,[n]))&&(n=e.param(n)),n!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[n]&&"function"!=typeof this.cache[n]?this.$elem.trigger("livesearch:results",[this.cache[n]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:n,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[n]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=n))}})}(r)},"86os":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(".NS_pledges__no_ship").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("form.NS_pledges__form, form.manage_pledge"),n=t.find(".fields_and_submit"),r=t.closest(".modal_dialog"),i=r.data("modal_dialog");e.find("a.override").click(function(e){e.preventDefault(),(0,a.default)(this).trigger("close"),t.data("override",!0),t.removeClass("submitting-non-ajax"),t.find("#backing_location_id").val(null),t.submit()}),e.find("a.btn--green").click(function(t){t.preventDefault(),(0,a.default)(this).trigger("close"),i&&(e.hide(),n.show(),r.find("h1").show())})})})},"89L0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimer=t.submitRequest=t.handleLoadFailure=t.handleLoadSuccess=t.unboundAsyncReducer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("tryQ"),a=n("EIRz"),o=n("Z6GA"),s=n("Tvr3");t.unboundAsyncReducer=function(e,t,n){return function(r,i){if(i.namespace&&i.namespace!==t)return r;switch(i.type){case"ASYNC_LOAD_INIT":return l(r,{populationQuery:n,queryArgs:i.queryArgs,namespace:i.namespace,startTimer:e.startFetchTimer,onLoadSuccess:e.onLoadSuccess,onLoadFailure:e.onLoadFailure});case"ASYNC_LOAD_SUCCESS":return u(r);case"ASYNC_LOAD_FAIL":return c(r);case"ASYNC_START_TIMER":return h(r,i.namespace,i.queryArgs,e.timerExpired);case"ASYNC_TIMER_EXPIRED":return p(r,e.loadAsync,n,i.queryArgs);default:return r}}};var l=function(e,t){var n=t.populationQuery,i=t.queryArgs,l=t.namespace,u=t.startTimer,c=t.onLoadSuccess,f=t.onLoadFailure;return(0,a.loop)(r({},e,{loadStatus:s.IN_PROGRESS}),a.Cmd.batch([a.Cmd.run(d,{args:[{populationQuery:n,queryArgs:i,onLoadSuccess:c,onLoadFailure:f}],successActionCreator:o.identity,failActionCreator:o.identity}),a.Cmd.action(u(l,i))]))},u=t.handleLoadSuccess=function(e){return r({},e,{loadStatus:s.LOADED})},c=t.handleLoadFailure=function(e){return r({},e,{loadStatus:s.UNLOADED})},d=t.submitRequest=function(e){var t=e.populationQuery,n=e.queryArgs,r=e.onLoadSuccess,a=e.onLoadFailure;return t.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)).then(function(e){return e.errors&&Promise.reject(e.errors),r(e.data)}).catch(function(e){return e.map(function(e){return i.Honeybadger.notify(e)}),a(n)})},f=t.fetchTimer=function(e,t,n,r){return(0,o.wait)(r,function(){return e(t,n)})(t,n)},h=function(e,t,n,r){return(0,a.loop)(e,a.Cmd.run(f,{args:[r,t,n,e.fetchTimeout]}))},p=function(e,t,n,i){var o=e.loadStatus,l=e.currentFetchRetries+1,u=e.maxFetchRetries<l;return o===s.LOADED||u?e:(0,a.loop)(r({},e,{currentFetchRetries:l}),a.Cmd.action(t(n,i)))}},"8ANd":function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".NS_projects__project_share",function(){r.default.getScript("//platform.tumblr.com/v1/share.js")})},"8Ml/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initProjectCardClickedTracking=t.initProjectCardTracking=t.trackProjectCards=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("l/Rs"),o=(r=a)&&r.__esModule?r:{default:r};n("LNuh");var s=n("4RZc"),l=n("Z6GA"),u=n("I2cB");var c=[],d=function(e){(0,s.track)("Viewed Project Card",e.data,{withoutCurrentProject:!0}),e.viewed=!0},f=function(e){var t=(0,o.default)(e.element),n=window.scrollY+window.innerHeight,r=t.offset().top+t.height()/2;return n>r&&r>0&&!e.viewed},h=function(e){return u.maybe.fromNullable(e.dataset).map(function(e){return["section","model_name","raw_score","weighted_score","project_state","project_pid","project_backers_count","project_percent_raised","project_pledged","user_is_backer","user_has_starred"].reduce(function(t,n){return i({},t,(r={},a=n,o=e[n]||"",a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r));var r,a,o},{})}).map(function(t){return i({},t,function(e){var t=(0,o.default)(e).parent(),n=(0,o.default)(e).closest(".js-project-group").find(".js-track-project-card"),r=n.first().parent().siblings().length+1;return{position_in_row:t.index()+1,row_total:t.siblings().length+1,row_number:Math.ceil((n.index((0,o.default)(e))+1)/r)}}(e))}).getOrElse({})};t.trackProjectCards=function(){c.filter((0,l.compose)(l.isFalse,(0,l.prop)("viewed"))).filter((0,l.compose)(l.isFalse,(0,l.prop)("hidden"))).filter(f).forEach(d)},t.initProjectCardTracking=function(e){e.forEach(function(e){return(0,o.default)(e).livequery(function(){c=c.concat({data:h(this),hidden:(0,o.default)(this).parent().hasClass("hide"),element:this,viewed:!1})})})},t.initProjectCardClickedTracking=function(e,t,n){var r=i({},h(e),n);(0,o.default)(e).find("a").each(function(e,n){return(0,s.trackLinks)(n,t,r,{withoutCurrentProject:!0})})}},"8NzR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){(0,a.default)(function(){var n=(0,a.default)(e);n.length&&t(n)})}window.define_namespace=o,t.default=o},"8UPI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unavailable=t.SurveyInfo=t.ShippingInfo=t.ShippingAndPayments=t.RewardSummary=t.PledgeWithoutReward=t.Limit=t.ItemList=t.DeliveryInfo=t.ExtraInfo=t.EndTimes=t.DeliveryTime=t.ConversionEstimate=t.ContinueButton=t.CreatorInformation=t.BackerCountAndLimits=t.BackedLabel=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("Z5jf"),l=n("1h7p"),u=n("b04z"),c=n("Puot"),d=n("ci1u"),f=n("uA/L"),h=n("J1uj"),p=n("Z6GA"),m=n("IPoO"),g=n("/Vlt");var v=t.BackedLabel=function(){return o.default.createElement(f.Div,{atoms:["mb3"]},o.default.createElement(f.Span,{type:"caption-100",color:"white",weight:"bold",atoms:["absolute t0 l3 inline-block py1 px2 bg-blue-500"]},(0,s.boundT)("project_page.reward.You_selected")))},_=(t.BackerCountAndLimits=function(e){var t=e.reward,n=!e.unavailable&&t.campaignLive&&t.endsAt,r=t.campaignLive&&t.limitExists;return o.default.createElement(f.Div,{atoms:["mt3"]},n&&o.default.createElement(w,{end:t.endsAt}),n&&r&&"• ",r&&o.default.createElement(C,{remaining:t.remainingItems,limit:t.limit}),o.default.createElement(f.Span,{type:"caption-100",color:"dark-grey-500",atoms:["block"]},(0,s.boundT)("project_page.reward.backers_count.other",{formatted_count:t.backersCount})))},t.CreatorInformation=function(e){var t=e.onClick,n=e.surveys;return o.default.createElement("div",null,o.default.createElement(u.Button,{size:"small",color:"blue",atoms:["mt3"],onClick:t},(0,s.boundT)("project_page.reward.Backer_report")),o.default.createElement(R,{surveys:n}))},t.ContinueButton=function(e){var t=e.onClick,n=e.serverErrors,r=void 0===n?[]:n;return o.default.createElement("div",null,!!r.length&&o.default.createElement("ul",{className:"red-500 pt3"},r.map(function(e){return o.default.createElement("li",{key:e.message},e.message)})),o.default.createElement(u.Button,{color:"green",atoms:["mt3 w100p"],onClick:t},(0,s.boundT)("project_page.reward.Continue")))}),y=t.ConversionEstimate=function(e){var t=e.amount,n=e.atoms;return o.default.createElement("div",{className:"basis100p"},o.default.createElement(f.Span,{color:"dark-grey-500",atoms:n},(0,s.boundT)("project_page.reward.Estimated_conversion",{amount:t})))},b=t.DeliveryTime=function(e,t){return o.default.createElement(l.Time,{format:e,date:t})},w=t.EndTimes=function(e){var t=e.end;return o.default.createElement("div",{className:"inline pledge__limit ksr_page_timer","data-end_time":t},o.default.createElement("span",{className:"js-num"})," ",o.default.createElement("span",{className:"js-text"})," ")},E=t.ExtraInfo=function(e){return function(t){var n=t.atoms,r=t.info;return o.default.createElement(f.Div,{atoms:["basis50p"]},o.default.createElement(f.Span,{color:"dark-grey-500",atoms:n},e),o.default.createElement(f.Span,{color:"soft-black",atoms:["lh3"]},r))}},k=t.DeliveryInfo=E((0,s.boundT)("project_page.reward.Estimated_delivery")),S=t.ItemList=function(e){var t=e.atoms,n=e.items;return o.default.createElement("div",null,o.default.createElement(f.Span,{color:"dark-grey-500",atoms:t},(0,s.boundT)("project_page.reward.Includes")),o.default.createElement("ul",{className:"type-14 ml3 soft-black medium mb2 pl2"},n.map(function(e,t){return o.default.createElement("li",{key:t,className:"list-disc"},+e.quantity>1?e.quantity+"x "+e.name:e.name)})))},C=t.Limit=function(e){var t=e.remaining,n=e.limit,r=(0,s.boundT)("project_page.reward.rewardremaining_left_of_rewardlimit",{rewardremaining:t,rewardlimit:n});return o.default.createElement(f.Span,{color:"red-500",type:"caption-100"},r)},T=(t.PledgeWithoutReward=function(e){var t=e.atoms,n=void 0===t?[]:t,r=e.backed,i=e.backingAmount,a=e.continueClick,l=e.currentTotalCost,u=e.errors,c=e.onApplePayClick,d=e.onBlurField,h=e.onPledgeValueChange,y=e.onRewardClick,b=e.onRewardKeyPress,w=e.pledgeData,E=e.selected,k=e.serverErrors,S=(0,p.computedAtoms)(n,"pointer block text-left new-form",!E&&!r&&"border-grey-400",E&&"border-dark-grey-400",r?"mb0 pointer border-blue-500":"mb3"),C=(0,p.partial)(y,{id:m.NO_REWARD,minPledge:w.defaultPledge});return o.default.createElement("div",{role:"button",className:S,tabIndex:"0",onClick:C,onKeyPress:(0,p.partial)(b,{id:m.NO_REWARD,minPledge:w.defaultPledge})},r&&o.default.createElement(v,null),o.default.createElement(f.Heading,{level:2,type:"subhead-300",weight:"normal",color:"soft-black",atoms:["mb3"]},(0,s.boundT)("project_page.reward.Make_a_pledge_without_a_reward")),o.default.createElement(g.TotalCostInput,{value:r?i:null!==l&&E?l:w.defaultPledge.amount,convert:w.convertCurrency,errors:u,onBlurField:d,onClick:C,onSelect:C,onChange:h,minPledge:w.defaultPledge,pledgeData:w,idForKey:m.NO_REWARD,idForField:m.PLEDGE_NO_REWARD}),E&&!w.applePayCapable&&o.default.createElement(_,{onClick:(0,p.partial)(a,m.NO_REWARD),serverErrors:k}),E&&w.applePayCapable&&o.default.createElement(T,{applePayClick:(0,p.partial)(c,m.NO_REWARD),otherPaymentClick:(0,p.partial)(a,m.NO_REWARD),serverErrors:k}))},t.RewardSummary=function(e){var t,n,r=e.reward,i=e.active,a=e.onTruncateClick,l=void 0===a?function(){}:a,u=e.truncateReward,c=void 0===u?function(){}:u,d=e.truncationStatus,h=["block text-uppercase type-10"],g=(0,p.computedAtoms)(h,"track-loose"),v=(0,p.computedAtoms)(h,"ls-5"),_=i&&d==m.CLOSED,w=i&&d==m.EXPANDED,E=_?(0,s.boundT)("project_page.reward.Read_more"):(0,s.boundT)("project_page.reward.Less"),C=(0,p.computedAtoms)("mb4 relative",_&&"h9 clip"),T=_?"-0.1rem":"-2rem";return o.default.createElement("div",null,o.default.createElement(f.Heading,{level:2,type:"subhead-300",weight:"normal",color:"soft-black",atoms:["mb3"]},(t=r.maxPledge,n=r.minPledge.formatted,t?(0,s.boundT)("project_page.reward.Pledge",{amount:n}):(0,s.boundT)("project_page.reward.Pledge_or_more",{amount:n})),r.convertCurrency&&o.default.createElement(y,{amount:r.conversionEstimate,atoms:(0,p.computedAtoms)(g,"pt1")})),r.title&&o.default.createElement(f.Heading,{level:3,type:"body-200",weight:"normal",color:"soft-black",atoms:["mb3"]},r.title),o.default.createElement("div",{ref:c,className:C},(_||w)&&o.default.createElement("button",{type:"button",onClick:l,className:"absolute r0 pl6 pr2 type-14 gradient-transparent-to-white-20p",style:{bottom:T,outline:"none"}},E),r.description&&o.default.createElement(f.Paragraph,{type:"body-100",color:"dark-grey-500",atoms:["lh3 text-prewrap"]},r.description),!!r.items.length&&o.default.createElement(S,{items:r.items,atoms:g})),o.default.createElement(f.Div,{atoms:["flex"]},r.deliveryDate&&o.default.createElement(k,{atoms:v,info:b(r.deliveryDate.format,r.deliveryDate.date)}),r.shippingSummary&&o.default.createElement(A,{atoms:v,info:r.shippingSummary})))},t.ShippingAndPayments=function(e){var t=e.consts,n=e.currentTotalCost,r=e.dispatch,a=e.onApplePayClick,s=e.onBlurField,l=e.onClick,u=e.onPledgeValueChange,c=e.pledgeData,d=e.reward,f=e.selectState,p=e.ShippingCountryDropdown,v=e.validator,y=e.validation,b=v({fields:[m.SHIPPING_LOCATION],state:y});return o.default.createElement("div",{className:"mt6 new-form"},t.DISPLAY_SHIPPING&&o.default.createElement("div",{className:"mb3"},o.default.createElement(p,i({state:f,dispatch:r,hasErrors:b},d.shippingRules)),o.default.createElement(h.InputErrors,{name:m.SHIPPING_LOCATION,id:d.id,errors:b})),o.default.createElement(g.TotalCostInput,{convert:d.convertCurrency,errors:v({fields:[m.PLEDGE_AMOUNT],state:y}),idForField:m.PLEDGE_AMOUNT,idForKey:d.id,label:!0,pledgeData:c,minPledge:d.minPledge,onBlurField:s,onChange:u,value:n}),!c.applePayCapable&&o.default.createElement(_,{onClick:l,serverErrors:y.serverErrors}),c.applePayCapable&&o.default.createElement(T,{applePayClick:a,otherPaymentClick:l,serverErrors:y.serverErrors}))},function(e){var t=e.applePayClick,n=e.otherPaymentClick,r=e.serverErrors;return o.default.createElement(o.default.Fragment,null,!!r.length&&o.default.createElement("ul",{className:"red-500 pt3"},r.map(function(e){return o.default.createElement("li",{key:e.message},e.message)})),o.default.createElement("div",{className:"mt3 pledge__applepay js-applepay"},o.default.createElement("button",{className:"btn btn--applepay btn--block",onClick:t},o.default.createElement("span",{className:"btn-text"})),o.default.createElement("button",{className:"btn block text-center w100p mt2 bold text-14 dark-grey-500 other-payment-button",onClick:n},(0,s.boundT)("project_page.reward_form.Other_payment_options"),o.default.createElement(d.Icon,{name:"icon--arrow-right",size:"12",atoms:["pl2"]}))),o.default.createElement("div",{className:"mt5 text-center"},o.default.createElement(f.Paragraph,{type:"caption-100",color:"dark-grey-400",atoms:["bold","mb0"]},(0,s.boundT)("project_page.reward_form.Kickstarter_is_not_a_store")),o.default.createElement(f.Paragraph,{type:"caption-100",color:"dark-grey-400"},(0,s.boundT)("project_page.reward_form.Its_a_way_to_bring_creative_projects_to_life")),o.default.createElement(c.Link,{href:"http://www.kickstarter.com/trust?ref=project_reward",target:"_blank",atoms:["type-12"]},(0,s.boundT)("project_page.reward_form.Learn_more_about_accountability"))))}),A=t.ShippingInfo=E((0,s.boundT)("project_page.reward.Ships_to")),R=t.SurveyInfo=function(e){var t=e.surveys,n=!!t,r="block text-uppercase type-10 ls-5";return o.default.createElement(f.Div,{atoms:["mt3 pr3"]},!n&&o.default.createElement(f.Span,{atoms:r},(0,s.boundT)("project_page.reward.No_surveys_sent")),n&&t.map(function(e,t){var n=!!e.count;return o.default.createElement(f.Div,{color:"dark-grey-500",type:"body-100",key:t},o.default.createElement(f.Span,{atoms:r},(0,s.boundT)("project_page.reward.Survey_sent")),o.default.createElement(l.Time,{format:e.format,date:e.date}),n&&o.default.createElement(f.Span,null," · ",(0,s.boundT)("project_page.reward.responses",{responses:e.count})," "))}))};t.Unavailable=function(){return o.default.createElement("div",null,o.default.createElement(f.Span,{type:"caption-100",color:"soft-black",weight:"bold",atoms:["inline-block p2 mt3 bg-grey-400"]},(0,s.boundT)("project_page.reward.Reward_no_longer_available")))}},"8bXp":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("wmCY"));n("hsYx");var a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e,t=(0,r.default)(".NS_layouts__user_dropdown"),n=!1,o=!1;function s(){t.find("#menu-me-backed").length&&t.find(".user-dropdown").addClass("backer"),t.find("#menu-me-created").length&&t.find(".user-dropdown").addClass("creator")}function l(e){var n=t.find("#menu-me-children");KSR.store.setItem("user_dropdown_backer_creator_columns_html",e),n.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),n.append(e),s()}function u(e){o||(o=r.default.ajax({url:t.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",data:{i18n:i.default.enabled},beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){l(e),n=!0},complete:function(){e&&e(),o=!1}}))}(e=KSR.store.getItem("user_dropdown_backer_creator_columns_html"))&&(l(e),n=!0),s(),(0,r.default)(".js-user-menu-tab").on("user_dropdown:open",function(){var e=(0,r.default)(this);n?e.addClass("selected"):u(function(){e.addClass("selected")})}),(0,r.default)(".js-user-menu-tab, .js-user-menu-tab > a").one("click",function(){(0,a.track)("Account Menu Dropdown",{new_indicator_visible:(0,r.default)(this).find(".indicator").is(":visible")}),u()}),(0,r.default)(document).on("user_dropdown:refresh_from_remote",function(){u()}),(0,r.default)("body").is(".just_logged_out")&&KSR.store.removeItem("user_dropdown_backer_creator_columns_html")})},"8dPd":function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("8NzR")),a=u(n("L3hI")),o=u(n("wmCY")),s=u(n("UQDk")),l=u(n("MA+5"));function u(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_site__social_tout",function(e){window.api_oauth_token&&(0,r.default)(window).on("scroll",function t(){window.scrollY+1.5*(0,r.default)(window).height()<=e.offset().top||((0,r.default)(window).unbind("scroll",t),r.default.ajax({url:(0,s.default)(e.data("url")),type:"get",success:function(t){var n=t.remotely_followed_count,r=t.remotely_followed.users;n>0&&(e.find(".js-friend-count").html(o.default.t("onloads.views.site.social_tout.Count_of_your_friends_are_on_kickstarter",{count:n,formatted_count:a.default.format_number(n,{precision:0})})),e.find(".js-avatar-pile").html((0,l.default)("activity/card/_backing_avatars",{backers:r})))}}))})})},"8lQX":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unix=function(e){return Math.round(e.getTime()/1e3)}},"8tKI":function(e,t,n){"use strict";var r=s(n("rXeC")),i=s(n("8NzR")),a=s(n("+bVi")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,i.default)("#faqs_show",function(e){var t=e.find(".sidebar"),n=(0,r.default)(".subcat").find("a"),i=e.find("a.anchor.current").siblings(".subcat-list"),s=e.find(".js-category"),l=!1;function u(e){n.removeClass("current"),i.find('a[data-name-short="'+e+'"]').addClass("current")}t.sticky_bar({parent:t.closest(".main")}),n.on("click",function(){var e=(0,r.default)(this).data("name-short");l=!0,u(e),r.default.scrollTo("#"+e,800,{onAfter:function(){l=!1}})}),s.add(n).on("click",function(){var e=(0,r.default)(this).data("name-full");(0,o.track)("Viewed "+e)}),t.find("a.anchor.current").siblings(".subcat-list").find("li:first-child a").addClass("current"),(0,r.default)(".list-faqs > li").waypoint(function(){l||u(this.element.id)}),a.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},"8uP6":function(e,t,n){"use strict";var r=n("4RZc"),i=c(n("GiK3")),a=c(n("rNU7")),o=c(n("shXp")),s=c(n("8NzR")),l=n("Z6GA"),u=c(n("FbaH"));function c(e){return e&&e.__esModule?e:{default:e}}(0,s.default)("#NS_discover__landing",function(e){var t=e.data("category"),n=e.find(".js-load-more"),s=function(e){var t=document.createElement("div");return t.setAttribute("data-project",JSON.stringify(e)),t.className="js-react-async-proj-card col-full col-sm-12-24 col-lg-8-24",t.id=e.slug+"-"+(0,l.uuidNoDashes)(),t.innerHTML=a.default.renderToStaticMarkup(i.default.createElement(u.default,{state:{}})),t};n.loadMore({default_page:0,perPage:12,responseToHTML:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return n.className="grid-row flex flex-wrap",e.projects.map(s).forEach(function(e){return t.appendChild(e)}),n.appendChild(t),n}}),n.on("mobius:loading_page",function(){(0,r.track)("Discover Category See More Clicked",o.default.extend((0,r.namespaceKeys)("discover_category",t),{discover_module_type:n.data("type")}))})})},"91We":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n,r){var i;t.API.getComponent("pager").each(function(){var a=e(this);if(n.pagerTemplate){var o=t.API.tmpl(n.pagerTemplate,n,t,r[0]);i=e(o).appendTo(a)}else i=a.children().eq(t.slideCount-1);i.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(a,e.currentTarget)})})}function n(e,t){var n=this.opts();if(!n.busy||n.manualTrump){var r=e.children().index(t),i=n.currSlide<r;n.currSlide!=r&&(n.nextSlide=r,n.API.prepareTx(!0,i),n.API.trigger("cycle-pager-activated",[n,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,n,r){r.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,r,i){t.pager&&(t.API.buildPagerLink(t,r,i),t.API.page=n)}),e(document).on("cycle-slide-removed",function(t,n,r,i){n.pager&&n.API.getComponent("pager").each(function(){var t=e(this);e(t.children()[r]).remove()})}),e(document).on("cycle-update-view",function(t,n,r){n.pager&&n.API.getComponent("pager").each(function(){e(this).children().removeClass(n.pagerActiveClass).eq(n.currSlide).addClass(n.pagerActiveClass)})}),e(document).on("cycle-destroyed",function(e,t){var n=t.API.getComponent("pager");n&&(n.children().off(t.pagerEvent),t.pagerTemplate&&n.empty())})}(r)},"92m3":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),function(){function e(e){e.data("is-blocking")?(e.text(a.default.t("onloads.views.user_blocks.block_button.Blocked")),e.removeClass("btn btn--text grey-dark btn--small"),e.addClass("btn btn--gray")):(e.text(a.default.t("onloads.views.user_blocks.block_button.Block")),e.removeClass("btn btn--gray"),e.addClass("btn grey-dark btn--small")),e.removeClass("hidden")}(0,r.default)(".js-block-user").livequery(function(){var t=(0,r.default)(this);t.on("click",function(n){var a=t.data("is-blocking")?t.data("unblock-path"):t.data("block-path");t.prop("disabled",!0),r.default.ajax({url:a,dataType:"json",method:"post"}).success(function(n){200===n.status?function(t){!0===t.data("is-blocking")?(t.data("is-blocking",!1),e(t),t.trigger("ksr:unblock_user")):(t.data("is-blocking",!0),e(t),t.trigger("ksr:block_user"))}(t):(0,i.default)({error:n.message})}).complete(function(){t.prop("disabled",!1)}),n.preventDefault()}),t.on("mouseenter focus",function(){!function(e){e.data("is-blocking")&&(e.data("previous-html",e.html()),e.html(a.default.t("onloads.views.user_blocks.block_button.Unblock")))}(t)}),t.on("mouseleave blur",function(){!function(e){var t=e.data("previous-html");e.data("is-blocking")&&t&&e.html(t)}(t)}),t.on("ksr:unblock_user",function(){t.addClass("hidden")}),e(t)})}()},"98MR":function(e,t,n){"use strict";var r,i=n("L3hI"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");!function(e){function t(t,n){var r;for(this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},n),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets,this.framesets||this.init_framesets(),r=0;r<this.options.max_digits;r+=1)this.init_digit(r);this.write(this.val,!0)}e.fn.ticker=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("ticker");r||(r=new t(e(this),n),e(this).data("ticker",r))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,n){this.val=String(t||""),this.$elem.attr("rel",this.val);var r,i,o,s,l,u,c,d,f=(this.options.format_numbers?a.default.format_number(this.val,{precision:0}):this.val).split(""),h=this.$elem.find(".ticker_digit");for(d=0;d<f.length-h.length;d+=1)this.init_digit(d+h.length);for(h=this.$elem.find(".ticker_digit"),d=0;d<h.length;d+=1){if(i=(r=e(h[d])).html(),o=f[d]?String(f[d]):"",s=e.inArray(o,this.keyframes),l=this.framesets[s][0],u=e.inArray(r.html(),this.keyframes),c=[],r.html(o).data("tween_id",r.data("tween_id")+1),!o||o===i||n)c=c.concat(l);else for(;u!==s;)c=c.concat(this.framesets[u]),u=(u+=1)>=this.keyframes.length?1:u;this.tween(r.data("tween_id"),r,c)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var n=e(this.$elem.find(".ticker_digit").get(t));n.length||(n=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),n.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,n){if(n.length){if(t.data("tween_id")!==e)return!1;var r=this;setTimeout(function(){var i=n.shift();t.css({"background-position":"0px "+-1*i+"px"}),r.tween(e,t,n)},this.options.frame_duration)}}})}(o)},"9DJv":function(e,t,n){"use strict";var r,i=u(n("l/Rs")),a=u(n("shXp")),o=n("4RZc"),s=u(n("hBlz")),l=u(n("DkOX"));function u(e){return e&&e.__esModule?e:{default:e}}n("sWK4"),n("jAPW"),n("LNuh"),n("452R"),n("v6Dq"),n("mjY1"),r=History.isTraditionalAnchor,"undefined"!=typeof History&&(History.isTraditionalAnchor=function(e){return 0===e.indexOf("remote_modal_dialog")||r.apply(this,arguments)}),(0,i.default)(function(){(0,i.default)(".modal_dialog").livequery(function(){var e=(0,i.default)(this),t=e.attr("id");(0,i.default)(document).on("click",".link_to_"+t,function(t){e.modal_dialog({event:t}),t.preventDefault()}),e.closest(".pop_modal_on_load").length&&e.modal_dialog()}),(0,i.default)(document).on("click",".remote_modal_dialog",function(e){if(e.preventDefault(),!(0,i.default)(this).is(".disabled")){var t=i.default.open_remote_modal_dialog((0,s.default)((0,i.default)(this).attr("href")).suffix("js").toString(),{title:a.default.escape((0,i.default)(this).attr("data-modal-title")),id:(0,i.default)(this).attr("data-modal-id"),event:e,do_not_cache:!!(0,i.default)(this).attr("data-do_not_cache"),class_name:(0,i.default)(this).attr("data-modal-class"),theme:(0,i.default)(this).attr("data-modal-theme"),ignore_parent:!!(0,i.default)(this).attr("data-ignore_parent"),remote_modal_dialog_contents_loaded:function(e){var t=e.find(".move_to_head");t.length&&((0,i.default)("head").append(t.children()),t.remove())},dataType:"html"});t&&((0,i.default)(this).data("modal_dialog",t),t.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()}catch(e){}}))}}).each(function(){var e=(0,i.default)(this);e.is(".pop_modal_on_load")&&e.click()}),(0,i.default)(document).on("click",".modal_dialog_close",function(e){e.preventDefault(),(0,i.default)(this).trigger("close.modal_dialog")}),(0,i.default)(document).on("closed.modal_dialog",function(e){(0,i.default)(e.target).find(".video-player").trigger("ksr_video:pause")}),(0,i.default)(document).on("click",".modal_dialog .pagination a",function(e){var t=(0,i.default)(this).closest(".modal_dialog_body"),n=(0,i.default)(this);t.height(t.height()),e.preventDefault(),i.default.ajax({url:n.attr("href"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t.html(e),i.default.scrollTo(t),t.css("height","auto")}})});var e,t=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/.exec(window.location.hash),n=/^#remote_modal_dialog:(.*)$/.exec(window.location.hash);t&&(e=t[1],(0,i.default)("#"+e).modal_dialog(),window.location.replace("#")),n&&((0,i.default)(".remote_modal_dialog").each(function(){(0,l.default)(decodeURIComponent(n[1]),decodeURIComponent((0,i.default)(this).attr("href")))&&(0,i.default)(this).click()}),window.location.replace("#")),(0,i.default)(".generate_modal_dialog").livequery(function(){var e=(0,i.default)(this),t=a.default.pick(e.data(),"id");i.default.create_modal_dialog(e.data("title"),e.data("content"),t)}),(0,i.default)(document).on("modal_dialog:opened",function(e,t){var n;n={modal_class:t.options.class_name,modal_title:t.options.title,modal_id:t.options.id,modal_event_class:!!t.options.event&&t.options.event.target.classList[0]},(0,o.track)("Modal Dialog View",n)})})},"9VV1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Tvaj");n("s94J");var s,l=(0,a.default)("#growl_section");function u(){l.fadeOut("fast"),s&&s.length&&s.focus()}l.on("click",function(e){var t;(0,a.default)(e.target).is((0,a.default)(this))&&((t=(0,a.default)(this)).fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){(0,a.default)(this).data("jGrowl")&&((0,a.default)(this).data("jGrowl").sticky=!1)}))}),(0,a.default)(document).on("keydown",function(e){e.which===o.ESC&&l.is(":visible")&&u()});var c=function(e,t){a.default.each(e,function(e,n){void 0===t&&(t={}),"error"===e&&(t.sticky=!0,l.addClass("sticky")),l.jGrowl(n,a.default.extend(t,{theme:e,closeTemplate:'<button class="jGrowl-close-x" aria-label="close notification"><span class="ksr-icon__close" aria-hidden="true"></span></button>',beforeOpen:function(){l.fadeIn("fast"),s=(0,a.default)(":focus"),l.find(".jGrowl-notification").attr("tabindex",-1).focus()},close:function(){u()}}))})};window.growl=c,t.default=c},"9vef":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncDropdown=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("HeCS"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("E/SE")),u=n("dY/E"),c=n("89L0");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.createAsyncDropdown=function(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t+"_asyncSelect",a=(0,s.namespaceSelect)(t),f=a.Component,h=a.reducer,p=(0,u.namespaceActions)(t)(l);return{Component:function(e){var t=e.state,n=e.dispatch,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["state","dispatch"]);return o.default.createElement(f,i({state:t,dispatch:n,size:"x-small"},r))},reducers:(n={},d(n,t+"-select",h(r)),d(n,t+"-async",(0,c.unboundAsyncReducer)(p,t,e)),n),actions:p,namespace:t}}}},"9x+j":function(e,t,n){"use strict";var r=c(n("l/Rs")),i=n("ZG75"),a=c(n("9VV1")),o=c(n("wmCY")),s=n("4RZc"),l=c(n("hBlz"));n("LNuh");var u=c(n("c5nH"));function c(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".js-could-have-comments").length&&(0,r.default)(".load_new_comments").livequery(function(){var e,t,n,c,d=(0,r.default)(".load_new_comments");function f(e){void 0===e&&(e={}),(e.comments_count||u.default.get("comments_count"))-(e.comments_loaded||u.default.get("comments_loaded"))>0?d.show():d.hide()}function h(e,t){var n,i=(0,r.default)(this),s=new l.default(this.href).removeQuery("cursor").addQuery({cursor:e});"asc"===t&&s.addQuery({direction:t}),n=s.toString(),r.default.ajax({url:n,beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")},success:function(e){var n="asc"===t?"prepend":"append";"asc"===t&&u.default.set("comments_loaded",e.comments_count),u.default.set("comments_count",e.comments_count),(0,r.default)("ol.list-comments ol.comments:first")[n](e.comments)},error:function(){(0,a.default)({error:o.default.t("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now")})}})}d.length&&(e=d.find("a"),t=(0,r.default)(".Project"+u.default.get("id")+'[itemprop="Project[comments_count]"]'),n=(n=r.default.trim(t.text())).replace(/\D/g,""),u.default.set("comments_count",parseInt(n,10)),(0,r.default)(".latest_comment").livequery(function(){c||(c=!0,u.default.on_change("comments_count",f),u.default.on_change("comments_loaded",f)),u.default.set("comments_loaded",u.default.get("comments_count")),f()}),(0,r.default)(".earliest_comment").livequery(function(){(0,r.default)("a.older_comments").hide()}),(0,r.default)(".comment").livequery(function(){var e,t={};(0,r.default)(this).find('[itemprop="Comment[created_at]"]').each(function(n,i){var a,o=(0,r.default)(i);if(o.attr("itemprop")&&(a=o.attr("itemprop").match(/Comment\[(\w+)\]/))){var s=o.data("value");t[a[1]]=s.match(/^"/)?JSON.parse(s):s,e||(e=o.attr("class").match(/Comment(\d+)/)[1])}}),(i.Comment.find(e)||new i.Comment({id:e})).set(t)}),e.click(function(e){if(!(0,r.default)(this).hasClass(".loading")){e.preventDefault();var t=(0,r.default)(".comments li:first");(0,s.track)("Project Comment Load New"),u.default.get("comments_count")-u.default.get("comments_loaded")>50?window.location.href=window.location.href:h.call(this,t.attr("id").match(/\d+/)[0],"asc")}}),(0,r.default)(document).on("click",".older_comments",function(e){e.preventDefault();var t=(0,r.default)(".comments li:last");!(0,r.default)(this).hasClass(".loading")&&t.length&&((0,s.track)("Project Comment Load Older"),h.call(this,t.attr("id").match(/\d+/)[0],"desc"))}),(0,r.default)(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){(0,r.default)(this).removeClass("hidden")}),(0,r.default)(document).on("submit","ol.list-comments form.delete_comment",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".comment");r.default.ajax({url:t.attr("action"),dataType:"json",type:"delete",success:function(){n.hide(),(0,r.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)-1}),(0,r.default)(".NS_comments__comment").length||(0,r.default)(".project_preview_comments").removeClass("has_comments")}})}))})},"9z0e":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(".NS-users-_urls_fields").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("div.new.template",e);t.on("click","a.add",function(n){n.preventDefault();var r=t.find("input.text"),i=t.clone_form_template(),o=i.find("input.keep_box");""!==r.val()?(i.addClass("field-selected"),i.find("a.add").remove(),i.find("span.value").text(r.val()),r.trigger("dirty"),o.val(0).prop("checked",!0),r.val(""),(0,a.default)("div.urls",e).append(i),i.trigger("shifted")):i.remove()}),e.on("click",".url .remove a",function(e){e.preventDefault();var t=(0,a.default)(this),n=t.closest("div.url");t.siblings(".checkbox").prop("checked",!1),n.trigger("dirty"),n.trigger("shifted"),n.hide()}),t.find("input.text").on("keypress",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),t.find("a.add").click())})})})},"A/M2":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(r)},A4of:function(e,t,n){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},A5ag:function(e,t,n){"use strict";n("wGdM");var r=d(n("8NzR")),i=d(n("l/Rs")),a=d(n("shXp")),o=d(n("+bVi")),s=d(n("YC2V")),l=d(n("c5nH")),u=n("Tvaj"),c=n("yloT");function d(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".pledges__checkout_rewards",function(e){var t=e.find(".js-reward-available"),n=t.length,r=0,d=!1,f=!o.default["not-mobile"],h=f?20:100,p=new Array(n);function m(e){if(r=0,!e.state.is_selected){d&&y(!1);var t=g(),n=0;t.length>0&&t[0].index<e.index&&(n=t[0].el.$rw.height()-t[0].closed_height);var a=e.el.$rw.offset().top-n-h;(0,i.default)(document).scrollTo(a,100),_(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),function(e){var t=e.get_shipping_rule(s.default.get("location_id"));t=t.length?t[0]:null,s.default.set({reward:e.reward_data,shipping_rule:t})}(e)}}function g(){return a.default.filter(p,function(e){return!0===e.state.is_selected})}function v(){(0,i.default)(".submitting-non-ajax").removeClass("submitting-non-ajax"),(0,i.default)(".js-desc-toggle").addClass("hide")}function _(){var e=g();if(e.length){var t=e[0];t.toggle_pledge_form(),t.reset_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.hide_truncation_link()}}function y(e){(0,i.default)(p).each(function(t,n){if(n.el.$radio.prop("checked"))return n.el.$rw.click(),v(),e&&s.default.set({reward:this.reward_data}),void(d=!1)})}p=t.map(function(e,t){var n=(0,i.default)(t),r=n.data("reward")||l.default.get("rewards")[0],a=r.id===s.default.get("reward").id,o=a?s.default.get("net_amount"):null;r.closed_height=n.height(),r.index=n.index();var u=new window.RewardController(n,r);return(u.shipping_enabled||a)&&u.update_pledge_total({amount:o}),u}).get(),t.on("change","radio",function(){(0,i.default)(this).click()}),t.on("keydown",function(e){if(e.keyCode===u.ESC){var t=(0,i.default)(e.delegateTarget);t.data("reward").state.is_selected&&(_(),t.find('input[type="radio"]').focus())}}),t.on("keydown",'input[type="radio"]',function(e){e.keyCode===u.ENTER&&(e.preventDefault(),(0,i.default)(this).click())}),t.on("click",function(e){m((0,i.default)(e.currentTarget).data("reward"))}),t.on("keyup",'input[name="backing[amount]"]',function(){!function(e){s.default.set({amount:e})}((0,c.stringToMoney)((0,i.default)(this).val()))}),t.on("click",".js-desc-toggle",function(e){e.preventDefault(),(0,i.default)(e.delegateTarget).data("reward").toggle_description_truncation()}),t.on("submit","form",function(e){var t=(0,i.default)(e.delegateTarget).data("reward"),n=t.validate();if(t.state.submit_halted=!n,t.state.submit_halted&&v(),n){var a=t.get_current_pledge_amount();s.default.set("amount",a),d=!0,r=0}return n}),t.on("blur input",'input[name="backing[amount]"]',function(e){var t=(0,i.default)(e.delegateTarget).data("reward"),n=t.get_current_pledge_amount();t.validate(),s.default.set("amount",n)}),t.on("change blur",'select[name="backing[location_id]"]',function(e){var t=(0,i.default)(this),n=(0,i.default)(e.delegateTarget).data("reward"),r=parseInt(t.val(),10),a=n.get_shipping_rule(r);isNaN(r)||s.default.set("location_id",r),s.default.set("shipping_rule",a[0]),n.shipping_enabled&&n.update_pledge_total(),n.validate()}),(0,i.default)(document).on("click",function(){3===(r+=1)&&(_(),r=0)}),(0,i.default)("#confirm-adjust-pledge").on("click",function(){r=0}),void 0!==s.default&&s.default.on_change("shipping_rule",function(){var e=s.default.get("shipping_rule"),t=e?parseFloat(e.cost):0;s.default.set("shipping_amount",t)}),y(!0),(0,i.default)(window).on("pageshow",function(e){f&&e.originalEvent.persisted&&v()})})},ABD9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectFlaggingInit=void 0;var r=f(n("GiK3")),i=f(n("O27J")),a=n("EIRz"),o=n("LbfT"),s=n("HeCS"),l=n("3zBZ"),u=n("JIXV"),c=n("xgez"),d=n("0GqO");function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,s.namespaceSelect)("FlaggingDropdown"),p=h.Component,m=(0,h.reducer)("Flagging Dropdown"),g=(0,a.combineReducers)({container:l.reducer,radioButtons:c.radioGroupReducer,dropdown:m,form:u.flaggingFormReducer}),v=(0,o.createEnhancedStore)(g,{container:l.initialState,radioButtons:c.initialRadioGroupState,dropdown:(0,s.initialState)()}),_=function(){var e=document.getElementById("react-flag-project"),t=v.getState(),n=v.dispatch;e&&i.default.render(r.default.createElement(d.ProjectFlagging,{state:t,dispatch:n,DropdownComponent:p}),e)};(t.projectFlaggingInit=function(){_(),v.subscribe(_)})()},APD3:function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},AXgT:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=n("4RZc"),o=n("16WZ");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_projects__creator_nav",function(){var e=(0,r.default)("body");function t(){(0,r.default)("#creator_nav .js-livestream-link").length&&(0,a.track)("Showed Creator Nav Livestream Link")}(0,r.default)(".js-expand-creator-nav").on("click",function(n){e.hasClass("creator_nav_visible")?(e.removeClass("creator_nav_visible"),(0,a.track)("Creator Nav Toggle",{toggled_to:"hidden"})):(e.addClass("creator_nav_visible"),(0,a.track)("Creator Nav Toggle",{toggled_to:"visible"}),t()),(0,o.rebindScroll)(),n.preventDefault()}),e.hasClass("creator_nav_visible")&&t(),(0,a.trackLinks)("#creator_nav a.track","Creator Nav Link Click")})},Ak0P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("UVf0");t.default=function(e){var t=e.enter,n=void 0===t?"fade-in":t,r=e.leave,i=void 0===r?"fade-out":r,s=e.appear,l=e.duration,u=void 0===l?300:l,c=e.durationLeave,d=e.durationAppear,f=e.component,h=void 0===f?"div":f,p=e.children;return a.default.createElement(o.CSSTransitionGroup,{component:h,transitionName:{enter:"animation-"+u,enterActive:"animation-"+n,leave:"animation-"+(c||u),leaveActive:"animation-"+i,appear:"animation-"+(d||u),appearActive:"animation-"+(s||n)},transitionEnterTimeout:u,transitionLeaveTimeout:c||u,transitionAppearTimeout:d||u,transitionAppear:!!s},p)}},AwtR:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("hBlz"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_site__founding_story",function(e){var t=(0,r.default)(".js-expand-inline__container"),n=(0,r.default)(".js-expand-inline__button"),i=(0,a.default)();function o(a,o){n.closest(t).toggleClass("expand-inline__container--show"),(0,r.default)(".js-read-hide").toggle(),o||("the-full-story"===i.fragment()?(history.replaceState({},document.title,i.fragment("").toString()),r.default.scrollTo(e)):history.replaceState({},document.title,i.fragment("the-full-story").toString()))}n.click(o),"the-full-story"===i.fragment()&&(o(0,!0),r.default.scrollTo(e))})},AxoS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenKind=void 0,t.createLexer=function(e,t){var n=new f(u.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:s,lookahead:l}},t.getTokenDesc=function(e){var t=e.value;return t?e.kind+' "'+t+'"':e.kind};var r,i=n("Qhe+"),a=n("5Xbz"),o=(r=a)&&r.__esModule?r:{default:r};function s(){return this.lastToken=this.token,this.token=this.lookahead()}function l(){var e=this.token;if(e.kind!==u.EOF)do{e=e.next||(e.next=p(this,e))}while(e.kind===u.COMMENT);return e}var u=t.TokenKind=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});var c=String.prototype.charCodeAt,d=String.prototype.slice;function f(e,t,n,r,i,a,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=a,this.next=null}function h(e){return isNaN(e)?u.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'+("00"+e.toString(16).toUpperCase()).slice(-4)+'"'}function p(e,t){var n=e.source,r=n.body,a=r.length,s=function(e,t,n){var r=e.length,i=t;for(;i<r;){var a=c.call(e,i);if(9===a||32===a||44===a||65279===a)++i;else if(10===a)++i,++n.line,n.lineStart=i;else{if(13!==a)break;10===c.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),l=e.line,p=1+s-e.lineStart;if(s>=a)return new f(u.EOF,a,a,l,p,t);var v=c.call(r,s);if(v<32&&9!==v&&10!==v&&13!==v)throw(0,i.syntaxError)(n,s,"Cannot contain the invalid character "+h(v)+".");switch(v){case 33:return new f(u.BANG,s,s+1,l,p,t);case 35:return function(e,t,n,r,i){var a=e.body,o=void 0,s=t;do{o=c.call(a,++s)}while(null!==o&&(o>31||9===o));return new f(u.COMMENT,t,s,n,r,i,d.call(a,t+1,s))}(n,s,l,p,t);case 36:return new f(u.DOLLAR,s,s+1,l,p,t);case 38:return new f(u.AMP,s,s+1,l,p,t);case 40:return new f(u.PAREN_L,s,s+1,l,p,t);case 41:return new f(u.PAREN_R,s,s+1,l,p,t);case 46:if(46===c.call(r,s+1)&&46===c.call(r,s+2))return new f(u.SPREAD,s,s+3,l,p,t);break;case 58:return new f(u.COLON,s,s+1,l,p,t);case 61:return new f(u.EQUALS,s,s+1,l,p,t);case 64:return new f(u.AT,s,s+1,l,p,t);case 91:return new f(u.BRACKET_L,s,s+1,l,p,t);case 93:return new f(u.BRACKET_R,s,s+1,l,p,t);case 123:return new f(u.BRACE_L,s,s+1,l,p,t);case 124:return new f(u.PIPE,s,s+1,l,p,t);case 125:return new f(u.BRACE_R,s,s+1,l,p,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var a=e.body,o=a.length,s=t+1,l=0;for(;s!==o&&null!==(l=c.call(a,s))&&(95===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++s;return new f(u.NAME,t,s,n,r,i,d.call(a,t,s))}(n,s,l,p,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,a,o){var s=e.body,l=n,p=t,g=!1;45===l&&(l=c.call(s,++p));if(48===l){if((l=c.call(s,++p))>=48&&l<=57)throw(0,i.syntaxError)(e,p,"Invalid number, unexpected digit after 0: "+h(l)+".")}else p=m(e,p,l),l=c.call(s,p);46===l&&(g=!0,l=c.call(s,++p),p=m(e,p,l),l=c.call(s,p));69!==l&&101!==l||(g=!0,43!==(l=c.call(s,++p))&&45!==l||(l=c.call(s,++p)),p=m(e,p,l));return new f(g?u.FLOAT:u.INT,t,p,r,a,o,d.call(s,t,p))}(n,s,v,l,p,t);case 34:return 34===c.call(r,s+1)&&34===c.call(r,s+2)?function(e,t,n,r,a){var s=e.body,l=t+3,p=l,m=0,g="";for(;l<s.length&&null!==(m=c.call(s,l));){if(34===m&&34===c.call(s,l+1)&&34===c.call(s,l+2))return g+=d.call(s,p,l),new f(u.BLOCK_STRING,t,l+3,n,r,a,(0,o.default)(g));if(m<32&&9!==m&&10!==m&&13!==m)throw(0,i.syntaxError)(e,l,"Invalid character within String: "+h(m)+".");92===m&&34===c.call(s,l+1)&&34===c.call(s,l+2)&&34===c.call(s,l+3)?(g+=d.call(s,p,l)+'"""',p=l+=4):++l}throw(0,i.syntaxError)(e,l,"Unterminated string.")}(n,s,l,p,t):function(e,t,n,r,a){var o=e.body,s=t+1,l=s,p=0,m="";for(;s<o.length&&null!==(p=c.call(o,s))&&10!==p&&13!==p;){if(34===p)return m+=d.call(o,l,s),new f(u.STRING,t,s+1,n,r,a,m);if(p<32&&9!==p)throw(0,i.syntaxError)(e,s,"Invalid character within String: "+h(p)+".");if(++s,92===p){switch(m+=d.call(o,l,s-1),p=c.call(o,s)){case 34:m+='"';break;case 47:m+="/";break;case 92:m+="\\";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+="\n";break;case 114:m+="\r";break;case 116:m+="\t";break;case 117:var v=(_=c.call(o,s+1),y=c.call(o,s+2),b=c.call(o,s+3),w=c.call(o,s+4),g(_)<<12|g(y)<<8|g(b)<<4|g(w));if(v<0)throw(0,i.syntaxError)(e,s,"Invalid character escape sequence: \\u"+o.slice(s+1,s+5)+".");m+=String.fromCharCode(v),s+=4;break;default:throw(0,i.syntaxError)(e,s,"Invalid character escape sequence: \\"+String.fromCharCode(p)+".")}l=++s}}var _,y,b,w;throw(0,i.syntaxError)(e,s,"Unterminated string.")}(n,s,l,p,t)}throw(0,i.syntaxError)(n,s,function(e){if(39===e)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character "+h(e)+"."}(v))}function m(e,t,n){var r=e.body,a=t,o=n;if(o>=48&&o<=57){do{o=c.call(r,++a)}while(o>=48&&o<=57);return a}throw(0,i.syntaxError)(e,a,"Invalid number, expected digit but got: "+h(o)+".")}function g(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}f.prototype.toJSON=f.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}},"B+tq":function(e,t,n){"use strict";var r,i=n("rXeC"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),(0,a.default)(function(){function e(e){(0,a.default)(e).ksr_video()}a.default.videos_changed=function(){(0,a.default)(".video-player:visible").each(function(){e(this)})},(0,a.default)(document).on("ksr_video:pause_all_videos",function(){(0,a.default)(".video-player").trigger("ksr_video:pause")}),(0,a.default)(".video-player:visible").livequery(function(){e(this)})})},B7AS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var r=n("Tvr3");t.initialState={loadStatus:r.UNLOADED,currentFetchRetries:0,maxFetchRetries:3,fetchTimeout:1e3}},BHlF:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_discover__hero",function(e){var t=e.data("category"),n=e.find(".js-interactive-title"),i=e.find(".js-interactive-title-group"),o=e.find(".js-interactive-title-content-fade"),s=(0,r.default)("#NS__discover_advanced_sentence");function l(){r.default.each(n,function(){var e=(0,r.default)(this);e.height(e.find("a").outerHeight(!0))}),r.default.each(i,function(){var e=(0,r.default)(this);e.find("a.current").closest(".js-category").addClass("has-children-is-current"),e.closest(n).width(e.find("a.current .js-name-prop").outerWidth()),e.css({marginTop:-e.find("a.current").position().top,opacity:1})})}n.length&&(window.setTimeout(function(){l(),e.find(".js-discover-hero-subtitle").show()},300),n.find("a").on("click",function(e){var t=(0,r.default)(this);if(t.parents(".js-react-overlay-enabled").length>0)return e.preventDefault(),void(0,r.default)("#js-overlay-explore-button")[0].click();(0,r.default)(".interactive-title-group-visible").length||(t.closest(n).find(".js-interactive-title-content-fade").fadeIn(300),s.removeClass("clip"),e.preventDefault()),n.not(t.closest(n)).addClass("other-interactive-title-group-visible"),t.closest(n).addClass("interactive-title-group-visible"),t.closest(n).addClass("z-discover-overlay-3 "),(0,a.track)("Discover Switch Modal",{modal_type:t.closest(n).data("modal_type")})}),(0,r.default)(document).on("keyup",function(e){27===e.keyCode&&(0,r.default)(".interactive-title-group-visible").length&&o.click()}),o.on("click",function(e){var t=(0,r.default)(this),i=t.closest(n);n.not(i).removeClass("other-interactive-title-group-visible"),i.removeClass("interactive-title-group-visible"),i.removeClass("z-discover-overlay-3 "),t.fadeOut(200),s.addClass("clip"),(0,a.track)("Discover Switch Modal Close"),e.preventDefault()}),(0,r.default)(document).resize(function(){l()})),e.find("a.subcategory").on("click",function(t){var n=(0,r.default)(this),i=n.data();n.hasClass("current")?(n.removeClass("current"),(0,r.default)(document).trigger("discovery:hero:unselect_subcategory",i),(0,a.track)("Discover Subcategory Deselected",(0,a.namespaceKeys)("discover_category",i)),(0,r.default)(document).trigger("discovery:sentence:update_params",{category_id:i.parent_id||i.id})):(n.siblings().removeClass("current"),n.addClass("current"),(0,r.default)(document).trigger("discovery:hero:select_subcategory",i),(0,r.default)(document).trigger("discovery:sentence:update_params",{category_id:i.id}),(0,a.track)("Discover Subcategory Selected",(0,a.namespaceKeys)("discover_category",i))),(0,r.default)(document).scrollTop()<e.offset().top&&r.default.scrollTo(e.offset().top,300,"easeOutExpo"),t.preventDefault()}),(0,r.default)(".js-refine-and-sort").on("click",function(){t&&(0,a.track)("Discover Refine Search Clicked",(0,a.namespaceKeys)("discover_category",t))})})},"BL+a":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),(0,a.default)(function(){(0,a.default)(".overlabels .field label.overlabel").livequery(function(){var e=(0,a.default)(this),t=e.siblings("input:not([type=hidden]), textarea, .wym_box");t.length||(t=e.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea")),t.length?(e.addClass("overlabel-apply"),t.val()&&e.hide(),t.focus(function(){(0,a.default)(this).val()&&e.hide(),e.addClass("field_focused")}).blur(function(){(0,a.default)(this).val()||e.show(),e.removeClass("field_focused")}).on("keydown input change paste cut",function(){var t=(0,a.default)(this);setTimeout(function(){t.val()?e.hide():e.show()},1)}),e.click(function(){t.attr("disabled")||t.focus()})):e.hide()})})},BMV8:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("UQDk")),o=s(n("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-project-cards-module",function(e){var t=e.data("url"),n=e.data("ref");t&&e.find(".js-slider").each(function(){var i=(0,r.default)(this);i.show(),r.default.ajax({url:(0,a.default)(t),type:"get",success:function(t){var a=i.find(".js-project-list");i.find(".js-slider").removeClass("loading"),t.projects.length?r.default.each(t.projects,function(){a.append(function(e){return n&&(e.ref=n,e.urls.web.project+="?ref="+n),e.baseball_card_size="tall-big",(0,r.default)('<div class="project col col-4 mobile-scroll-row-item">'+(0,o.default)("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}(this))}):e.hide()},error:function(){e.hide()}})})})},BPub:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),(0,i.default)(".NS_projects__spotlight_onboarding",function(e){KSR.store.isSupported()&&(KSR.store.getItem("dismiss_spotlight_onboarding")||(e.removeClass("dismissed"),(0,r.default)("html,body").css("overflow","hidden"),(0,a.track)("Spotlight Onboarding Show")),e.find(".js-close").on("click",function(t){e.addClass("dismissed"),(0,r.default)("html,body").css("overflow","auto"),KSR.store.setItem("dismiss_spotlight_onboarding",!0),(0,a.track)("Spotlight Onboarding Hide"),t.preventDefault()}))})},BQ76:function(e,t,n){"use strict";var r,i=n("wmCY"),a=(r=i)&&r.__esModule?r:{default:r};n("sWK4");var o=n("l/Rs");n("l/Rs");!function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.on("submit.confirm_submit",function(r){r.preventDefault();var i='<div class="modal_delete_confirmation"><p class="copy">'+(t.copy||a.default.t("library.confirm_submit.Really_buddy"))+'</p><div class="buttons"><a href="#" class="yes btn btn--green">'+(t.yes_copy||a.default.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no btn btn--gray">'+(t.no_copy||a.default.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",o=e.create_modal_dialog(t.title||"Are you sure?",i);n.removeClass("submitting-non-ajax"),o.find("a.yes").on("click",function(e){e.preventDefault(),n.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),n[0].submit()}),o.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),o.data("modal_dialog").open()})})}}(o)},BUS2:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("nErl"),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createOutputMethod(r,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null===e||void 0===e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,r){return new HmacSha256(n,t,!0).update(r)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createHmacOutputMethod(r,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var r,i=typeof e;if("string"===i){var a,o=[],s=e.length,l=0;for(r=0;r<s;++r)(a=e.charCodeAt(r))<128?o[l++]=a:a<2048?(o[l++]=192|a>>6,o[l++]=128|63&a):a<55296||a>=57344?(o[l++]=224|a>>12,o[l++]=128|a>>6&63,o[l++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++r)),o[l++]=240|a>>18,o[l++]=128|a>>12&63,o[l++]=128|a>>6&63,o[l++]=128|63&a);e=o}else{if("object"!==i)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var u=[],c=[];for(r=0;r<64;++r){var d=e[r]||0;u[r]=92^d,c[r]=54^d}Sha256.call(this,t,n),this.update(c),this.oKeyPad=u,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var r,i,a=0,o=e.length,s=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(i=this.start;a<o&&i<64;++a)s[i>>2]|=e[a]<<SHIFT[3&i++];else for(i=this.start;a<o&&i<64;++a)(r=e.charCodeAt(a))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,r,i,a,o,s,l,u=this.h0,c=this.h1,d=this.h2,f=this.h3,h=this.h4,p=this.h5,m=this.h6,g=this.h7,v=this.blocks;for(e=16;e<64;++e)t=((i=v[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,n=((i=v[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,v[e]=v[e-16]+t+v[e-7]+n<<0;for(l=c&d,e=0;e<64;e+=4)this.first?(this.is224?(a=300032,g=(i=v[0]-1413257819)-150054599<<0,f=i+24177077<<0):(a=704751109,g=(i=v[0]-210244248)-1521486534<<0,f=i+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(a=u&c)^u&d^l,g=f+(i=g+(n=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&m)+K[e]+v[e])<<0,f=i+(t+r)<<0),t=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),r=(o=f&u)^f&c^a,m=d+(i=m+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&h^~g&p)+K[e+1]+v[e+1])<<0,t=((d=i+(t+r)<<0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(s=d&f)^d&u^o,p=c+(i=p+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&h)+K[e+2]+v[e+2])<<0,t=((c=i+(t+r)<<0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(l=c&d)^c&f^s,h=u+(i=h+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&g)+K[e+3]+v[e+3])<<0,u=i+(t+r)<<0;this.h0=this.h0+u<<0,this.h1=this.h1+c<<0,this.h2=this.h2+d<<0,this.h3=this.h3+f<<0,this.h4=this.h4+h<<0,this.h5=this.h5+p<<0,this.h6=this.h6+m<<0,this.h7=this.h7+g<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,l=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(l+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,l=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||l.push(s>>24&255,s>>16&255,s>>8&255,255&s),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(exports,__webpack_require__("W2nU"),__webpack_require__("DuR2"))},BafW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("shXp")),i=n("ZG75"),a=u(n("L3hI")),o=u(n("wmCY")),s=n("Odm1"),l=u(n("eF8u"));function u(e){return e&&e.__esModule?e:{default:e}}var c=i.ApplicationModel.extend();c.set_computed_value("post_likes",function(){return this.likes_count<=0?"":o.default.t("library.models.app.likes_count",{count:this.likes_count,formatted_count:a.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","has_liked"]}),c.set_computed_value("post_likes_namepile",function(){var e,t;if(this.likes_count<=0)return"";if(e=[],e=r.default.map(this.likers,function(e){return'<a href="'+e.urls.web.user+'" title="'+r.default.escape(e.name)+'">'+r.default.escape(e.name)+"</a>"}),this.has_liked){if(1===this.likes_count)return o.default.t("library.models.app.You_like_this_update");void 0===l.default?e.unshift(o.default.t("library.models.app.You")):e.unshift('<a href="'+l.default.data.urls.web.user+'" title="'+o.default.t("library.models.app.You")+'">'+o.default.t("library.models.app.You")+"</a>")}return(t=parseInt(this.likes_count,10)-e.length)>0&&(this.urls&&this.urls.web&&this.urls.web.likes?e.push('<a href="'+this.urls.web.likes+'" title="'+o.default.t("library.models.app.see_names")+'" id="full_namepile">'+o.default.t("library.models.app.other_people_count",{count:t,formatted_count:a.default.format_number(t,{precision:0})})+"</a>"):e.push(o.default.t("library.models.app.other_people_count",{count:t,formatted_count:a.default.format_number(t,{precision:0})}))),o.default.t("library.models.app.names_count_like_this_update",{names:a.default.to_sentence(e),count:this.likes_count,formatted_count:a.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","likers","has_liked"]}),c.on_initialize(function(){"function"==typeof s.update_record&&this.on_change(function(){(0,s.update_record)("Post",this.get())})}),t.default=c},Bj1T:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#survey_responses_confirm_address",function(e){var t=(0,r.default)("input.radio#suggested_address");e.length&&(e.on("change",".address_col input.radio",function(){var e=(0,r.default)(this);(0,r.default)(this).closest(".addresses").find(".address_col").each(function(){var e=(0,r.default)(this);e.find("input.radio").is(":checked")?e.find("input[type=hidden]").attr("disabled",!1):e.find("input[type=hidden]").attr("disabled",!0)}),"entered_address"===e.attr("id")?(0,a.track)("Address Entered Selected"):"suggested_address"===e.attr("id")&&(0,a.track)("Suggested Address Selected")}),t&&t.click(),(0,r.default)(".addresses.no_suggestion").length?(0,a.track)("Confirm your Address Page"):(0,a.track)("Select an Address Page"))})},C75a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateField=t.isEIN=t.isZipcode=t.isSSNLast4=t.isUnique=t.isPresent=t.isNumeric=t.isEmail=t.hasLength=t.handleTouchAllFields=t.handleTouchField=t.allFieldsTouched=t.hasError=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("+4Bd"),o=n("p5aI"),s=n("EIRz");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.hasError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{touched:{},errors:{}},t=arguments[1];return e.touched[t]&&!!e.errors[t]};var c=t.allFieldsTouched=function(e){return i.apply(void 0,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.map(function(e){return u({},e,!0)}))))},d=(t.handleTouchField=function(e,t,n,r){var o=(0,a.getErrors)(n),l=void 0;return l=r?function(t){return t.forEach(function(t){return r(e,t)})}:function(e){return e},(0,s.loop)(i({},e,{touched:i({},e.touched,u({},t,!0)),errors:o}),o[t]?s.Cmd.run(l,{args:[o[t]]}):s.Cmd.none)},t.handleTouchAllFields=function(e,t,n){var r=(0,a.getErrors)(t);return(0,s.loop)(i({},e,{touched:i({},c(e.fields)),errors:r}),n?s.Cmd.run(n,{args:[e,r]}):s.Cmd.none)},t.hasLength=function(e,t){return e.length===t}),f=(t.isEmail=function(e){return e&&e.match(/^.+@.+\..{2,}$/)},t.isNumeric=function(e){return!isNaN(e)}),h=(t.isPresent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"==typeof e?e.trim().length>0:null!=e&&e.length>0},t.isUnique=function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!1}).caseSensitive?-1===t.indexOf(e):-1===t.map(function(e){return e.toLowerCase()}).indexOf(e.toLowerCase())},t.isSSNLast4=function(e){return!!e&&f(e)&&d(e,4)},t.isZipcode=function(e){return!!e&&f(e)&&d(e,5)},t.isEIN=function(e){return!!e&&/^(\d[1-9]|[1-9]\d)\-\d{7}$/.test(e)},t.validateField=function(e,t,n){return n()?(0,o.Success)():(0,o.Failure)(new h(u({},e,new p([t]))))},function(){function e(t){l(this,e),this.errors=t}return r(e,[{key:"concat",value:function(t){var n=this,r=Object.keys(this.errors).concat(Object.keys(t.errors));return new e(r.filter(function(e,t){return t===r.indexOf(e)}).reduce(function(e,r){var a=n.errors[r],o=t.errors[r],s=a&&o?a.concat(o):a||o;return i({},e,u({},r,s))},{}))}}]),e}()),p=function(){function e(t){l(this,e),this.value=t}return r(e,[{key:"concat",value:function(t){return new e(this.value||t.value)}}]),e}()},CCL3:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e,t){var n,r,i=0,a=/^ui-id-\d+$/;function o(t,n){var r,i,a,o=t.nodeName.toLowerCase();return"area"===o?(i=(r=t.parentNode).name,!(!t.href||!i||"map"!==r.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+i+"]")[0])&&s(a))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(n=e.fn.focus,function(t,r){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),r&&r.call(n)},t)}):n.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(("absolute"===(n=i.css("position"))||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return o(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&o(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function o(t,n,i,a){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(r=e.fn.removeData,function(t){return arguments.length?r.call(this,e.camelCase(t)):r.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,a=e.ui[t].prototype;for(i in r)a.plugins[i]=a.plugins[i]||[],a.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r,i=n&&"left"===n?"scrollLeft":"scrollTop";return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(r)},"CF+r":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PCommErrorBoundary=void 0;var r=n("tryQ"),i=n("m3X0"),a=t.PCommErrorBoundary=(0,i.configureErrorBoundary)({onComponentError:function(e,t,n){return r.Honeybadger.notify(JSON.stringify(e)+" "+JSON.stringify(t.componentStack),{context:{tags:["project_communities"].concat(n).join(",")}})}});t.default=a},CV0w:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("GiK3")),i=n("ci1u"),a=n("Z5jf"),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.friends;return r.default.createElement("div",{className:"mr1 flex items-center"},t.map(function(e){return r.default.createElement(i.Avatar,{key:e.imageUrl,size:4,atoms:["mr1"],imageUrl:e.imageUrl})}))};t.default=function(e){var t=e.friends;if(null==t||!t.nodes.length)return null;var n=t.nodes,i=n.slice(0,2),s=i.map(function(e){return""+escape(e.name.split(" ")[0])});if(s.length<n.length){var u=n.length-s.length,c=(0,a.boundT)("project_page.social_facepile.amount_more",{count:u});s.push(""+c)}var d=(0,a.boundT)("project_page.social_facepile.friends_are_backers",{friends:o.default.to_sentence(s),count:s.length});return r.default.createElement("div",{className:"mt2 flex items-center"},r.default.createElement(l,{friends:i}),r.default.createElement("div",{className:"type-13",dangerouslySetInnerHTML:{__html:unescape(d)}}))}},CcZ3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.is_creator=e.project.creator.id===o.default.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=s.maybe.fromNullable(e.backing.reward.estimated_delivery_on).map(function(e){return(0,a.format)("ll",(0,u.toUTC)(1e3*e))}).getOrElse(null),e.backing.is_creator=e.is_creator,e.backing.formatted_amount=i.default.money(e.backing.amount,{currency:e.backing.project.currency,precision:0})),e.messages=r.default.map(e.messages,function(t){return t.sender=r.default.findWhere(e.participants,{id:t.sender_id}),(0,l.default)(t)}),e};var r=c(n("shXp")),i=c(n("L3hI")),a=n("kVy0"),o=c(n("eF8u")),s=n("I2cB"),l=c(n("5RPx")),u=n("HZrJ");function c(e){return e&&e.__esModule?e:{default:e}}},Ciuv:function(e,t,n){"use strict";n("I1z3"),n("rXeC"),n("yloT"),n("TGXB"),n("d/4O"),n("Cw4A"),n("fpIj"),n("Vy0d"),n("1sZt"),n("xgGG"),n("1Vzf"),n("KMRV"),n("92m3"),n("17bY"),n("WREU"),n("d3qi"),n("5ns8"),n("NtaJ"),n("ZG+P"),n("7zD0"),n("KI0s"),n("dRgk"),n("B+tq"),n("HQO0"),n("arWD"),n("X1nT"),n("1gbM"),n("5Sqi"),n("9DJv"),n("BL+a"),n("9kaj"),n("+/oj"),n("MGa0"),n("KfH0"),n("eFoH"),n("thyB"),n("2fYv"),n("MPGJ"),n("Vmib"),n("WfYy"),n("sxpx"),n("PzQG"),n("ug+k"),n("8ANd"),n("ienZ"),n("dgQY"),n("Ht4c"),n("wtjs"),n("LDW/"),n("I7l9"),n("NgMk"),n("qQYM"),n("01q7"),n("3tbO"),n("DFf4"),n("uQxE"),n("6F/s"),n("rmI3"),n("uWqJ"),n("Tct/"),n("cBsc"),n("hU5k"),n("SSTo"),n("/b7f"),n("+4yP"),n("9x+j"),n("sYfk"),n("xZTV"),n("ubEc"),n("HHA5"),n("bAet"),n("Wip1"),n("cWTi"),n("F6BI"),n("3w6W"),n("4D4H"),n("BHlF"),n("8uP6"),n("pxxf"),n("MX6m"),n("bRUp"),n("+YRa"),n("1w/n"),n("EIpC"),n("8tKI"),n("Ej2h"),n("whut"),n("if/t"),n("UhhV"),n("gHGJ"),n("/fAy"),n("V8lC"),n("cDEd"),n("Vo5L"),n("pqDf"),n("w02R"),n("NUlJ"),n("FQDm"),n("JCYY"),n("LXqv"),n("ymRo"),n("3txR"),n("ZDod"),n("ofuh"),n("8bXp"),n("6JMX"),n("Rx85"),n("nHv6"),n("a1l5"),n("sWQm"),n("Z36P"),n("gmJr"),n("zOWE"),n("txGb"),n("Mscd"),n("slH/"),n("FRT5"),n("of/u"),n("A5ag"),n("86os"),n("Q4dB"),n("wbn/"),n("7dY0"),n("aHws"),n("nEat"),n("PGqv"),n("141G"),n("jD6c"),n("mYWD"),n("lk0j"),n("vWMs"),n("QEM/"),n("iis7"),n("AXgT"),n("cLqc"),n("Gx1m"),n("JXF+"),n("YmKE"),n("zn/B"),n("mCzb"),n("BPub"),n("Nkse"),n("ucfE"),n("tI6b"),n("YOqD"),n("IuCL"),n("wun9"),n("EUhg"),n("kwpy"),n("IyjT"),n("Fvwm"),n("2/5V"),n("Sm8F"),n("Nkoz"),n("mxM5"),n("AwtR"),n("BMV8"),n("Nhg7"),n("8dPd"),n("YBJb"),n("Yxm8"),n("q1R/"),n("/qyH"),n("5ln5"),n("7Tqv"),n("p5+3"),n("/RUt"),n("TJ96"),n("kqul"),n("Bj1T"),n("oo6k"),n("q1oh"),n("zZ2s"),n("Dnan"),n("nV3+"),n("HIA1"),n("Ggln"),n("DVtu"),n("sSrd"),n("joJ6"),n("9z0e"),n("Ye5x"),n("DoON"),n("gwva"),n("4Apx"),n("olXR"),n("nzM3"),n("rbUO"),n("Jd3c"),n("IYZS"),n("6fBM"),n("5ErT"),n("uxlr"),n("1C6n")},CuRd:function(e,t,n){"use strict";n("UBnO");n("l/Rs");var r=n("l/Rs");r.fn.client_side_asset_uploader=function(){var e=r(this),t=["data-asset-attachable-type","data-asset-method"].map(function(t){return"["+t+'="'+e.attr(t)+'"]'}).join("");e.adhoc_fileuploader({url:e.data("url"),paramsUrl:e.data("params-url"),done:function(e,n){var i=n.files[0],a={file:i,s3_key:n.formData.filter(function(e){return"key"===e.name})[0].value,data_file_name:i.name,data_file_size:i.size,data_content_type:i.type,signed_preview_url:"umm"};r(".js-assets-list"+t).trigger("assets_list:item_added",a)}})}},Cw4A:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)(function(){(0,a.default)(document).on("click","ul.faqs_alt li .question",function(e){(0,a.default)(this).parent("li").toggleClass("expanded"),(0,o.track)("FAQ Toggle",{question:(0,a.default)(this).text().trim()}),e.preventDefault()})})},DDkI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.COMPONENT_ERROR="COMPONENT_ERROR",i=t.CUSTOM_ERROR="CUSTOM_ERROR";t.componentError=function(e,t,n){return{type:r,error:e,info:t,tags:n}},t.customError=function(e,t){return{type:i,error:e,tags:t}}},DFf4:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("wmCY")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#backer_report_index",function(e){var t=".NS-backer_report_export";function n(e,n){n.closest(t).addClass("generating"),r.default.pollster(e,function(e){return e.email_url&&(0,r.default)(t+" a.email_me").attr("href",e.email_url).show(),e.uploaded||"completed"===e.state?((0,r.default)(t+" .progress .bar").width("100%"),(0,r.default)(t+" .success a.download").attr("href",e.download_url),(0,r.default)(t).removeClass("generating").addClass("success"),!0):(void 0!==e.percent&&(0,r.default)(t+" .progress .bar").width(e.percent+"%"),!1)},{delay:500,continue_on_error:!0})}e.on("submit",t+" form",function(e){var t=(0,r.default)(this),i=t.find(".report_type select").val(),a=t.find(".select.report_type").data("all_reports_url"),s=t.find(".report_format select").val();e.preventDefault(),i&&("all"===i?((0,o.track)("Backer Report Export",{export_type:"all"}),r.default.ajax({type:"post",url:a,data:{report_format:s},dataType:"json",success:function(e){n(e.poll_url,t)}})):((0,o.track)("Backer Report Export",{export_type:"tier"}),r.default.ajax({type:"get",url:i,data:{new:"true",report_format:s},dataType:"json",success:function(e){n(e.poll_url,t)}})))}),e.on("click",t+" a.email_me",function(e){e.preventDefault();var n=(0,r.default)(this);r.default.ajax({url:n.attr("href"),type:"post",dataType:"json",success:function(e){e&&200!==e.status?this.error():(0,r.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.Well_send_you_an_email_when_this_report_is_ready"))},error:function(){(0,r.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.There_was_an_error_requesting_the_email"))}})}),e.on("click",t+" a.reset",function(e){(0,o.track)("Backer Report Another Export"),(0,r.default)(t).removeClass("generating").removeClass("success"),(0,r.default)(t+" .email_me_container").empty().html(a.default.t("onloads.views.backer_report.export.Email_me_when_ready")),(0,r.default)(t+" .bar").css("width","0%"),e.preventDefault()}),e.on("click",t+" .js-export-warning--continue",function(e){e.preventDefault();var n=(0,r.default)(this).closest(t),i=n.find(".js-export-warning"),a=n.find(".js-export-form");i.hide(),a.show()})})},DVtu:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)(function(){function e(){var e=(0,a.default)('div[id="forgot-password"]');e.removeClass("current"),e.siblings("#login, #verify").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").show()}function t(t){var n=(0,a.default)(t).closest(".current");n.is("#verify")||n.removeClass("current"),(0,a.default)("#login-signup #forgot-password").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").hide(),(0,a.default)(document).one("closed.modal_dialog",e)}(0,o.trackLinks)(".js-switch-to-signup","Login to Signup Switch"),(0,a.default)(document).on("click","#retry-forgot-password",function(e){var n=this.href,r=(0,a.default)('div[id="forgot-password"]');t(this),a.default.ajax({url:n,dataType:"html",success:function(e){(r=(0,a.default)(e).replaceAll(r)).addClass("current")}}),e.preventDefault()}),(0,a.default)(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(e){e.preventDefault(),t(this),(0,a.default)(document).on("jGrowl.close_200","form#reset",function(){(0,a.default)(".modal_dialog").trigger("close.modal_dialog")})}),(0,a.default)(document).on("form-submit-notify","#forgot-password #reset",e);var n=(0,a.default)("#user_sessions_new, #users_new");n.length&&((0,a.default)(".current",n).find("input:visible:first").focus(),(0,a.default)("#user_weekly_newsletter").change(function(){(0,a.default)(this).is(":checked")?(0,o.track)("Checked Newsletter"):(0,o.track)("Unchecked Newsletter")}),(0,a.default)(".fieldset-errors").livequery(function(){if(""!==a.default.trim((0,a.default)(".fieldset-errors").text())){var e=(0,a.default)(".fieldset-errors h2").text(),t=(0,a.default)(".fieldset-errors li").text();(0,o.track)("Errored User Signup",{error_type:e,error_text:t})}}),(0,a.default)("input",n).focus(function(){(0,a.default)("#login, #signup").removeClass("current"),(0,a.default)(this).closest("#login, #signup").addClass("current")}))})},DXZ8:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){var t={};e.publish=function(){var n=Array.prototype.slice.call(arguments),r=n.shift();t[r]&&e.each(t[r],function(){this.apply(e,n)})},e.subscribe=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),[e,n]},e.unsubscribe=function(){var n=arguments[0];t[n]&&e.each(t[n],function(e){this===arguments[1]&&t[n].splice(e,1)})}}(r)},DkOX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(e).absoluteTo(window.location),i=(0,a.default)(t).absoluteTo(window.location);(n=n||{}).ignore_query&&(r.search({}),i.search({}));n.ignore_hash&&(r.hash(""),i.hash(""));return r.equals(i)};var r,i=n("hBlz"),a=(r=i)&&r.__esModule?r:{default:r}},Dnan:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("8NzR")),a=l(n("wmCY")),o=n("Tvaj"),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#surveys_form",function(e){var t=(0,r.default)("#preview",e),n=(0,r.default)("form#survey_form",e),i=(0,r.default)("ul.questions",e),l=(0,r.default)("#saving-layer",e),u={other:a.default.t("onloads.views.surveys.form.Text_question"),choices:a.default.t("onloads.views.surveys.form.Multiple_choice_question"),checkboxes:a.default.t("onloads.views.surveys.form.Multiple_choice_question")};function c(){var e=n.find("input.keep_box:checked").closest(".js-fieldset:not(.template)");t.empty(),e.each(function(){t.append((0,r.default)(this).find("div.preview").children().clone())})}function d(e){var t=(0,r.default)(e),n=t.val(),i=t.closest(".js-fieldset"),o=i.find(".preview");if(t.is("#survey_intro"))o.find(".survey_intro").text(n);else if(t.is(".question_choice")){!function(e,t,n){e.find(".js-choice-group").each(function(){(0,r.default)(this).find('.js-choice:not(".js-no-response") label').eq(t).text(n||a.default.t("onloads.views.surveys.form.Choice_number",{number:t+1}))})}(o,t.closest("li.field").index(),n)}else!function(e,t){var n=Object.keys(u).find(function(t){return e.parent().hasClass(t)});e.find("li .js-prompt-label").text(t||u[n])}(o,n);v(i),c()}function f(e){e.confirm_submit({copy:a.default.t("onloads.views.surveys.form.You_can_only_send_a_survey_once_per_reward_tier_so_make_sure"),title:a.default.t("onloads.views.surveys.form.Please_confirm"),yes_copy:a.default.t("onloads.views.surveys.form.Send_survey_now"),no_copy:a.default.t("onloads.views.surveys.form.Edit_survey"),on_confirm_submit:function(){e.find("#sending").val("1")}})}function h(){i.find(".question:not(.template)").each(function(e){(0,r.default)(this).find(".position").val(e+1)}),c()}function p(){var e=n.find('.js-add-question[data-template="address"]');i.find(".question.address").is(":visible")?e.addClass("hidden"):e.removeClass("hidden")}function m(e){return e.find('.js-optional input[type="checkbox"]').prop("checked")}function g(e,t){var n=e.find(".preview"),r=e.find(".field.js-optional-choice"),i=n.find(".js-choice.js-no-response");"hide"==t&&(i.addClass("hide"),r.addClass("hide")),"show"==t&&(i.removeClass("hide"),r.removeClass("hide"))}function v(e){var t=e.find(".preview").find(".js-optional-label");m(e)?("choices"==function(e){return e.find('input[type="hidden"].js-template').val()}(e)&&g(e,"show"),t.removeClass("hide")):(g(e,"hide"),t.addClass("hide"))}var _={containment:"document",tolerance:"pointer",items:".question.draggable",stop:h};i.sortable(_),e.on("click",".address.question .keep_box.checkbox",function(){(0,r.default)(this).is(":checked")?(0,r.default)(".editability",e).show():(0,r.default)(".editability",e).hide()}),(0,r.default)(".leftcol .textarea:visible, .leftcol .text:visible",e).each(function(){d(this)}),e.on("keyup cut paste",".leftcol .text, .leftcol .textarea",function(){d(this)}),e.on("click",".js-add-question",function(e){e.preventDefault();var t=(0,r.default)("ul.questions"),n=(0,r.default)(this).data("template"),i=t.children(".template."+n).clone_form_template();v(i),i.css("display","block"),t.append(i),p(),h(),(0,r.default)(this).parent(".js-options").toggleClass("hide"),i.find("input.checkbox.keep_box").prop("checked",!0),i.find("input.checkbox.editable_ends_at").prop("disabled",!1),c()}),e.on("click",".js-add-question-choice",function(e){e.preventDefault();var t=(0,r.default)(this).closest("li.question"),n=t.find("ol.choice_fields"),i=n.find('li:not(".js-optional-choice")').last(),o=i.clone().insertAfter(i),s=o.find("input.question_choice"),l=t.find(".preview"),u=n.find('li:not(".js-optional-choice")').length,d=a.default.t("onloads.views.surveys.form.Choice_number",{number:u});s.prop({placeholder:d,"aria-label":d}),o.find(".js-delete-choice").show().andSelf().find("input").val("").focus(),l.find(".js-choice-group").each(function(){var e=(0,r.default)(this).find('.js-choice:not(".js-no-response")').last();e.clone().insertAfter(e).val("").find("label").text(o.find("label").text()).andSelf().find("input").val("")}),c()}),e.on("click",".js-delete-question",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".question"),n=t.find(".keep_box.checkbox");n.is(":checked")?n.prop("checked",!1):n.prop("checked",!0),t.hide(),t.find("input.checkbox.editable_ends_at").prop("disabled",!0),p(),h()}),e.on("click",".js-delete-choice",function(e){e.preventDefault();var t=(0,r.default)(this).closest("li.field"),n=t.closest("li.question").find(".preview"),i=t.parent().children();n.find(".js-choice-group").each(function(){(0,r.default)(this).find(".js-choice").eq(t.index()).remove()}),t.remove(),i.filter(":visible").each(function(e){(0,r.default)(this).prop({placeholder:a.default.t("onloads.views.surveys.form.Choice_number",{number:e+1}),"aria-label":a.default.t("onloads.views.surveys.form.Choice_number",{number:e+1})})}),c()}),e.on("click",".js-multiple-responses",function(){var e=(0,r.default)(this).closest("li.question"),t=e.find('input[type="hidden"].js-template'),n=(0,r.default)(this).prop("checked")?"checkboxes":"choices";t.val(n),function(e,t){var n=e.find(".preview"),r=n.find('.js-choice-group[data-template="choices"]'),i=n.find('.js-choice-group[data-template="checkboxes"]'),a=n.find(".js-helper-text");"checkboxes"==t&&(r.addClass("hide"),g(e,"hide"),i.removeClass("hide"),a.removeClass("hide")),"choices"==t&&(m(e)&&g(e,"show"),r.removeClass("hide"),i.addClass("hide"),a.addClass("hide"))}(e,n),c()}),e.on("click",'.js-optional input[type="checkbox"]',function(){v((0,r.default)(this).closest("li.question")),c()}),e.on("click","#survey_save",function(a){a.preventDefault(),(0,s.track)("Survey Save"),l.show(),r.default.ajax({url:n.attr("action"),type:n.find('[name="_method"]').val(),data:n.serialize(),complete:function(){l.hide(),c()},success:function(a){var o=(0,r.default)(a.data);(0,r.default)(".modal_dialog").remove(),(0,r.default)("#main_content").replaceWith(o),t=(0,r.default)("#preview",e),n=(0,r.default)("form#survey_form",e),i=(0,r.default)("ul.questions",e),l=(0,r.default)("#saving-layer"),f(n),i.sortable(_)},error:function(){window.location.reload(!0)}})}),e.on("keydown","form#survey_form",function(t){if(t.keyCode===o.ENTER&&!(0,r.default)(t.target).is("textarea"))return t.preventDefault(),(0,r.default)("#survey_save",e).trigger("click"),!1}),f(n)})},DoON:function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r};n("l8Wg"),(0,a.default)("body#users_edit_profile",function(e){e.find("input.file").ksr_uploader()})},DtbE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("ci1u");t.default=function(){return a.default.createElement("div",{className:"text-center"},a.default.createElement(o.Icon,{name:"icon--circle-loader",size:"large"}))}},Dzak:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("GiK3"),a=v(i),o=v(n("CF+r")),s=v(n("eVnV")),l=v(n("jEJt")),u=v(n("K57x")),c=v(n("lr9w")),d=v(n("DtbE")),f=v(n("UExB")),h=n("VPQO"),p=n("EAgE"),m=n("P4S0"),g=n("x0LT");function v(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userCanComment=function(e){return(0,g.canComment)({backing:e.project.backing,creator:e.project.creator,me:e.me||{}})},n.loadMoreCommentsProps=function(e){return{onClick:n.getNextPage(e,n.state.nextCursor),loadingStatus:e.loading,totalCount:e.project.comments.totalCount,showingCount:e.project.comments.edges.length,hasMorePages:e.project.comments.pageInfo.hasPreviousPage}},n.getNextPage=function(e,t){return function(){var n=Date.now();return(0,h.telegraf)(p.TELEGRAF_METHODS.INCREMENT,m.TELEGRAF_ACTIONS.LOAD_MORE_COMMENTS),e.fetchMore({variables:{cursor:t},updateQuery:g.addNewPage}).then(function(){(0,h.telegraf)(p.TELEGRAF_METHODS.TIME,m.TELEGRAF_ACTIONS.LOAD_MORE_COMMENTS_TIME,n-Date.now())})}},n.state={currentCursor:null,nextCursor:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.data.project;t&&t.comments.pageInfo.startCursor!==this.state.nextCursor&&this.setState(function(){return{currentCursor:e.state.nextCursor,nextCursor:t.comments.pageInfo.startCursor}})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.pid;if(t.loading&&!t.project)return a.default.createElement(d.default,null);if(t.error)return a.default.createElement(c.default,null);var r=t.me||{},h=!!t.project.comments.edges.length,p=this.userCanComment(t);return a.default.createElement(i.Fragment,null,p?a.default.createElement("div",{className:"mb2"},a.default.createElement(o.default,null,a.default.createElement(l.default,{pid:n,projectId:t.project.id,author:r,currentCursor:this.state.currentCursor}))):a.default.createElement(o.default,null,a.default.createElement(u.default,{loggedIn:(0,g.isLoggedIn)(r),loginPath:(0,g.getLoginPath)({projectUrl:t.project.url})})),h?a.default.createElement(o.default,{fallbackRender:function(){return a.default.createElement(c.default,null)}},a.default.createElement(s.default,{pid:n,projectId:t.project.id,comments:t.project.comments.edges,userCanComment:p,author:r,pagination:this.loadMoreCommentsProps(t),currentCursor:this.state.currentCursor,refetch:t.refetch})):a.default.createElement(o.default,null,a.default.createElement(f.default,null)))}}]),t}();t.default=_},"E/SE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadAsync=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"ASYNC_LOAD_INIT",queryArgs:t}},t.startFetchTimer=function(e){return{type:"ASYNC_START_TIMER",queryArgs:e}},t.timerExpired=function(e){return{type:"ASYNC_TIMER_EXPIRED",queryArgs:e}},t.onLoadSuccess=function(e){return{type:"ASYNC_LOAD_SUCCESS",data:e}},t.onLoadFailure=function(e){return{type:"ASYNC_LOAD_FAIL",queryArgs:e}},t.noopAction=function(){return{type:"NOOP"}}},E5Nj:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("shXp")),a=o(n("MA+5"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,r.default)(function(){(0,r.default)(".render_mustache").livequery(function(){var e=(0,r.default)(this),t=i.default.extend(e.data("data"),e.data("extend")),n=e.data("partials")?e.data("partials").split(","):void 0,o=e.data("template");e.append((0,a.default)(o,t,n))})})},E7OR:function(e,t,n){"use strict";var r=l(n("shXp")),i=l(n("I1z3")),a=n("Tvaj"),o=l(n("wmCY")),s=l(n("YT+p"));function l(e){return e&&e.__esModule?e:{default:e}}n("xkBF"),n("SzcX"),n("hsYx"),n("0qc1"),n("lX5T");var u=n("l/Rs");n("l/Rs");!function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var n=this.$c.find("video");n.get(0)&&n.get(0).canPlayType&&(n.get(0).canPlayType("video/mp4")||n.hasClass("has_hls"))&&(this.$video=n,this.video=n.get(0),i.default.chrome&&this.$video.attr("controls","controls").removeAttr("controls")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.$c.hasClass("muted")&&this.mute(),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("ksr_video",n))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,n,r){e.seek(n,r)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var e=this,t=this.$video,n=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[n]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),n=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,n,i,a=e.video.buffered,o=[];if(a.length)for(t=0;t<a.length;t+=1)o.push(a.end(t));i=(n=r.default.max(o))/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[n,i])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){var t=this,n=this.$c.find(".player_controls"),i=n.find(".progress_container .progress_bg"),s=i.find(".buffer"),l=i.find(".progress"),u=i.find(".progress_handle"),c=n.find(".volume_container .progress_bg"),d=c.find(".progress"),f=c.find(".progress_handle"),h=n.find(".current_time"),p=n.find(".volume"),m=n.find(".playpause"),g=n.find(".video_track_list"),v=n.find(".js-caption-dropdown"),_={x:0,y:0},y=!1;function b(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t+":"+(n<10?"0":"")+n}function w(){n.is(":hover")?S():(n.removeClass("visible"),n.trigger("ksr_video:controls_hidden"))}function E(){n.addClass("visible"),n.trigger("ksr_video:controls_shown")}function k(){clearTimeout(y)}function S(){k(),y=setTimeout(w,2e3)}function C(){var e=t.video.duration;e&&(t.$c.find(".total_time").text(b(e)).attr("datetime","PT"+Math.floor(e)+"S"),u.attr("aria-valuenow",t.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function T(e){return e.which===a.LEFT?-1:e.which===a.RIGHT?1:null}function A(e,n){var r=n.delta,i=n.direction,a=n.max,o=t.video[e];i&&(o=function(e,t,n){return Math.min(n,Math.max(t,e))}(o+r*i,0,a),t.video[e]=o,E(),S())}function R(){var e=t.video.volume;KSR.store.setItem("ksr_video_volume",e),t.video.muted?(e=0,p.addClass("muted").attr("aria-label",o.default.t("library.ksr_video.Unmute"))):p.removeClass("muted").attr("aria-label",o.default.t("library.ksr_video.Mute"));var n=100*e+"%";d.width(n),f.css("left",n),f.attr("aria-valuenow",e)}this.$c.on("mousemove touchstart touchmove",function(e){var n={x:e.pageX,y:e.pageY};t.playing()&&("touchstart"===e.type||Math.abs(n.x-_.x)+Math.abs(n.y-_.y)>20)&&(E(),S(),_=n)}),C(),this.$video.on("click",function(){t.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(e){t.play(),e.preventDefault()}),this.$c.on("focus click",":tabbable",function(){t.playing()&&(E(),S())}),this.$c.on("keydown",'[role="button"]',function(t){t.which!==a.ENTER&&t.which!==a.SPACE||(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){A("currentTime",{delta:.05*t.video.duration,direction:T(e),max:t.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){A("volume",{delta:.05,direction:T(e),max:1})}),this.$c.on("ksr_video:loaded",function(){C(),f.attr("aria-valuemin","0").attr("aria-valuemax","1"),R()}),this.$video.on("volumechange",function(){R()}).on("play",function(){m.removeClass("play").addClass("pause").attr("aria-label",o.default.t("library.ksr_video.Pause")),S()}).on("pause",function(){m.removeClass("pause").addClass("play").attr("aria-label",o.default.t("library.ksr_video.Play")),E(),k()}),m.on("click",function(e){t.playpause(),e.preventDefault()}),n.on("mouseenter focus",".video_dropdown",function(t){var r=e(t.currentTarget);r.addClass("open"),n.on("mouseleave.leave_dropdown blur.leave_dropdown",".video_dropdown",function(){r.removeClass("open"),n.off(".leave_dropdown")})});var x=function(e){r.default.each(e.textTracks,function(t,n){t.language===e.language?(t.mode="showing",e.hls&&(e.hls.subtitleTrack=n)):t.mode="hidden"})};function P(r){var i=v.find(".js-track"),a=r?i.filter('[data-language="'+r+'"]'):e();0===a.length&&(a=i.filter(".js-captions-off"),r=void 0),i.removeClass("selected"),a.addClass("selected"),a.is(".js-captions-off")?n.find(".ksr-icon__closed-caption").removeClass("is-on"):n.find(".ksr-icon__closed-caption").addClass("is-on"),t.$c.data("language",r),x({hls:t.hls,language:r,textTracks:t.video.textTracks})}g.on("click","li",function(){var n=e(this).data("language");v.removeClass("open"),n?KSR.store.setItem("last_track_language",n):KSR.store.removeItem("last_track_language"),P(n),t.$c.trigger("ksr_video:change_track",n)}),t.video.textTracks&&0!==t.video.textTracks.length?P(KSR.store.getItem("last_track_language")):this.$c.find(".js-remove-unless-text-tracks").remove();var I=null;function O(){t.$c.trigger("ksr_video:volume_adjusted")}e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&I&&t.$c.css("height",I)}),n.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var n=t.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(I=t.$c.css("height"),t.$c.css("height","auto"),n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen())}else t.$c.toggleClass("fullscreen");e.preventDefault()}),i.draggable_bar(function(e){var n=t.video.duration*e;t.video.currentTime=n}),c.draggable_bar(function(e){t.video.muted&&t.unmute(),t.video.volume=e}),c.find(".progress_bar_bg").on("mouseup",O),d.on("mouseup",O),f.on("mouseup",O),e("body").is(".touchable")?d.hide():p.on("click",function(){t.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,n){s.width(n+"%")}),this.$c.on("ksr_video:time_update",function(e,n){var r=n/t.video.duration*100;l.width(r+"%"),u.css("left",r+"%"),h.text(b(n)).attr("datetime","PT"+Math.floor(n)+"S"),u.attr("aria-valuenow",n)})},play:function(){this.video?(this.$video.show(),this.hls&&this.hls.startLoad(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),n=e(window),r=t[0].getBoundingClientRect();r.top>=0&&r.left>=0&&r.bottom<=n.height()&&r.right<=n.width()&&t.focus()},seek:function(e,t){var n=this;if(void 0===t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){n.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.$c.trigger("ksr_video:muted"),this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.$c.trigger("ksr_video:unmuted"),this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},n=this;this.$c.append('<div id="'+e+'"></div>'),"undefined"!=typeof swfobject&&swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",r.default.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,class:"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;window.player_reference=e.ref,e.success?(n.$c.find("video").remove(),n.jwplayer=jwplayer(e.ref),n.jwplayer.onReady(function(){n.$c.trigger("ksr_video:loaded")}),n.jwplayer.onPlay(function(){n.$c.trigger("ksr_video:playing",[t]),t=!1}),n.jwplayer.onPause(function(){n.$c.trigger("ksr_video:paused")}),n.jwplayer.onComplete(function(){n.$c.trigger("ksr_video:ended")}),n.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||n.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(n.$video=n.$c.find("video"),n.video=n.$video.get(0),n.$overlay.remove(),n.$c.children().show(),n.$c.find(".play_button_big").removeAttr("style"),n.video&&(n.initialize(),n.play()))})},initialize_hls:function(){this.hls=new s.default({autoStartLoad:this.$video.hasClass("preload")}),this.hls.loadSource(this.$video.find('source[type="application/x-mpegURL"]').attr("src")),this.hls.attachMedia(this.video);var e=this;this.hls.on(s.default.Events.MANIFEST_PARSED,function(){e.$c.trigger("ksr_video:loaded")})},initialize:function(){this.video?(this.$video.hasClass("has_hls")&&s.default.isSupported()&&this.initialize_hls(),this.bind_controls(),this.bind_video_element(),KSR.store.getItem("ksr_video_volume")&&(this.video.volume=KSR.store.getItem("ksr_video_volume")),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(u)},EAgE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TELEGRAF_METHODS={INCREMENT:"increment",GAUGE:"gauge",TIME:"time"}},EIpC:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body.email_previews",function(e){e.find("#index").on("change",function(){this.submit()}),e.find("#show").on("submit",function(t){t.preventDefault(),e.find("#email_preview").attr("src",(0,r.default)(t.target).attr("action")+"?"+(0,r.default)(t.target).serialize())})})},EUhg:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){var e=(0,a.default)("#projects_rules"),t=(0,a.default)("#project-edit-nav",e),n=(0,a.default)("#continue input[type=checkbox]",e),r=(0,a.default)("#continue input[type=submit]",e);e.length&&((0,a.default)(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),t.find("#steps-nav .first a").addClass("selected"),t.find("a").click(function(e){e.preventDefault()}),n.on("change",function(){(0,a.default)(this).is(":checked")?(0,a.default)(this).siblings("label").addClass("selected").removeClass("unselected"):(0,a.default)(this).siblings("label").addClass("unselected").removeClass("selected"),0===n.not(":checked").length?r.removeClass("disabled"):r.addClass("disabled")}),r.on("click",function(){return 0===n.not(":checked").length?((0,a.default)("#saving-layer").show(),!0):("undefined"!=typeof ga&&ga("send","event","Our Rules","Disabled Continue Click",""),!1)}))})},EZtX:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,n,r,i){"caption"===n.captionModule&&e.each(["caption","overlay"],function(){var e=r[this+"Template"],t=n.API.getComponent(this);t.length&&e?(t.html(n.API.tmpl(e,r,n,i)),t.show()):t.hide()})}),e(document).on("cycle-destroyed",function(t,n){e.each(["caption","overlay"],function(){var e=n[this+"Template"];n[this]&&e&&n.API.getComponent("caption").empty()})})}(r)},Eaq5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=e.backings.map(function(e){return(0,o.default)(r({},e.get()))}),e};var i,a=n("WoYN"),o=(i=a)&&i.__esModule?i:{default:i}},Ej2h:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".NS-features__toggle",function(e){e.find(".js-featured-toggle").on("click",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".NS-features__toggle"),i=t.closest(".featured, .unfeatured");r.default.ajax({type:i.data("method"),url:i.data("url"),data:i.find(":input").serialize(),dataType:"json",success:function(e){n.toggleClass("featured",e.featured),e.remove_featurings_path&&n.find(".featured").data("url",e.remove_featurings_path)},error:function(){growl({error:"Unable to complete your request"})}})})})},Et0E:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("DkOX"));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(document).on("click",".js-facebook-login, a.facebook-link",function(e){var t=(0,r.default)(this);e.preventDefault(),"undefined"!==window.FB?FB.login(function(e){e.authResponse&&r.default.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){e.data&&(0,a.default)(e.data,window.location.href)?window.location.reload(!0):e.data?window.location=e.data:e.flash&&(r.default.isArray(e.flash)&&r.default.isArray(e.flash[0])?(0,i.default)(r.default.map(e.flash,function(e){return e[e.length-1]})):e.flash&&(0,i.default)(e.flash))})},{scope:"email,user_friends,public_profile"}):(0,i.default)({error:"Sorry, we weren't able to connect to Facebook"})})},F6BI:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR"));n("h1HY"),n("oTWu");var a=n("8Ml/"),o=s(n("shXp"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body.discover",function(e){var t;(0,a.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=o.default.debounce(a.trackProjectCards,150);var n=(0,r.default)(".mobius",e);n.length&&((t=(0,r.default)("#sidebar",e)).sticky_bar({parent:t.closest("#content")}),(0,r.default)("div.load_more",e).show(),(0,r.default)("div.pagination",e).hide(),n.persistent_paging())})},"FD+P":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){var t="-1";e.fn.clone_form_template=function(n,r){return n||(n={}),e(this).map(function(){return function(n,r,i){var a=(new Date).getTime();return n.find("label,input,textarea,select").each(function(n,o){!function(n,r,i,a){var o=i.pattern||t,s=new RegExp("_"+o+"_"),l=new RegExp("\\["+o+"\\]");n.attr("id")&&n.attr("id",n.attr("id").replace(s,"_"+r+"_")),n.attr("for")&&n.attr("for",n.attr("for").replace(s,"_"+r+"_")),n.attr("name")&&(i.copy_values&&n.val(e('[name="'+n.attr("name")+'"]').val()),n.attr("name",n.attr("name").replace(l,"["+r+"]"))),"function"==typeof a&&a.apply(n,n)}(e(o),a,r,i)}),n.removeClass("template").show()}(e(this).clone(),n,r)[0]})}}(r)},FJRQ:function(e,t,n){n("l/Rs"),n("l/Rs");(function(){var e,t,n,r,i,a,o,s,l,u,c,d,f,h,p,m,g,v,_,y,b,w,E,k,S=[].slice,C=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};(e=window.jQuery||window.Zepto||window.$).payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?S.call(arguments,1):[],e.payment.fn[n].apply(this,t)},i=/(\d{1,4})/g,e.payment.cards=r=[{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:i,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:i,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:i,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:i,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:i,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:i,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:i,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:i,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,i,a,o,s,l;for(e=(e+"").replace(/\D/g,""),i=0,o=r.length;i<o;i++)for(a=0,s=(l=(t=r[i]).patterns).length;a<s;a++)if(n=l[a]+"",e.substr(0,n.length)===n)return t},n=function(e){var t,n,i;for(n=0,i=r.length;n<i;n++)if((t=r[n]).type===e)return t},f=function(e){var t,n,r,i,a,o;for(r=!0,i=0,a=0,o=(n=(e+"").split("").reverse()).length;a<o;a++)t=n[a],t=parseInt(t,10),(r=!r)&&(t*=2),t>9&&(t-=9),i+=t;return i%10==0},d=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},E=function(e,t){var n,r,i,a,o;try{r=t.prop("selectionStart")}catch(e){e,r=null}if(a=t.val(),t.val(e),null!==r&&t.is(":focus"))return r===a.length&&(r=e.length),a!==e&&(o=a.slice(r-1,+r+1||9e9),n=e.slice(r-1,+r+1||9e9),i=e[r],/\d/.test(i)&&o===i+" "&&n===" "+i&&(r+=1)),t.prop("selectionStart",r),t.prop("selectionEnd",r)},v=function(e){var t,n,r,i,a,o;for(null==e&&(e=""),"０１２３４５６７８９","0123456789",i="",a=0,o=(t=e.split("")).length;a<o;a++)n=t[a],(r="０１２３４５６７８９".indexOf(n))>-1&&(n="0123456789"[r]),i+=n;return i},g=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=(e=v(e)).replace(/\D/g,""),E(e,n)})},p=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatCardNumber(t),E(t,n)})},s=function(n){var r,i,a,o,s,l,u;if(a=String.fromCharCode(n.which),/^\d+$/.test(a)&&(r=e(n.currentTarget),u=r.val(),i=t(u+a),o=(u.replace(/\D/g,"")+a).length,l=16,i&&(l=i.length[i.length.length-1]),!(o>=l||null!=r.prop("selectionStart")&&r.prop("selectionStart")!==u.length)))return(s=i&&"amex"===i.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(u)?(n.preventDefault(),setTimeout(function(){return r.val(u+" "+a)})):s.test(u+a)?(n.preventDefault(),setTimeout(function(){return r.val(u+a+" ")})):void 0},a=function(t){var n,r;if(n=e(t.currentTarget),r=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===r.length))return/\d\s$/.test(r)?(t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d\s$/,""))})):/\s\d?$/.test(r)?(t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d$/,""))})):void 0},m=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatExpiry(t),E(t,n)})},l=function(t){var n,r,i;if(r=String.fromCharCode(t.which),/^\d+$/.test(r))return n=e(t.currentTarget),i=n.val()+r,/^\d$/.test(i)&&"0"!==i&&"1"!==i?(t.preventDefault(),setTimeout(function(){return n.val("0"+i+" / ")})):/^\d\d$/.test(i)?(t.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(i[0],10),(t=parseInt(i[1],10))>2&&0!==e?n.val("0"+e+" / "+t):n.val(i+" / ")})):void 0},u=function(t){var n,r,i;if(r=String.fromCharCode(t.which),/^\d+$/.test(r))return i=(n=e(t.currentTarget)).val(),/^\d\d$/.test(i)?n.val(i+" / "):void 0},c=function(t){var n,r,i;if("/"===(i=String.fromCharCode(t.which))||" "===i)return r=(n=e(t.currentTarget)).val(),/^\d$/.test(r)&&"0"!==r?n.val("0"+r+" / "):void 0},o=function(t){var n,r;if(n=e(t.currentTarget),r=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===r.length))return/\d\s\/\s$/.test(r)?(t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d\s\/\s$/,""))})):void 0},h=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=(e=v(e)).replace(/\D/g,"").slice(0,4),E(e,n)})},w=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},y=function(n){var r,i,a,o;if(r=e(n.currentTarget),a=String.fromCharCode(n.which),/^\d+$/.test(a)&&!d(r))return o=(r.val()+a).replace(/\D/g,""),(i=t(o))?o.length<=i.length[i.length.length-1]:o.length<=16},b=function(t){var n,r;if(n=e(t.currentTarget),r=String.fromCharCode(t.which),/^\d+$/.test(r)&&!d(n))return!((n.val()+r).replace(/\D/g,"").length>6)&&void 0},_=function(t){var n,r;if(n=e(t.currentTarget),r=String.fromCharCode(t.which),/^\d+$/.test(r)&&!d(n))return(n.val()+r).length<=4},k=function(t){var n,i,a,o,s;if(s=(n=e(t.currentTarget)).val(),o=e.payment.cardType(s)||"unknown",!n.hasClass(o))return i=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)a=r[e],n.push(a.type);return n}(),n.removeClass("unknown"),n.removeClass(i.join(" ")),n.addClass(o),n.toggleClass("identified","unknown"!==o),n.trigger("payment.cardType",o)},e.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",_),this.on("paste",h),this.on("change",h),this.on("input",h),this},e.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",l),this.on("keypress",c),this.on("keypress",u),this.on("keydown",o),this.on("change",m),this.on("input",m),this},e.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",y),this.on("keypress",s),this.on("keydown",a),this.on("keyup",k),this.on("paste",p),this.on("change",p),this.on("input",p),this.on("input",k),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",g),this.on("change",g),this.on("input",g),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,r;return t=(r=e.split(/[\s\/]+/,2))[0],2===(null!=(n=r[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:t=parseInt(t,10),year:n=parseInt(n,10)}},e.payment.validateCardNumber=function(e){var n,r;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(n=t(e))&&(r=e.length,C.call(n.length,r)>=0&&(!1===n.luhn||f(e))))},e.payment.validateCardExpiry=function(t,n){var r,i,a;return"object"==typeof t&&"month"in t&&(t=(a=t).month,n=a.year),!(!t||!n)&&(t=e.trim(t),n=e.trim(n),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(n)&&(1<=t&&t<=12&&(2===n.length&&(n=n<70?"20"+n:"19"+n),4===n.length&&(i=new Date(n,t),r=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),i>r)))))},e.payment.validateCardCVC=function(t,r){var i,a;return t=e.trim(t),!!/^\d+$/.test(t)&&(null!=(i=n(r))?(a=t.length,C.call(i.cvcLength,a)>=0):t.length>=3&&t.length<=4)},e.payment.cardType=function(e){var n;return e&&(null!=(n=t(e))?n.type:void 0)||null},e.payment.formatCardNumber=function(n){var r,i,a,o;return n=n.replace(/\D/g,""),(r=t(n))?(a=r.length[r.length.length-1],n=n.slice(0,a),r.format.global?null!=(o=n.match(r.format))?o.join(" "):void 0:null!=(i=r.format.exec(n))?(i.shift(),(i=e.grep(i,function(e){return e})).join(" ")):void 0):n},e.payment.formatExpiry=function(e){var t,n,r,i;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",r=n[2]||"",(i=n[3]||"").length>0?r=" / ":" /"===r?(t=t.substring(0,1),r=""):2===t.length||r.length>0?r=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,r=" / "),t+r+i):""}}).call(this)},FPSz:function(e,t,n){"use strict";n("thKT");var r=o(n("I1z3")),i=o(n("wmCY")),a=n("TBVi");function o(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");!function(e){function t(t,n){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[i.default.t("library.calendar_date_picker.January"),i.default.t("library.calendar_date_picker.February"),i.default.t("library.calendar_date_picker.March"),i.default.t("library.calendar_date_picker.April"),i.default.t("library.calendar_date_picker.May"),i.default.t("library.calendar_date_picker.June"),i.default.t("library.calendar_date_picker.July"),i.default.t("library.calendar_date_picker.August"),i.default.t("library.calendar_date_picker.September"),i.default.t("library.calendar_date_picker.October"),i.default.t("library.calendar_date_picker.November"),i.default.t("library.calendar_date_picker.December")],day_of_week_texts:[i.default.t("library.calendar_date_picker.Sunday_short"),i.default.t("library.calendar_date_picker.Monday_short"),i.default.t("library.calendar_date_picker.Tuesday_short"),i.default.t("library.calendar_date_picker.Wednesday_short"),i.default.t("library.calendar_date_picker.Thursday_short"),i.default.t("library.calendar_date_picker.Friday_short"),i.default.t("library.calendar_date_picker.Saturday_short")]},n),this._extract_options(),this._attach(),this._redraw()}var n;function o(e){return n?n.firstChild.nodeValue=e:(n=document.createElement("div")).appendChild(document.createTextNode(e)),n.innerHTML}e.fn.calendar_date_picker=function(n){return this.each(function(){var r=new t(e(this),n);e(this).data("calendar_date_picker",r)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var n=this._copy_date(e),r=(t||"").split(":");return n.setHours(+r[0]||0),n.setMinutes(+r[1]||0),n},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var n=""+e.getMinutes();return 1===n.length&&(n="0"+n),t+":"+n},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=!!this._does_datetime()&&this._copy_time(this.options.selected_date||this.options.today_date||new Date)},_refresh_calendar_table_classes:function(e){var t=this._selected_date_date_in_focus_month(),n=e.children("tbody"),r=n.find("a.selected");r.removeClass("selected"),r.parent().removeClass("selected");var i=n.find("a:eq("+(t-1)+")");i.addClass("selected"),i.parent().addClass("selected")},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,n){e.select_date(n)})},_bind_dom_table_events:function(){var t=this,n=this.$div.children().children("table"),i=n.children(":eq(0)").children().children(),a=i.children("a.previous_month");a.text(this.options.previous_month_text),a.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var o=i.children("a.next_month");o.text(this.options.next_month_text),o.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),i.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()}),n.children("tbody").click(function(n){var i;i=r.default.msie?n.srcElement:n.target;var a=e(i);if(a[0]&&"A"===a[0].nodeName){n.preventDefault();var o=t._copy_date_with_time(t.focus_date,t.time);o.setDate(+a.text());var s=t._copy_date_with_time(t.selected_date,t.time);t.options.allow_deselect&&s&&o-s==0?t.select_date(void 0):t.select_date(o)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(this.options.time),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,n){e.selected_date||(e.selected_date=new Date);var r=e._copy_date_with_time(e.selected_date,n);e.select_date(r)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var n=e?this._copy_date(e):void 0,r=t||(e?this._copy_time(e):void 0);(this.selected_date?this.selected_date.valueOf():void 0)===(n?n.valueOf():void 0)&&r===this.time||(this.selected_date=n,this._does_datetime()&&(this.time=r,r&&this.$div.find("input").trigger("time_field:set_time",r)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+o(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,n=this._last_date_of_month(this.focus_date).getDate(),r=this._selected_date_date_in_focus_month(),i=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),a=[];for(a.push(this._date_tds(e,r,i,t,n)),t=8-e;t<=n;t+=7)a.push(this._date_tds(0,r,i,t,n));return"<tbody><tr>"+a.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,n,r,i){for(var a=[],o=0;o<e;o+=1)a.push("<td></td>");for(var s=r;a.length<7&&s<=i;s+=1){var l,u=[];s===t&&u.push("selected"),s===n&&u.push("today");var c="<td"+(l=u.length?' class="'+u.join(" ")+'"':"")+'><a href="#"'+l+">"+s+"</a></td>";a.push(c)}for(var d=i+1;d<r+7;d+=1)a.push("<td></td>");return a.join("")},_days_of_week_ths:function(){return e.map(this.options.day_of_week_texts,o)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+o(this.options.time_text)+'<input type="text" /></label>'+o((0,a.zoneAbbr)(new Date))+"</div>":""}})}(n("l/Rs"))},FQDm:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("9DJv"),(0,a.default)(function(){(0,a.default)(document).on("click","#account-setup-panel a.document-form-link",function(e){a.default.open_remote_modal_dialog((0,a.default)(this).attr("href"),{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!1}),e.preventDefault()})})},FRT5:function(e,t,n){"use strict";var r=l(n("shXp")),i=l(n("l/Rs")),a=l(n("wmCY")),o=n("Tvaj"),s=l(n("9VV1"));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){var e=".NS-phone_numbers__edit";function t(){(0,i.default)(e+" .verification_error").html("").addClass("hide"),(0,i.default)(".field_with_errors").children().unwrap()}function n(){var t=(0,i.default)(".js-country");t.closest(e).find("#phone_number").attr("placeholder",function(){var e=a.default.countries[t.val().toLowerCase()];return e&&e.phone_example?"Ex: "+e.phone_example:""})}function l(n){var a=(0,i.default)(n.target).closest(e),o=a.find("#phone_number"),s=a.find("input.radio[name=verify]:checked").val(),l=a.find(".js-country").val();if("sms"!==s&&"call"!==s)return!1;i.default.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:s,number:o.val(),country:l},success:function(e){t(),r.default.isUndefined(e.error)?(a.find(".token").val(""),a.find(".highlight strong").html(e.number+".").end().find(".phone_section, .options_section").addClass("hide").end().find(".code_section").removeClass("hide").trigger("shifted").find(".js-sms_show, .js-call_show").addClass("hide").filter(".js-"+s+"_show").removeClass("hide").end().end().end()):(o.wrap('<div class="field_with_errors" />').focus(),a.find(".phone_section .verification_error").html(e.error).removeClass("hide").trigger("shifted"))},beforeSend:function(){a.addClass("loading").trigger("shifted")},complete:function(){a.removeClass("loading").trigger("shifted")}}),n.preventDefault()}function u(n){if("keypress"!==n.type||n.which===o.ENTER){var a=(0,i.default)(this).closest(e),l=a.find("#token"),u=a.find(".js-country").val();i.default.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{token:l.val(),country:u},success:function(e){if(t(),r.default.isUndefined(e.error)){if(!r.default.isUndefined(e.html)){var n=(0,i.default)(e.html),o=a.closest(".NS-phone_numbers__verify"),u=a.closest(".NS-two_factor_authentication_show").find(".js-change_number");o.length?(o.replaceWith(n),n.trigger("phone_number:added")):u.length?(window.location.reload(!0),(0,s.default)({success:"Your two factor authentication phone fallback number has changed"})):a.trigger("phone_number:added")}}else l.wrap('<div class="field_with_errors" />').focus(),a.find(".code_section .verification_error").html(e.error).removeClass("hide").trigger("shifted")},beforeSend:function(){a.addClass("loading")},complete:function(){a.removeClass("loading")}}),n.preventDefault()}}(0,i.default)(document).on("click",e+" #resend_token",function(){(0,i.default)(this).closest(e).find(".code_section").addClass("hide").end().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")}),(0,i.default)(document).on("change",e+" .js-country",n),(0,i.default)(e).livequery(n),(0,i.default)(document).on("click","#send_verification",l),(0,i.default)(document).on("keypress",e+" #phone_number",function(e){e.which===o.ENTER&&l(e)}),(0,i.default)(document).on("click",e+" #verify_code",u),(0,i.default)(document).on("keypress",e+" #token",u),(0,i.default)(document).on("click",e+" #change_number",function(t){var n=(0,i.default)(this);i.default.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(t){r.default.isUndefined(t.html)||n.closest(e).replaceWith(t.html)}}),t.preventDefault()})})},FbaH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n("GiK3")),i=h(n("L3hI")),a=n("kVy0"),o=n("ci1u"),s=h(n("2TQX")),l=n("MnH5"),u=n("ZYc1"),c=n("Z5jf"),d=h(n("CV0w")),f=h(n("+btr"));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=e.horizontal,n=e.isProjectWeLove,i=e.isProjectOfTheDay,a=e.projectImage,s=e.projectUrl;return r.default.createElement("div",{className:(0,l.computedAtoms)("relative","self-start",t&&"w50p-sm")},r.default.createElement("a",{href:s||"",className:"block img-placeholder w100p",key:"project-link"},a?r.default.createElement("img",{className:(t?"mb2 mb0-sm":"border-grey-400 border-bottom")+" w100p absolute t0",alt:(0,c.boundT)("project_card.Project_image"),src:a}):r.default.createElement("div",{className:"img-placeholder bg-grey-400 absolute t0 w100p"}),i&&r.default.createElement("div",{className:"bg-ksr-green-700 px2 py1 absolute t0 l5 white type-14 medium"},r.default.createElement(o.Icon,{name:"kickstarter",size:"small",atoms:["fill-white mr2"]}),(0,c.boundT)("project_card.Project_of_the_day"))),!t&&n&&r.default.createElement("a",{href:"/discover/recommended?ref=pwl_badge",key:"pwl-badge",className:"type-12 black hover-black bg-white hover-border-soft-black transition-all inline-block ml3 absolute px2 py2_3 b-2 border border-grey-500 shadow-hover"},(0,c.boundT)("project_card.Project_we_love")))},m=function(e){var t=e.creator,n=e.horizontal,i=e.name,a=e.profile,o=e.projectUrl,d=e.refTag,f=e.projectState,h=n?"px4-sm":(0,l.computedAtoms)(["h20 pt4 px3 mb1_6"]);if(!t)return r.default.createElement("div",{className:h});var p=d&&t?(0,s.default)(t.url,{ref:d},null,{noBaseEncode:!0}):t.url;return r.default.createElement("div",{className:h},r.default.createElement("div",{className:"type-18 clamp-5 navy-500 mb3"},r.default.createElement("a",{href:o,className:"soft-black hover-text-underline"},a.name||i||o)," "),f!==u.PROJECT_STATES.successful&&r.default.createElement("div",{className:"type-13 flex"},r.default.createElement(c.BoundTranslate,{atoms:["inline-block"],i18nKey:"project_card.by_creator",i18nTag:"div",by:r.default.createElement("span",{className:"soft-black"},(0,c.boundT)("project_card.by")),creatorName:r.default.createElement("a",{href:p,className:"soft-black hover-text-underline medium"},t.name)})))},g=function(e){var t=e.formattedEndDate,n=e.horizontal,i=e.projectState,a=i===u.PROJECT_STATES.canceled?(0,c.boundT)("project_card.Funding_canceled"):(0,c.boundT)("project_card.Funding_unsuccessful"),o=i===u.PROJECT_STATES.canceled?(0,c.boundT)("project_card.Project_canceled_on",{endDate:t}):(0,c.boundT)("project_card.Project_ended_on",{endDate:t});return r.default.createElement("div",{className:(0,l.computedAtoms)("pb5-md","pb4","px5-md","px4","mt3",!n&&"border-top border-grey-400")},r.default.createElement("div",{className:"h14 "+(n?"border-top border-grey-400 pt2":"pt3")},r.default.createElement("div",{className:"dark-grey-400"},r.default.createElement("div",{className:"inline-block mt2_3"},r.default.createElement("div",{className:"medium dark-grey-500 mt2"},a),o))))},v=function(e){var t=e.backers,n=e.creator,a=e.horizontal,s=i.default.format_number(t.totalCount,{precision:0});return r.default.createElement("div",{className:"pb5-md pb4 px5-md px4 mt3 "+(!a&&"border-top border-grey-400")},r.default.createElement("div",{className:"h14 "+(a?"border-top border-grey-400 pt2":"pt3")},r.default.createElement("div",{className:"type-13 flex"},r.default.createElement("div",{className:"mt4 flex"},r.default.createElement("a",{href:n.url},r.default.createElement(o.Avatar,{size:4,atoms:["mr2"],alt:n.name,imageUrl:n.imageUrl})),r.default.createElement("div",{className:"inline-block mt2_3 type-13"},r.default.createElement(c.BoundTranslate,{atoms:["soft-black text-ellipsis"],i18nKey:"project_card.by_creator_and_backers",i18nTag:"div",by:r.default.createElement("span",{className:"soft-black"},(0,c.boundT)("project_card.by")),creatorName:r.default.createElement("span",{className:"bold"},n.name),backersCount:s}))))))};t.default=function(e){var t=e.children,n=e.horizontal,i=void 0!==n&&n,o=e.refTag,c=e.term,h=e.state,_=e.trackClicks,y=e.variant,b=h.backers,w=h.canceledAt,E=h.category,k=h.creator,S=h.deadlineAt,C=h.friends,T=h.imageUrl,A=h.isProjectOfTheDay,R=h.isProjectWeLove,x=h.modelName,P=h.name,I=h.percentFunded,O=void 0===I?0:I,j=h.pledged,D=h.pid,N=h.profile,L=h.rawScore,M=h.state,F=h.url,B=h.isBacked,U=h.isWatched,H=h.weightedScore,G=h.goal,z=h.location,q=M===u.PROJECT_STATES.canceled?w:S,W=q&&1e3*q,$=W&&(0,a.format)("LL",W),V=null;(o||c)&&(V={},o&&(V.ref=o),c&&(V.term=c));var K=F&&(V?(0,s.default)(F,V):F),Y=N&&N.imageUrl||T;return r.default.createElement("div",{className:"js-track-project-card","data-project_pid":D||"","data-section":o,"data-weighted_score":H||"","data-raw_score":L||"","data-model_name":x||"","data-project_state":M?M.toLowerCase():"","data-project_backers_count":b?b.totalCount:"","data-project_percent_raised":O||"","data-project_pledged":j?j.amount:"","data-user_is_backer":B||"","data-user_has_starred":U||"",ref:function(e){return e&&_&&_(e)}},r.default.createElement("div",{className:"mb5"},r.default.createElement("div",{className:"bg-white black relative "+(i?"flex-sm":"border-grey-500 border")},t,r.default.createElement(p,{horizontal:i,isProjectWeLove:R,isProjectOfTheDay:A,projectImage:Y,projectUrl:K}),r.default.createElement("div",{className:(0,l.computedAtoms)(i&&"w50p-sm")},r.default.createElement(m,{creator:k,horizontal:i,name:P,profile:N,projectUrl:K,refTag:o,projectState:M}),!k&&r.default.createElement("div",{className:"pb5-md pb4 pt3 px5-sm px4"},r.default.createElement("div",{className:"h20-sm pt1_6"})),k&&function(){switch(M){case u.PROJECT_STATES.successful:return r.default.createElement(v,{backers:b,creator:k,horizontal:i});case u.PROJECT_STATES.canceled:case u.PROJECT_STATES.failed:return r.default.createElement(g,{formattedEndDate:$,horizontal:i,projectState:M});default:return r.default.createElement(f.default,{category:E,refTag:o,backers:b,horizontal:i,jsEndDate:W,percentFunded:O,pledged:j,variant:y,goal:G,location:z})}}())),!i&&C&&r.default.createElement(d.default,{friends:C})))}},Fe8w:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("ci1u"),s=n("Z5jf"),l=n("2OQB"),u=n("MnH5");t.default=function(e){var t=e.project,n=e.dispatch,r=e.atoms,i=void 0===r?[]:r,c=e.size,d=void 0===c?6:c,f=e.watchedColor,h=void 0===f?"red-400":f,p=e.unwatchedColor,m=void 0===p?"white":p,g=e.watchedColorBackground,v=void 0===g?"white":g,_=e.unwatchedColorBackground,y=void 0===_?"soft-black_50":_,b=e.hoverColor,w=e.iconSize,E=void 0===w?"medium":w,k=e.shadow,S=void 0===k||k,C=t.isWatched,T=C?(0,s.boundT)("project_card.Saved"):(0,s.boundT)("project_card.Remind_me"),A=u.computedAtoms.apply(void 0,["pill",C?"bg-"+v:"bg-"+y,"h"+d,"w"+d,"ksr-tooltip-no-focus","text-nowrap","flex","p0","keyboard-focusable-transparent","z1","no-outline",S&&"shadow-avatar"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i)));return a.default.createElement("div",null,a.default.createElement("button",{onClick:function(e){return e.preventDefault(),n((0,l.clickedWatching)(t))},className:A,"data-tooltip":T},a.default.createElement(o.Icon,{name:C?"icon--heart":"icon--heart-outline",label:T,size:E,atoms:[(0,u.computedAtoms)("m-auto",b&&!C&&"hover-fill-"+b,C?"fill-"+h:"fill-"+m)]})))}},FlGX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAndParseRewardData=t.generateRewardsList=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("I2cB"),a=n("jRaX"),o=n("YzsH"),s=n("/Vlt"),l=t.generateRewardsList=function(e,t,n){if(!Array.isArray(n))return{rewardsList:{},rewardsListOrder:[]};return{rewardsList:n.reduce(function(n,i){return n[i.id]=r({},e,i,{shippingRules:t}),n},{}),rewardsListOrder:n.sort(function(e,t){return+e.minPledge.amount-t.minPledge.amount}).map(function(e){return e.id})}};t.loadAndParseRewardData=function(e){var t,n=JSON.parse(e.availableRewards),u=JSON.parse(e.unavailableRewards),c=JSON.parse(e.backedReward),d=JSON.parse(e.pledgeData),f=(0,s.generateSelects)(n),h=f.shippingReducers,p=f.shippingDropdowns,m=f.shippingStates,g=l(o.baseRewardState,o.baseSelectParams,n),v=g.rewardsList,_=g.rewardsListOrder,y=l(o.baseRewardState,o.baseSelectParams,u),b=y.rewardsList,w=y.rewardsListOrder;return{hydratedState:{reward:r({},o.initialState,{backedReward:c,rewardsList:v,rewardsListOrder:_,unavailableRewardsList:b,unavailableRewardsListOrder:w,currentUser:window.current_checkout?{location:i.maybe.fromNullable(window.current_checkout.data.location_id).getOrElse(null),authToken:(0,a.csrfToken)(document)}:null,projectName:window.current_project?i.maybe.fromNullable(window.current_project.data.name).getOrElse(null):null,projectId:(t=document.getElementById("watch-project-modal"),i.maybe.fromNullable(t).chain(function(e){return JSON.parse(e.dataset.watch_project)}).project_id),pledgeData:d,selectedReward:r({},o.initialState.selectedReward,{projectMin:d.defaultPledge.min})}),shippingSelects:m},shippingReducers:h,shippingDropdowns:p}}},Fvwm:function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)(".projects_livestreams",function(){(0,o.trackLinks)(".js-create-livestream","Clicked Create Livestream")})},GCDY:function(e,t,n){"use strict";var r,i=n("shXp"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");!function(e){e.fn.whenNear=function(t,n){var r=e(window),i=t||0,o=this;function s(){var t=a.default.filter(o,function(t){var n=e(t);if(!n.is(":hidden")){var a=r.scrollTop(),o=a+r.height(),s=n.offset().top;return s+n.height()>=a-i&&s<=o+i}});o=o.not(t),a.default.each(t,n)}return r.on("scroll.whenNear resize.whenNear",a.default.throttle(s,25)),s(),this}}(o)},GI7G:function(e,t,n){var r=n("xA5w"),i=n("orNa"),a=n("NKE6");e.exports=function(e,t){var n=r(e),o=r(t),s=a(n,o),l=Math.abs(i(n,o));return n.setMonth(n.getMonth()-s*l),s*(l-(a(n,o)===-s))}},GMuJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={type:"visa",patterns:["4","450823","450875","450878"],lengths:[13,16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-visa.png"},i={type:"mastercard",patterns:["51","52","53","54","55","22","23","24","25","26","27"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-mastercard.png"},a={type:"amex",patterns:["34","37"],lengths:[15],cvcLengths:[3,4],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-amex.png"},o={type:"discover",patterns:["60","64","65","622"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-discover.png"},s={type:"jcb",patterns:["35"],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:"https://d3mlfyygrfdi2i.cloudfront.net/icon-cc-jcb.png"},l={type:null,patterns:["0","1","2","3","4","5","6","7","8","9",""],lengths:[16],cvcLengths:[3],luhn:!0,iconLocation:""},u=[r,i,a,o,s,l];t.VISA=r,t.MASTERCARD=i,t.AMEX=a,t.DISCOVER=o,t.JCB=s,t.DEFAULT=l,t.cards=u},Ggln:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("9VV1"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS-two_factor_authentication_show";(0,r.default)(document).on("click",e+" .js-manage_phone_fallback",function(){(0,r.default)(this).closest(e).find(".js-tfa_manage").addClass("hide"),(0,r.default)(e).find(".js-edit_phone").removeClass("hide"),(0,r.default)(".NS-phone_numbers__edit").is(":visible")&&((0,r.default)(e).find(".intro").hide(),(0,r.default)(e).find(".disable").removeClass("hide"),(0,r.default)(e).find(".edit-back-button").html("Nevermind"),(0,r.default)(e).on("click",".edit-back-button",function(){window.location.reload(!0)}))}),(0,r.default)(document).on("phone_number:added",e,function(){var t=(0,r.default)(this).closest(e).find(".js-manage_phone_fallback").data("url");t&&r.default.ajax({url:t,type:"POST",dataType:"json",success:function(e){e.success?((0,i.default)({success:e.success}),window.location.reload(!0,800)):(0,i.default)({error:e.error})}})})})},Gks7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyFetchFailure=t.currentProjectSlug=t.currentProjectEncodedPath=t.showPostFundingOption=t.FETCH_FAIL_MESSAGE=void 0;var r=n("tryQ"),i=t.FETCH_FAIL_MESSAGE="Fetch for project flagging (aka project reporting) status failed.";t.showPostFundingOption=function(e,t){return"SUCCESSFUL"===t&&e},t.currentProjectEncodedPath=function(){var e=document.createElement("a");return e.href=window.current_project.data.urls.web.project,encodeURIComponent(e.pathname)},t.currentProjectSlug=function(){return window.current_project.data.slug},t.notifyFetchFailure=function(){r.Honeybadger.notify(i)}},GvBW:function(e,t,n){"use strict";var r=function(){};e.exports=r},Gx1m:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("p44K"),n("9DJv"),(0,i.default)(".NS_projects__greenlit",function(e){var t=(0,r.default)("#review_modal");e.find(".js-continue-to-launch").click(function(e){e.preventDefault(),(0,r.default)("#content-wrap").find("#finished").hide(),(0,r.default)(this).trigger("project_edit:toggle_tab",["launch"])}),e.find(".button_preview").click(function(e){e.preventDefault(),(0,r.default)(this).trigger("project_edit:toggle_tab",["preview"])}),e.find(".button_review").click(function(e){var n,r,i,a;e.preventDefault(),r=(n=t).attr("class"),i=n.attr("id"),a=n.data("title"),n.modal_dialog({class_name:r,id:i,title:a})}),(0,r.default)(".NS_projects__greenlit_modal").on("submit","form",function(e){var t=(0,r.default)(this);if(e.preventDefault(),!t.validate())return!1;r.default.ajax({type:"PUT",url:(0,r.default)("#project-edit-nav .finished").data("submit_for_review_url"),data:t.serialize(),success:function(){t.trigger("close"),(0,r.default)("#saving-layer").show(),window.location.reload(!0)}})})})},HHA5:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_creator_backing_notes__form",function(){var e=(0,a.default)(this);"undefined"!=typeof ga&&ga("send","event","Backing Notes","Save",(0,a.default)("body").attr("id")),e.trigger("creator_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},HHS1:function(e,t,n){"use strict";var r=n("cxPT"),i=n("BEQ0"),a=n("GiK3"),o=n("e6+Q"),s=n("TJez"),l=n("mL1Z"),u=n("Jl+d");function c(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var d="function"==typeof Symbol&&Symbol.for,f=d?Symbol.for("react.portal"):60106,h=d?Symbol.for("react.fragment"):60107,p=d?Symbol.for("react.strict_mode"):60108,m=d?Symbol.for("react.profiler"):60114,g=d?Symbol.for("react.provider"):60109,v=d?Symbol.for("react.context"):60110,_=d?Symbol.for("react.async_mode"):60111,y=d?Symbol.for("react.forward_ref"):60112,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function k(e){return!!E.hasOwnProperty(e)||!w.hasOwnProperty(e)&&(b.test(e)?E[e]=!0:(w[e]=!0,!1))}function S(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new C(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new C(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new C(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){T[e]=new C(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new C(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new C(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){T[e]=new C(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){T[e]=new C(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){T[e]=new C(e,5,!1,e.toLowerCase(),null)});var A=/[\-:]([a-z])/g;function R(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A,R);T[t]=new C(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A,R);T[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A,R);T[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),T.tabIndex=new C("tabIndex",1,!1,"tabindex",null);var x=/["'&<>]/;function P(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=x.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var I={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function O(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},D=i({menuitem:!0},j),N={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L=["Webkit","ms","Moz","O"];Object.keys(N).forEach(function(e){L.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),N[t]=N[e]})});var M=a.Children.toArray,F=o.thatReturns("");o.thatReturns("");var B={listing:!0,pre:!0,textarea:!0};function U(e){return"string"==typeof e?e:"function"==typeof e?e.displayName||e.name:null}var H=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,G={},z=u(function(e){return l(e)});var q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function W(e,t){void 0===e&&c("152",U(t)||"Component")}function $(e,t){function n(n,r){var a=function(e,t){if(e=e.contextTypes){var n,r={};for(n in e)r[n]=t[n];t=r}else t=s;return t}(r,t),o=[],l=!1,u={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===o)return null},enqueueReplaceState:function(e,t){l=!0,o=[t]},enqueueSetState:function(e,t){if(null===o)return null;o.push(t)}},d=void 0;if(r.prototype&&r.prototype.isReactComponent){if(d=new r(n.props,a,u),"function"==typeof r.getDerivedStateFromProps){var f=r.getDerivedStateFromProps.call(null,n.props,d.state);null!=f&&(d.state=i({},d.state,f))}}else if(null==(d=r(n.props,a,u))||null==d.render)return void W(e=d,r);if(d.props=n.props,d.context=a,d.updater=u,void 0===(u=d.state)&&(d.state=u=null),"function"==typeof d.UNSAFE_componentWillMount||"function"==typeof d.componentWillMount)if("function"==typeof d.componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&d.componentWillMount(),"function"==typeof d.UNSAFE_componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&d.UNSAFE_componentWillMount(),o.length){u=o;var h=l;if(o=null,l=!1,h&&1===u.length)d.state=u[0];else{f=h?u[0]:d.state;var p=!0;for(h=h?1:0;h<u.length;h++){var m=u[h];null!=(m="function"==typeof m?m.call(d,f,n.props,a):m)&&(p?(p=!1,f=i({},f,m)):i(f,m))}d.state=f}}else o=null;if(W(e=d.render(),r),n=void 0,"function"==typeof d.getChildContext&&"object"==typeof(a=r.childContextTypes))for(var g in n=d.getChildContext())g in a||c("108",U(r)||"Unknown",g);n&&(t=i({},t,n))}for(;a.isValidElement(e);){var r=e,o=r.type;if("function"!=typeof o)break;n(r,o)}return{child:e,context:t}}var V=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a.isValidElement(t)?t.type!==h?t=[t]:(t=t.props.children,t=a.isValidElement(t)?[t]:M(t)):t=M(t),this.stack=[{type:null,domNamespace:I.html,children:t,childIndex:0,context:s,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.providerStack=[],this.providerIndex=-1}return e.prototype.pushProvider=function(e){this.providerIndex+=1,this.providerStack[this.providerIndex]=e,e.type._context._currentValue=e.props.value},e.prototype.popProvider=function(e){this.providerStack[this.providerIndex]=null,--this.providerIndex,(e=e.type._context)._currentValue=0>this.providerIndex?e._defaultValue:this.providerStack[this.providerIndex].props.value},e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var n=this.stack[this.stack.length-1];if(n.childIndex>=n.children.length){var r=n.footer;t+=r,""!==r&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===n.type?this.currentSelectValue=null:null!=n.type&&null!=n.type.type&&n.type.type.$$typeof===g&&this.popProvider(n.type)}else r=n.children[n.childIndex++],t+=this.render(r,n.context,n.domNamespace)}return t},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?P(n):this.previousWasTextNode?"\x3c!-- --\x3e"+P(n):(this.previousWasTextNode=!0,P(n));if(e=(t=$(e,t)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var r=e.$$typeof;r===f&&c("257"),c("258",r.toString())}return e=M(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(r=e.type))return this.renderDOM(e,t,n);switch(r){case p:case _:case m:case h:return e=M(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("object"==typeof r&&null!==r)switch(r.$$typeof){case y:return e=M(r.render(e.props,e.ref)),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case g:return n={type:e,domNamespace:n,children:r=M(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case v:return r=M(e.props.children(e.type._currentValue)),this.stack.push({type:e,domNamespace:n,children:r,childIndex:0,context:t,footer:""}),""}c("130",null==r?r:typeof r,"")},e.prototype.renderDOM=function(e,t,n){var r=e.type.toLowerCase();n===I.html&&O(r),G.hasOwnProperty(r)||(H.test(r)||c("65",r),G[r]=!0);var o=e.props;if("input"===r)o=i({type:void 0},o,{defaultChecked:void 0,defaultValue:void 0,value:null!=o.value?o.value:o.defaultValue,checked:null!=o.checked?o.checked:o.defaultChecked});else if("textarea"===r){var s=o.value;if(null==s){s=o.defaultValue;var l=o.children;null!=l&&(null!=s&&c("92"),Array.isArray(l)&&(1>=l.length||c("93"),l=l[0]),s=""+l),null==s&&(s="")}o=i({},o,{value:void 0,children:""+s})}else if("select"===r)this.currentSelectValue=null!=o.value?o.value:o.defaultValue,o=i({},o,{value:void 0});else if("option"===r){l=this.currentSelectValue;var u=function(e){var t="";return a.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(o.children);if(null!=l){var d=null!=o.value?o.value+"":u;if(s=!1,Array.isArray(l)){for(var f=0;f<l.length;f++)if(""+l[f]===d){s=!0;break}}else s=""+l===d;o=i({selected:void 0,children:void 0},o,{selected:s,children:u})}}for(_ in(s=o)&&(D[r]&&(null!=s.children||null!=s.dangerouslySetInnerHTML)&&c("137",r,F()),null!=s.dangerouslySetInnerHTML&&(null!=s.children&&c("60"),"object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML||c("61")),null!=s.style&&"object"!=typeof s.style&&c("62",F())),s=o,l=this.makeStaticMarkup,u=1===this.stack.length,d="<"+e.type,s)if(s.hasOwnProperty(_)){var h=s[_];if(null!=h){if("style"===_){f=void 0;var p="",m="";for(f in h)if(h.hasOwnProperty(f)){var g=0===f.indexOf("--"),v=h[f];null!=v&&(p+=m+z(f)+":",m=f,p+=g=null==v||"boolean"==typeof v||""===v?"":g||"number"!=typeof v||0===v||N.hasOwnProperty(m)&&N[m]?(""+v).trim():v+"px",m=";")}h=p||null}f=null;e:if(g=r,v=s,-1===g.indexOf("-"))g="string"==typeof v.is;else switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":g=!1;break e;default:g=!0}g?q.hasOwnProperty(_)||(f=k(f=_)&&null!=h?f+'="'+P(h)+'"':""):(g=_,f=h,h=T.hasOwnProperty(g)?T[g]:null,(v="style"!==g)&&(v=null!==h?0===h.type:2<g.length&&("o"===g[0]||"O"===g[0])&&("n"===g[1]||"N"===g[1])),v||S(g,f,h,!1)?f="":null!==h?(g=h.attributeName,f=3===(h=h.type)||4===h&&!0===f?g+'=""':g+'="'+P(f)+'"'):f=g+'="'+P(f)+'"'),f&&(d+=" "+f)}}l||u&&(d+=' data-reactroot=""');var _=d;s="",j.hasOwnProperty(r)?_+="/>":(_+=">",s="</"+e.type+">");e:{if(null!=(l=o.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=o.children)||"number"==typeof l){l=P(l);break e}l=null}return null!=l?(o=[],B[r]&&"\n"===l.charAt(0)&&(_+="\n"),_+=l):o=M(o.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?O(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:r,children:o,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,_},e}(),K={renderToString:function(e){return new V(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new V(e,!0).read(1/0)},renderToNodeStream:function(){c("207")},renderToStaticNodeStream:function(){c("208")},version:"16.4.0"},Y={default:K},Q=Y&&K||Y;e.exports=Q.default?Q.default:Q},HIA1:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("9VV1"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS-two_factor_authentication_new";function t(){(0,r.default)(".NS-phone_numbers__edit").is(":visible")?(0,r.default)(e).find(".js-back:not(.edit-back-button)").hide():(0,r.default)(e).find(".js-back").show()}(0,r.default)(document).on("click",e+" .js-confirmation .js-next",function(t){(0,r.default)(e+" .js-confirmation").addClass("hide"),(0,r.default)(e+" .js-setup").removeClass("hide").trigger("resize"),(0,r.default)(e+" .js-devices").removeClass("hide"),t.preventDefault()}),(0,r.default)(document).on("click",e+" .js-devices .js-back",function(n){var i=(0,r.default)(this).closest(e);i.find(".js-devices").addClass("hide"),i.find(".js-confirmation").removeClass("hide"),i.find(".js-setup").removeClass("hide").trigger("resize"),t(),n.preventDefault()}),(0,r.default)(document).on("phone_number:added",e,function(e){(0,r.default)(e.target).closest("form").submit()}),(0,r.default)(document).on("click",e+" a.js-enable_edit_phone",function(n){var i=(0,r.default)(this).closest(e);i.find(".js-edit_phone").removeClass("hide"),i.find(".js-previous_phone").addClass("hide"),i.find(".js-submit").addClass("hide"),i.trigger("resize"),t(),n.preventDefault()}),(0,r.default)(document).on("submit",e+" form.js-method",function(t){var n=(0,r.default)(this),a=n.closest(e);r.default.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),dataType:"json",success:function(e){e.success?"phone"===e.otp_delivery_method?(a.find(".js-devices").addClass("hide"),a.find(".js-qr_code").removeClass("hide"),a.find(".edit-back-button").addClass("hide")):window.location.reload(!0):(0,i.default)(e)}}),t.preventDefault()})})},HQO0:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),n("LNuh"),(0,i.default)(".js-launch-banner",function(e){e.each(function(){var e=(0,r.default)(this),t=e.data("id"),n=e.data("one_time");function i(){KSR.store.setItem(t,!0)}KSR.store.getItem(t)||(e.on("click",".js-close",function(t){i(),e.addClass("banner-hidden"),t.preventDefault()}),n&&i(),e.removeClass("banner-hidden"))})})},HSFe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},HW66:function(e,t,n){"use strict";n("l/Rs");var r=n("l/Rs");r.fn.composed=function(e,t){var n=r(this);return void 0===n.data("topics")&&n.data("topics",{}),(n.data("topics")[e]||[]).reduce(function(e,t){return t.call(r,e)},t)},r.fn.composable=function(e,t){var n=r(this);return void 0===n.data("topics")&&n.data("topics",{}),n.data("topics")[e]||(n.data("topics")[e]=[]),n.data("topics")[e].push(t),[e,t]}},HZrJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toUTC=function(e){return new Date(e).toISOString().replace("Z","")}},HeCS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSelect=t.UnboundSelect=t.initialState=t.namespaceSelect=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("Z6GA"),l=n("Tvaj"),u=n("ci1u"),c=n("uA/L"),d=n("Z5jf"),f=n("X2U3"),h=n("dY/E"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("3e15")),m=n("KVBm");var g=function(){},v=(t.namespaceSelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.uuidNoDashes)(),t=(0,h.namespaceActions)(e)(p);return{namespace:e,actions:t,reducer:(0,m.unboundReducer)(e,t),Component:_(t)}},t.initialState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedIndex,n=void 0===t?null:t,r=e.isOpen,i=void 0!==r&&r,a=e.isKeySelectionEngaged;return{isOpen:i,isKeySelectionEngaged:void 0!==a&&a,currentIndex:n,highlightedIndex:n}},{"x-small":{heightSize:"h5",typeSize:"body-100",yPaddingClass:"py1",xPaddingClass:"px2 px3-sm",labelClasses:{atoms:["pb1","atomic-text-label"]}},small:{heightSize:"h7",typeSize:"body-100",yPaddingClass:"py1",xPaddingClass:"px2 px3-sm",labelClasses:{atoms:["mb2"],size:"body-100",weight:"medium",color:"soft-black"}},medium:{heightSize:"h9",typeSize:"subhead-300",yPaddingClass:"py2",xPaddingClass:"px3",labelClasses:{atoms:["mb2"],size:"body-100",weight:"medium",color:"soft-black"}}}),_=function(e){return function(t){var n=t.state,r=t.dispatch,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["state","dispatch"]);return o.default.createElement(y,{state:n,onOptionSelect:function(t,n,i,a){a.stopPropagation(),r(e.changeSelectedIndex(t,i)),r(e.selectedValueUpdated(n))},onOptionHover:function(t){r(e.changeHighlightedIndex(t))},onBlur:function(t){setTimeout(function(t,n,r){n.contains(r.activeElement)||t(e.onBlur())}.bind(null,r,t.currentTarget,document),0)},onDropdownContainerClick:function(t){t.stopPropagation(),r(e.toggleSelect())},onKeyDown:function(t,n,i){var a=i.which,o=[l.ENTER,l.SPACE,l.ESC,l.DOWN,l.UP].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l.LETTERS));(a===l.TAB&&t||o.includes(a))&&(i.preventDefault(),r(e.onKeyDown(a,n)))},onListScroll:function(){r(e.onListScroll())},hasErrors:i.hasErrors,options:i.options,titleString:i.titleString,placeholder:i.placeholder,size:i.size,toLabel:i.toLabel,toValue:i.toValue,theme:i.theme,atoms:i.atoms})}};t.UnboundSelect=_;var y=t.CustomSelect=function(e){var t=e.state,n=e.onOptionSelect,r=e.onOptionHover,i=e.onBlur,a=e.onDropdownContainerClick,l=e.onKeyDown,u=e.onListScroll,d=e.hasErrors,h=void 0!==d&&d,p=e.options,m=void 0===p?[]:p,g=e.titleString,_=void 0===g?"":g,y=e.placeholder,E=void 0===y?"":y,k=e.theme,S=void 0===k?f.defaultTheme:k,C=e.toLabel,T=void 0===C?(0,s.prop)("label"):C,A=e.toValue,R=void 0===A?(0,s.prop)("value"):A,x=e.size,P=void 0===x?"medium":x,I=e.atoms,O=void 0===I?[]:I,j=t.isOpen,D=t.currentIndex,N=v[P],L=N.heightSize,M=N.labelClasses,F=N.typeSize,B=N.yPaddingClass,U=N.xPaddingClass,H=(0,s.computedAtoms)("absolute","w100p","border","p1","bg-white","mt1","mb10","rounded","z-dropdown-3","scroll-y","max-h25",F,O,"border-"+S["primary-light"],!j&&"visually-hide"),G=null!==D?m[D]:null;return o.default.createElement("div",{className:"soft-black"},_&&o.default.createElement(c.Label,{type:M.size,weight:M.weight,color:M.color,atoms:M.atoms,"aria-hidden":"true"},_),o.default.createElement("div",{role:"listbox","aria-labelledby":"custom-select-heading-label",onBlur:i,onKeyDown:(0,s.partial)(l,j,m),className:"relative w100p pointer input-keyboard-focusable-"+S["primary-light"]},o.default.createElement(b,{onDropdownContainerClick:a,label:G?T(G):E,color:G?"soft-black":"dark-grey-500",hasErrors:h,heightSize:L,typeSize:F,yPaddingClass:B,xPaddingClasses:U,theme:S}),o.default.createElement("ul",{onScroll:u,className:H,role:"presentation"},w({state:t,options:m,isOpen:j,onOptionSelect:n,onOptionHover:r,toValue:R,toLabel:T,theme:S,typeSize:F,yPaddingClass:B}))))},b=function(e){var t=e.color,n=e.hasErrors,r=e.heightSize,i=e.label,a=e.onDropdownContainerClick,l=e.theme,f=e.typeSize,h=e.yPaddingClass,p=e.xPaddingClasses,m=(0,s.computedAtoms)(["border",n?"border-red-400":"border-grey-500","hover-border-"+l["primary-light"],"transition-all","rounded",h,p,"bg-white flex","items-center",r,"input-keyboard-focusable-"+l["primary-light"]]);return o.default.createElement("div",{className:m,onClick:a,"aria-hidden":"true","aria-label":(0,d.boundT)("components.custom_select.select_an_option"),tabIndex:"0"},o.default.createElement(c.Span,{id:"custom-select-heading-label",type:f,atoms:["grow-1","text-truncate","pr1","book",t]},i),o.default.createElement(u.Icon,{name:"delta-down",size:"small",atoms:["flex-noshrink"]}))},w=function(e){var t=e.state,n=e.options,r=e.onOptionSelect,a=e.onOptionHover,l=e.toValue,u=e.toLabel,c=e.theme,d=e.typeSize,f=e.yPaddingClass,h=e.isOpen;return n.map(function(e,n){var p=t.currentIndex===n,m=t.highlightedIndex===n;return o.default.createElement(E,i({onOptionSelect:(0,s.partial)(r,n,e,l(e)),onOptionHover:(0,s.partial)(a,n),isKeySelectionEngaged:t.isKeySelectionEngaged,key:n},{option:e,isCurrent:p,isHighlighted:m,isOpen:h,toLabel:u,theme:c,typeSize:d,yPaddingClass:f}))})},E=function(e){var t=e.option,n=e.onOptionSelect,r=e.onOptionHover,i=e.isKeySelectionEngaged,a=e.isCurrent,l=e.isHighlighted,d=e.isOpen,f=e.toLabel,h=e.theme,p=e.typeSize,m=e.yPaddingClass,v=(0,s.computedAtoms)(["px2 flex items-center transition-all lh3 soft-black"],l?["bg-grey-400"]:[],m);return o.default.createElement("li",{role:"option",tabIndex:d?"0":"-1","aria-selected":a,onClick:n,onMouseEnter:r,className:v,onKeyDown:g,onFocus:g,ref:function(e){e&&e.parentElement&&l&&i&&(e.parentElement.scrollTop=e.offsetTop+e.offsetHeight-e.parentElement.offsetHeight)}},o.default.createElement(c.Span,{id:"custom-select-heading-label",type:p,atoms:["mr2"]},f(t)),a&&o.default.createElement("span",{className:"circle flex-noshrink h3 w3 bg-"+h["primary-accent"]+" inline-flex justify-center items-center"},o.default.createElement(u.Icon,{name:"check",size:"9",atoms:["relative","fill-white"]})))}},Hgtn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")},e.exports=t.default},HlA3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnboundFieldErrorsList=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r};t.UnboundFieldErrorsList=function(e){return function(t){var n=t.state,r=t.forField,i=t.className,o=void 0===i?"red-500 error-messages":i,s=("string"==typeof r?[r]:r).filter(function(e){return!(!n.touched[e]||!n.errors[e])}).map(function(e){return n.errors[e]}).reduce(function(e,t){return e.concat(t)},[]);if(0===s.length)return null;return a.default.createElement("ul",{className:o},s.map(function(t){return a.default.createElement("li",{key:t},e[n=t]||n);var n}))}}},Ht4c:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("p44K"),n("LNuh"),(0,i.default)(".NS_accounts__edit",function(e){var t="#project_account_form";function n(){return(0,r.default)(t+" :input:not(.optional)").validates_presence(),(0,r.default)(t+" #account_street_address_postal_code").validates_postal_code(),1===(0,r.default)(t+' input[name="account[type]"][value="business"]:checked').length&&((0,r.default)(t+" input.required_business").validates_presence(),(0,r.default)(t+' input[name="account[business_id]"]').validates_business_id()),(0,r.default)(t).validate()}(0,r.default)(document).on("phone_number:added",function(){0===(0,r.default)(".needs_verification:visible").length&&e.closest(".collapsed").removeClass("collapsed")}),(0,r.default)(".NS_accounts__edit").livequery(function(){var e=(0,r.default)(this);e.on("input",".errored",function(){n()&&(0,r.default)(".js-account-form-submit").prop("disabled",!1)}),e.on("submit",t,function(t){var i=(0,r.default)(this),a=(0,r.default)("#account_errors"),o=(0,r.default)('<div class="spinner" />').spin("ksr","#fff");t.preventDefault(),n()&&(i.after(o),r.default.ajax({type:i.attr("method"),url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(t){a.addClass("hide").removeClass("flash-error"),e.closest("#account-setup-panel").html(t.data),(0,r.default)(window).trigger("project_edit:check_all_panels_for_completion"),t.should_reload&&location.reload()},error:function(e){void 0!==e.responseJSON.error&&(a.removeClass("hide").addClass("flash-error"),a.find("ul").html("<li>"+e.responseJSON.error+"</li>"),void 0!==e.responseJSON.state_reason&&a.find("ul").html("<li>"+e.responseJSON.state_reason+"</li>"),r.default.scrollTo(a))},beforeSend:function(){(0,r.default)(".js-account-form-submit").prop("disabled",!0),e.addClass("loading")},complete:function(){(0,r.default)(".js-account-form-submit").prop("disabled",!1),e.removeClass("loading"),o.remove()}}))}),e.on("change",'input[name="account[type]"]',function(){var t=e.find("#business_id_section");(0,r.default)("#account_type_business").is(":checked")?t.show():(t.hide(),t.find(":input").each(function(){(0,r.default)(this).data("validations",[])}))})})})},I1z3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i={};(r=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(i[r.browser]=!0,i.version=r.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),t.default=i},I7l9:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("shXp")),a=s(n("L3hI")),o=s(n("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e={};(0,r.default)(".NS-activity-card-_backing").livequery(function(){var t=(0,r.default)(this),n=t.data("project_id"),s=t.data("user"),l=e[n]||[],u=[s];i.default.each(l,function(e){e.$div.hide(),u.push(e.user)}),u.length>1&&(t.find(".js-backers").html(a.default.to_sentence(i.default.map(u,function(e){return'<a href="'+e.urls.web.user+'" class="link-green-dark bold">'+e.name+"</a>"}))),t.find(".js-avatar").replaceWith((0,o.default)("activity/card/_backing_avatars",{backers:i.default.sample(u,3)}))),l.push({$div:t,user:s}),e[n]=l})})},IPoO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CLOSED="CLOSED",t.EXPANDED="EXPANDED",t.AVAILABLE="available",t.BACKED_LIVE="backed_live",t.BACKED_SUCCESSFUL="backed_successful",t.PLEDGE_AMOUNT="pledgeAmount",t.PLEDGE_NO_REWARD="pledgeWithNoReward",t.SHIPPING_LOCATION="shippingLocation",t.NO_REWARD="no reward"},IYZS:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body.events",function(){(0,r.default)(".js-scroll_to").on("click",function(e){e.preventDefault(),r.default.scrollTo((0,r.default)(this).attr("href"),1e3)})})},IhN0:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e,t){function n(e,t,n){return e>t&&e<t+n}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||r(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return r=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(r=e(t.target)),!!r&&(!(this.options.handle&&!n&&(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=r,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,r){var i,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=(r=this.items[n]).item[0],(a=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||r+u>s&&r+u<l,f="y"===this.options.axis||t+c>a&&t+c<o,h=d&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!i&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&r||"left"===a&&!r:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,a,o=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(r=(i=e(l[n])).length-1;r>=0;r--)(a=e.data(i[r],this.widgetFullName))&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,a,o,s,l,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(r=(i=e(f[n])).length-1;r>=0;r--)(a=e.data(i[r],this.widgetFullName))&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(n=d.length-1;n>=0;n--)for(o=d[n][1],r=0,u=(s=d[n][0]).length;r<u;r++)(l=e(s[r])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,r,i,a;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(r=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),a=i.offset(),r.left=a.left,r.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)a=this.containers[n].element.offset(),this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,r=(t=t||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){n&&!r.forcePlaceholderSize||(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,a,o,s,l,u,c,d,f,h,p=null,m=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(p&&e.contains(this.containers[i].element[0],p.element[0]))continue;p=this.containers[i],m=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,s=null,l=(h=p.floating||r(this.currentItem))?"left":"top",u=h?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(h&&!n(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(d=this.items[a].item.offset()[l],f=!1,Math.abs(d-c)>Math.abs(d+this.items[a][u]-c)&&(f=!0,d+=this.items[a][u]),Math.abs(d-c)<o&&(o=Math.abs(d-c),s=this.items[a],this.direction=f?"up":"down")));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),r[0].style.width&&!n.forceHelperSize||r.width(this.currentItem.width()),r[0].style.height&&!n.forceHelperSize||r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0],a=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(r)},Iqx9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printError=function(e){var t=[];if(e.nodes)e.nodes.forEach(function(e){e.loc&&t.push(i(e.loc.source,(0,r.getLocation)(e.loc.source,e.loc.start)))});else if(e.source&&e.locations){var n=e.source;e.locations.forEach(function(e){t.push(i(n,e))})}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"};var r=n("Nvbj");function i(e,t){var n=t.line,r=e.locationOffset.line-1,i=function(e,t){return 1===t.line?e.locationOffset.column-1:0}(e,t),s=n+r,l=t.column+i,u=(s-1).toString(),c=s.toString(),d=(s+1).toString(),f=d.length,h=e.body.split(/\r\n|[\n\r]/g);return h[0]=a(e.locationOffset.column-1)+h[0],[e.name+" ("+s+":"+l+")",n>=2&&o(f,u)+": "+h[n-2],o(f,c)+": "+h[n-1],a(2+f+l-1)+"^",n<h.length&&o(f,d)+": "+h[n]].filter(Boolean).join("\n")}function a(e){return Array(e+1).join(" ")}function o(e,t){return a(e-t.length)+t}},IuCL:function(e,t,n){"use strict";var r=s(n("rXeC")),i=s(n("8NzR")),a=n("4RZc"),o=n("dvbw");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#projects_learn",function(){var e=0,t=!1,n=function(e){return function(n){n.preventDefault(),(0,r.default)(n.target).closest(".categories").find(".js-category-link").removeClass("selected"),(0,r.default)(n.target).addClass("selected");var i=(0,r.default)(n.target).data("name"),s=(0,r.default)(e).find('[data-name="'+i+'"]');(0,r.default)(e).find(".category").removeClass("block"),s.addClass("block");var l=(0,r.default)(e).find("video").get(0);l&&l.pause(),e.includes("desktop")&&(0,o.coreScroller)({to:(0,r.default)(".js-desktop-categories").offset().top,duration:500}),t&&(0,a.track)("Learn More Project Category Select",{category_name:(0,r.default)(n.target).text()}),t=!0}};(0,r.default)(".js-mobile-categories .js-category-link").on("click",n(".js-mobile-interstitials")),(0,r.default)(".js-desktop-categories .js-category-link").on("click",n(".js-desktop-interstitials")),(0,r.default)(".js-mobile-categories li:first .js-category-link").get(0).click(),(0,r.default)(".js-desktop-interstitials").find(".close").on("click",function(e){(0,r.default)(".js-desktop-categories").find(".js-category-link").removeClass("selected"),(0,r.default)(".js-desktop-interstitials").find(".category").removeClass("block"),e.preventDefault()}),(0,r.default)(".js-tools .right_side").on("cycle-after",function(t,n,i,o){var s,l,u=(0,r.default)(o);e>0&&(0,a.track)("Learn More Project Tool Select",{slide_description:u.attr("data-slide-description")}),e+=1,s=u,(l=(0,r.default)(".js-tools").find("video").get(0))&&l.pause(),s.find("video").length&&s.find("video")[0].play()}),(0,r.default)(".js-quotes").find(".mirror").each(function(){(0,r.default)(this).html((0,r.default)(this).closest(".quote-box").find(".relative").html())}),(0,r.default)(".js-quotes").waypoint(function(){return(0,r.default)(".js-quotes").addClass("loaded")},{offset:150}),(0,r.default)(".js-ctas .js-play-button").on("click",function(e){e.preventDefault(),(0,r.default)(this).closest("section").addClass("video-expanded"),(0,r.default)(this).closest("section").find(".video-player").trigger("ksr_video:play")}),(0,r.default)(".js-ctas .close").on("click",function(e){e.preventDefault(),(0,r.default)(this).closest("section").removeClass("video-expanded"),(0,r.default)(this).closest("section").find(".video-player").trigger("ksr_video:pause")})})},IuKc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("3zLD"),a=n("0n0W"),o=n("Dzak"),s=(r=o)&&r.__esModule?r:{default:r};var l=(0,i.graphql)(a.GET_COMMENTS,{options:{notifyOnNetworkStatusChange:!0}})(s.default);t.default=l},IyjT:function(e,t,n){"use strict";var r=s(n("wmCY")),i=s(n("8NzR")),a=s(n("L3hI")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_campaigns__stats",function(e){o.default.listen("backers_count",function(t){var n=t.backers_count;e.find(".js-backers_count").text(a.default.format_number(n,{precision:0})),e.find(".js-backers_word").text(1===parseInt(n)?r.default.t("project_stats.backer"):r.default.t("project_stats.backers"))}),o.default.listen("pledged",function(t){e.find(".js-pledged").text(a.default.shorter_money(t.pledged,{currency:o.default.get("currency"),usd_type:o.default.get("usd_type")}))}),o.default.listen("usd_pledged",function(t){e.find(".js-usd_pledged").text(a.default.shorter_money(t.usd_pledged,{currency:"USD",usd_type:o.default.get("usd_type")}))}),o.default.listen("converted_pledged_amount",function(t){e.find(".js-convert_pledged").text(a.default.shorter_money(t.converted_pledged_amount,{currency:o.default.get("current_currency"),usd_type:o.default.get("usd_type")}))})})},J1uj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioIndicator=t.RadioGroup=t.BaseRadioButton=t.BaseCheckbox=t.addInnerIcon=t.InputIcon=t.addErrors=t.InputErrors=t.addInlineLabel=t.addInnerLabel=t.addTooltip=t.addHeaderLabelIcon=t.addHeaderLabel=t.InputLabel=t.addFooter=t.addSibling=t.addHeader=t.RadioInputField=t.NumberInputField=t.PasswordInputField=t.EmailInputField=t.TextInputField=t.InputField=t.RadioInput=t.CheckboxInput=t.NumberInput=t.PasswordInput=t.EmailInput=t.TextInput=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("Z6GA"),l=n("ci1u"),u=n("uA/L"),c=n("X2U3"),d=n("xgez");function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var h=function(e){return function(t){var n=t.atoms,r=void 0===n?[]:n,i=t.autoFocus,a=t.checked,l=t.disabled,u=void 0!==l&&l,c=t.errors,d=void 0===c?[]:c,f=t.id,h=t.name,p=t.onBlur,m=t.onChange,g=t.onClick,v=t.onFocus,_=t.onKeyDown,y=t.onKeyUp,b=t.onKeyPress,w=t.onSelect,E=t.placeholder,k=t.required,S=void 0!==k&&k,C=t.style,T=t.value,A=d&&d.length>0,R=(0,s.computedAtoms)("atomic-text-input",A&&"atomic-form-v1-error",r);return o.default.createElement("input",{"aria-invalid":A,"aria-required":S,"aria-describedby":f+"-error",autoFocus:i,checked:a,className:R,disabled:u,id:f,name:h,onBlur:p,onChange:m,onClick:g,onFocus:v,onKeyDown:_,onKeyUp:y,onKeyPress:b,onSelect:w,placeholder:E,style:C,type:e,value:T})}},p=t.TextInput=h("text"),m=t.EmailInput=h("email"),g=t.PasswordInput=h("password"),v=t.NumberInput=h("number"),_=t.CheckboxInput=h("checkbox"),y=t.RadioInput=h("radio"),b=function(e){return function(t){var n=t.wrapperAtoms,r=void 0===n?[]:n,a=t.wrapperStyle,s=t.footer,l=t.header,u=t.inputAtoms,c=void 0===u?[]:u,d=t.siblings,h=f(t,["wrapperAtoms","wrapperStyle","footer","header","inputAtoms","siblings"]),p=function(e){return e&&e.find(Boolean)};return o.default.createElement("div",{style:a,className:["relative"].concat(r).join(" ")},p(l)&&o.default.createElement("div",{className:"relative flex items-center mb1"},l),o.default.createElement("div",{className:"relative"},o.default.createElement(e,i({atoms:c},h)),p(d)&&[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(d))),p(s)&&o.default.createElement("div",{className:"relative flex items-center flex-wrap"},s))}};t.InputField=b;t.TextInputField=b(p),t.EmailInputField=b(m),t.PasswordInputField=b(g),t.NumberInputField=b(v),t.RadioInputField=b(y);var w=function(e){return function(t){return function(n){var r=n.header,a=void 0===r?[]:r,s=f(n,["header"]);return o.default.createElement(t,i({},s,{header:a.concat(e(s))}))}}};t.addHeader=w;var E=function(e){return function(t){return function(n){var r=n.siblings,a=void 0===r?[]:r,s=f(n,["siblings"]);return o.default.createElement(t,i({},s,{siblings:a.concat(e(s))}))}}};t.addSibling=E;var k=function(e){return function(t){return function(n){var r=n.footer,a=void 0===r?[]:r,s=f(n,["footer"]);return o.default.createElement(t,i({},s,{footer:a.concat(e(s))}))}}};t.addFooter=k;var S=t.InputLabel=function(e){var t=e.label,n=e.id,r=e.errors,i=e.atoms,a=(0,s.computedAtoms)("atomic-text-label",r&&r.length>0&&"atomic-text-label--errored",i);return o.default.createElement("label",{htmlFor:n,className:a},t)},C=(t.addHeaderLabel=w(function(e){var t=e.errors,n=void 0===t?[]:t,r=e.headerLabel,i=e.headerLabelAtoms,a=void 0===i?[]:i,s=e.id;return o.default.createElement(S,{atoms:a,errors:n,id:s,key:"key-"+s,label:r})}),t.addHeaderLabelIcon=w(function(e){var t=e.headerLabelIcon,n=e.headerLabelIconSize,r=void 0===n?"12":n,i=e.headerLabelIconColor,a=e.headerLabelIconAtoms,u=void 0===a?["ml1","inline-block"]:a,c=(0,s.computedAtoms)(u,"fill-"+i);return o.default.createElement(l.Icon,{name:t,size:r,atoms:c,key:"key-"+t})}),t.addTooltip=w(function(e){var t=e.tooltipText,n=e.tooltipIcon,r=e.tooltipIconSize,i=void 0===r?"12":r,a=e.tooltipIconColor,u=e.tooltipIconAtoms,c=void 0===u?["ml1","inline-block"]:u,d=(0,s.computedAtoms)(c,"fill-"+a);return o.default.createElement("a",{className:"ksr-tooltip ksr-tooltip--large lh0","data-tooltip":t},o.default.createElement(l.Icon,{name:n,size:i,atoms:d}))}),t.addInnerLabel=E(function(e){var t=e.id,n=e.innerLabel,r=e.innerLabelAtoms,i=void 0===r?[]:r;return o.default.createElement(S,{label:n,id:t,atoms:i.concat(["atomic-text-label-fixed","l0"]),key:"key-"+t})}),t.addInlineLabel=E(function(e){var t=e.id,n=e.inlineLabel,r=e.inlineLabelAtoms,i=void 0===r?[]:r;return o.default.createElement(S,{label:n,id:t,atoms:i.concat(["atomic-text-label-fixed"]),key:"key-"+t})}),t.InputErrors=function(e){var t=e.errors,n=e.name,r=e.id;return t&&0!==t.length?o.default.createElement("ul",{className:"red-500 mt1"},t.map(function(e,t){return o.default.createElement("li",{key:n+"-error-"+t,id:r+"-error"},e)})):null}),T=(t.addErrors=k(function(e){var t=e.errors,n=e.name,r=e.id;return o.default.createElement(C,{errors:t,name:n,id:r,key:"key-"+n+"-"+t})}),t.InputIcon=function(e){var t=e.icon,n=e.size,r=e.atoms,i=void 0===r?[]:r,a=e.color;return o.default.createElement("div",{className:(0,s.computedAtoms)(i)},o.default.createElement(l.Icon,{name:t,size:n,atoms:["fill-"+a]}))});t.addInnerIcon=E(function(e){var t=e.innerIcon,n=e.innerIconSize,r=void 0===n?"12":n,i=e.innerIconColor,a=void 0===i?"dark-grey-400":i;return o.default.createElement(T,{key:"key-"+t,icon:t,size:r,color:a,atoms:["h100p","flex","items-center","justify-center","absolute","t0","r2"]})});t.BaseCheckbox=function(e){var t=e.id,n=e.label,r=e.large,a=void 0!==r&&r,u=e.atoms,c=void 0===u?[]:u,d=e.tag,h=void 0===d?"div":d,p=f(e,["id","label","large","atoms","tag"]);if(!n)throw new Error("A label is required");var m=!0===a?"12":"9",g=(0,s.computedAtoms)("form-checkbox",!0===a?"form-checkbox--large":"form-checkbox--small",c),v=h;return o.default.createElement(v,{className:g},o.default.createElement(_,i({id:t},p)),o.default.createElement("label",{className:"input-label pointer",htmlFor:t},o.default.createElement("span",{className:"input-state-indicator"},o.default.createElement(l.Icon,{name:"check",size:m,atoms:["fill-white"]})),o.default.createElement("span",{className:"input-label__text"},n)))};var A=t.BaseRadioButton=function(e){var t=e.id,n=e.name,r=e.option,i=e.isSelected,a=e.onChange,l=e.onKeyDown,d=e.theme,f=void 0===d?c.defaultTheme:d,h=r.expandedComponent,p=r.label,m=r.value,g=r.subheader;return o.default.createElement("div",{className:(0,s.computedAtoms)("border-grey-400 transition-300 border mb1 rounded",!i&&"hover-border-dark-grey-500"),"aria-checked":i,tabIndex:i?"0":"-1",role:"radio",onKeyDown:l},o.default.createElement("label",{htmlFor:t,className:"flex p3 pointer"},o.default.createElement("div",null,o.default.createElement("input",{type:"radio",name:n,id:t,value:m,className:"super-hide",onChange:a,checked:i}),o.default.createElement("div",{className:"mt1_2"},o.default.createElement(R,{isSelected:i,theme:f}))),o.default.createElement("div",{className:"grow-1"},o.default.createElement(u.Span,{type:"body-100",color:"soft-black",atoms:["block"],weight:"regular"},p),g&&o.default.createElement(u.Span,{type:"caption-200",color:"dark-grey-500",weight:"regular"},g))),i&&h&&o.default.createElement("div",{className:"border-grey-400 border-top p3"},h))},R=(t.RadioGroup=function(e){var t=e.id,n=e.radioGroupOptions,r=e.state,i=e.dispatch,a=e.onChangeAction,s=void 0===a?d.radioGroupOptionSelected:a,l=e.theme,u=void 0===l?c.defaultTheme:l,f=e.RadioButton,h=void 0===f?A:f,p=e.customEventListeners,m=n&&n.length-1,g=n.map(function(e,n){var a=r.selectedOptionIndex===n,l=t+"-radio-option-"+n;return o.default.createElement(h,{isSelected:a,customEventListeners:p,onChange:function(){return i(s(e,n))},onKeyDown:function(e){if(e.target===e.currentTarget&&(0,d.radioGroupWillHandleKey)(e.keyCode))return e.preventDefault(),i((0,d.radioGroupKeydown)(e.keyCode,e.target,n,m))},dispatch:i,option:e,key:l,id:l,name:t,theme:u})});return o.default.createElement("div",{id:t,role:"radiogroup"},g)},t.RadioIndicator=function(e){var t=e.theme,n=void 0===t?c.defaultTheme:t,r=e.isSelected,i=["block","circle","h3","mr1","mr3-md","w3",r?"bg-"+n["primary-light"]:"bg-white"].join(" "),a=["inset 0 1px 3px rgba(0, 0, 0, 0.2)","inset 0 0 0 1px rgba(0, 0, 0, 0.2)"].join(", ");return o.default.createElement("div",{className:i,style:{boxShadow:a}},r&&o.default.createElement("div",{className:"bg-white h1 w1 circle inline-block m1"}))})},JCYY:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){var e=(0,a.default)("#projects_edit");e.length&&(e.on("click",".jumio-modal-close",function(e){e.preventDefault(),(0,a.default)(this).trigger("allow_close.modal_dialog"),(0,a.default)(this).trigger("close.modal_dialog")}),(0,a.default)(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){(0,a.default)("#account-setup-panel").trigger("project_build:refresh")}))})},JIXV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flaggingFormReducer=t.FLAGGING_FAILED=t.FLAGGING_CREATED=t.FLAGGING_SUBMITTED=t.FLAGGING_UNSUBMITTED=t.updateDetailsAction=t.createFlaggingFailAction=t.createFlaggingSuccessAction=t.submitFlaggingAction=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("n+Gj"),a=n("EIRz"),o=(t.submitFlaggingAction=function(e,t){return{type:"SUBMIT_FLAGGING",kind:e,details:t}},t.createFlaggingSuccessAction=function(e){return{type:"FLAGGING_CREATED",response:e}}),s=t.createFlaggingFailAction=function(e){return{type:"FLAGGING_FAILED",error:e}},l=(t.updateDetailsAction=function(e){return{type:"FLAGGING_DETAILS_UPDATED",value:e.target.value}},t.FLAGGING_UNSUBMITTED="flagging unsubmitted"),u=t.FLAGGING_SUBMITTED="flagging submitted",c=t.FLAGGING_CREATED="flagging created",d=t.FLAGGING_FAILED="flagging failed",f={flaggingFormStatus:l};t.flaggingFormReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case"SUBMIT_FLAGGING":return(0,a.loop)(r({},e,{flaggingFormStatus:u}),a.Cmd.run(i.submitFlaggingMutation,{successActionCreator:o,failActionCreator:s,args:[t.details,t.kind]}));case"FLAGGING_CREATED":return t.response.errors?r({},e,{flaggingFormStatus:d}):null!==t.response.data.createFlagging.flagging.kind?r({},e,{flaggingFormStatus:c}):r({},e,{flaggingFormStatus:d});case"FLAGGING_FAILED":return r({},e,{flaggingFormStatus:d});case"FLAGGING_DETAILS_UPDATED":return r({},e,{details:t.value});default:return e}}},"JXF+":function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".NS_projects__project_nav .js-load-project-help_wanted",function(){(0,r.default)(document).on("click",".js-btn",function(){var e=(0,r.default)(this).closest(".js-skill");e.find(".js-skill-textarea").toggle(),e.find(".js-btn").toggle()})})},Jd3c:function(e,t,n){"use strict";n("mnU0"),n("pJzG"),n("7hji"),n("dKWP")},JiIc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)throw new Error(t)}},Jko5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Kind=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",VARIABLE:"Variable",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension",DIRECTIVE_DEFINITION:"DirectiveDefinition"})},"Jl+d":function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},K57x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf");t.default=function(e){var t=e.loggedIn,n=e.loginPath;return t?a.default.createElement("p",{className:"text-center bg-grey-200 p2 type-14"},(0,o.boundT)("project_page.comments.Only_backers")):a.default.createElement(o.BoundTranslate,{i18nKey:"project_page.comments.Only_backers_login",loginLink:a.default.createElement("a",{className:"bold soft-black",href:n},(0,o.boundT)("project_page.comments.Log_in")),i18nTag:"p",atoms:["text-center","bg-grey-200","p2","type-14"]})}},KI0s:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("click",".ksr-dropdown",function(){var e=(0,a.default)(this);e.toggleClass("open"),setTimeout(function(){(0,a.default)(window).on("click",function(t){(0,a.default)(t.target).closest(e).length||e.removeClass("open")})},0)})})},KMRV:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){"autofocus"in document.createElement("input")||(0,a.default)(".js-auto_focus").first().focus()})},KVBm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackSelectedItem=t.trackCloseSelect=t.trackOpenSelect=t.handleBlur=t.unboundReducer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("EIRz"),a=n("Z6GA"),o=n("4RZc"),s=n("1Tla"),l=(t.unboundReducer=function(e,t){return function(n){return function(a,o){if(o.namespace&&o.namespace!==e)return a;switch(o.type){case"TOGGLE_SELECT":var f=a.isOpen?c:u;return(0,i.loop)(r({},a,{isOpen:!a.isOpen,highlightedIndex:a.currentIndex}),i.Cmd.run(f,{args:[n]}));case"CLOSE_SELECT":return(0,i.loop)(r({},a,{isOpen:!1,isKeySelectionEngaged:!1}),i.Cmd.run(c,{args:[n]}));case"ON_BLUR":return(0,i.loop)(r({},a,{isKeySelectionEngaged:!1}),i.Cmd.run(l,{successActionCreator:t.closeSelect}));case"CHANGE_SELECTED_INDEX":var h=(0,s.checkForNewSelection)(a,o.newSelectedIndex),p=h.currentIndex!==a.currentIndex?i.Cmd.run(d,{args:[n,o.trackingId]}):i.Cmd.none;return(0,i.loop)(h,p);case"ON_KEYDOWN":return(0,s.handleKeyDown)(a,o.keyCode,o.options);case"ON_LIST_SCROLL":return r({},a,{isKeySelectionEngaged:!1});case"CHANGE_HIGHLIGHTED_INDEX":return r({},a,{highlightedIndex:o.newHighlightedIndex});case"NOOP":default:return a}}}},t.handleBlur=(0,a.wait)(0,function(){return Promise.resolve()})),u=t.trackOpenSelect=function(e){(0,o.track)("Opened Select",{context:e})},c=t.trackCloseSelect=function(e){(0,o.track)("Closed Select",{context:e})},d=t.trackSelectedItem=function(e,t){(0,o.track)("Selected Item",{context:e,id:t})}},KfH0:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(document).on("click",".js-removeable .js-remove",function(){var e=(0,a.default)(this);return!(e.data("confirm")&&!confirm(e.data("confirm")))&&(a.default.post(e.attr("href"),{_method:"delete"},function(){e.parents(".js-removeable").fadeOut(400,function(){(0,a.default)(this).remove()})}),!1)})},"LDW/":function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body#accounts_edit",function(){var e=(0,r.default)("#edit-account-form");(0,r.default)(".js-stripe_form").on("submit",function(t){t.preventDefault();var n=(0,r.default)(t.target),i={};n.find("input[type=submit]").attr("disabled","disabled"),n.find(".js-stripe_input").each(function(){var e=(0,r.default)(this);i[e.data("stripe")]=e.val()}),r.default.ajaxSetup({headers:{Authorization:"Bearer "+n.data("stripe-public-key")}}),r.default.post("https://api.stripe.com/v1/tokens",{pii:i}).done(function(t){e.find("#account_personal_id_token").val(t.id),e.submit()}).fail(function(e){n.find("input[type=submit]").attr("disabled",null),n.find(".errored").text(e.responseJSON.error.message).removeClass("hide")})})})},LOOJ:function(e,t,n){"use strict";var r,i=n("shXp"),a=(r=i)&&r.__esModule?r:{default:r};n("l/Rs");var o=n("l/Rs");o.fn.option_values=function(e){var t=o(this).first().find("option").map(function(t,n){var r=n.value;return!("function"==typeof e&&!e(r))&&r});return(0,a.default)(t).without(!1)},o.fn.select_machine=function(e,t){var n={default_control:function(e){e.hide()}};return o(this).each(function(){!function(e,t,n){var r=o(e),i=a.default.map(a.default.keys(t),function(e){return"#"+e}).join(", ");r.delegate(i,"change",function(){o(this).trigger("state_change")}),r.delegate(i,"state_change",function(){var e=o(this),r=e.val();a.default.each(t[e[0].id],function(e,t){var i,s=o("#"+t),l=s.add(s.prev("label")),u=s.val(),c=a.default.result(e,r);void 0===s.data("options")&&s.data("options",s.find("option")),a.default.isRegExp(c)&&(c=s.option_values(function(e){return e.match(c)})),a.default.isArray(c)&&(c=a.default.map(c,function(e){return'[value="'+e+'"]'}).join(", ")),c?(i=o(s.data("options")),a.default.isString(c)&&(i=i.filter(c)),n.include_blank&&(i=o("<option>").add(i)),s.html(i),l.show(),s.val()!==u&&s.trigger("change")):(n.default_control(l),s.trigger("change"))})})}(this,e,o.extend(n,t))}),this}},LXqv:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body.identity_documents",function(){(0,r.default)(document).ready(function(){window.top.postMessage(JSON.stringify({close_jumio_modal:!0}),"*")})})},LiGZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("ci1u"),s=n("VPQO"),l=n("EAgE"),u=n("P4S0");t.default=function(e){var t=e.commentId,n=e.isActive,r=void 0!==n&&n,i=e.activateForm,c=e.deactivateForm,d=r?"ksr-green-700":"soft-black";return a.default.createElement("button",{onClick:function(){r?c():((0,s.telegraf)(l.TELEGRAF_METHODS.INCREMENT,u.TELEGRAF_ACTIONS.REPLY_FORM_OPENED),i(t))},className:"mt1"},a.default.createElement(o.Icon,{size:"large",atoms:["fill-"+d],name:"icon--reply"}),a.default.createElement("span",{className:"ml1 type-14 "+d},"Reply"))}},M1ti:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t,n){"use strict";var r,i,a=e.skrollr={get:function(){return $},init:function(e){return $||new N(e)},VERSION:"0.6.21"},o=Object.prototype.hasOwnProperty,s=e.Math,l=e.getComputedStyle,u="touchstart",c="touchmove",d="touchcancel",f="touchend",h="skrollr",p="no-"+h,m=h+"-desktop",g=h+"-mobile",v=.004,_=200,y=/^(?:input|textarea|button|select)$/i,b=/^\s+|\s+$/g,w=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,E=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,k=/^([a-z\-]+)\[(\w+)\]$/,S=/-([a-z])/g,C=function(e,t){return t.toUpperCase()},T=/[\-+]?[\d]*\.?[\d]+/g,A=/\{\?\}/g,R=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,x=/[a-z\-]+-gradient/g,P="",I="",O=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(l){var t=l(i,null);for(var n in t)if(P=n.match(e)||+n==n&&t[n].match(e))break;P?"-"===(P=P[0]).slice(0,1)?(I=P,P={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[P]):I="-"+P.toLowerCase()+"-":P=I=""}},j=function(){var t=e.requestAnimationFrame||e[P.toLowerCase()+"RequestAnimationFrame"],n=ve();return!Re&&t||(t=function(t){var r=ve()-n,i=s.max(0,1e3/60-r);return e.setTimeout(function(){n=ve(),t()},i)}),t},D={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-s.cos(e*s.PI)/2+.5},sqrt:function(e){return s.sqrt(e)},outCubic:function(e){return s.pow(e-1,3)+1},bounce:function(e){var t;if(e<=.5083)t=3;else if(e<=.8489)t=9;else if(e<=.96208)t=27;else{if(!(e<=.99981))return 1;t=91}return 1-s.abs(3*s.cos(e*t*1.028)/t)}};function N(n){if(r=t.documentElement,i=t.body,O(),$=this,X=(n=n||{}).constants||{},n.easing)for(var a in n.easing)D[a]=n.easing[a];ie=n.edgeStrategy||"set",Y={beforerender:n.beforerender,render:n.render},(Q=!1!==n.forceHeight)&&(be=n.scale||1),J=n.mobileDeceleration||v,ee=!1!==n.smoothScrolling,te=n.smoothScrollingDuration||_,ne={targetTop:$.getScrollTop()},(Re=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})())?((K=t.getElementById("skrollr-body"))&&W(),L(),pe(r,[h,g],[p])):pe(r,[h,m],[p]),$.refresh(),se(e,"resize orientationchange",function(){var e=r.clientWidth,t=r.clientHeight;t===Ce&&e===Se||(Ce=t,Se=e,Te=!0)});var o=j();return function e(){M(),oe=o(e)}(),$}N.prototype.refresh=function(e){var n,r,i=!1;for(void 0===e?(i=!0,V=[],Ae=0,e=t.getElementsByTagName("*")):e=[].concat(e),n=0,r=e.length;n<r;n++){var a=e[n],o=a,s=[],l=ee,u=ie;if(a.attributes){for(var c,d,f,h=0,p=a.attributes.length;h<p;h++){var m=a.attributes[h];if("data-anchor-target"!==m.name)if("data-smooth-scrolling"!==m.name)if("data-edge-strategy"!==m.name){var g=m.name.match(w);if(null!==g){var v={props:m.value,element:a};s.push(v);var _=g[1];_&&(v.constant=_.substr(1));var y=g[2];/p$/.test(y)?(v.isPercentage=!0,v.offset=(0|y.slice(0,-1))/100):v.offset=0|y;var b=g[3],E=g[4]||b;b&&"start"!==b&&"end"!==b?(v.mode="relative",v.anchors=[b,E]):(v.mode="absolute","end"===b?v.isEnd=!0:v.isPercentage||(v.offset=v.offset*be))}}else u=m.value;else l="off"!==m.value;else if(null===(o=t.querySelector(m.value)))throw'Unable to find anchor target "'+m.value+'"'}if(s.length)!i&&"___skrollable_id"in a?(f=a.___skrollable_id,c=V[f].styleAttr,d=V[f].classAttr):(f=a.___skrollable_id=Ae++,c=a.style.cssText,d=he(a)),V[f]={element:a,styleAttr:c,classAttr:d,anchorTarget:o,keyFrames:s,smoothScrolling:l,edgeStrategy:u},pe(a,["skrollable"],[])}}for(ce(),n=0,r=e.length;n<r;n++){var k=V[e[n].___skrollable_id];void 0!==k&&(F(k),U(k))}return $},N.prototype.relativeToAbsolute=function(e,t,n){var i=r.clientHeight,a=e.getBoundingClientRect(),o=a.top,s=a.bottom-a.top;return"bottom"===t?o-=i:"center"===t&&(o-=i/2),"bottom"===n?o+=s:"center"===n&&(o+=s/2),(o+=$.getScrollTop())+.5|0},N.prototype.animateTo=function(e,t){t=t||{};var n=ve(),r=$.getScrollTop();return(Z={startTop:r,topDiff:e-r,targetTop:e,duration:t.duration||1e3,startTime:n,endTime:n+(t.duration||1e3),easing:D[t.easing||"linear"],done:t.done}).topDiff||(Z.done&&Z.done.call($,!1),Z=void 0),$},N.prototype.stopAnimateTo=function(){Z&&Z.done&&Z.done.call($,!0),Z=void 0},N.prototype.isAnimatingTo=function(){return!!Z},N.prototype.setScrollTop=function(t,n){return re=!0===n,Re?xe=s.min(s.max(t,0),ye):e.scrollTo(0,t),$},N.prototype.getScrollTop=function(){return Re?xe:e.pageYOffset||r.scrollTop||i.scrollTop||0},N.prototype.getMaxScrollTop=function(){return ye},N.prototype.on=function(e,t){return Y[e]=t,$},N.prototype.off=function(e){return delete Y[e],$},N.prototype.destroy=function(){(function(){var t=e.cancelAnimationFrame||e[P.toLowerCase()+"CancelAnimationFrame"];return!Re&&t||(t=function(t){return e.clearTimeout(t)}),t})()(oe),ue(),pe(r,[p],[h,m,g]);for(var t=0,n=V.length;t<n;t++)q(V[t].element);r.style.overflow=i.style.overflow="auto",r.style.height=i.style.height="auto",K&&a.setStyle(K,"transform","none"),$=void 0,K=void 0,Y=void 0,Q=void 0,ye=0,be=1,X=void 0,J=void 0,we="down",Ee=-1,Se=0,Ce=0,Te=!1,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,Ae=0,ie=void 0,Re=!1,xe=0,ae=void 0};var L=function(){var n,a,o,l,h,p,m,g,v,_,b;se(r,[u,c,d,f].join(" "),function(e){var r=e.changedTouches[0];for(l=e.target;3===l.nodeType;)l=l.parentNode;switch(h=r.clientY,p=r.clientX,v=e.timeStamp,y.test(l.tagName)||e.preventDefault(),e.type){case u:n&&n.blur(),$.stopAnimateTo(),n=l,a=m=h,o=p,v;break;case c:y.test(l.tagName)&&t.activeElement!==l&&e.preventDefault(),g=h-m,b=v-_,$.setScrollTop(xe-g,!0),m=h,_=v;break;default:case d:case f:var i=a-h,w=o-p;if(w*w+i*i<49){if(!y.test(n.tagName)){n.focus();var E=t.createEvent("MouseEvents");E.initMouseEvent("click",!0,!0,e.view,1,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(E)}return}n=void 0;var k=g/b;k=s.max(s.min(k,3),-3);var S=s.abs(k/J),C=k*S+.5*J*S*S,T=$.getScrollTop()-C,A=0;T>ye?(A=(ye-T)/C,T=ye):T<0&&(A=-T/C,T=0),S*=1-A,$.animateTo(T+.5|0,{easing:"outCubic",duration:S})}}),e.scrollTo(0,0),r.style.overflow=i.style.overflow="hidden"},M=function(){Te&&(Te=!1,ce());var e,t,n=$.getScrollTop(),r=ve();if(Z)r>=Z.endTime?(n=Z.targetTop,e=Z.done,Z=void 0):(t=Z.easing((r-Z.startTime)/Z.duration),n=Z.startTop+t*Z.topDiff|0),$.setScrollTop(n,!0);else if(!re){ne.targetTop-n&&(ne={startTop:Ee,topDiff:n-Ee,targetTop:n,startTime:ke,endTime:ke+te}),r<=ne.endTime&&(t=D.sqrt((r-ne.startTime)/te),n=ne.startTop+t*ne.topDiff|0)}if(Re&&K&&a.setStyle(K,"transform","translate(0, "+-xe+"px) "+ae),re||Ee!==n){re=!1;var i={curTop:n,lastTop:Ee,maxTop:ye,direction:we=n>Ee?"down":n<Ee?"up":we};!1!==(Y.beforerender&&Y.beforerender.call($,i))&&(!function(e,t){for(var n=0,r=V.length;n<r;n++){var i,s,l=V[n],u=l.element,c=l.smoothScrolling?e:t,d=l.keyFrames,f=c<d[0].frame,h=c>d[d.length-1].frame,p=d[f?0:d.length-1];if(f||h){if(f&&-1===l.edge||h&&1===l.edge)continue;switch(pe(u,[f?"skrollable-before":"skrollable-after"],["skrollable-before","skrollable-between","skrollable-after"]),l.edge=f?-1:1,l.edgeStrategy){case"reset":q(u);continue;case"ease":c=p.frame;break;default:case"set":var m=p.props;for(i in m)o.call(m,i)&&(s=z(m[i].value),a.setStyle(u,i,s));continue}}else 0!==l.edge&&(pe(u,["skrollable","skrollable-between"],["skrollable-before","skrollable-after"]),l.edge=0);for(var g=0,v=d.length-1;g<v;g++)if(c>=d[g].frame&&c<=d[g+1].frame){var _=d[g],y=d[g+1];for(i in _.props)if(o.call(_.props,i)){var b=(c-_.frame)/(y.frame-_.frame);b=_.props[i].easing(b),s=G(_.props[i].value,y.props[i].value,b),s=z(s),a.setStyle(u,i,s)}break}}}(n,$.getScrollTop()),Ee=n,Y.render&&Y.render.call($,i)),e&&e.call($,!1)}ke=r},F=function(e){for(var t=0,n=e.keyFrames.length;t<n;t++){for(var r,i,a,o,s=e.keyFrames[t],l={};null!==(o=E.exec(s.props));)a=o[1],i=o[2],null!==(r=a.match(k))?(a=r[1],r=r[2]):r="linear",i=i.indexOf("!")?B(i):[i.slice(1)],l[a]={value:i,easing:D[r]};s.props=l}},B=function(e){var t=[];return R.lastIndex=0,e=e.replace(R,function(e){return e.replace(T,function(e){return e/255*100+"%"})}),I&&(x.lastIndex=0,e=e.replace(x,function(e){return I+e})),e=e.replace(T,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},U=function(e){var t,n,r={};for(t=0,n=e.keyFrames.length;t<n;t++)H(e.keyFrames[t],r);for(r={},t=e.keyFrames.length-1;t>=0;t--)H(e.keyFrames[t],r)},H=function(e,t){var n;for(n in t)o.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},G=function(e,t,n){var r,i=e.length;if(i!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var a=[e[0]];for(r=1;r<i;r++)a[r]=e[r]+(t[r]-e[r])*n;return a},z=function(e){var t=1;return A.lastIndex=0,e[0].replace(A,function(){return e[t++]})},q=function(e,t){for(var n,r,i=0,a=(e=[].concat(e)).length;i<a;i++)r=e[i],(n=V[r.___skrollable_id])&&(t?(r.style.cssText=n.dirtyStyleAttr,pe(r,n.dirtyClassAttr)):(n.dirtyStyleAttr=r.style.cssText,n.dirtyClassAttr=he(r),r.style.cssText=n.styleAttr,pe(r,n.classAttr)))},W=function(){ae="translateZ(0)",a.setStyle(K,"transform",ae);var e=l(K),t=e.getPropertyValue("transform"),n=e.getPropertyValue(I+"transform");t&&"none"!==t||n&&"none"!==n||(ae="")};a.setStyle=function(e,t,n){var r=e.style;if("zIndex"===(t=t.replace(S,C).replace("-","")))isNaN(n)?r[t]=n:r[t]=""+(0|n);else if("float"===t)r.styleFloat=r.cssFloat=n;else try{P&&(r[P+t.slice(0,1).toUpperCase()+t.slice(1)]=n),r[t]=n}catch(e){}};var $,V,K,Y,Q,X,J,Z,ee,te,ne,re,ie,ae,oe,se=a.addEvent=function(t,n,r){for(var i,a=function(t){return(t=t||e.event).target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),r.call(this,t)},o=0,s=(n=n.split(" ")).length;o<s;o++)i=n[o],t.addEventListener?t.addEventListener(i,r,!1):t.attachEvent("on"+i,a),Pe.push({element:t,name:i,listener:r})},le=a.removeEvent=function(e,t,n){for(var r=0,i=(t=t.split(" ")).length;r<i;r++)e.removeEventListener?e.removeEventListener(t[r],n,!1):e.detachEvent("on"+t[r],n)},ue=function(){for(var e,t=0,n=Pe.length;t<n;t++)e=Pe[t],le(e.element,e.name,e.listener);Pe=[]},ce=function(){var e=$.getScrollTop();ye=0,Q&&!Re&&(i.style.height="auto"),function(){var e,t,n,i,a,o,l,u,c,d,f,h=r.clientHeight,p=de();for(u=0,c=V.length;u<c;u++)for(t=(e=V[u]).element,n=e.anchorTarget,a=0,o=(i=e.keyFrames).length;a<o;a++)d=(l=i[a]).offset,f=p[l.constant]||0,l.frame=d,l.isPercentage&&(d*=h,l.frame=d),"relative"===l.mode&&(q(t),l.frame=$.relativeToAbsolute(n,l.anchors[0],l.anchors[1])-d,q(t,!0)),l.frame+=f,Q&&!l.isEnd&&l.frame>ye&&(ye=l.frame);for(ye=s.max(ye,fe()),u=0,c=V.length;u<c;u++){for(a=0,o=(i=(e=V[u]).keyFrames).length;a<o;a++)f=p[(l=i[a]).constant]||0,l.isEnd&&(l.frame=ye-l.offset+f);e.keyFrames.sort(_e)}}(),Q&&!Re&&(i.style.height=ye+r.clientHeight+"px"),Re?$.setScrollTop(s.min($.getScrollTop(),ye)):$.setScrollTop(e,!0),re=!0},de=function(){var e,t,n=r.clientHeight,i={};for(e in X)"function"==typeof(t=X[e])?t=t.call($):/p$/.test(t)&&(t=t.slice(0,-1)/100*n),i[e]=t;return i},fe=function(){var e=K&&K.offsetHeight||0;return s.max(e,i.scrollHeight,i.offsetHeight,r.scrollHeight,r.offsetHeight,r.clientHeight)-r.clientHeight},he=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},pe=function(t,n,r){var i="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[i],i="baseVal"),void 0!==r){for(var a=t[i],o=0,s=r.length;o<s;o++)a=ge(a).replace(ge(r[o])," ");a=me(a);for(var l=0,u=n.length;l<u;l++)-1===ge(a).indexOf(ge(n[l]))&&(a+=" "+n[l]);t[i]=me(a)}else t[i]=n},me=function(e){return e.replace(b,"")},ge=function(e){return" "+e+" "},ve=Date.now||function(){return+new Date},_e=function(e,t){return e.frame-t.frame},ye=0,be=1,we="down",Ee=-1,ke=ve(),Se=0,Ce=0,Te=!1,Ae=0,Re=!1,xe=0,Pe=[]}(window,document)},M4fF:function(e,t,n){(function(e,r){var i;(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,h=2,p=4,m=1,g=2,v=1,_=2,y=4,b=8,w=16,E=32,k=64,S=128,C=256,T=512,A=30,R="...",x=800,P=16,I=1,O=2,j=1/0,D=9007199254740991,N=1.7976931348623157e308,L=NaN,M=4294967295,F=M-1,B=M>>>1,U=[["ary",S],["bind",v],["bindKey",_],["curry",b],["curryRight",w],["flip",T],["partial",E],["partialRight",k],["rearg",C]],H="[object Arguments]",G="[object Array]",z="[object AsyncFunction]",q="[object Boolean]",W="[object Date]",$="[object DOMException]",V="[object Error]",K="[object Function]",Y="[object GeneratorFunction]",Q="[object Map]",X="[object Number]",J="[object Null]",Z="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",ae="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",de="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",me="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",_e="[object Uint32Array]",ye=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ee=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Se=RegExp(Ee.source),Ce=RegExp(ke.source),Te=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,je=RegExp(Oe.source),De=/^\s+|\s+$/g,Ne=/^\s+/,Le=/\s+$/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,He=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,$e=/^\[object .+?Constructor\]$/,Ve=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,Ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,Xe=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Ze+"]",nt="["+Je+"]",rt="\\d+",it="[\\u2700-\\u27bf]",at="[a-z\\xdf-\\xf6\\xf8-\\xff]",ot="[^\\ud800-\\udfff"+Ze+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",lt="[^\\ud800-\\udfff]",ut="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ft="(?:"+at+"|"+ot+")",ht="(?:"+dt+"|"+ot+")",pt="(?:"+nt+"|"+st+")"+"?",mt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[lt,ut,ct].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),gt="(?:"+[it,ut,ct].join("|")+")"+mt,vt="(?:"+[lt+nt+"?",nt,ut,ct,et].join("|")+")",_t=RegExp("['’]","g"),yt=RegExp(nt,"g"),bt=RegExp(st+"(?="+st+")|"+vt+mt,"g"),wt=RegExp([dt+"?"+at+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,dt,"$"].join("|")+")",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,dt+ft,"$"].join("|")+")",dt+"?"+ft+"+(?:['’](?:d|ll|m|re|s|t|ve))?",dt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,gt].join("|"),"g"),Et=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),kt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,St=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ct=-1,Tt={};Tt[ce]=Tt[de]=Tt[fe]=Tt[he]=Tt[pe]=Tt[me]=Tt[ge]=Tt[ve]=Tt[_e]=!0,Tt[H]=Tt[G]=Tt[le]=Tt[q]=Tt[ue]=Tt[W]=Tt[V]=Tt[K]=Tt[Q]=Tt[X]=Tt[Z]=Tt[te]=Tt[ne]=Tt[re]=Tt[oe]=!1;var At={};At[H]=At[G]=At[le]=At[ue]=At[q]=At[W]=At[ce]=At[de]=At[fe]=At[he]=At[pe]=At[Q]=At[X]=At[Z]=At[te]=At[ne]=At[re]=At[ie]=At[me]=At[ge]=At[ve]=At[_e]=!0,At[V]=At[K]=At[oe]=!1;var Rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xt=parseFloat,Pt=parseInt,It="object"==typeof e&&e&&e.Object===Object&&e,Ot="object"==typeof self&&self&&self.Object===Object&&self,jt=It||Ot||Function("return this")(),Dt="object"==typeof t&&t&&!t.nodeType&&t,Nt=Dt&&"object"==typeof r&&r&&!r.nodeType&&r,Lt=Nt&&Nt.exports===Dt,Mt=Lt&&It.process,Ft=function(){try{var e=Nt&&Nt.require&&Nt.require("util").types;return e||Mt&&Mt.binding&&Mt.binding("util")}catch(e){}}(),Bt=Ft&&Ft.isArrayBuffer,Ut=Ft&&Ft.isDate,Ht=Ft&&Ft.isMap,Gt=Ft&&Ft.isRegExp,zt=Ft&&Ft.isSet,qt=Ft&&Ft.isTypedArray;function Wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function $t(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Qt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Xt(e,t){return!!(null==e?0:e.length)&&ln(e,t,0)>-1}function Jt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Zt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function en(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function tn(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function nn(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function rn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var an=fn("length");function on(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function sn(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function ln(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):sn(e,cn,n)}function un(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function cn(e){return e!=e}function dn(e,t){var n=null==e?0:e.length;return n?mn(e,t)/n:L}function fn(e){return function(t){return null==t?a:t[e]}}function hn(e){return function(t){return null==e?a:e[t]}}function pn(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function mn(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function gn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function vn(e){return function(t){return e(t)}}function _n(e,t){return Zt(t,function(t){return e[t]})}function yn(e,t){return e.has(t)}function bn(e,t){for(var n=-1,r=e.length;++n<r&&ln(t,e[n],0)>-1;);return n}function wn(e,t){for(var n=e.length;n--&&ln(t,e[n],0)>-1;);return n}var En=hn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),kn=hn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sn(e){return"\\"+Rt[e]}function Cn(e){return Et.test(e)}function Tn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function An(e,t){return function(n){return e(t(n))}}function Rn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==d||(e[n]=d,a[i++]=n)}return a}function xn(e,t){return"__proto__"==t?a:e[t]}function Pn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function In(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function On(e){return Cn(e)?function(e){var t=bt.lastIndex=0;for(;bt.test(e);)++t;return t}(e):an(e)}function jn(e){return Cn(e)?function(e){return e.match(bt)||[]}(e):function(e){return e.split("")}(e)}var Dn=hn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Nn=function e(t){var n,r=(t=null==t?jt:Nn.defaults(jt.Object(),t,Nn.pick(jt,St))).Array,i=t.Date,Je=t.Error,Ze=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,it=t.TypeError,at=r.prototype,ot=Ze.prototype,st=tt.prototype,lt=t["__core-js_shared__"],ut=ot.toString,ct=st.hasOwnProperty,dt=0,ft=(n=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ht=st.toString,pt=ut.call(tt),mt=jt._,gt=nt("^"+ut.call(ct).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Lt?t.Buffer:a,bt=t.Symbol,Et=t.Uint8Array,Rt=vt?vt.allocUnsafe:a,It=An(tt.getPrototypeOf,tt),Ot=tt.create,Dt=st.propertyIsEnumerable,Nt=at.splice,Mt=bt?bt.isConcatSpreadable:a,Ft=bt?bt.iterator:a,an=bt?bt.toStringTag:a,hn=function(){try{var e=Ba(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ln=t.clearTimeout!==jt.clearTimeout&&t.clearTimeout,Mn=i&&i.now!==jt.Date.now&&i.now,Fn=t.setTimeout!==jt.setTimeout&&t.setTimeout,Bn=et.ceil,Un=et.floor,Hn=tt.getOwnPropertySymbols,Gn=vt?vt.isBuffer:a,zn=t.isFinite,qn=at.join,Wn=An(tt.keys,tt),$n=et.max,Vn=et.min,Kn=i.now,Yn=t.parseInt,Qn=et.random,Xn=at.reverse,Jn=Ba(t,"DataView"),Zn=Ba(t,"Map"),er=Ba(t,"Promise"),tr=Ba(t,"Set"),nr=Ba(t,"WeakMap"),rr=Ba(tt,"create"),ir=nr&&new nr,ar={},or=co(Jn),sr=co(Zn),lr=co(er),ur=co(tr),cr=co(nr),dr=bt?bt.prototype:a,fr=dr?dr.valueOf:a,hr=dr?dr.toString:a;function pr(e){if(Rs(e)&&!vs(e)&&!(e instanceof _r)){if(e instanceof vr)return e;if(ct.call(e,"__wrapped__"))return fo(e)}return new vr(e)}var mr=function(){function e(){}return function(t){if(!As(t))return{};if(Ot)return Ot(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function gr(){}function vr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function _r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function yr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function wr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Er(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wr;++t<n;)this.add(e[t])}function kr(e){var t=this.__data__=new br(e);this.size=t.size}function Sr(e,t){var n=vs(e),r=!n&&gs(e),i=!n&&!r&&ws(e),a=!n&&!r&&!i&&Ls(e),o=n||r||i||a,s=o?gn(e.length,rt):[],l=s.length;for(var u in e)!t&&!ct.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$a(u,l))||s.push(u);return s}function Cr(e){var t=e.length;return t?e[Ei(0,t-1)]:a}function Tr(e,t){return so(ra(e),Nr(t,0,e.length))}function Ar(e){return so(ra(e))}function Rr(e,t,n){(n===a||hs(e[t],n))&&(n!==a||t in e)||jr(e,t,n)}function xr(e,t,n){var r=e[t];ct.call(e,t)&&hs(r,n)&&(n!==a||t in e)||jr(e,t,n)}function Pr(e,t){for(var n=e.length;n--;)if(hs(e[n][0],t))return n;return-1}function Ir(e,t,n,r){return Ur(e,function(e,i,a){t(r,e,n(e),a)}),r}function Or(e,t){return e&&ia(t,il(t),e)}function jr(e,t,n){"__proto__"==t&&hn?hn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Dr(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?a:Zs(e,t[n]);return o}function Nr(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function Lr(e,t,n,r,i,o){var s,l=t&f,u=t&h,c=t&p;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!As(e))return e;var d=vs(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ct.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return ra(e,s)}else{var m=Ga(e),g=m==K||m==Y;if(ws(e))return Xi(e,l);if(m==Z||m==H||g&&!i){if(s=u||g?{}:qa(e),!l)return u?function(e,t){return ia(e,Ha(e),t)}(e,function(e,t){return e&&ia(t,al(t),e)}(s,e)):function(e,t){return ia(e,Ua(e),t)}(e,Or(s,e))}else{if(!At[m])return i?e:{};s=function(e,t,n){var r,i,a,o=e.constructor;switch(t){case le:return Ji(e);case q:case W:return new o(+e);case ue:return function(e,t){var n=t?Ji(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case de:case fe:case he:case pe:case me:case ge:case ve:case _e:return Zi(e,n);case Q:return new o;case X:case re:return new o(e);case te:return(a=new(i=e).constructor(i.source,ze.exec(i))).lastIndex=i.lastIndex,a;case ne:return new o;case ie:return r=e,fr?tt(fr.call(r)):{}}}(e,m,l)}}o||(o=new kr);var v=o.get(e);if(v)return v;if(o.set(e,s),js(e))return e.forEach(function(r){s.add(Lr(r,t,n,r,e,o))}),s;if(xs(e))return e.forEach(function(r,i){s.set(i,Lr(r,t,n,i,e,o))}),s;var _=d?a:(c?u?Oa:Ia:u?al:il)(e);return Vt(_||e,function(r,i){_&&(r=e[i=r]),xr(s,i,Lr(r,t,n,i,e,o))}),s}function Mr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function Fr(e,t,n){if("function"!=typeof e)throw new it(l);return ro(function(){e.apply(a,n)},t)}function Br(e,t,n,r){var i=-1,a=Xt,s=!0,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=Zt(t,vn(n))),r?(a=Jt,s=!1):t.length>=o&&(a=yn,s=!1,t=new Er(t));e:for(;++i<l;){var d=e[i],f=null==n?d:n(d);if(d=r||0!==d?d:0,s&&f==f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(d)}else a(t,f,r)||u.push(d)}return u}pr.templateSettings={escape:Te,evaluate:Ae,interpolate:Re,variable:"",imports:{_:pr}},pr.prototype=gr.prototype,pr.prototype.constructor=pr,vr.prototype=mr(gr.prototype),vr.prototype.constructor=vr,_r.prototype=mr(gr.prototype),_r.prototype.constructor=_r,yr.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},yr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yr.prototype.get=function(e){var t=this.__data__;if(rr){var n=t[e];return n===u?a:n}return ct.call(t,e)?t[e]:a},yr.prototype.has=function(e){var t=this.__data__;return rr?t[e]!==a:ct.call(t,e)},yr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rr&&t===a?u:t,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(e){var t=this.__data__,n=Pr(t,e);return!(n<0||(n==t.length-1?t.pop():Nt.call(t,n,1),--this.size,0))},br.prototype.get=function(e){var t=this.__data__,n=Pr(t,e);return n<0?a:t[n][1]},br.prototype.has=function(e){return Pr(this.__data__,e)>-1},br.prototype.set=function(e,t){var n=this.__data__,r=Pr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Zn||br),string:new yr}},wr.prototype.delete=function(e){var t=Ma(this,e).delete(e);return this.size-=t?1:0,t},wr.prototype.get=function(e){return Ma(this,e).get(e)},wr.prototype.has=function(e){return Ma(this,e).has(e)},wr.prototype.set=function(e,t){var n=Ma(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Er.prototype.add=Er.prototype.push=function(e){return this.__data__.set(e,u),this},Er.prototype.has=function(e){return this.__data__.has(e)},kr.prototype.clear=function(){this.__data__=new br,this.size=0},kr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},kr.prototype.get=function(e){return this.__data__.get(e)},kr.prototype.has=function(e){return this.__data__.has(e)},kr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Zn||r.length<o-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(e,t),this.size=n.size,this};var Ur=sa(Kr),Hr=sa(Yr,!0);function Gr(e,t){var n=!0;return Ur(e,function(e,r,i){return n=!!t(e,r,i)}),n}function zr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(l===a?s==s&&!Ns(s):n(s,l)))var l=s,u=o}return u}function qr(e,t){var n=[];return Ur(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Wr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=Wa),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?Wr(s,t-1,n,r,i):en(i,s):r||(i[i.length]=s)}return i}var $r=la(),Vr=la(!0);function Kr(e,t){return e&&$r(e,t,il)}function Yr(e,t){return e&&Vr(e,t,il)}function Qr(e,t){return Qt(t,function(t){return Ss(e[t])})}function Xr(e,t){for(var n=0,r=(t=Vi(t,e)).length;null!=e&&n<r;)e=e[uo(t[n++])];return n&&n==r?e:a}function Jr(e,t,n){var r=t(e);return vs(e)?r:en(r,n(e))}function Zr(e){return null==e?e===a?ae:J:an&&an in tt(e)?function(e){var t=ct.call(e,an),n=e[an];try{e[an]=a;var r=!0}catch(e){}var i=ht.call(e);return r&&(t?e[an]=n:delete e[an]),i}(e):function(e){return ht.call(e)}(e)}function ei(e,t){return e>t}function ti(e,t){return null!=e&&ct.call(e,t)}function ni(e,t){return null!=e&&t in tt(e)}function ri(e,t,n){for(var i=n?Jt:Xt,o=e[0].length,s=e.length,l=s,u=r(s),c=1/0,d=[];l--;){var f=e[l];l&&t&&(f=Zt(f,vn(t))),c=Vn(f.length,c),u[l]=!n&&(t||o>=120&&f.length>=120)?new Er(l&&f):a}f=e[0];var h=-1,p=u[0];e:for(;++h<o&&d.length<c;){var m=f[h],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?yn(p,g):i(d,g,n))){for(l=s;--l;){var v=u[l];if(!(v?yn(v,g):i(e[l],g,n)))continue e}p&&p.push(g),d.push(m)}}return d}function ii(e,t,n){var r=null==(e=to(e,t=Vi(t,e)))?e:e[uo(ko(t))];return null==r?a:Wt(r,e,n)}function ai(e){return Rs(e)&&Zr(e)==H}function oi(e,t,n,r,i){return e===t||(null==e||null==t||!Rs(e)&&!Rs(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=vs(e),l=vs(t),u=s?G:Ga(e),c=l?G:Ga(t),d=(u=u==H?Z:u)==Z,f=(c=c==H?Z:c)==Z,h=u==c;if(h&&ws(e)){if(!ws(t))return!1;s=!0,d=!1}if(h&&!d)return o||(o=new kr),s||Ls(e)?xa(e,t,n,r,i,o):function(e,t,n,r,i,a,o){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case le:return!(e.byteLength!=t.byteLength||!a(new Et(e),new Et(t)));case q:case W:case X:return hs(+e,+t);case V:return e.name==t.name&&e.message==t.message;case te:case re:return e==t+"";case Q:var s=Tn;case ne:var l=r&m;if(s||(s=Pn),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=g,o.set(e,t);var c=xa(s(e),s(t),r,i,a,o);return o.delete(e),c;case ie:if(fr)return fr.call(e)==fr.call(t)}return!1}(e,t,u,n,r,i,o);if(!(n&m)){var p=d&&ct.call(e,"__wrapped__"),v=f&&ct.call(t,"__wrapped__");if(p||v){var _=p?e.value():e,y=v?t.value():t;return o||(o=new kr),i(_,y,n,r,o)}}return!!h&&(o||(o=new kr),function(e,t,n,r,i,o){var s=n&m,l=Ia(e),u=l.length,c=Ia(t).length;if(u!=c&&!s)return!1;for(var d=u;d--;){var f=l[d];if(!(s?f in t:ct.call(t,f)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var g=s;++d<u;){f=l[d];var v=e[f],_=t[f];if(r)var y=s?r(_,v,f,t,e,o):r(v,_,f,e,t,o);if(!(y===a?v===_||i(v,_,n,r,o):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}(e,t,n,r,oi,i))}function si(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=tt(e);i--;){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var u=(l=n[i])[0],c=e[u],d=l[1];if(s&&l[2]){if(c===a&&!(u in e))return!1}else{var f=new kr;if(r)var h=r(c,d,u,e,t,f);if(!(h===a?oi(d,c,m|g,r,f):h))return!1}}return!0}function li(e){return!(!As(e)||ft&&ft in e)&&(Ss(e)?gt:$e).test(co(e))}function ui(e){return"function"==typeof e?e:null==e?Pl:"object"==typeof e?vs(e)?mi(e[0],e[1]):pi(e):Bl(e)}function ci(e){if(!Xa(e))return Wn(e);var t=[];for(var n in tt(e))ct.call(e,n)&&"constructor"!=n&&t.push(n);return t}function di(e){if(!As(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Xa(e),n=[];for(var r in e)("constructor"!=r||!t&&ct.call(e,r))&&n.push(r);return n}function fi(e,t){return e<t}function hi(e,t){var n=-1,i=ys(e)?r(e.length):[];return Ur(e,function(e,r,a){i[++n]=t(e,r,a)}),i}function pi(e){var t=Fa(e);return 1==t.length&&t[0][2]?Za(t[0][0],t[0][1]):function(n){return n===e||si(n,e,t)}}function mi(e,t){return Ka(e)&&Ja(t)?Za(uo(e),t):function(n){var r=Zs(n,e);return r===a&&r===t?el(n,e):oi(t,r,m|g)}}function gi(e,t,n,r,i){e!==t&&$r(t,function(o,s){if(As(o))i||(i=new kr),function(e,t,n,r,i,o,s){var l=xn(e,n),u=xn(t,n),c=s.get(u);if(c)Rr(e,n,c);else{var d=o?o(l,u,n+"",e,t,s):a,f=d===a;if(f){var h=vs(u),p=!h&&ws(u),m=!h&&!p&&Ls(u);d=u,h||p||m?vs(l)?d=l:bs(l)?d=ra(l):p?(f=!1,d=Xi(u,!0)):m?(f=!1,d=Zi(u,!0)):d=[]:Is(u)||gs(u)?(d=l,gs(l)?d=qs(l):(!As(l)||r&&Ss(l))&&(d=qa(u))):f=!1}f&&(s.set(u,d),i(d,u,r,o,s),s.delete(u)),Rr(e,n,d)}}(e,t,s,n,gi,r,i);else{var l=r?r(xn(e,s),o,s+"",e,t,i):a;l===a&&(l=o),Rr(e,s,l)}},al)}function vi(e,t){var n=e.length;if(n)return $a(t+=t<0?n:0,n)?e[t]:a}function _i(e,t,n){var r=-1;return t=Zt(t.length?t:[Pl],vn(La())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(hi(e,function(e,n,i){return{criteria:Zt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var l=ea(i[r],a[r]);if(l){if(r>=s)return l;var u=n[r];return l*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)})}function yi(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Xr(e,o);n(s,o)&&Ai(a,Vi(o,e),s)}return a}function bi(e,t,n,r){var i=r?un:ln,a=-1,o=t.length,s=e;for(e===t&&(t=ra(t)),n&&(s=Zt(e,vn(n)));++a<o;)for(var l=0,u=t[a],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Nt.call(s,l,1),Nt.call(e,l,1);return e}function wi(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;$a(i)?Nt.call(e,i,1):Bi(e,i)}}return e}function Ei(e,t){return e+Un(Qn()*(t-e+1))}function ki(e,t){var n="";if(!e||t<1||t>D)return n;do{t%2&&(n+=e),(t=Un(t/2))&&(e+=e)}while(t);return n}function Si(e,t){return io(eo(e,t,Pl),e+"")}function Ci(e){return Cr(hl(e))}function Ti(e,t){var n=hl(e);return so(n,Nr(t,0,n.length))}function Ai(e,t,n,r){if(!As(e))return e;for(var i=-1,o=(t=Vi(t,e)).length,s=o-1,l=e;null!=l&&++i<o;){var u=uo(t[i]),c=n;if(i!=s){var d=l[u];(c=r?r(d,u,l):a)===a&&(c=As(d)?d:$a(t[i+1])?[]:{})}xr(l,u,c),l=l[u]}return e}var Ri=ir?function(e,t){return ir.set(e,t),e}:Pl,xi=hn?function(e,t){return hn(e,"toString",{configurable:!0,enumerable:!1,value:Al(t),writable:!0})}:Pl;function Pi(e){return so(hl(e))}function Ii(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function Oi(e,t){var n;return Ur(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ji(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=B){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!Ns(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Di(e,t,Pl,n)}function Di(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,s=t!=t,l=null===t,u=Ns(t),c=t===a;i<o;){var d=Un((i+o)/2),f=n(e[d]),h=f!==a,p=null===f,m=f==f,g=Ns(f);if(s)var v=r||m;else v=c?m&&(r||h):l?m&&h&&(r||!p):u?m&&h&&!p&&(r||!g):!p&&!g&&(r?f<=t:f<t);v?i=d+1:o=d}return Vn(o,F)}function Ni(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!hs(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function Li(e){return"number"==typeof e?e:Ns(e)?L:+e}function Mi(e){if("string"==typeof e)return e;if(vs(e))return Zt(e,Mi)+"";if(Ns(e))return hr?hr.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function Fi(e,t,n){var r=-1,i=Xt,a=e.length,s=!0,l=[],u=l;if(n)s=!1,i=Jt;else if(a>=o){var c=t?null:ka(e);if(c)return Pn(c);s=!1,i=yn,u=new Er}else u=t?[]:l;e:for(;++r<a;){var d=e[r],f=t?t(d):d;if(d=n||0!==d?d:0,s&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),l.push(d)}else i(u,f,n)||(u!==l&&u.push(f),l.push(d))}return l}function Bi(e,t){return null==(e=to(e,t=Vi(t,e)))||delete e[uo(ko(t))]}function Ui(e,t,n,r){return Ai(e,t,n(Xr(e,t)),r)}function Hi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Ii(e,r?0:a,r?a+1:i):Ii(e,r?a+1:0,r?i:a)}function Gi(e,t){var n=e;return n instanceof _r&&(n=n.value()),tn(t,function(e,t){return t.func.apply(t.thisArg,en([e],t.args))},n)}function zi(e,t,n){var i=e.length;if(i<2)return i?Fi(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=Br(o[a]||s,e[l],t,n));return Fi(Wr(o,1),t,n)}function qi(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var l=r<o?t[r]:a;n(s,e[r],l)}return s}function Wi(e){return bs(e)?e:[]}function $i(e){return"function"==typeof e?e:Pl}function Vi(e,t){return vs(e)?e:Ka(e,t)?[e]:lo(Ws(e))}var Ki=Si;function Yi(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Ii(e,t,n)}var Qi=Ln||function(e){return jt.clearTimeout(e)};function Xi(e,t){if(t)return e.slice();var n=e.length,r=Rt?Rt(n):new e.constructor(n);return e.copy(r),r}function Ji(e){var t=new e.constructor(e.byteLength);return new Et(t).set(new Et(e)),t}function Zi(e,t){var n=t?Ji(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ea(e,t){if(e!==t){var n=e!==a,r=null===e,i=e==e,o=Ns(e),s=t!==a,l=null===t,u=t==t,c=Ns(t);if(!l&&!c&&!o&&e>t||o&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||l&&n&&i||!s&&i||!u)return-1}return 0}function ta(e,t,n,i){for(var a=-1,o=e.length,s=n.length,l=-1,u=t.length,c=$n(o-s,0),d=r(u+c),f=!i;++l<u;)d[l]=t[l];for(;++a<s;)(f||a<o)&&(d[n[a]]=e[a]);for(;c--;)d[l++]=e[a++];return d}function na(e,t,n,i){for(var a=-1,o=e.length,s=-1,l=n.length,u=-1,c=t.length,d=$n(o-l,0),f=r(d+c),h=!i;++a<d;)f[a]=e[a];for(var p=a;++u<c;)f[p+u]=t[u];for(;++s<l;)(h||a<o)&&(f[p+n[s]]=e[a++]);return f}function ra(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ia(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],u=r?r(n[l],e[l],l,n,e):a;u===a&&(u=e[l]),i?jr(n,l,u):xr(n,l,u)}return n}function aa(e,t){return function(n,r){var i=vs(n)?$t:Ir,a=t?t():{};return i(n,e,La(r,2),a)}}function oa(e){return Si(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&Va(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=tt(t);++r<i;){var l=n[r];l&&e(t,l,r,o)}return t})}function sa(e,t){return function(n,r){if(null==n)return n;if(!ys(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=tt(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function la(e){return function(t,n,r){for(var i=-1,a=tt(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function ua(e){return function(t){var n=Cn(t=Ws(t))?jn(t):a,r=n?n[0]:t.charAt(0),i=n?Yi(n,1).join(""):t.slice(1);return r[e]()+i}}function ca(e){return function(t){return tn(Sl(gl(t).replace(_t,"")),e,"")}}function da(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=mr(e.prototype),r=e.apply(n,t);return As(r)?r:n}}function fa(e){return function(t,n,r){var i=tt(t);if(!ys(t)){var o=La(n,3);t=il(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function ha(e){return Pa(function(t){var n=t.length,r=n,i=vr.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new it(l);if(i&&!s&&"wrapper"==Da(o))var s=new vr([],!0)}for(r=s?r:n;++r<n;){var u=Da(o=t[r]),c="wrapper"==u?ja(o):a;s=c&&Ya(c[0])&&c[1]==(S|b|E|C)&&!c[4].length&&1==c[9]?s[Da(c[0])].apply(s,c[3]):1==o.length&&Ya(o)?s[u]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&vs(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function pa(e,t,n,i,o,s,l,u,c,d){var f=t&S,h=t&v,p=t&_,m=t&(b|w),g=t&T,y=p?a:da(e);return function v(){for(var _=arguments.length,b=r(_),w=_;w--;)b[w]=arguments[w];if(m)var E=Na(v),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,E);if(i&&(b=ta(b,i,o,m)),s&&(b=na(b,s,l,m)),_-=k,m&&_<d){var S=Rn(b,E);return wa(e,t,pa,v.placeholder,n,b,S,u,c,d-_)}var C=h?n:this,T=p?C[e]:e;return _=b.length,u?b=function(e,t){for(var n=e.length,r=Vn(t.length,n),i=ra(e);r--;){var o=t[r];e[r]=$a(o,n)?i[o]:a}return e}(b,u):g&&_>1&&b.reverse(),f&&c<_&&(b.length=c),this&&this!==jt&&this instanceof v&&(T=y||da(T)),T.apply(C,b)}}function ma(e,t){return function(n,r){return function(e,t,n,r){return Kr(e,function(e,i,a){t(r,n(e),i,a)}),r}(n,e,t(r),{})}}function ga(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=Mi(n),r=Mi(r)):(n=Li(n),r=Li(r)),i=e(n,r)}return i}}function va(e){return Pa(function(t){return t=Zt(t,vn(La())),Si(function(n){var r=this;return e(t,function(e){return Wt(e,r,n)})})})}function _a(e,t){var n=(t=t===a?" ":Mi(t)).length;if(n<2)return n?ki(t,e):t;var r=ki(t,Bn(e/On(t)));return Cn(t)?Yi(jn(r),0,e).join(""):r.slice(0,e)}function ya(e){return function(t,n,i){return i&&"number"!=typeof i&&Va(t,n,i)&&(n=i=a),t=Us(t),n===a?(n=t,t=0):n=Us(n),function(e,t,n,i){for(var a=-1,o=$n(Bn((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,i=i===a?t<n?1:-1:Us(i),e)}}function ba(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=zs(t),n=zs(n)),e(t,n)}}function wa(e,t,n,r,i,o,s,l,u,c){var d=t&b;t|=d?E:k,(t&=~(d?k:E))&y||(t&=~(v|_));var f=[e,t,i,d?o:a,d?s:a,d?a:o,d?a:s,l,u,c],h=n.apply(a,f);return Ya(e)&&no(h,f),h.placeholder=r,ao(h,e,t)}function Ea(e){var t=et[e];return function(e,n){if(e=zs(e),n=null==n?0:Vn(Hs(n),292)){var r=(Ws(e)+"e").split("e");return+((r=(Ws(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var ka=tr&&1/Pn(new tr([,-0]))[1]==j?function(e){return new tr(e)}:Nl;function Sa(e){return function(t){var n=Ga(t);return n==Q?Tn(t):n==ne?In(t):function(e,t){return Zt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ca(e,t,n,i,o,s,u,c){var f=t&_;if(!f&&"function"!=typeof e)throw new it(l);var h=i?i.length:0;if(h||(t&=~(E|k),i=o=a),u=u===a?u:$n(Hs(u),0),c=c===a?c:Hs(c),h-=o?o.length:0,t&k){var p=i,m=o;i=o=a}var g=f?a:ja(e),T=[e,t,n,i,o,p,m,s,u,c];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<(v|_|S),o=r==S&&n==b||r==S&&n==C&&e[7].length<=t[8]||r==(S|C)&&t[7].length<=t[8]&&n==b;if(!a&&!o)return e;r&v&&(e[2]=t[2],i|=n&v?0:y);var s=t[3];if(s){var l=e[3];e[3]=l?ta(l,s,t[4]):s,e[4]=l?Rn(e[3],d):t[4]}(s=t[5])&&(l=e[5],e[5]=l?na(l,s,t[6]):s,e[6]=l?Rn(e[5],d):t[6]),(s=t[7])&&(e[7]=s),r&S&&(e[8]=null==e[8]?t[8]:Vn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(T,g),e=T[0],t=T[1],n=T[2],i=T[3],o=T[4],!(c=T[9]=T[9]===a?f?0:e.length:$n(T[9]-h,0))&&t&(b|w)&&(t&=~(b|w)),t&&t!=v)A=t==b||t==w?function(e,t,n){var i=da(e);return function o(){for(var s=arguments.length,l=r(s),u=s,c=Na(o);u--;)l[u]=arguments[u];var d=s<3&&l[0]!==c&&l[s-1]!==c?[]:Rn(l,c);return(s-=d.length)<n?wa(e,t,pa,o.placeholder,a,l,d,a,a,n-s):Wt(this&&this!==jt&&this instanceof o?i:e,this,l)}}(e,t,c):t!=E&&t!=(v|E)||o.length?pa.apply(a,T):function(e,t,n,i){var a=t&v,o=da(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=i.length,d=r(c+l),f=this&&this!==jt&&this instanceof t?o:e;++u<c;)d[u]=i[u];for(;l--;)d[u++]=arguments[++s];return Wt(f,a?n:this,d)}}(e,t,n,i);else var A=function(e,t,n){var r=t&v,i=da(e);return function t(){return(this&&this!==jt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ao((g?Ri:no)(A,T),e,t)}function Ta(e,t,n,r){return e===a||hs(e,st[n])&&!ct.call(r,n)?t:e}function Aa(e,t,n,r,i,o){return As(e)&&As(t)&&(o.set(t,e),gi(e,t,a,Aa,o),o.delete(t)),e}function Ra(e){return Is(e)?a:e}function xa(e,t,n,r,i,o){var s=n&m,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var d=-1,f=!0,h=n&g?new Er:a;for(o.set(e,t),o.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var _=s?r(v,p,d,t,e,o):r(p,v,d,e,t,o);if(_!==a){if(_)continue;f=!1;break}if(h){if(!rn(t,function(e,t){if(!yn(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)})){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Pa(e){return io(eo(e,a,_o),e+"")}function Ia(e){return Jr(e,il,Ua)}function Oa(e){return Jr(e,al,Ha)}var ja=ir?function(e){return ir.get(e)}:Nl;function Da(e){for(var t=e.name+"",n=ar[t],r=ct.call(ar,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Na(e){return(ct.call(pr,"placeholder")?pr:e).placeholder}function La(){var e=pr.iteratee||Il;return e=e===Il?ui:e,arguments.length?e(arguments[0],arguments[1]):e}function Ma(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Fa(e){for(var t=il(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ja(i)]}return t}function Ba(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return li(n)?n:a}var Ua=Hn?function(e){return null==e?[]:(e=tt(e),Qt(Hn(e),function(t){return Dt.call(e,t)}))}:Gl,Ha=Hn?function(e){for(var t=[];e;)en(t,Ua(e)),e=It(e);return t}:Gl,Ga=Zr;function za(e,t,n){for(var r=-1,i=(t=Vi(t,e)).length,a=!1;++r<i;){var o=uo(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Ts(i)&&$a(o,i)&&(vs(e)||gs(e))}function qa(e){return"function"!=typeof e.constructor||Xa(e)?{}:mr(It(e))}function Wa(e){return vs(e)||gs(e)||!!(Mt&&e&&e[Mt])}function $a(e,t){var n=typeof e;return!!(t=null==t?D:t)&&("number"==n||"symbol"!=n&&Ke.test(e))&&e>-1&&e%1==0&&e<t}function Va(e,t,n){if(!As(n))return!1;var r=typeof t;return!!("number"==r?ys(n)&&$a(t,n.length):"string"==r&&t in n)&&hs(n[t],e)}function Ka(e,t){if(vs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ns(e))||Pe.test(e)||!xe.test(e)||null!=t&&e in tt(t)}function Ya(e){var t=Da(e),n=pr[t];if("function"!=typeof n||!(t in _r.prototype))return!1;if(e===n)return!0;var r=ja(n);return!!r&&e===r[0]}(Jn&&Ga(new Jn(new ArrayBuffer(1)))!=ue||Zn&&Ga(new Zn)!=Q||er&&"[object Promise]"!=Ga(er.resolve())||tr&&Ga(new tr)!=ne||nr&&Ga(new nr)!=oe)&&(Ga=function(e){var t=Zr(e),n=t==Z?e.constructor:a,r=n?co(n):"";if(r)switch(r){case or:return ue;case sr:return Q;case lr:return"[object Promise]";case ur:return ne;case cr:return oe}return t});var Qa=lt?Ss:zl;function Xa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Ja(e){return e==e&&!As(e)}function Za(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in tt(n))}}function eo(e,t,n){return t=$n(t===a?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=$n(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=r(t+1);++a<t;)l[a]=i[a];return l[t]=n(s),Wt(e,this,l)}}function to(e,t){return t.length<2?e:Xr(e,Ii(t,0,-1))}var no=oo(Ri),ro=Fn||function(e,t){return jt.setTimeout(e,t)},io=oo(xi);function ao(e,t,n){var r=t+"";return io(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Me,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Vt(U,function(n){var r="_."+n[0];t&n[1]&&!Xt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Fe);return t?t[1].split(Be):[]}(r),n)))}function oo(e){var t=0,n=0;return function(){var r=Kn(),i=P-(r-n);if(n=r,i>0){if(++t>=x)return arguments[0]}else t=0;return e.apply(a,arguments)}}function so(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=Ei(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var lo=function(e){var t=ss(e,function(e){return n.size===c&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ie,function(e,n,r,i){t.push(r?i.replace(He,"$1"):n||e)}),t});function uo(e){if("string"==typeof e||Ns(e))return e;var t=e+"";return"0"==t&&1/e==-j?"-0":t}function co(e){if(null!=e){try{return ut.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fo(e){if(e instanceof _r)return e.clone();var t=new vr(e.__wrapped__,e.__chain__);return t.__actions__=ra(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ho=Si(function(e,t){return bs(e)?Br(e,Wr(t,1,bs,!0)):[]}),po=Si(function(e,t){var n=ko(t);return bs(n)&&(n=a),bs(e)?Br(e,Wr(t,1,bs,!0),La(n,2)):[]}),mo=Si(function(e,t){var n=ko(t);return bs(n)&&(n=a),bs(e)?Br(e,Wr(t,1,bs,!0),a,n):[]});function go(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Hs(n);return i<0&&(i=$n(r+i,0)),sn(e,La(t,3),i)}function vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Hs(n),i=n<0?$n(r+i,0):Vn(i,r-1)),sn(e,La(t,3),i,!0)}function _o(e){return null!=e&&e.length?Wr(e,1):[]}function yo(e){return e&&e.length?e[0]:a}var bo=Si(function(e){var t=Zt(e,Wi);return t.length&&t[0]===e[0]?ri(t):[]}),wo=Si(function(e){var t=ko(e),n=Zt(e,Wi);return t===ko(n)?t=a:n.pop(),n.length&&n[0]===e[0]?ri(n,La(t,2)):[]}),Eo=Si(function(e){var t=ko(e),n=Zt(e,Wi);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?ri(n,a,t):[]});function ko(e){var t=null==e?0:e.length;return t?e[t-1]:a}var So=Si(Co);function Co(e,t){return e&&e.length&&t&&t.length?bi(e,t):e}var To=Pa(function(e,t){var n=null==e?0:e.length,r=Dr(e,t);return wi(e,Zt(t,function(e){return $a(e,n)?+e:e}).sort(ea)),r});function Ao(e){return null==e?e:Xn.call(e)}var Ro=Si(function(e){return Fi(Wr(e,1,bs,!0))}),xo=Si(function(e){var t=ko(e);return bs(t)&&(t=a),Fi(Wr(e,1,bs,!0),La(t,2))}),Po=Si(function(e){var t=ko(e);return t="function"==typeof t?t:a,Fi(Wr(e,1,bs,!0),a,t)});function Io(e){if(!e||!e.length)return[];var t=0;return e=Qt(e,function(e){if(bs(e))return t=$n(e.length,t),!0}),gn(t,function(t){return Zt(e,fn(t))})}function Oo(e,t){if(!e||!e.length)return[];var n=Io(e);return null==t?n:Zt(n,function(e){return Wt(t,a,e)})}var jo=Si(function(e,t){return bs(e)?Br(e,t):[]}),Do=Si(function(e){return zi(Qt(e,bs))}),No=Si(function(e){var t=ko(e);return bs(t)&&(t=a),zi(Qt(e,bs),La(t,2))}),Lo=Si(function(e){var t=ko(e);return t="function"==typeof t?t:a,zi(Qt(e,bs),a,t)}),Mo=Si(Io);var Fo=Si(function(e){var t=e.length,n=t>1?e[t-1]:a;return Oo(e,n="function"==typeof n?(e.pop(),n):a)});function Bo(e){var t=pr(e);return t.__chain__=!0,t}function Uo(e,t){return t(e)}var Ho=Pa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Dr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof _r&&$a(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Uo,args:[i],thisArg:a}),new vr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(i)});var Go=aa(function(e,t,n){ct.call(e,n)?++e[n]:jr(e,n,1)});var zo=fa(go),qo=fa(vo);function Wo(e,t){return(vs(e)?Vt:Ur)(e,La(t,3))}function $o(e,t){return(vs(e)?Kt:Hr)(e,La(t,3))}var Vo=aa(function(e,t,n){ct.call(e,n)?e[n].push(t):jr(e,n,[t])});var Ko=Si(function(e,t,n){var i=-1,a="function"==typeof t,o=ys(e)?r(e.length):[];return Ur(e,function(e){o[++i]=a?Wt(t,e,n):ii(e,t,n)}),o}),Yo=aa(function(e,t,n){jr(e,n,t)});function Qo(e,t){return(vs(e)?Zt:hi)(e,La(t,3))}var Xo=aa(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Jo=Si(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Va(e,t[0],t[1])?t=[]:n>2&&Va(t[0],t[1],t[2])&&(t=[t[0]]),_i(e,Wr(t,1),[])}),Zo=Mn||function(){return jt.Date.now()};function es(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Ca(e,S,a,a,a,a,t)}function ts(e,t){var n;if("function"!=typeof t)throw new it(l);return e=Hs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var ns=Si(function(e,t,n){var r=v;if(n.length){var i=Rn(n,Na(ns));r|=E}return Ca(e,r,t,n,i)}),rs=Si(function(e,t,n){var r=v|_;if(n.length){var i=Rn(n,Na(rs));r|=E}return Ca(t,r,e,n,i)});function is(e,t,n){var r,i,o,s,u,c,d=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new it(l);function m(t){var n=r,o=i;return r=i=a,d=t,s=e.apply(o,n)}function g(e){var n=e-c;return c===a||n>=t||n<0||h&&e-d>=o}function v(){var e=Zo();if(g(e))return _(e);u=ro(v,function(e){var n=t-(e-c);return h?Vn(n,o-(e-d)):n}(e))}function _(e){return u=a,p&&r?m(e):(r=i=a,s)}function y(){var e=Zo(),n=g(e);if(r=arguments,i=this,c=e,n){if(u===a)return function(e){return d=e,u=ro(v,t),f?m(e):s}(c);if(h)return u=ro(v,t),m(c)}return u===a&&(u=ro(v,t)),s}return t=zs(t)||0,As(n)&&(f=!!n.leading,o=(h="maxWait"in n)?$n(zs(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){u!==a&&Qi(u),d=0,r=c=i=u=a},y.flush=function(){return u===a?s:_(Zo())},y}var as=Si(function(e,t){return Fr(e,1,t)}),os=Si(function(e,t,n){return Fr(e,zs(t)||0,n)});function ss(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(l);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(ss.Cache||wr),n}function ls(e){if("function"!=typeof e)throw new it(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ss.Cache=wr;var us=Ki(function(e,t){var n=(t=1==t.length&&vs(t[0])?Zt(t[0],vn(La())):Zt(Wr(t,1),vn(La()))).length;return Si(function(r){for(var i=-1,a=Vn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Wt(e,this,r)})}),cs=Si(function(e,t){var n=Rn(t,Na(cs));return Ca(e,E,a,t,n)}),ds=Si(function(e,t){var n=Rn(t,Na(ds));return Ca(e,k,a,t,n)}),fs=Pa(function(e,t){return Ca(e,C,a,a,a,t)});function hs(e,t){return e===t||e!=e&&t!=t}var ps=ba(ei),ms=ba(function(e,t){return e>=t}),gs=ai(function(){return arguments}())?ai:function(e){return Rs(e)&&ct.call(e,"callee")&&!Dt.call(e,"callee")},vs=r.isArray,_s=Bt?vn(Bt):function(e){return Rs(e)&&Zr(e)==le};function ys(e){return null!=e&&Ts(e.length)&&!Ss(e)}function bs(e){return Rs(e)&&ys(e)}var ws=Gn||zl,Es=Ut?vn(Ut):function(e){return Rs(e)&&Zr(e)==W};function ks(e){if(!Rs(e))return!1;var t=Zr(e);return t==V||t==$||"string"==typeof e.message&&"string"==typeof e.name&&!Is(e)}function Ss(e){if(!As(e))return!1;var t=Zr(e);return t==K||t==Y||t==z||t==ee}function Cs(e){return"number"==typeof e&&e==Hs(e)}function Ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=D}function As(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Rs(e){return null!=e&&"object"==typeof e}var xs=Ht?vn(Ht):function(e){return Rs(e)&&Ga(e)==Q};function Ps(e){return"number"==typeof e||Rs(e)&&Zr(e)==X}function Is(e){if(!Rs(e)||Zr(e)!=Z)return!1;var t=It(e);if(null===t)return!0;var n=ct.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ut.call(n)==pt}var Os=Gt?vn(Gt):function(e){return Rs(e)&&Zr(e)==te};var js=zt?vn(zt):function(e){return Rs(e)&&Ga(e)==ne};function Ds(e){return"string"==typeof e||!vs(e)&&Rs(e)&&Zr(e)==re}function Ns(e){return"symbol"==typeof e||Rs(e)&&Zr(e)==ie}var Ls=qt?vn(qt):function(e){return Rs(e)&&Ts(e.length)&&!!Tt[Zr(e)]};var Ms=ba(fi),Fs=ba(function(e,t){return e<=t});function Bs(e){if(!e)return[];if(ys(e))return Ds(e)?jn(e):ra(e);if(Ft&&e[Ft])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ft]());var t=Ga(e);return(t==Q?Tn:t==ne?Pn:hl)(e)}function Us(e){return e?(e=zs(e))===j||e===-j?(e<0?-1:1)*N:e==e?e:0:0===e?e:0}function Hs(e){var t=Us(e),n=t%1;return t==t?n?t-n:t:0}function Gs(e){return e?Nr(Hs(e),0,M):0}function zs(e){if("number"==typeof e)return e;if(Ns(e))return L;if(As(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=As(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var n=We.test(e);return n||Ve.test(e)?Pt(e.slice(2),n?2:8):qe.test(e)?L:+e}function qs(e){return ia(e,al(e))}function Ws(e){return null==e?"":Mi(e)}var $s=oa(function(e,t){if(Xa(t)||ys(t))ia(t,il(t),e);else for(var n in t)ct.call(t,n)&&xr(e,n,t[n])}),Vs=oa(function(e,t){ia(t,al(t),e)}),Ks=oa(function(e,t,n,r){ia(t,al(t),e,r)}),Ys=oa(function(e,t,n,r){ia(t,il(t),e,r)}),Qs=Pa(Dr);var Xs=Si(function(e,t){e=tt(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&Va(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=al(o),l=-1,u=s.length;++l<u;){var c=s[l],d=e[c];(d===a||hs(d,st[c])&&!ct.call(e,c))&&(e[c]=o[c])}return e}),Js=Si(function(e){return e.push(a,Aa),Wt(sl,a,e)});function Zs(e,t,n){var r=null==e?a:Xr(e,t);return r===a?n:r}function el(e,t){return null!=e&&za(e,t,ni)}var tl=ma(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),e[t]=n},Al(Pl)),nl=ma(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),ct.call(e,t)?e[t].push(n):e[t]=[n]},La),rl=Si(ii);function il(e){return ys(e)?Sr(e):ci(e)}function al(e){return ys(e)?Sr(e,!0):di(e)}var ol=oa(function(e,t,n){gi(e,t,n)}),sl=oa(function(e,t,n,r){gi(e,t,n,r)}),ll=Pa(function(e,t){var n={};if(null==e)return n;var r=!1;t=Zt(t,function(t){return t=Vi(t,e),r||(r=t.length>1),t}),ia(e,Oa(e),n),r&&(n=Lr(n,f|h|p,Ra));for(var i=t.length;i--;)Bi(n,t[i]);return n});var ul=Pa(function(e,t){return null==e?{}:function(e,t){return yi(e,t,function(t,n){return el(e,n)})}(e,t)});function cl(e,t){if(null==e)return{};var n=Zt(Oa(e),function(e){return[e]});return t=La(t),yi(e,n,function(e,n){return t(e,n[0])})}var dl=Sa(il),fl=Sa(al);function hl(e){return null==e?[]:_n(e,il(e))}var pl=ca(function(e,t,n){return t=t.toLowerCase(),e+(n?ml(t):t)});function ml(e){return kl(Ws(e).toLowerCase())}function gl(e){return(e=Ws(e))&&e.replace(Ye,En).replace(yt,"")}var vl=ca(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),_l=ca(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),yl=ua("toLowerCase");var bl=ca(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var wl=ca(function(e,t,n){return e+(n?" ":"")+kl(t)});var El=ca(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),kl=ua("toUpperCase");function Sl(e,t,n){return e=Ws(e),(t=n?a:t)===a?function(e){return kt.test(e)}(e)?function(e){return e.match(wt)||[]}(e):function(e){return e.match(Ue)||[]}(e):e.match(t)||[]}var Cl=Si(function(e,t){try{return Wt(e,a,t)}catch(e){return ks(e)?e:new Je(e)}}),Tl=Pa(function(e,t){return Vt(t,function(t){t=uo(t),jr(e,t,ns(e[t],e))}),e});function Al(e){return function(){return e}}var Rl=ha(),xl=ha(!0);function Pl(e){return e}function Il(e){return ui("function"==typeof e?e:Lr(e,f))}var Ol=Si(function(e,t){return function(n){return ii(n,e,t)}}),jl=Si(function(e,t){return function(n){return ii(e,n,t)}});function Dl(e,t,n){var r=il(t),i=Qr(t,r);null!=n||As(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Qr(t,il(t)));var a=!(As(n)&&"chain"in n&&!n.chain),o=Ss(e);return Vt(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=ra(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,en([this.value()],arguments))})}),e}function Nl(){}var Ll=va(Zt),Ml=va(Yt),Fl=va(rn);function Bl(e){return Ka(e)?fn(uo(e)):function(e){return function(t){return Xr(t,e)}}(e)}var Ul=ya(),Hl=ya(!0);function Gl(){return[]}function zl(){return!1}var ql=ga(function(e,t){return e+t},0),Wl=Ea("ceil"),$l=ga(function(e,t){return e/t},1),Vl=Ea("floor");var Kl,Yl=ga(function(e,t){return e*t},1),Ql=Ea("round"),Xl=ga(function(e,t){return e-t},0);return pr.after=function(e,t){if("function"!=typeof t)throw new it(l);return e=Hs(e),function(){if(--e<1)return t.apply(this,arguments)}},pr.ary=es,pr.assign=$s,pr.assignIn=Vs,pr.assignInWith=Ks,pr.assignWith=Ys,pr.at=Qs,pr.before=ts,pr.bind=ns,pr.bindAll=Tl,pr.bindKey=rs,pr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return vs(e)?e:[e]},pr.chain=Bo,pr.chunk=function(e,t,n){t=(n?Va(e,t,n):t===a)?1:$n(Hs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,l=r(Bn(i/t));o<i;)l[s++]=Ii(e,o,o+=t);return l},pr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},pr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return en(vs(n)?ra(n):[n],Wr(t,1))},pr.cond=function(e){var t=null==e?0:e.length,n=La();return e=t?Zt(e,function(e){if("function"!=typeof e[1])throw new it(l);return[n(e[0]),e[1]]}):[],Si(function(n){for(var r=-1;++r<t;){var i=e[r];if(Wt(i[0],this,n))return Wt(i[1],this,n)}})},pr.conforms=function(e){return function(e){var t=il(e);return function(n){return Mr(n,e,t)}}(Lr(e,f))},pr.constant=Al,pr.countBy=Go,pr.create=function(e,t){var n=mr(e);return null==t?n:Or(n,t)},pr.curry=function e(t,n,r){var i=Ca(t,b,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},pr.curryRight=function e(t,n,r){var i=Ca(t,w,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},pr.debounce=is,pr.defaults=Xs,pr.defaultsDeep=Js,pr.defer=as,pr.delay=os,pr.difference=ho,pr.differenceBy=po,pr.differenceWith=mo,pr.drop=function(e,t,n){var r=null==e?0:e.length;return r?Ii(e,(t=n||t===a?1:Hs(t))<0?0:t,r):[]},pr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Ii(e,0,(t=r-(t=n||t===a?1:Hs(t)))<0?0:t):[]},pr.dropRightWhile=function(e,t){return e&&e.length?Hi(e,La(t,3),!0,!0):[]},pr.dropWhile=function(e,t){return e&&e.length?Hi(e,La(t,3),!0):[]},pr.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Va(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Hs(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:Hs(r))<0&&(r+=i),r=n>r?0:Gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pr.filter=function(e,t){return(vs(e)?Qt:qr)(e,La(t,3))},pr.flatMap=function(e,t){return Wr(Qo(e,t),1)},pr.flatMapDeep=function(e,t){return Wr(Qo(e,t),j)},pr.flatMapDepth=function(e,t,n){return n=n===a?1:Hs(n),Wr(Qo(e,t),n)},pr.flatten=_o,pr.flattenDeep=function(e){return null!=e&&e.length?Wr(e,j):[]},pr.flattenDepth=function(e,t){return null!=e&&e.length?Wr(e,t=t===a?1:Hs(t)):[]},pr.flip=function(e){return Ca(e,T)},pr.flow=Rl,pr.flowRight=xl,pr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},pr.functions=function(e){return null==e?[]:Qr(e,il(e))},pr.functionsIn=function(e){return null==e?[]:Qr(e,al(e))},pr.groupBy=Vo,pr.initial=function(e){return null!=e&&e.length?Ii(e,0,-1):[]},pr.intersection=bo,pr.intersectionBy=wo,pr.intersectionWith=Eo,pr.invert=tl,pr.invertBy=nl,pr.invokeMap=Ko,pr.iteratee=Il,pr.keyBy=Yo,pr.keys=il,pr.keysIn=al,pr.map=Qo,pr.mapKeys=function(e,t){var n={};return t=La(t,3),Kr(e,function(e,r,i){jr(n,t(e,r,i),e)}),n},pr.mapValues=function(e,t){var n={};return t=La(t,3),Kr(e,function(e,r,i){jr(n,r,t(e,r,i))}),n},pr.matches=function(e){return pi(Lr(e,f))},pr.matchesProperty=function(e,t){return mi(e,Lr(t,f))},pr.memoize=ss,pr.merge=ol,pr.mergeWith=sl,pr.method=Ol,pr.methodOf=jl,pr.mixin=Dl,pr.negate=ls,pr.nthArg=function(e){return e=Hs(e),Si(function(t){return vi(t,e)})},pr.omit=ll,pr.omitBy=function(e,t){return cl(e,ls(La(t)))},pr.once=function(e){return ts(2,e)},pr.orderBy=function(e,t,n,r){return null==e?[]:(vs(t)||(t=null==t?[]:[t]),vs(n=r?a:n)||(n=null==n?[]:[n]),_i(e,t,n))},pr.over=Ll,pr.overArgs=us,pr.overEvery=Ml,pr.overSome=Fl,pr.partial=cs,pr.partialRight=ds,pr.partition=Xo,pr.pick=ul,pr.pickBy=cl,pr.property=Bl,pr.propertyOf=function(e){return function(t){return null==e?a:Xr(e,t)}},pr.pull=So,pr.pullAll=Co,pr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?bi(e,t,La(n,2)):e},pr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?bi(e,t,a,n):e},pr.pullAt=To,pr.range=Ul,pr.rangeRight=Hl,pr.rearg=fs,pr.reject=function(e,t){return(vs(e)?Qt:qr)(e,ls(La(t,3)))},pr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=La(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return wi(e,i),n},pr.rest=function(e,t){if("function"!=typeof e)throw new it(l);return Si(e,t=t===a?t:Hs(t))},pr.reverse=Ao,pr.sampleSize=function(e,t,n){return t=(n?Va(e,t,n):t===a)?1:Hs(t),(vs(e)?Tr:Ti)(e,t)},pr.set=function(e,t,n){return null==e?e:Ai(e,t,n)},pr.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Ai(e,t,n,r)},pr.shuffle=function(e){return(vs(e)?Ar:Pi)(e)},pr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Va(e,t,n)?(t=0,n=r):(t=null==t?0:Hs(t),n=n===a?r:Hs(n)),Ii(e,t,n)):[]},pr.sortBy=Jo,pr.sortedUniq=function(e){return e&&e.length?Ni(e):[]},pr.sortedUniqBy=function(e,t){return e&&e.length?Ni(e,La(t,2)):[]},pr.split=function(e,t,n){return n&&"number"!=typeof n&&Va(e,t,n)&&(t=n=a),(n=n===a?M:n>>>0)?(e=Ws(e))&&("string"==typeof t||null!=t&&!Os(t))&&!(t=Mi(t))&&Cn(e)?Yi(jn(e),0,n):e.split(t,n):[]},pr.spread=function(e,t){if("function"!=typeof e)throw new it(l);return t=null==t?0:$n(Hs(t),0),Si(function(n){var r=n[t],i=Yi(n,0,t);return r&&en(i,r),Wt(e,this,i)})},pr.tail=function(e){var t=null==e?0:e.length;return t?Ii(e,1,t):[]},pr.take=function(e,t,n){return e&&e.length?Ii(e,0,(t=n||t===a?1:Hs(t))<0?0:t):[]},pr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Ii(e,(t=r-(t=n||t===a?1:Hs(t)))<0?0:t,r):[]},pr.takeRightWhile=function(e,t){return e&&e.length?Hi(e,La(t,3),!1,!0):[]},pr.takeWhile=function(e,t){return e&&e.length?Hi(e,La(t,3)):[]},pr.tap=function(e,t){return t(e),e},pr.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new it(l);return As(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),is(e,t,{leading:r,maxWait:t,trailing:i})},pr.thru=Uo,pr.toArray=Bs,pr.toPairs=dl,pr.toPairsIn=fl,pr.toPath=function(e){return vs(e)?Zt(e,uo):Ns(e)?[e]:ra(lo(Ws(e)))},pr.toPlainObject=qs,pr.transform=function(e,t,n){var r=vs(e),i=r||ws(e)||Ls(e);if(t=La(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:As(e)&&Ss(a)?mr(It(e)):{}}return(i?Vt:Kr)(e,function(e,r,i){return t(n,e,r,i)}),n},pr.unary=function(e){return es(e,1)},pr.union=Ro,pr.unionBy=xo,pr.unionWith=Po,pr.uniq=function(e){return e&&e.length?Fi(e):[]},pr.uniqBy=function(e,t){return e&&e.length?Fi(e,La(t,2)):[]},pr.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?Fi(e,a,t):[]},pr.unset=function(e,t){return null==e||Bi(e,t)},pr.unzip=Io,pr.unzipWith=Oo,pr.update=function(e,t,n){return null==e?e:Ui(e,t,$i(n))},pr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Ui(e,t,$i(n),r)},pr.values=hl,pr.valuesIn=function(e){return null==e?[]:_n(e,al(e))},pr.without=jo,pr.words=Sl,pr.wrap=function(e,t){return cs($i(t),e)},pr.xor=Do,pr.xorBy=No,pr.xorWith=Lo,pr.zip=Mo,pr.zipObject=function(e,t){return qi(e||[],t||[],xr)},pr.zipObjectDeep=function(e,t){return qi(e||[],t||[],Ai)},pr.zipWith=Fo,pr.entries=dl,pr.entriesIn=fl,pr.extend=Vs,pr.extendWith=Ks,Dl(pr,pr),pr.add=ql,pr.attempt=Cl,pr.camelCase=pl,pr.capitalize=ml,pr.ceil=Wl,pr.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=zs(n))==n?n:0),t!==a&&(t=(t=zs(t))==t?t:0),Nr(zs(e),t,n)},pr.clone=function(e){return Lr(e,p)},pr.cloneDeep=function(e){return Lr(e,f|p)},pr.cloneDeepWith=function(e,t){return Lr(e,f|p,t="function"==typeof t?t:a)},pr.cloneWith=function(e,t){return Lr(e,p,t="function"==typeof t?t:a)},pr.conformsTo=function(e,t){return null==t||Mr(e,t,il(t))},pr.deburr=gl,pr.defaultTo=function(e,t){return null==e||e!=e?t:e},pr.divide=$l,pr.endsWith=function(e,t,n){e=Ws(e),t=Mi(t);var r=e.length,i=n=n===a?r:Nr(Hs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},pr.eq=hs,pr.escape=function(e){return(e=Ws(e))&&Ce.test(e)?e.replace(ke,kn):e},pr.escapeRegExp=function(e){return(e=Ws(e))&&je.test(e)?e.replace(Oe,"\\$&"):e},pr.every=function(e,t,n){var r=vs(e)?Yt:Gr;return n&&Va(e,t,n)&&(t=a),r(e,La(t,3))},pr.find=zo,pr.findIndex=go,pr.findKey=function(e,t){return on(e,La(t,3),Kr)},pr.findLast=qo,pr.findLastIndex=vo,pr.findLastKey=function(e,t){return on(e,La(t,3),Yr)},pr.floor=Vl,pr.forEach=Wo,pr.forEachRight=$o,pr.forIn=function(e,t){return null==e?e:$r(e,La(t,3),al)},pr.forInRight=function(e,t){return null==e?e:Vr(e,La(t,3),al)},pr.forOwn=function(e,t){return e&&Kr(e,La(t,3))},pr.forOwnRight=function(e,t){return e&&Yr(e,La(t,3))},pr.get=Zs,pr.gt=ps,pr.gte=ms,pr.has=function(e,t){return null!=e&&za(e,t,ti)},pr.hasIn=el,pr.head=yo,pr.identity=Pl,pr.includes=function(e,t,n,r){e=ys(e)?e:hl(e),n=n&&!r?Hs(n):0;var i=e.length;return n<0&&(n=$n(i+n,0)),Ds(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&ln(e,t,n)>-1},pr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Hs(n);return i<0&&(i=$n(r+i,0)),ln(e,t,i)},pr.inRange=function(e,t,n){return t=Us(t),n===a?(n=t,t=0):n=Us(n),function(e,t,n){return e>=Vn(t,n)&&e<$n(t,n)}(e=zs(e),t,n)},pr.invoke=rl,pr.isArguments=gs,pr.isArray=vs,pr.isArrayBuffer=_s,pr.isArrayLike=ys,pr.isArrayLikeObject=bs,pr.isBoolean=function(e){return!0===e||!1===e||Rs(e)&&Zr(e)==q},pr.isBuffer=ws,pr.isDate=Es,pr.isElement=function(e){return Rs(e)&&1===e.nodeType&&!Is(e)},pr.isEmpty=function(e){if(null==e)return!0;if(ys(e)&&(vs(e)||"string"==typeof e||"function"==typeof e.splice||ws(e)||Ls(e)||gs(e)))return!e.length;var t=Ga(e);if(t==Q||t==ne)return!e.size;if(Xa(e))return!ci(e).length;for(var n in e)if(ct.call(e,n))return!1;return!0},pr.isEqual=function(e,t){return oi(e,t)},pr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?oi(e,t,a,n):!!r},pr.isError=ks,pr.isFinite=function(e){return"number"==typeof e&&zn(e)},pr.isFunction=Ss,pr.isInteger=Cs,pr.isLength=Ts,pr.isMap=xs,pr.isMatch=function(e,t){return e===t||si(e,t,Fa(t))},pr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,si(e,t,Fa(t),n)},pr.isNaN=function(e){return Ps(e)&&e!=+e},pr.isNative=function(e){if(Qa(e))throw new Je(s);return li(e)},pr.isNil=function(e){return null==e},pr.isNull=function(e){return null===e},pr.isNumber=Ps,pr.isObject=As,pr.isObjectLike=Rs,pr.isPlainObject=Is,pr.isRegExp=Os,pr.isSafeInteger=function(e){return Cs(e)&&e>=-D&&e<=D},pr.isSet=js,pr.isString=Ds,pr.isSymbol=Ns,pr.isTypedArray=Ls,pr.isUndefined=function(e){return e===a},pr.isWeakMap=function(e){return Rs(e)&&Ga(e)==oe},pr.isWeakSet=function(e){return Rs(e)&&Zr(e)==se},pr.join=function(e,t){return null==e?"":qn.call(e,t)},pr.kebabCase=vl,pr.last=ko,pr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=Hs(n))<0?$n(r+i,0):Vn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):sn(e,cn,i,!0)},pr.lowerCase=_l,pr.lowerFirst=yl,pr.lt=Ms,pr.lte=Fs,pr.max=function(e){return e&&e.length?zr(e,Pl,ei):a},pr.maxBy=function(e,t){return e&&e.length?zr(e,La(t,2),ei):a},pr.mean=function(e){return dn(e,Pl)},pr.meanBy=function(e,t){return dn(e,La(t,2))},pr.min=function(e){return e&&e.length?zr(e,Pl,fi):a},pr.minBy=function(e,t){return e&&e.length?zr(e,La(t,2),fi):a},pr.stubArray=Gl,pr.stubFalse=zl,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Yl,pr.nth=function(e,t){return e&&e.length?vi(e,Hs(t)):a},pr.noConflict=function(){return jt._===this&&(jt._=mt),this},pr.noop=Nl,pr.now=Zo,pr.pad=function(e,t,n){e=Ws(e);var r=(t=Hs(t))?On(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return _a(Un(i),n)+e+_a(Bn(i),n)},pr.padEnd=function(e,t,n){e=Ws(e);var r=(t=Hs(t))?On(e):0;return t&&r<t?e+_a(t-r,n):e},pr.padStart=function(e,t,n){e=Ws(e);var r=(t=Hs(t))?On(e):0;return t&&r<t?_a(t-r,n)+e:e},pr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Yn(Ws(e).replace(Ne,""),t||0)},pr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Va(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Us(e),t===a?(t=e,e=0):t=Us(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Qn();return Vn(e+i*(t-e+xt("1e-"+((i+"").length-1))),t)}return Ei(e,t)},pr.reduce=function(e,t,n){var r=vs(e)?tn:pn,i=arguments.length<3;return r(e,La(t,4),n,i,Ur)},pr.reduceRight=function(e,t,n){var r=vs(e)?nn:pn,i=arguments.length<3;return r(e,La(t,4),n,i,Hr)},pr.repeat=function(e,t,n){return t=(n?Va(e,t,n):t===a)?1:Hs(t),ki(Ws(e),t)},pr.replace=function(){var e=arguments,t=Ws(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pr.result=function(e,t,n){var r=-1,i=(t=Vi(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[uo(t[r])];o===a&&(r=i,o=n),e=Ss(o)?o.call(e):o}return e},pr.round=Ql,pr.runInContext=e,pr.sample=function(e){return(vs(e)?Cr:Ci)(e)},pr.size=function(e){if(null==e)return 0;if(ys(e))return Ds(e)?On(e):e.length;var t=Ga(e);return t==Q||t==ne?e.size:ci(e).length},pr.snakeCase=bl,pr.some=function(e,t,n){var r=vs(e)?rn:Oi;return n&&Va(e,t,n)&&(t=a),r(e,La(t,3))},pr.sortedIndex=function(e,t){return ji(e,t)},pr.sortedIndexBy=function(e,t,n){return Di(e,t,La(n,2))},pr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ji(e,t);if(r<n&&hs(e[r],t))return r}return-1},pr.sortedLastIndex=function(e,t){return ji(e,t,!0)},pr.sortedLastIndexBy=function(e,t,n){return Di(e,t,La(n,2),!0)},pr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ji(e,t,!0)-1;if(hs(e[n],t))return n}return-1},pr.startCase=wl,pr.startsWith=function(e,t,n){return e=Ws(e),n=null==n?0:Nr(Hs(n),0,e.length),t=Mi(t),e.slice(n,n+t.length)==t},pr.subtract=Xl,pr.sum=function(e){return e&&e.length?mn(e,Pl):0},pr.sumBy=function(e,t){return e&&e.length?mn(e,La(t,2)):0},pr.template=function(e,t,n){var r=pr.templateSettings;n&&Va(e,t,n)&&(t=a),e=Ws(e),t=Ks({},t,r,Ta);var i,o,s=Ks({},t.imports,r.imports,Ta),l=il(s),u=_n(s,l),c=0,d=t.interpolate||Qe,f="__p += '",h=nt((t.escape||Qe).source+"|"+d.source+"|"+(d===Re?Ge:Qe).source+"|"+(t.evaluate||Qe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ct+"]")+"\n";e.replace(h,function(t,n,r,a,s,l){return r||(r=a),f+=e.slice(c,l).replace(Xe,Sn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),f+="';\n";var m=t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(ye,""):f).replace(be,"$1").replace(we,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Cl(function(){return Ze(l,p+"return "+f).apply(a,u)});if(g.source=f,ks(g))throw g;return g},pr.times=function(e,t){if((e=Hs(e))<1||e>D)return[];var n=M,r=Vn(e,M);t=La(t),e-=M;for(var i=gn(r,t);++n<e;)t(n);return i},pr.toFinite=Us,pr.toInteger=Hs,pr.toLength=Gs,pr.toLower=function(e){return Ws(e).toLowerCase()},pr.toNumber=zs,pr.toSafeInteger=function(e){return e?Nr(Hs(e),-D,D):0===e?e:0},pr.toString=Ws,pr.toUpper=function(e){return Ws(e).toUpperCase()},pr.trim=function(e,t,n){if((e=Ws(e))&&(n||t===a))return e.replace(De,"");if(!e||!(t=Mi(t)))return e;var r=jn(e),i=jn(t);return Yi(r,bn(r,i),wn(r,i)+1).join("")},pr.trimEnd=function(e,t,n){if((e=Ws(e))&&(n||t===a))return e.replace(Le,"");if(!e||!(t=Mi(t)))return e;var r=jn(e);return Yi(r,0,wn(r,jn(t))+1).join("")},pr.trimStart=function(e,t,n){if((e=Ws(e))&&(n||t===a))return e.replace(Ne,"");if(!e||!(t=Mi(t)))return e;var r=jn(e);return Yi(r,bn(r,jn(t))).join("")},pr.truncate=function(e,t){var n=A,r=R;if(As(t)){var i="separator"in t?t.separator:i;n="length"in t?Hs(t.length):n,r="omission"in t?Mi(t.omission):r}var o=(e=Ws(e)).length;if(Cn(e)){var s=jn(e);o=s.length}if(n>=o)return e;var l=n-On(r);if(l<1)return r;var u=s?Yi(s,0,l).join(""):e.slice(0,l);if(i===a)return u+r;if(s&&(l+=u.length-l),Os(i)){if(e.slice(l).search(i)){var c,d=u;for(i.global||(i=nt(i.source,Ws(ze.exec(i))+"g")),i.lastIndex=0;c=i.exec(d);)var f=c.index;u=u.slice(0,f===a?l:f)}}else if(e.indexOf(Mi(i),l)!=l){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},pr.unescape=function(e){return(e=Ws(e))&&Se.test(e)?e.replace(Ee,Dn):e},pr.uniqueId=function(e){var t=++dt;return Ws(e)+t},pr.upperCase=El,pr.upperFirst=kl,pr.each=Wo,pr.eachRight=$o,pr.first=yo,Dl(pr,(Kl={},Kr(pr,function(e,t){ct.call(pr.prototype,t)||(Kl[t]=e)}),Kl),{chain:!1}),pr.VERSION="4.17.10",Vt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pr[e].placeholder=pr}),Vt(["drop","take"],function(e,t){_r.prototype[e]=function(n){n=n===a?1:$n(Hs(n),0);var r=this.__filtered__&&!t?new _r(this):this.clone();return r.__filtered__?r.__takeCount__=Vn(n,r.__takeCount__):r.__views__.push({size:Vn(n,M),type:e+(r.__dir__<0?"Right":"")}),r},_r.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Vt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==I||3==n;_r.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:La(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Vt(["head","last"],function(e,t){var n="take"+(t?"Right":"");_r.prototype[e]=function(){return this[n](1).value()[0]}}),Vt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");_r.prototype[e]=function(){return this.__filtered__?new _r(this):this[n](1)}}),_r.prototype.compact=function(){return this.filter(Pl)},_r.prototype.find=function(e){return this.filter(e).head()},_r.prototype.findLast=function(e){return this.reverse().find(e)},_r.prototype.invokeMap=Si(function(e,t){return"function"==typeof e?new _r(this):this.map(function(n){return ii(n,e,t)})}),_r.prototype.reject=function(e){return this.filter(ls(La(e)))},_r.prototype.slice=function(e,t){e=Hs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new _r(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=Hs(t))<0?n.dropRight(-t):n.take(t-e)),n)},_r.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_r.prototype.toArray=function(){return this.take(M)},Kr(_r.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=pr[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(pr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof _r,u=s[0],c=l||vs(t),d=function(e){var t=i.apply(pr,en([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,m=l&&!h;if(!o&&c){t=m?t:new _r(this);var g=e.apply(t,s);return g.__actions__.push({func:Uo,args:[d],thisArg:a}),new vr(g,f)}return p&&m?e.apply(this,s):(g=this.thru(d),p?r?g.value()[0]:g.value():g)})}),Vt(["pop","push","shift","sort","splice","unshift"],function(e){var t=at[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);pr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(vs(i)?i:[],e)}return this[n](function(n){return t.apply(vs(n)?n:[],e)})}}),Kr(_r.prototype,function(e,t){var n=pr[t];if(n){var r=n.name+"";(ar[r]||(ar[r]=[])).push({name:t,func:n})}}),ar[pa(a,_).name]=[{name:"wrapper",func:a}],_r.prototype.clone=function(){var e=new _r(this.__wrapped__);return e.__actions__=ra(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ra(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ra(this.__views__),e},_r.prototype.reverse=function(){if(this.__filtered__){var e=new _r(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},_r.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=vs(e),r=t<0,i=n?e.length:0,a=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Vn(t,e+o);break;case"takeRight":e=$n(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,d=c.length,f=0,h=Vn(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return Gi(e,this.__actions__);var p=[];e:for(;l--&&f<h;){for(var m=-1,g=e[u+=t];++m<d;){var v=c[m],_=v.iteratee,y=v.type,b=_(g);if(y==O)g=b;else if(!b){if(y==I)continue e;break e}}p[f++]=g}return p},pr.prototype.at=Ho,pr.prototype.chain=function(){return Bo(this)},pr.prototype.commit=function(){return new vr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===a&&(this.__values__=Bs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},pr.prototype.plant=function(e){for(var t,n=this;n instanceof gr;){var r=fo(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},pr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof _r){var t=e;return this.__actions__.length&&(t=new _r(this)),(t=t.reverse()).__actions__.push({func:Uo,args:[Ao],thisArg:a}),new vr(t,this.__chain__)}return this.thru(Ao)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Gi(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Ft&&(pr.prototype[Ft]=function(){return this}),pr}();jt._=Nn,(i=function(){return Nn}.call(t,n,t,r))===a||(r.exports=i)}).call(this)}).call(t,n("DuR2"),n("3IRH")(e))},M99n:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");r.support.transitionEvent=function(){return void 0!==window.TransitionEvent}},"MA+5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("wmCY")),o=l(n("1i/z")),s=l(n("pD7l"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=(0,r.default)("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return r.default.trim(t.html())}function c(){return function(e,t){return t(a.default.t(e,this))}}function d(e,t,n){var a=s.default[e]||function(e){return e},l=u(e),d=function(e){var t={};if(i.default.isString(e)&&(e=[e]),i.default.isArray(e))return i.default.each(e,function(e){t[e]=u(e)}),t}(n);return o.default.render(l,r.default.extend({t:c},a(t)),d)}t.default=d,window.render=d},MB1G:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.updateObjectInArray=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e.map(function(e){return e[n]!==t[n]?e:r({},e,t)})},t.isLastItem=function(e,t){return t+1===e.length}},MGa0:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-score-tracking a","click").livequery(function(e){var t=(0,a.default)(this),n=t.data("score"),r=t.data("version"),i=t.data("pid"),s=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target;r&&(s||e.preventDefault(),(0,o.track)("Rec BBall Card Score click",{"rec-score":n,"rec-version":r,pid:i}),s||setTimeout(function(){window.location=t.attr("href")},50))})})},MPGJ:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("Tqsz"),n("LNuh"),(0,a.default)(".sound_player:visible").livequery(function(){(0,a.default)(this).sound_player()})},MX6m:function(e,t,n){"use strict";var r=d(n("l/Rs")),i=d(n("shXp")),a=d(n("8NzR")),o=d(n("wmCY")),s=n("Tvaj"),l=d(n("MA+5")),u=n("4RZc"),c=d(n("hBlz"));function d(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#NS__discover_advanced_sentence",function(e){var t,n,a,d,f,h,p,m,g,v,_,y,b,w,E,k,S,C,T,A,R=e.hasClass("refresh_enabled");function x(e,t){return t=t||{},R?(0,r.default)('<span class="'+i.default.compact(i.default.flatten(["display-none inline-block-sm mr2",t.classes])).join(" ")+'">'+e+"</span>"):(0,r.default)('<span class="'+i.default.compact(i.default.flatten(["text",t.classes])).join(" ")+'">'+e+"</span>")}function P(e,t){return R?(0,r.default)('<span class="block inline-block-sm"></span>').append(e).append(t):(0,r.default)('<span class="inline-block mobile-block"></span>').append(e).append(t)}function I(e){var n=(0,r.default)("<div></div>"),s=[],l=[];(e=e||O()).state=e.state||"all",e.term=r.default.trim(e.term||""),n.append(x(o.default.t("onloads.views.discover.sentence.Show_me"))),"all"===e.state&&0===e.term.length?(n.append(d),n.append(x(o.default.t("onloads.views.discover.sentence.projects"),{classes:["fr-hide","es-hide"]})),d.find("option:first").data("alt-label",o.default.t("onloads.views.discover.sentence.all"))):("all"!==e.state&&n.append(_),e.term.length>0&&n.append(a),n.append(x(o.default.t("onloads.views.discover.sentence.projects_in"),{classes:["fr-hide","es-hide"]})),n.append(d),d.find("option:first").data("alt-label",o.default.t("onloads.views.discover.sentence.All_Categories"))),e.category_id&&parseInt(e.category_id,10)>0?(d.hasClass("js-filter")||d.addClass("selected"),d.find("select").ksr_val(e.category_id),R&&(d.find(".js-filter-arrow").addClass("display-none").removeClass("inline-block"),d.find(".js-filter-delete").removeClass("display-none").addClass("inline-block"))):(d.hasClass("js-filter")||d.removeClass("selected"),d.find("select").ksr_val(""),R&&(d.find(".js-filter-arrow").removeClass("display-none").addClass("inline-block"),d.find(".js-filter-delete").addClass("display-none").removeClass("inline-block"))),_.find("select").ksr_val(e.state),a.find("input").val(e.term),a.find(".term").text(e.term),e.woe_id&&parseInt(e.woe_id,10)>0?(E.hasClass("js-filter")||E.addClass("selected"),E.find("select").ksr_val(e.woe_id),R&&(E.find(".js-filter-arrow").addClass("display-none").removeClass("inline-block"),E.find(".js-filter-delete").removeClass("display-none").addClass("inline-block")),n.append(P(x(o.default.t("onloads.views.discover.sentence.from"),{classes:["fr-hide","es-hide"]}),E))):(E.hasClass("js-filter")||E.removeClass("selected"),E.find("select").ksr_val("0"),R&&(E.find(".js-filter-arrow").removeClass("display-none").addClass("inline-block"),E.find(".js-filter-delete").addClass("display-none").removeClass("inline-block")),n.append(P(x(o.default.t("onloads.views.discover.sentence.on"),{classes:["fr-hide","es-hide"]}),E))),e.tag_id>0&&(v.find("select").ksr_val(e.tag_id),n.append(P(x(o.default.t("onloads.views.discover.sentence.tagged_with"),{classes:["fr-hide","es-hide"]}),v))),e.recommended&&s.push(f),e.staff_picks&&s.push(h),e.social?s.push(g):g.find("select").ksr_val("1"),e.starred?s.push(p):p.find("select").ksr_val("1"),e.backed?s.push(m):m.find("select").ksr_val("1"),(s=i.default.compact(s)).length>0&&(s[0]===m||s[0]===p?n.append(x(o.default.t("onloads.views.discover.sentence.that"),{classes:["fr-hide","es-hide"]})):n.append(x(o.default.t("onloads.views.discover.sentence.that_are"),{classes:["fr-hide","es-hide"]})),n.append(s)),i.default.isUndefined(e.pledged)||i.default.isNull(e.pledged)||""===e.pledged||(b.find("select").ksr_val(e.pledged),l.push(b)),i.default.isUndefined(e.goal)||i.default.isNull(e.goal)||""===e.goal||(y.find("select").ksr_val(e.goal),l.push(y)),i.default.isUndefined(e.raised)||i.default.isNull(e.raised)||""===e.raised||(w.find("select").ksr_val(e.raised),l.push(w)),l.length>0&&n.append(P(x(o.default.t("onloads.views.discover.sentence.with"),{classes:["fr-hide","es-hide"]}),l)),k.find("select").ksr_val(e.sort),n.append(P(x(o.default.t("onloads.views.discover.sentence.sorted_by")),k)),t.children().detach(),t.empty(),t.html(n)}function O(){var e=(0,c.default)("?"+t.serialize()).query(!0);return e.category_id=e.category_id&&parseInt(e.category_id,10),e.tag_id=e.tag_id&&parseInt(e.tag_id,10),e.woe_id=e.woe_id&&parseInt(e.woe_id,10),e}function j(e){var t={discover_interaction_param:e.param,discover_interaction_action:e.action,discover_interaction_value:e.value};i.default.extend(t,(0,u.namespaceKeys)("discover",O())),(0,u.track)("Discover Sentence Parameter Interaction",t)}function D(){e.css({height:T.outerHeight()}),setTimeout(function(){e.addClass("transition-all-bezier"),C.removeClass("hide"),e.css({height:n.outerHeight()}),A.css({marginTop:-T.outerHeight()})},1),setTimeout(function(){A.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),C.aria_set_visible(),A.aria_set_hidden()},1e3)}R?(t=e.find("form"),n=e.find(".js-sentence"),a=e.find(".js-filter.js-filter-search"),d=e.find(".js-filter.js-filter-category"),f=e.find(".js-filter.js-filter-recommended"),h=e.find(".js-filter.js-filter-staff_picks"),p=e.find(".js-filter.js-filter-starred"),m=e.find(".js-filter.js-filter-backed"),g=e.find(".js-filter.js-filter-social"),v=e.find(".js-filter.js-filter-tag"),_=e.find(".js-filter.js-filter-state"),y=e.find(".js-filter.js-filter-goal"),b=e.find(".js-filter.js-filter-pledged"),w=e.find(".js-filter.js-filter-raised"),E=e.find(".js-filter.js-filter-location"),k=e.find(".js-filter.js-filter-sorts"),S=e.find(".js-close"),C=(0,r.default)(".js-sentence-container"),T=(0,r.default)(".js-category-hero"),A=(0,r.default)(".NS_discover__hero")):(t=e.find("form"),n=e.find(".js-sentence"),a=e.find(".filter.search"),d=e.find(".filter.category"),f=e.find(".filter.recommended"),h=e.find(".filter.staff_picks"),p=e.find(".filter.starred"),m=e.find(".filter.backed"),g=e.find(".filter.social"),v=e.find(".filter.tag"),_=e.find(".filter.state"),y=e.find(".filter.goal"),b=e.find(".filter.pledged"),w=e.find(".filter.raised"),E=e.find(".filter.location"),k=e.find(".filter.sorts"),S=e.find(".js-close"),C=(0,r.default)(".js-sentence-container"),T=(0,r.default)(".js-category-hero"),A=(0,r.default)(".NS_discover__hero")),(0,r.default)(document).on("discovery:filters:term_changed",function(e,n){r.default.trim(n.term).length&&a.closest(t).length?a.find("input").val(n.term).siblings(".term").text(n.term):I(i.default.extend(O(),{term:n.term}))}),(0,r.default)(document).on("discovery:categories:changed",function(e,t){d.find("select").ksr_val(t.id||0),I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:"category_id",action:"change"})}),(0,r.default)(document).on("discovery:locations:changed",function(e,t){E.find("select").ksr_val(t.id||0),I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:"woe_id",action:"change"})}),(0,r.default)(document).on("discovery:sorts:changed",function(e,t){k.find("select").ksr_val(t),I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:"sort",action:"change"})}),(0,r.default)(document).on("discovery:locations:updated",function(e,t){E.find("select").children().remove(),E.find("select").append((0,l.default)("discover/_location_options",t)),E.find("select").ksr_val(t.id)}),(0,r.default)(document).on("discovery:filters:changed",function(e,t){I(i.default.extend(O(),t)),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:"term",action:"change"})}),e.find("#filters").on("click",function(e){(0,u.track)("Discovery Add Filter Pressed"),e.preventDefault()}),e.on("change","select",function(){var e=(0,r.default)(this);I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:e.attr("name"),action:"change",value:e.val()})}),R?e.on("click",".js-filter-delete",function(e){var t=(0,r.default)(this);t.closest(".js-filter").detach(),I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:t.siblings("input,select").attr("name"),action:"remove"}),e.preventDefault()}):e.on("click",".filter .ss-delete",function(e){var t=(0,r.default)(this);t.closest(".filter").detach(),I(),(0,r.default)(document).trigger("discovery:sentence:changed",O()),j({param:t.siblings("input,select").attr("name"),action:"remove"}),e.preventDefault()}),e.on("keypress cut paste input blur",".search span[contenteditable], .js-filter-search span[contenteditable]",function(e){var t=(0,r.default)(this),n=t.siblings("input"),i=r.default.trim(t.text()||"");"blur"===e.type||"focusout"===e.type?(I(),j({param:n.attr("name"),value:n.val(),action:"change"})):"keypress"!==e.type||e.keyCode!==s.ENTER&&e.keyCode!==s.TAB?(n.val(i),(0,r.default)(document).trigger("discovery:sentence:term_changed",O())):(t.blur(),e.preventDefault())}),e.find(".term").on("focus",function(){R?a.removeClass("shadow-2 border-transparent").addClass("border-dark-grey-500"):a.addClass("focused")}).on("blur",function(){R?a.addClass("shadow-2 border-transparent").removeClass("border-dark-grey-500"):a.removeClass("focused")}),(0,r.default)(document).on("discovery:sentence:changed",function(){C.is(":visible")&&S.hide()}),(0,r.default)(document).on("discovery:sentence:load_sample",function(e,t){I(t),(0,r.default)(document).trigger("discovery:sentence:changed",O())}),(0,r.default)(document).on("discovery:sentence:update_params",function(e,t){var n=i.default.extend(O(),t);I(n),(0,r.default)(document).trigger("discovery:sentence:changed",n)}),(0,r.default)(document).on("discovery:sentence:show_sentence",function(){D(),S.hide()}),I(),A.length&&(e.find(".js-sentence-edit").on("click",function(e){D(),e.preventDefault()}),S.on("click",function(t){e.css({height:n.outerHeight()}),setTimeout(function(){A.removeClass("hide"),e.addClass("transition-all-bezier"),e.css({height:T.outerHeight()}),A.css({marginTop:0})},1),setTimeout(function(){C.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),C.aria_set_hidden(),A.aria_set_visible()},1e3),(0,u.track)("Discover Sentence Close Clicked"),t.preventDefault()}))})},MfwZ:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(n){var r,i,a,o=e.makeArray(arguments);return"number"==e.type(n)?this.cycle("goto",n):"string"==e.type(n)?this.each(function(){var s;if(r=n,void 0!==(a=e(this).data("cycle.opts")))return r="goto"==r?"jump":r,i=a.API[r],e.isFunction(i)?((s=e.makeArray(o)).shift(),i.apply(a.API,s)):void t.log("unknown command: ",r);t.log('slideshow must be initialized before sending commands; "'+r+'" ignored')}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;!1===e.allowWrap&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;!1===e.allowWrap&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),n=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),n(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),n(this,"parsedAttrs",!1)})},jump:function(e){var t,n=this.opts();if(!n.busy||n.manualTrump){var r=parseInt(e,10);isNaN(r)||r<0||r>=n.slides.length?n.API.log("goto: invalid slide index: "+r):r!=n.currSlide?(n.nextSlide=r,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",r," (zero-index)"),t=n.currSlide<n.nextSlide,n.API.prepareTx(!0,t)):n.API.log("goto: skipping, already on slide",r)}},stop:function(){var t=this.opts(),n=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(!0!==t.pauseOnHover&&(n=e(t.pauseOnHover)),n.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var n,r,i=this.opts(),a=[],o=1,s=0;s<i.slides.length;s++)n=i.slides[s],s==t?r=n:(a.push(n),e(n).data("cycle.opts").slideNum=o,o++);r&&(i.slides=e(a),i.slideCount--,e(r).remove(),t==i.currSlide?i.API.advanceSlide(1):t<i.currSlide?i.currSlide--:i.currSlide++,i.API.trigger("cycle-slide-removed",[i,t,r]).log("cycle-slide-removed"),i.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var n=e(this),r=n.data("cycle-cmd"),i=n.data("cycle-context")||".cycle-slideshow";e(i).cycle(r,n.data("cycle-arg"))})}(r)},Mscd:function(e,t,n){"use strict";var r=a(n("8NzR")),i=a(n("l/Rs"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("body#newsletters_index",function(e){e.find("li.newsletter-item").on("mouseenter",function(){(0,i.default)(this).data("animating",!0),function e(t){var n=t.data("frame")||0,r=t.data("timeout");t.data("animating")&&(t.find("img").hide(),t.find("img").eq(n).show(),t.data("frame",n<2?n+1:0),r&&clearTimeout(r),r=setTimeout(function(){e(t)},200),t.data("timeout",r))}((0,i.default)(this))}).on("mouseleave",function(){(0,i.default)(this).data("animating",!1)})})},"N/lE":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("TGXB")),a=o(n("hBlz"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,r.default)(function(){(0,r.default)(document).ajaxSend(function(e,t,n){var i,o;"GET"!==n.type&&(i=n.url,""===(o=new a.default(i).domain())||o===new a.default(window.location.href).domain())&&t.setRequestHeader("X-CSRF-Token",(0,r.default)('meta[name="csrf-token"]').attr("content"))}),(0,r.default)("form[data-ksrjson]").livequery(function(){var e=(0,r.default)([]);(0,r.default)(this).attr("data-target")?e=(0,r.default)((0,r.default)(this).attr("data-target")):(0,r.default)(this).closest(".ajax-container").length?e=(0,r.default)(this).closest(".ajax-container"):(0,r.default)(this).closest(".modal_dialog").length>0&&(e=(0,r.default)(this)),e.length>0&&i.default.enable_form((0,r.default)(this),e)}),(0,r.default)(document).on("click","a[data-ksrjson]",function(e){var t=(0,r.default)(this),n=(0,r.default)(t.attr("data-target"));return e.preventDefault(),0===n.length&&(n=t.closest(".ajax-container")),0===n.length||i.default.get(t.attr("href"),t.attr("data-ksrmethod"),n,this)})})},NBJa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Failure=t.Success=t.Validation=t.validateField=t.validate=t.unboundValidator=t.UnboundFieldErrorsList=t.isValid=t.isPresent=t.isEmail=t.hasError=t.handleTouchAllFields=t.handleTouchField=t.getErrors=void 0;var r=n("HlA3"),i=n("p5aI"),a=n("C75a"),o=n("+4Bd");t.getErrors=o.getErrors,t.handleTouchField=a.handleTouchField,t.handleTouchAllFields=a.handleTouchAllFields,t.hasError=a.hasError,t.isEmail=a.isEmail,t.isPresent=a.isPresent,t.isValid=o.isValid,t.UnboundFieldErrorsList=r.UnboundFieldErrorsList,t.unboundValidator=o.unboundValidator,t.validate=o.validate,t.validateField=a.validateField,t.Validation=i.Validation,t.Success=i.Success,t.Failure=i.Failure},NKE6:function(e,t,n){var r=n("xA5w");e.exports=function(e,t){var n=r(e).getTime(),i=r(t).getTime();return n<i?-1:n>i?1:0}},NUlJ:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,r.default)(function(){function e(){(0,r.default)("#account-setup-panel").trigger("project_build:refresh")}(0,r.default)("#account-setup-panel .identity-verification .identity-documents-pending").livequery(function(){r.default.pollster((0,r.default)(this).attr("data-url"),function(t){var n=t.documents[t.documents.length-1];switch(n.state){case"pending":return!1;case"successful":switch(n.identity_state){case"passed":return(0,i.default)({success:a.default.t("onloads.views.identity_documents.processing_state.Your_identity_documents_have_been_approved")}),e(),!0;case"failed":return(0,i.default)({error:a.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0;default:return!1}case"failed":return(0,i.default)({error:a.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}})})})},NgMk:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#activity_index",function(e){var t=[];(0,r.default)(".dashboard_activities .activity",e).livequery(function(){var e,n,i;e=(0,r.default)(this),n=e.find(".timeline_header:first"),i=n.data("time_bucket"),-1===t.indexOf(i)&&(t.push(i),n.find(".timeline_header_name:first").css({display:"block"}))}),(0,r.default)(document).on("click",".NS_post_likes__button form .js-like",function(){(0,a.track)("Activity Like")})})},Nhg7:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("L3hI")),o=l(n("wmCY")),s=l(n("MA+5"));function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_site__simple_ticket_form").length&&(0,r.default)(document).on("click",".js-new-zendesk-ticket input:submit",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest("form"),l=n.parent();n.is(".submitting")||(n.addClass("submitting"),t.data("original_text",t.val()),t.val(o.default.t("onloads.views.site.simple_ticket_form.Submitting")),r.default.ajax({type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){l.find(".success, .error").remove()},complete:function(){n.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){l.html('<h5 class="green">'+o.default.t("onloads.views.site.simple_ticket_form.Thanks_for_the_message_A_member")+"</h5>")},error:function(e){var t=JSON.parse(e.responseText);t=i.default.map(t,function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return i.default.map(e,function(e){return i.default.compact([a.default.capitalize(n),e]).join(" ")})}),t=i.default.compact(t),t=i.default.flatten(t),l.prepend((0,s.default)("funnels/_ticket_error",{errors:t}))}}))})},Nkoz:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=(0,r.default)("#saving-layer");(0,r.default)("body").append(e),(0,r.default)(document).on("submit","body.refund_checkouts_new_card #credit_card_form form",function(){e.show(),setTimeout(function(){e.find(".modal_dialog_body").html(i.default.t("onloads.views.refund_checkouts.new_card.Well_this_is_embarrassing_Processing_your_pledge")),e.removeClass("spinning")},12e4)})})},Nkse:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-project-description-content, #description",function(e){e.find(".js-open-supporting-material-modal").on("click",function(t){(0,a.track)("Viewed Prototype Gallery Tooltip"),e.find(".supporting-material-modal").fadeIn(200),(0,r.default)("body,html").addClass("supporting-material-modal-open"),t.preventDefault()}),e.find(".js-close-supporting-material-modal").on("click",function(e){(0,r.default)(this).closest(".supporting-material-modal").fadeOut(200),(0,r.default)("body,html").removeClass("supporting-material-modal-open"),e.preventDefault()})})},NtaJ:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),(0,a.default)("form:not([data-ksrjson])","submit").livequery(function(e){var t=(0,a.default)(this);t.is(".submitting-non-ajax")?e.preventDefault():t.attr("target")||((0,a.default)(window).on("unload",function(){t.removeClass("submitting-non-ajax")}),t.addClass("submitting-non-ajax"))})},Nvbj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=function(e,t){var n=/\r\n|[\n\r]/g,r=1,i=t+1,a=void 0;for(;(a=n.exec(e.body))&&a.index<t;)r+=1,i=t+1-(a.index+a[0].length);return{line:r,column:i}}},"O2m/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchProjectFlagging=void 0;var r=n("Z6GA");t.fetchProjectFlagging=function(e){return(0,r.fetchGraph)("\n  query($projectSlug: String!) {\n    project(slug: $projectSlug) {\n      backing {\n        id\n      }\n      flagging {\n        kind\n      }\n      state\n    }\n  }\n",{projectSlug:e})}},OBzQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7IIE");Object.defineProperty(t,"fetchThanksPageRecsQuery",{enumerable:!0,get:function(){return r.fetchThanksPageRecsQuery}})},OH6m:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}var r=0;function i(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var i,a;if(n(this.$element[0])&&(i=this.$element,(!("object"==typeof HTMLElement?i instanceof HTMLElement:i&&"object"==typeof i&&1===i.nodeType&&"string"==typeof i.nodeName)||this.$element.is(":visible"))&&this.enabled&&(a=this.getTitle()))){var o=this.tip();o.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](a),o[0].className="tipsy"+this.options.theme,this.options.className&&o.addClass(t(this.options.className,this.$element[0])),o.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset());s=this.$element.parents("svg").size()>0?e.extend(s,this.$element[0].getBBox()):e.extend(s,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var l,u=o[0].offsetWidth,c=o[0].offsetHeight,d=t(this.options.gravity,this.$element[0]);switch(d.charAt(0)){case"n":l={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-u/2};break;case"s":l={top:s.top-c-this.options.offset,left:s.left+s.width/2-u/2};break;case"e":l={top:s.top+s.height/2-c/2,left:s.left-u-this.options.offset};break;case"w":l={top:s.top+s.height/2-c/2,left:s.left+s.width+this.options.offset}}if(2==d.length&&("w"==d.charAt(1)?l.left=s.left+s.width/2-15:l.left=s.left+s.width/2-u+15),o.css(l).addClass("tipsy-"+d+this.options.theme),o.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+d.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&e(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),o.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):o.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var f="tipsyuid"+r++;o.attr("id",f),this.$element.attr("aria-describedby",f)}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),(e=(""+e).replace(/(^\s*|\s*$)/,""))||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){if(e.fn.tipsy.enable(),!0===t)return this.data("tipsy");if("string"==typeof t){var r=this.data("tipsy");return r&&r[t](),this}function a(n){var r=e.data(n,"tipsy");return r||(r=new i(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",r)),r}function o(){if(!0===e.fn.tipsy.enabled){var r=a(this);r.hoverState="in",0===t.delayIn?r.show():(r.fixTitle(),setTimeout(function(){"in"==r.hoverState&&n(r.$element)&&r.show()},t.delayIn))}}function s(){var e=a(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()},t.delayOut)}if((t=e.extend({},e.fn.tipsy.defaults,t)).theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each(function(){a(this)}),"manual"!=t.trigger){var l="hover"==t.trigger?"mouseenter mouseover touchstart":"focus",u="hover"==t.trigger?"mouseleave mouseout touchmove touchleave":"blur";if(t.live&&!0!==t.live)e(this).on(l,t.live,o),e(this).on(u,t.live,s);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var c=t.live?"live":"bind";this[c](l,o)[c](u,s)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(t,n,r){return function(){var i={ns:r[0],ew:r.length>1&&r[1]},a=e(document).scrollTop()+t,o=e(document).scrollLeft()+n,s=e(this);return s.offset().top<a&&(i.ns="n"),s.offset().left<o&&(i.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<n&&(i.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(r)},OMSm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf"),s=n("VPQO"),l=n("EAgE"),u=n("P4S0");t.default=function(e){var t=e.commentId,n=e.author,r=void 0===n?{}:n,i=e.activateForm;return a.default.createElement("button",{className:"w100p border border-grey-500 bg-white py1 type-12",onClick:function(){(0,s.telegraf)(l.TELEGRAF_METHODS.INCREMENT,u.TELEGRAF_ACTIONS.REPLY_FORM_OPENED),i(t)}},(0,o.boundT)("project_page.comments.Reply_to_user",{name:r.name}))}},OXrv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckout=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("Z6GA");t.createCheckout=function(e){return(0,i.fetchGraph)("\n  mutation ($projectId: ID!, $amount: String!, $locationId: String, $rewardId: ID) {\n    createCheckout(input: {\n        projectId: $projectId,\n        amount: $amount,\n        locationId: $locationId,\n        rewardId: $rewardId}) {\n          checkout {\n            id\n          }\n    }\n  }\n",r({},e))}},P4S0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAGE_SIZE={COMMENTS:25,REPLIES:3},t.USER_TYPES={CREATOR:"creator",COLLABORATOR:"collaborator",BACKER:"backer",KSR_ADMIN:"ksr admin",SUPERBACKER:"superbacker"},t.TELEGRAF_ACTIONS={REPLY_FORM_OPENED:"comments_reply_form_opened",LOAD_MORE_COMMENTS:"comments_load_more_comments_clicked",LOAD_PREVIOUS_REPLIES:"comments_load_previous_replies_clicked",LOAD_MORE_COMMENTS_TIME:"comments_load_more_comments_time",LOAD_PREVIOUS_REPLIES_TIME:"comments_load_previous_replies_time"},t.TEMP_COMMENT_ID_PREFIX="temp-comment"},PGqv:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=n("4RZc");function a(e){return e&&e.__esModule?e:{default:e}}(0,a(n("8NzR")).default)("body#posts_edit",function(e){var t;(0,r.default)(document).on("click",".wym_tools li a",function(){(0,i.track)("Editor Tool Click",{tool_clicked:(0,r.default)(this).attr("title"),context:"post_edit_body"})}),e.find(".notification_toggle a").on("click",function(){e.find(".radio_message").removeClass("visible"),e.find("."+(0,r.default)(this).attr("data-backers")+"_message").addClass("visible")}),e.find(".ksr_toggle a.all_backers").on("click",function(){(t=e.find(".select_backers_message input:checkbox:not(:checked)")).prop("checked",!0),(0,i.track)("Update Notifications Toggle",{toggled_to:"all_backers"})}),e.find(".ksr_toggle a.select_backers").on("click",function(){t&&t.prop("checked",!1),(0,i.track)("Update Notifications Toggle",{toggled_to:"select_tiers"})}),e.find(".ksr_toggle a.public").on("click",function(){e.find("#post_public").val("1"),(0,i.track)("Update Visibility Toggle",{toggled_to:"anyone"})}),e.find(".ksr_toggle a.private").on("click",function(){e.find("#post_public").val("0"),(0,i.track)("Update Visibility Toggle",{toggled_to:"backers_only"})}),e.find(".email_notifications input.checkbox").on("change",function(){(0,i.track)("Update Tier Notification Change",{toggled_to:(0,r.default)(this).is(":checked")?"checked":"unchecked",selected_reward_id:(0,r.default)(this).data("reward-id"),selected_reward_minimum:(0,r.default)(this).data("reward-minimum")})})})},PP63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thanksPageRecs=void 0;var r=s(n("GiK3")),i=s(n("O27J")),a=n("d4Y8"),o=n("OBzQ");function s(e){return e&&e.__esModule?e:{default:e}}t.thanksPageRecs=function(){var e=document.getElementById("js-recommended-projects");e&&(0,o.fetchThanksPageRecsQuery)({imageWidth:400,projectId:e.dataset.similar_to,optOutOfRecommendation:e.hasAttribute("data-opt_out_of_recommendations")}).then(function(t){if(t.data){var n=t.data.projects.nodes;n.length&&i.default.render(r.default.createElement(a.ProjectCardContainer,{refTag:"thanks",projects:n}),e)}})}},"Ps9/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LoadMore",function(){return l});var r=n("b04z"),i=(n.n(r),n("3C9o")),a=n.n(i),o=n("Z5jf"),s=(n.n(o),n("GiK3")),l=(n.n(s),function(e){var t=e.buttonColor,n=void 0===t?"white":t,i=e.showingCount,l=e.totalCount,u=e.pageSize,c=e.onClick,d=e.loading,f=e.remainingI18nKey,h=e.buttonI18nKey,p=e.hasMorePages,m=e.atoms,g=void 0===m?[]:m;return l>u?s.createElement("div",{className:g.join(" ")},s.createElement("div",{className:"w100p center mb3 dark-grey-500 type-12"},s.createElement(o.BoundTranslate,{i18nKey:f,showing:i,total:l})),p&&s.createElement(r.Button,{color:n,onClick:c,atoms:["block","w100p"]},d?s.createElement(a.a,{size:"medium"}):s.createElement(o.BoundTranslate,{i18nKey:h}))):null})},PzQG:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("rI7t"),(0,a.default)(document).ready(function(){(0,a.default)(".sortable_table").tablesorter({textExtraction:function(e){var t;return void 0!==(t=(0,a.default)(e).closest("td").data("table-value"))?t:e.innerHTML.replace(/[,?!\s,%$]/g,"")}})})},Q4dB:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("YC2V")),a=u(n("c5nH")),o=u(n("8NzR")),s=u(n("L3hI")),l=u(n("wmCY"));function u(e){return e&&e.__esModule?e:{default:e}}(0,o.default)(".NS_pledges__shipping_select",function(){var e,t=(0,r.default)();function n(){var t,n=(0,r.default)(this),i=n.val(),o=e[i];return o?(t=parseFloat(o.cost),n.text(t>0?l.default.t("onloads.views.pledges.checkout_shipping.location_name_and_shipping_amount",{name:n.data("name"),amount:s.default.money(t,{precision:0,currency:a.default.get("currency")})}):n.data(name))):n.remove(),n}(0,r.default)(document).on("render_shipping_select",function(a,o){!function(a,o){e={},t.length||(t=a.clone());var s=t.clone();(0,r.default)(o.shipping_rules).each(function(t,n){e[n.location_id]=n}),s.find('option:not([value=""])').each(n),a.html(s.html()),a.val(i.default.get("location_id")),a.val(a.val()).trigger("change")}(o.select,o.reward)})})},"QEM/":function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("9VV1")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS-projects__admin_keyboard_control",function(e){(0,r.default)(document).on("keydown",function(t){if(t.ctrlKey){var n=e.find("#project_moderated_state"),i=e.find("form"),s="";switch(t.which){case 65:if("submitted"===o.default.get("state"))return;s="acceptable";break;case 84:s="tolerated";break;default:return}n.val(s),r.default.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),success:function(){(0,a.default)({info:s})}}),(0,r.default)("#admin-nav-wrap span.moderation_status").text(s.substring(0,3))}})})},"Qhe+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("QmgZ");Object.defineProperty(t,"GraphQLError",{enumerable:!0,get:function(){return r.GraphQLError}});var i=n("6fpj");Object.defineProperty(t,"syntaxError",{enumerable:!0,get:function(){return i.syntaxError}});var a=n("t/I/");Object.defineProperty(t,"locatedError",{enumerable:!0,get:function(){return a.locatedError}});var o=n("Iqx9");Object.defineProperty(t,"printError",{enumerable:!0,get:function(){return o.printError}});var s=n("zZmH");Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return s.formatError}})},Qijp:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){var n,r=e(this),i=r.find("input[type=text]"),a=r.find(".ss-delete"),o=i.siblings(".ss-search");function s(){this.value?a.show():a.hide()}function l(){i.val(""),i.trigger("livesearch:cancel").trigger("livesearch:close_results")}i.livesearch_input_dropdown(e.extend(t,{update_input:!1})),n=i.data("livesearch.input_dropdown"),s.call(i[0]),i.on("keypress cut paste input livesearch:close_results blur",s),i.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),i.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),i.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=i.siblings(".results");n.select(e.find("li:first"))}}),a.on("click",function(){i.focus(),l()}),i.on("livesearch:close_results",function(){i.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),i.on("blur",function(){i.val().length<3&&l()})})}}(r)},QmgZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLError=a;var r=n("Iqx9"),i=n("Nvbj");function a(e,t,n,r,o,s,l){var u=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,c=n;if(!c&&u){var d=u[0];c=d&&d.loc&&d.loc.source}var f=r;!f&&u&&(f=u.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),f&&0===f.length&&(f=void 0);var h=void 0;r&&n?h=r.map(function(e){return(0,i.getLocation)(n,e)}):u&&(h=u.reduce(function(e,t){return t.loc&&e.push((0,i.getLocation)(t.loc.source,t.loc.start)),e},[])),Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:h||void 0,enumerable:!0},path:{value:o||void 0,enumerable:!0},nodes:{value:u||void 0},source:{value:c||void 0},positions:{value:f||void 0},originalError:{value:s},extensions:{value:l||s&&s.extensions}}),s&&s.stack?Object.defineProperty(this,"stack",{value:s.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}a.prototype=Object.create(Error.prototype,{constructor:{value:a},name:{value:"GraphQLError"},toString:{value:function(){return(0,r.printError)(this)}}})},QqbN:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=d(n("l/Rs")),a=d(n("shXp")),o=d(n("/V0p")),s=d(n("hwML"));n("wgDV");var l,u,c=d(n("eF8u"));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return a.default.map(navigator.mimeTypes,function(e){return[e.type,e.description].join("|")})}function h(e){return(new o.default.SHA256).hex(e)}l=a.default.memoize(function(){var e,t,n,i,o,s,l,u,c,d,p=(e=["AdobeReader","Flash","Quicktime","RealPlayer","Shockwave","Silverlight","VLC","WindowsMediaPlayer"],a.default.chain(e).zip(a.default.map(e,function(e){try{return window.PluginDetect.getVersion(e)}catch(e){return e.description}})).filter(a.default.last).value()),m=a.default.map(navigator.plugins,function(e){return[e.name,e.description,e.filename,e.length].join("|")}),g=f(),v=(t=navigator.getGamepads?navigator.getGamepads():[],a.default.chain(t).filter(a.default.identity).map(function(e){return[e.index,e.id].join("|")}).value()),_=function(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],n=function(e){var t=document.createElement("span");t.style.fontFamily=e,t.style.fontSize="72px";var n=document.createTextNode("mmmmmmmmmmlli");return t.appendChild(n),t},r=a.default.map(t,n),i=a.default.map(e,function(e){return a.default.map(t,function(t){return n(e+","+t)})}),o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",a.default.forEach(a.default.flatten(i).concat(r),function(e){o.appendChild(e)});var s=document.getElementsByTagName("body")[0];s.appendChild(o);var l=function(e){var t=e.offsetHeight;return[e.offsetWidth,t]},u=a.default.map(r,l),c=a.default.map(i,function(e){return a.default.map(e,l)});return s.removeChild(o),a.default.filter(e,function(e,n){var r,i,a;for(a=0;a<t.length;a+=1)if(r=c[n][a],i=u[a],r[0]!==i[0]||r[1]!==i[1])return!0;return!1})}(),y={pdc:p.length,pds:p.toString(),npc:m.length,nps:m.toString(),mtc:g.length,mts:g.toString(),fnc:_.length,fns:_.toString(),gpc:v.length,gps:v.toString(),tzo:(s=new Date,l=s.getTimezoneOffset(),s.setDate(1),s.setMonth(1),i=s.getTimezoneOffset(),s.setMonth(6),(o=i-s.getTimezoneOffset())?l+"DST"+o:l.toString()),uas:navigator.userAgent,lan:[navigator.language,navigator.userLanguage,navigator.systemLanguage,navigator.languages].join("|"),cpu:[navigator.platform,navigator.hardwareConcurrency].join("|"),mpi:Math.PI.toString()};return d=[screen.height===screen.availHeight,screen.height===window.innerHeight,0===f().length,0===(new Date).getTimezoneOffset()],a.default.filter(d,a.default.identity).length/d.length<.75&&(n=function(){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){var t=e.getContext("2d"),n="a1b2,#3<!xy> 456.Z";return t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}}(),y.cnv=[n.substr(0,32),n.length,h(n)].join("|"),y.res=(u=[screen.availWidth,screen.availHeight],"object"===(void 0===(c=screen.orientation||screen.mozOrientation||screen.msOrientation)?"undefined":r(c))&&(c=c.type),c?c.match("portrait")&&u.reverse():u.sort().reverse(),u.push(screen.colorDepth),u.join("x"))),y}),u=a.default.memoize(function(){var e=l();return h(a.default.chain(["pds","nps","mts","fns","gps","tzo","uas","lan","cpu","cnv","mpi","res"]).map(function(t){return e[t]}).map(function(e){return void 0===e?"":e}).map(function(e){return e.toString()}).value().join("\n"))});window.log_device=function(){var e=function(){var e,t,n;if(window.koala_device_endpoint){try{t=u()}catch(e){t=null}e={partition_key:(0,s.default)(),device_id2:t,visitor_id:(0,s.default)(),ip_address:window.current_ip,user_uid:(n=c.default,void 0===n||null===n||""===n||"object"!==(void 0===n?"undefined":r(n))?null:"function"==typeof n.get?n.get("id")||null:n.id&&n.id||null)},window.enabled_features&&window.enabled_features.device_components&&(e.components=l()),i.default.ajax({type:"POST",url:window.koala_device_endpoint,data:JSON.stringify(e),contentType:"text/plain; charset=UTF-8"})}};a.default.defer(function(){e()})}},QzNM:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};i(n("GiK3"));var r=i(n("KSGD"));function i(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},R4hA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},RH2O:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("GiK3"),i=n("KSGD"),a=n.n(i),o=a.a.shape({trySubscribe:a.a.func.isRequired,tryUnsubscribe:a.a.func.isRequired,notifyNestedSubs:a.a.func.isRequired,isSubscribed:a.a.func.isRequired}),s=a.a.shape({subscribe:a.a.func.isRequired,dispatch:a.a.func.isRequired,getState:a.a.func.isRequired});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",i=function(e){function i(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a[t]=n.store,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e),i.prototype.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},i.prototype.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return i.propTypes={store:s.isRequired,children:a.a.element.isRequired},i.childContextTypes=((e={})[t]=s.isRequired,e[n]=o,e),i}var u=l(),c=n("hYij"),d=n.n(c),f=n("crWv"),h=n.n(f);var p=null,m={notify:function(){}};var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=m}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=p,e=p},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==p&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=m)},e}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var _=0,y={};function b(){}function w(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.getDisplayName,l=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,u=i.methodName,c=void 0===u?"connectAdvanced":u,f=i.renderCountProp,p=void 0===f?void 0:f,m=i.shouldHandleStateChanges,w=void 0===m||m,E=i.storeKey,k=void 0===E?"store":E,S=i.withRef,C=void 0!==S&&S,T=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),A=k+"Subscription",R=_++,x=((t={})[k]=s,t[A]=o,t),P=((n={})[A]=o,n);return function(t){h()("function"==typeof t,"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=l(n),a=v({},T,{getDisplayName:l,methodName:c,renderCountProp:p,shouldHandleStateChanges:w,storeKey:k,withRef:C,displayName:i,wrappedComponentName:n,WrappedComponent:t}),o=function(n){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t));return r.version=R,r.state={},r.renderCount=0,r.store=e[k]||t[k],r.propsMode=Boolean(e[k]),r.setWrappedInstance=r.setWrappedInstance.bind(r),h()(r.store,'Could not find "'+k+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+k+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[A]=t||this.context[A],e},o.prototype.componentDidMount=function(){w&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},o.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},o.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},o.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=b,this.store=null,this.selector.run=b,this.selector.shouldComponentUpdate=!1},o.prototype.getWrappedInstance=function(){return h()(C,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},o.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},o.prototype.initSelector=function(){var t=e(this.store.dispatch,a);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},o.prototype.initSubscription=function(){if(w){var e=(this.propsMode?this.props:this.context)[A];this.subscription=new g(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},o.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(y)):this.notifyNestedSubs()},o.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},o.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},o.prototype.addExtraProps=function(e){if(!(C||p||this.propsMode&&this.subscription))return e;var t=v({},e);return C&&(t.ref=this.setWrappedInstance),p&&(t[p]=this.renderCount++),this.propsMode&&this.subscription&&(t[A]=this.subscription),t},o.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(r.createElement)(t,this.addExtraProps(e.props))},o}(r.Component);return o.WrappedComponent=t,o.displayName=i,o.childContextTypes=P,o.contextTypes=x,o.propTypes=x,d()(o,t)}}var E=Object.prototype.hasOwnProperty;function k(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function S(e,t){if(k(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!E.call(t,n[i])||!k(e[n[i]],t[n[i]]))return!1;return!0}var C=n("2KeS");n("sMP3");function T(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function A(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function R(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=A(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=A(i),i=r(t,n)),i},r}}var x=[function(e){return"function"==typeof e?R(e):void 0},function(e){return e?void 0:T(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?T(function(t){return Object(C.bindActionCreators)(e,t)}):void 0}];var P=[function(e){return"function"==typeof e?R(e):void 0},function(e){return e?void 0:T(function(){return{}})}],I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function O(e,t,n){return I({},n,e,t)}var j=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r=n.pure,i=n.areMergedPropsEqual,a=!1,o=void 0;return function(t,n,s){var l=e(t,n,s);return a?r&&i(l,o)||(o=l):(a=!0,o=l),o}}}(e):void 0},function(e){return e?void 0:function(){return O}}];function D(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function N(e,t,n,r,i){var a=i.areStatesEqual,o=i.areOwnPropsEqual,s=i.areStatePropsEqual,l=!1,u=void 0,c=void 0,d=void 0,f=void 0,h=void 0;function p(i,l){var p,m,g=!o(l,c),v=!a(i,u);return u=i,c=l,g&&v?(d=e(u,c),t.dependsOnOwnProps&&(f=t(r,c)),h=n(d,f,c)):g?(e.dependsOnOwnProps&&(d=e(u,c)),t.dependsOnOwnProps&&(f=t(r,c)),h=n(d,f,c)):v?(p=e(u,c),m=!s(p,d),d=p,m&&(h=n(d,f,c)),h):h}return function(i,a){return l?p(i,a):(d=e(u=i,c=a),f=t(r,c),h=n(d,f,c),l=!0,h)}}function L(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,a),s=r(e,a),l=i(e,a);return(a.pure?N:D)(o,s,l,e,a)}var M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function F(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?w:t,r=e.mapStateToPropsFactories,i=void 0===r?P:r,a=e.mapDispatchToPropsFactories,o=void 0===a?x:a,s=e.mergePropsFactories,l=void 0===s?j:s,u=e.selectorFactory,c=void 0===u?L:u;return function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.pure,u=void 0===s||s,d=a.areStatesEqual,f=void 0===d?B:d,h=a.areOwnPropsEqual,p=void 0===h?S:h,m=a.areStatePropsEqual,g=void 0===m?S:m,v=a.areMergedPropsEqual,_=void 0===v?S:v,y=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=F(e,i,"mapStateToProps"),w=F(t,o,"mapDispatchToProps"),E=F(r,l,"mergeProps");return n(c,M({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:b,initMapDispatchToProps:w,initMergeProps:E,pure:u,areStatesEqual:f,areOwnPropsEqual:p,areStatePropsEqual:g,areMergedPropsEqual:_},y))}}();n.d(t,"Provider",function(){return u}),n.d(t,"createProvider",function(){return l}),n.d(t,"connectAdvanced",function(){return w}),n.d(t,"connect",function(){return U})},RIos:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,a=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)r=e.trim(t[n]),(i=e("<div class='ui-resizable-handle "+("ui-resizable-"+r)+"'></div>")).css({zIndex:o.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,a;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),a=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,a),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=i&&i[1]?i[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){o.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)((r=e(this.handles[n])[0])===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var r,i,a,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},a=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,d=t.pageX-a.left||0,f=t.pageY-a.top||0,h=this._change[o];return!!h&&(n=h.apply(this,[t,d,f]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(i.top=this.position.top+"px"),this.position.left!==l&&(i.left=this.position.left+"px"),this.size.width!==u&&(i.width=this.size.width+"px"),this.size.height!==c&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var n,r,i,a,o,s,l,u=this.options;return this._helper&&(i=(r=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&e.ui.hasScroll(n[0],"left")?0:this.sizeDiff.height,a=r?0:this.sizeDiff.width,o={width:this.helper.width()-a,height:this.helper.height()-i},s=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,u.animate||this.element.css(e.extend(o,{top:l,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,a,o,s=this.options;o={minWidth:r(s.minWidth)?s.minWidth:0,maxWidth:r(s.maxWidth)?s.maxWidth:1/0,minHeight:r(s.minHeight)?s.minHeight:0,maxHeight:r(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,s=r(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),i&&c&&(e.left=l-t.maxWidth),s&&d&&(e.top=u-t.minHeight),a&&d&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,r,i,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(i=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0);i.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize;return{top:this.originalPosition.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,a=i.length&&/textarea/i.test(i[0].nodeName),o=a&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,a,o,s,l,u=e(this).data("ui-resizable"),c=u.options,d=u.element,f=c.containment,h=f instanceof e?f.get(0):/parent/.test(f)?d.parent().get(0):f;h&&(u.containerElement=e(h),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=u.containerOffset,a=u.containerSize.height,o=u.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:o,l=e.ui.hasScroll(h)?h.scrollHeight:a,u.parentData={element:h,left:i.left,top:i.top,width:s,height:l}))},resize:function(t){var n,r,i,a,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||t.shiftKey,d={top:0,left:0},f=o.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(d=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),r=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),i&&a&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,c&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?n(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],n(t.alsoResize)):e.each(t.alsoResize,function(e){n(e)})},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,a=r.originalSize,o=r.originalPosition,s={height:r.size.height-a.height||0,width:r.size.width-a.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},l=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),a={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(s[t]||0);n&&n>=0&&(a[t]=n||null)}),t.css(a)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?l(i.alsoResize):e.each(i.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,a=t.originalPosition,o=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,u=s[1]||1,c=Math.round((r.width-i.width)/l)*l,d=Math.round((r.height-i.height)/u)*u,f=i.width+c,h=i.height+d,p=n.maxWidth&&n.maxWidth<f,m=n.maxHeight&&n.maxHeight<h,g=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=s,g&&(f+=l),v&&(h+=u),p&&(f-=l),m&&(h-=u),/^(se|s|e)$/.test(o)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.top=a.top-d):/^(sw)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.left=a.left-c):(t.size.width=f,t.size.height=h,t.position.top=a.top-d,t.position.left=a.left-c)}})}(r)},RORv:function(e,t,n){"use strict";var r,i=n("wmCY"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.xhr=!1,this.paused=n.paused||!1,this.options=e.extend({threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),default_page:1,page_by:function(e){return void 0!==e?e+1:this.default_page},page_param:"page",url:!1},n),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("mobius");r||(r=new t(e(this),n),e(this).data("mobius",r))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(n){n.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(e,t){this.options.extra_params[e]=t},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){this.paused||this.options.$context.scrollTop()+this.options.$context.height()-this.$elem.offset().top>this.$elem.get(0).scrollHeight-this.options.threshold&&this.load_next()},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,n,r){var i=parseInt(t,10),o=this;isNaN(i)||(n&&n.length||(n=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(i),success:function(t){if(o.xhr=!1,"html"===o.options.dataType){var s=e("<div>"+t+"</div>").find(".mobius").children();if(!s.length)return void o.$elem.trigger("mobius:error",[a.default.t("library.mobius.No_mobius_found_in_page",{page:i})]);n?n.after(s):o.options.prepend_next?o.$elem.prepend(s):o.$elem.append(s),o.options.trigger_next.jquery&&o.options.trigger_next.removeClass("loading_next"),o.$elem.trigger("mobius:loaded_page",[i,s])}else o.$elem.trigger("mobius:loaded_page",[i,t]);!r&&n||(o.current_page=i)},error:function(){o.xhr=!1}})))},build_paged_url:function(t){var n=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),r=void 0===this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),i=/(.*)#$/;i.test(n)&&(n=i.exec(n)[1]),r&&(r="&"+r),this.options.url&&(n=this.options.url);var a=-1!==n.indexOf("?")?"&":"?";return n.toString()+a+this.options.page_param+"="+t+r}})}(o)},RZwK:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("vgZZ");function s(e,t){var n=new Date;n.setHours(n.getHours()+1),(0,o.write_cookie)(e,t,n)}(0,a.default)(function(){(0,a.default)(document).on("mouseover","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").show()}),(0,a.default)(document).on("mouseout","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").hide()}),(0,a.default)(document).on("click",".hit-list li",function(){var e=(0,a.default)(this).find("a.target");e.length&&(window.location=e.attr("href"))}),(0,a.default)(document).on("click",".js-feature-clear-all",function(){JSON.parse(this.dataset.cookies).forEach(o.destroy_cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-clear",function(){(0,o.destroy_cookie)(this.dataset.cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-toggle",function(){s(this.dataset.cookie,this.dataset.enabled),window.location.reload()}),(0,a.default)(document).on("click",".js-experiment-toggle",function(){s(this.dataset.cookie,this.dataset.variant),window.location.reload()})})},Rx85:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("shXp")),a=s(n("9VV1")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}n("w6g1"),function(){function e(e,t){var n=e.add(t);n.siblings().removeClass("current_tab"),n.addClass("current_tab"),(0,r.default)(document).trigger("tab")}(0,r.default)("body.admin").delegate(".tab","click",function(){var t,n=(0,r.default)(this),i=n.attr("class").match(/tab_\d+/),a=n.find("a");i&&(t=(0,r.default)("."+i[0].replace(/tab/,"pane"))),i&&t.length&&(a.length&&""===r.default.trim(t.html())?(n.addClass("submitting"),t.html((0,r.default)('<div class="spinner" />').spin("ksr","#000")),r.default.ajax({url:a.attr("href")+".js",type:"GET",complete:function(r){n.removeClass("submitting"),t.html(r.responseText),e(n,t)}})):e(n,t),history.pushState(null,null,a.attr("href")))}),(0,r.default)("body.admin").delegate(".tab_label a","click",function(e){e.preventDefault()}),(0,r.default)("body.admin").delegate(".expand, .collapse","click",function(e){e.preventDefault(),(0,r.default)(this).add((0,r.default)(this).siblings(".expand, .collapse, .expandable")).toggle()});function t(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"ed":e+"ed"})}i.default.each(["user","project","task","backing"],function(e){(0,r.default)(document).on("click",".js-"+e+"_notes_hider, .js-"+e+"_notes_shower",function(){(0,r.default)(".js-"+e+"_note").toggle(),(0,r.default)(".js-"+e+"_notes_shower").toggle(),(0,r.default)(".js-"+e+"_notes_hider").toggle()})}),(0,r.default)(".js-admin_notes_expand").one("click",function(e){var t=(0,r.default)(this);e.preventDefault(),r.default.ajax({url:t.prop("href"),type:"GET",dataType:"html",success:function(e){t.closest(".js-notes").find(".expandable.ajax-container").html(e)}})}),(0,r.default)("body.admin").delegate(".batch_action .select_all","click",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".batch_action").parent().find("input.checkbox:not([disabled])");n.length?"Select all"===t.text()?(n.prop("checked",!0),t.text("Deselect all")):(n.prop("checked",!1),t.text("Select all")):(0,a.default)({error:"Nothing to select."})}),(0,r.default)("body.admin").delegate(".batch_action input.submit","click",function(e){e.preventDefault();var n=(0,r.default)(this),i=n.closest("form"),s=n.closest(".batch_action"),l=s.parent(),u=l.find("input.checkbox:checked"),c=u.map(function(e,t){return function(e){if("string"!=typeof e)return"";var t=e.match(/\d+/);return t?t[0]:null}(t.id)}).get(),d=n.attr("name"),f=i.attr("action"),h=s.data("type"),p=s.data("terse_type"),m=h.replace(/s$/,""),g={},v=l.find(".batch_"+d+"_info").data("confirm_url");if(l.find("input.checkbox:not(checked)").each(function(){(0,r.default)(this).parent().removeClass("highlight")}),u.length){var _=[];u.each(function(){var e;(0,r.default)(this).hasClass("string"!=typeof(e=d)?"":e.replace(/.$/,function(e){return"e"===e?"able":e+"able"}))?(0,r.default)(this).parent().removeClass("highlight"):(_.push((0,r.default)(this)),(0,r.default)(this).parent().addClass("highlight"))}),_.length?(0,a.default)({error:"You selected "+_.length+" "+o.default.pluralize(p,_.length)+" that cannot be "+t(d)+". Please unselect those and try again."}):(g[h]=c,r.default.ajax({url:v,data:g,type:"get"}).done(function(e){r.default.modal_confirm(function(){r.default.ajax({type:"PUT",url:f,data:g,success:function(){u.each(function(){var e=(0,r.default)(this);e.attr({checked:!1,disabled:!0}),e.closest("."+m).addClass(t(d)).find(".status").html(t(d))}),(0,a.default)({success:"Selected "+p+" were "+t(d)})},error:function(){(0,a.default)({error:"There was a problem "+d+"ing one or more of those "+p+". Please refresh the page and try again."})}})},{title:"Batch "+d,message:e,confirm_text:o.default.capitalize(d)+" "+c.length+" "+o.default.pluralize(p,c.length),cancel_text:"cancel"===d?"never mind":"cancel"})}))}else(0,a.default)({error:"No "+p+" selected to "+d+"."})}),(0,r.default)(document).on("submit",".zendesk_ticket form",function(e){var t=(0,r.default)(this);t.find(".submit").hide(),t.find(".loading").show(),e.preventDefault(),r.default.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"JSON",success:function(e){var n="https://kickstarter.zendesk.com/tickets/"+e.id,i=(0,r.default)("<a/>");i.attr("href",n),i.text(n),i.addClass("associated_zendesk_ticket right"),t.closest(".modal_dialog").trigger("close"),(0,a.default)({success:"Ticket sent successfully!"}),(0,r.default)("#send_to_zendesk").append(i)},complete:function(){t.find(".submit").show(),t.find(".loading").hide()}})})}()},S9Yq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,i=n("cFFW");var a="transform",o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;if(((r=i)&&r.__esModule?r:{default:r}).default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,i=void 0,a="",o=0;o<n.length;o++){var s=n[o];if(s+"TransitionProperty"in e){a="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),i=t[s]("AnimationEnd");break}}!r&&"transitionProperty"in e&&(r="transitionend");!i&&"animationName"in e&&(i="animationend");return e=null,{animationEnd:i,transitionEnd:r,prefix:a}}();o=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=l=v.animationEnd,t.transform=a=o+"-"+a,t.transitionProperty=u=o+"-transition-property",t.transitionDuration=c=o+"-transition-duration",t.transitionDelay=f=o+"-transition-delay",t.transitionTiming=d=o+"-transition-timing-function",t.animationName=h=o+"-animation-name",t.animationDuration=p=o+"-animation-duration",t.animationTiming=m=o+"-animation-delay",t.animationDelay=g=o+"-animation-timing-function"}t.transform=a,t.transitionProperty=u,t.transitionTiming=d,t.transitionDelay=f,t.transitionDuration=c,t.transitionEnd=s,t.animationName=h,t.animationDuration=p,t.animationTiming=m,t.animationDelay=g,t.animationEnd=l,t.default={transform:a,end:s,property:u,timing:d,delay:f,duration:c}},SNFf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=r.default.extend({},e);return t.projects=t.projects.map(function(e){return e.map(function(e){return(0,i.default)(e)})}),t};var r=a(n("l/Rs")),i=a(n("TXOG"));function a(e){return e&&e.__esModule?e:{default:e}}},SSTo:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body#claims_new",function(){(0,r.default)(".js-not-contacted").on("click",function(){(0,r.default)(".js-not-contacted-message").show(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-section").hide(),(0,r.default)(".js-yes-contacted").hide()}),(0,r.default)(".js-contacted").on("click",function(){(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show()}),(0,r.default)(".js-type-owner").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-trademark-section").show(),(0,r.default)(".js-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-name").hide(),(0,r.default)(".js-owner-name-text").val(""),(0,r.default)(".js-owner-name").hide()):((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show(),(0,r.default)(".js-owner-name").hide(),(0,r.default)(".js-owner-name-text").val(""))}),(0,r.default)(".js-type-representative").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-trademark-section").show(),(0,r.default)(".js-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-owner-name").show(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-name").show()):((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show(),(0,r.default)(".js-owner-name").show())}),(0,r.default)(".js-type-none").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").show(),(0,r.default)(".js-trademark-section").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").hide()):((0,r.default)(".js-none-of-the-above-error").show(),(0,r.default)(".js-claim-info").hide())})})},Sm8F:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("#stored_card_form",function(e){var t=e.find(".selected input.card_toggle");t.length||(t=(0,r.default)("input.card_toggle:first")),(0,r.default)(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t=(0,r.default)(this);(0,r.default)("input.card_toggle").not(t).closest(".payment_option").removeClass("selected"),t.closest(".payment_option").addClass("selected"),"click"===e.type&&setTimeout(function(){t.prop("checked",!0)},0)}),t.prop("checked",!0).trigger("change")})},SzcX:function(e,t,n){"use strict";var r,i=n("6djF"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs");n("l/Rs");!function(e){function t(e,t){return a.default.pageX(e)-t.offset().left}e.fn.draggable_bar=function(n,r){return r||(r=n,n=null),this.each(function(){var i=e(this),a=null,o=0;i.on("mousedown touchstart",n,function(n){var r=e(n.target);a=n.target,o=t(n,r)}),i.on("mousedown touchstart mousemove touchmove",n,function(e){var n;a&&(n=t(e,i)/i.width())>0&&n<1&&r(n,a,o)}),e(document).on("mouseup touchend",function(){a=null})})}}(o)},TGXB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}var s={get:function(e,t,n,i){return!n.hasClass("loading")&&(n.trigger("before_ksrjson",[n,i]),r.default.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){n.addClass("loading")},success:function(e){s.parse_response(e,n)},complete:function(){n.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(n){n.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),r.default.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var n=e.find("input.confirmation");return e.is(".submitting")?((0,i.default)({error:a.default.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):!(n.length&&!n.prop("checked"))&&(t.addClass("loading"),void e.addClass("submitting"))},success:function(n){s.parse_response(n,t,e),t.trigger("ksr_json:afterSuccess")},error:function(n){s.parse_error(n,t,e),t.trigger("ksr_json:afterError")},complete:function(){t.removeClass("loading"),e.removeClass("submitting"),t.trigger("ksr_json:afterComplete")}})})},parse_response:function(e,t,n){var o,s,l,u={open:function(){(0,r.default)(n).trigger("jGrowl.open_"+e.status)},close:function(){(0,r.default)(n).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),r.default.isArray(e.flash)&&r.default.isArray(e.flash[0])?(0,i.default)(r.default.map(e.flash,function(e){return e[e.length-1]}),u):e.flash&&(0,i.default)(e.flash,u),parseInt(e.status,10)){case 200:case 406:o=(0,r.default)(e.data),e.data&&e.data.length>0&&(e.modal?((l=r.default.create_modal_dialog("",e.data)).data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(l.find(".modal_dialog_body")[0])):(o.find("a.cancel").length>0?(s=t.contents().detach(),o.find("a.cancel").one("click",function(){return t.contents().remove(),s.appendTo(t),!1})):t.contents().remove(),t.html(o),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),(0,r.default)('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){(0,r.default)('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:(0,i.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:(0,i.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")})}return e},parse_error:function(e,t,n){s.parse_response({flash:{},status:e.status,data:e.body},t,n)}};t.default=s},TJ96:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#spotlight_projects_index",function(e){var t,n;e.hasClass("spotlight_projects_watch")?(t="Watch",n="iTunes"):(t="Play",n="Steam"),(0,r.default)(".share-link").on("click",function(e){var n=(0,r.default)(window).height()/2-250,i=(0,r.default)(window).width()/2-250;window.open((0,r.default)(this).attr("href"),"name","height=500, width=500, top="+n+", left="+i),(0,a.track)(t+" Page Share"),e.preventDefault()}),(0,a.trackLinks)("a.js-service-more",t+" Click "+n+" More Link"),(0,a.trackLinks)("a.track-service",t+" Click "+n+" Link"),(0,a.trackLinks)("a.track-official",t+" Click Official Site Link"),(0,r.default)(".published_projects").on("click","a.more",function(e){var t=(0,r.default)(this),n=(0,r.default)(".published_projects"),i=t.attr("href");t.remove(),r.default.ajax({url:i,method:"GET",data:"format=js",dataType:"html",success:function(e){n.append(e)}}),e.preventDefault()})})},TXOG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return e.creator_name=e.creator.name,e.percent_raised=e.pledged/e.goal*100,e.percent_raised_rounded=Math.round(e.percent_raised),e.percent_raised_to_100=Math.min(100,e.percent_raised),e.formatted_percent_raised=a.default.percent(e.percent_raised,{precision:0}),e.formatted_money=a.default.money(e.pledged,{precision:0,currency:e.currency}),e.formatted_goal=a.default.money(e.goal,{precision:0,currency:e.currency}),e.formatted_backers_count=a.default.format_number(e.backers_count,{precision:0}),e.count=e.backers_count,e.javascript_deadline=1e3*e.deadline,e.javascript_state_changed_at=1e3*e.state_changed_at,e.formatted_deadline=(0,o.format)("ll",e.javascript_deadline),e.formatted_state_changed_at=(0,o.format)("ll",e.javascript_state_changed_at),e.raw_score=e.recommendations_raw_score,e.weighted_score=e.recommendations_score,e.model_name=e.recommendations_model_name,e.project_state=e.state,e.section=e.ref||e.url_ref||"refined_search",function(e,t){t.blurb||(t.blurb=e.blurb);t.name||(t.name=e.name);t.feature_image_url=t.feature_image_attributes.image_urls.baseball_card,t["has_background_image?"]=!i.default.isEmpty(t.background_image_attributes),t["hide_background_black?"]=t["has_background_image?"]||t.background_color,t.border_color="",t.text_color&&(t.border_color="background-color: #"+t.text_color+";");t.text_color_style="",t.text_color&&(t.text_color_style="color: #"+t.text_color+";");t.background_color_style="",t.background_color&&(t.background_color_style="background-color: #"+t.background_color+";");t.card_style="",t.card_style+=t.text_color_style,t.card_style+=t.background_color_style,t.card_background_style="",t["has_background_image?"]&&(t.card_background_style="background-image: url("+t.background_image_attributes.image_urls.baseball_card+"); opacity: "+t.background_image_opacity+";")}(e,e.profile),r.default.each(["live","successful","canceled","failed"],function(){var t=String(this);e[t+"?"]=e.state===t}),e.url_ref?e.url_with_ref=(0,u.default)(e.urls.web.project).setSearch("ref",e.url_ref).toString():e.url_with_ref=e.urls.web.project,e["live_or_successful?"]="live"===e.state||"successful"===e.state,e["video?"]=null!==e.video&&void 0!==e.video,e["potd_today?"]=(0,l.default)(1e3*e.potd_at,new Date),e["staff_pick?"]=e.staff_pick,e["friends_backing?"]=e.friends&&e.friends.length>0,e["friends_backing?"]&&(e.truncated_friends=e.friends.slice(0,2),(t=i.default.map(e.truncated_friends,function(e){return"<strong>"+i.default.escape(e.name.split(" ")[0])+"</strong>"})).length<e.friends.length&&t.push("<strong>"+s.default.t("presenters.projects.baseball_card_tall.amount_more",{count:e.friends.length-t.length})+"</strong>"),e.escaped_sentence=s.default.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:a.default.to_sentence(t),count:t.length})),e.json=JSON.stringify(e),e.location_json=JSON.stringify(e.location),e.baseball_card_size||(e.baseball_card_size="tall"),e};var r=c(n("l/Rs")),i=c(n("shXp")),a=c(n("L3hI")),o=n("kVy0"),s=c(n("wmCY")),l=c(n("f4ga")),u=c(n("hBlz"));function c(e){return e&&e.__esModule?e:{default:e}}},"Tct/":function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r};n("hsYx"),(0,a.default)("#NS_banners__password_reset",function(e){var t=e.closest("li");KSR.store.getItem("password_reset_dismissed")||t.show(),e.find("a.dismiss").on("click",function(e){KSR.store.setItem("password_reset_dismissed",!0),t.hide(),e.preventDefault()})})},Tqsz:function(e,t,n){"use strict";n("lX5T");var r=n("l/Rs");n("l/Rs");!function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("sound_player",n))})},e.extend(t.prototype,{embed:function(t){var n="v"+parseInt(1e8*Math.random(),10),r=this;this.$container.find("span").attr("id",n),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",n,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+n,class:"ksr_player",name:"sound_player_"+n},function(n){if(n.success)r.jwplayer=jwplayer(n.ref);else{var i=e("<audio />",{src:r.$container.attr("data-file"),controls:!0,autoplay:t});r.$container.html(i),r.$audio=i}}),this.initialized=!0}})}(r)},Tvr3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UNLOADED="unloaded",t.IN_PROGRESS="trying",t.LOADED="loaded"},"U6+P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mountDataExportModal=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n("GiK3")),a=c(n("O27J")),o=n("Z5jf"),s=n("jRaX"),l=c(n("9VV1")),u=n("aq1o");function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.onClose,n=e.email,r=e.onClick;return i.default.createElement(u.OverlayModal,{headerCopy:(0,o.boundT)("user_settings.Download_my_personal_data"),onClose:t,size:"small"},i.default.createElement("div",null,i.default.createElement(o.BoundTranslate,{i18nKey:"user_settings.When_the_download_is_ready",email:i.default.createElement("b",null,n)})),i.default.createElement(u.PrimaryModalButton,{onClick:r},(0,o.boundT)("user_settings.Start_the_export")))};t.mountDataExportModal=function(e){var t=e.container,n=e.email,u=e.url,c=e.onSuccess,f=function(){return a.default.unmountComponentAtNode(t)},h=function(){c(),f()};a.default.render(i.default.createElement(d,{email:n,onClick:function(){return function(e){var t=e.url,n=e.onSuccess,i=e.onError;fetch(t,{method:"POST",credentials:"same-origin",headers:r({},(0,s.csrfHeader)(document),{Accept:"application/json","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(n).catch(function(){(0,l.default)({error:(0,o.boundT)("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")}),i()})}({url:u,onSuccess:h,onError:f})},onClose:f}),t)}},UBnO:function(e,t,n){"use strict";var r=o(n("shXp")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("uVjx"),n("+fgJ"),n("4C6Z");n("l/Rs");var s=n("l/Rs"),l=function(e,t){var n=this;this.options=s.extend({},this.default_options,t),Object.keys(this.constructor.decorator).forEach(function(e){var r=[n.constructor.decorator[e]];"function"==typeof t[e]&&r.push(t[e]),n.options[e]=function(){for(var e=0;e<r.length;e+=1)r[e].apply(n,arguments)}}),this.$input=e,this.$form=e.closest("form"),this.$container=e.closest(".js-asset-upload"),this.uploading_files=[]};l.prototype.raise=function(e){this.$input.trigger("error"),this.$form.trigger("ksr_file_upload:reset"),(0,i.default)({error:e}),this.$container.removeClass("uploading")},l.prototype.default_options={type:"POST",dataType:"text",mimeTypes:[],paramsUrl:null},l.prototype.identifier_for_file=function(e){return e.name+e.size+e.type+e.lastModified},(l.decorator={}).add=function(e,t){var n=this,i=t.files[0],o=i.name.replace(/\s+/g,"_"),l=this.identifier_for_file(i);if(this.options.mimeTypes&&this.options.mimeTypes.length>0&&this.options.mimeTypes.indexOf(i.type)<0)return this.raise(a.default.t("library.adhoc_fileuploader.This_is_not_a_valid_file_type")),!1;this.options.paramsUrl?s.ajax({url:this.options.paramsUrl,type:"GET",data:{filename:o,filetype:i.type},success:function(e){t.paramName="file",t.formData=r.default.map(e.params,function(e,t){return{name:t,value:e}}),t.submit(),n.uploading_files.push(l)},error:function(){n.raise(a.default.t("library.adhoc_fileuploader.Theres_something_wrong_with_the_filename_Please",{file_name:i.name}))}}):(t.submit(),this.uploading_files.push(l))},l.decorator.done=function(e,t){var n=t.files[0],r=this.identifier_for_file(n);this.uploading_files=this.uploading_files.filter(function(e){return e!==r}),this.uploading_files.length||(this.$container.removeClass("uploading"),window.onbeforeunload=this.previous_onbeforeunload)},l.decorator.submit=function(){this.$container.addClass("uploading"),this.previous_onbeforeunload=window.onbeforeunload;var e=this;window.onbeforeunload=function(){if(e.$container.hasClass("uploading"))return a.default.t("library.adhoc_fileuploader.Your_upload_has_not_completed_yet_Click_Stay")}},l.decorator.progress=function(e,t){var n=this.$container.find(".progress"),r=n.filter(".tmpl");if(r.length){var i=t.formData[2].value.replace(/[^\w-_+]/g,"_");(n=this.$container.find("."+i)).length||(n=r.clone().addClass(i).removeClass("tmpl"),s(".progress:last").after(n))}var o=parseInt(t.loaded/t.total*100,10);n.find(".bar").css("width",o+"%"),n.find(".percentage").text(o+"%"),100===o&&(n.addClass("finished"),n.find(".percentage").text(a.default.t("library.adhoc_fileuploader.Processing")))},l.decorator.fail=function(){this.raise(a.default.t("library.adhoc_fileuploader.There_was_an_error_with_this_file_Please_try_a_different"))},s.fn.adhoc_fileuploader=function(e){s(this).each(function(){var t=new l(s(this),e);s(this).fileupload(t.options)})}},UE8d:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n("8+5l")),a=f(n("A4of")),o=f(n("lSD1")),s=n("S9Yq"),l=f(n("GiK3")),u=f(n("KSGD")),c=n("O27J"),d=n("QzNM");function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=[];s.transitionEnd&&p.push(s.transitionEnd),s.animationEnd&&p.push(s.animationEnd);u.default.node,d.nameShape.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.number,u.default.number,u.default.number;var m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=h(this,e.call.apply(e,[this].concat(a))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,c.findDOMNode)(this);if(r){var o=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||o+"-active",u=null,d=void 0;(0,i.default)(r,o),this.queueClassAndNode(l,r);var f=function(e){e&&e.target!==r||(clearTimeout(u),d&&d(),(0,a.default)(r,o),(0,a.default)(r,l),d&&d(),t&&t())};n?(u=setTimeout(f,n),this.transitionTimeouts.push(u)):s.transitionEnd&&(d=function(e,t){return p.length?p.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){p.length&&p.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(r,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,o.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,i.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,l.default.cloneElement(l.default.Children.only(this.props.children),e)},t}(l.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},UExB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("ci1u"),s=n("Z5jf");t.default=function(){return a.default.createElement("div",{className:"px5 py8 mt2 bg-grey-100 flex justify-center items-center"},a.default.createElement(o.Icon,{name:"icon--message",size:"medium",atoms:["fill-dark-grey-400"]}),a.default.createElement("span",{className:"ml2 dark-grey-400"},(0,s.boundT)("project_page.comments.No_comments_yet")))}},UFhm:function(e,t,n){"use strict";function r(e,t,n,i){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var a={};n.fields.map(function(e){return r(a,e.name,e.value,i)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(n)){var o=(i||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map(function(e){var n={};return r(n,t,e,i),n[t.value]});else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw new Error('The inline argument "'+t.value+'" of kind "'+n.kind+'" is not supported.\n                    Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}Object.defineProperty(t,"__esModule",{value:!0});var i=["connection","include","skip","client","rest","export"];function a(e,t,n){if(n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var a=t,o={};return r.forEach(function(e){o[e]=a[e]}),n.connection.key+"("+JSON.stringify(o)+")"}return n.connection.key}var s=e;if(t){var l=JSON.stringify(t);s+="("+l+")"}return n&&Object.keys(n).forEach(function(e){-1===i.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?s+="@"+e+"("+JSON.stringify(n[e])+")":s+="@"+e)}),s}function o(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(e){var i=e.name,a=e.value;return r(n,i,a,t)}),n}return null}function s(e){return e.alias?e.alias.value:e.name.value}function l(e){return"Field"===e.kind}function u(e){return"InlineFragment"===e.kind}function c(e){return e&&"id"===e.type}function d(e,t){if(void 0===t&&(t={}),!e.directives)return!0;var n=!0;return e.directives.forEach(function(e){if("skip"===e.name.value||"include"===e.name.value){var r=e.arguments||[],i=e.name.value;if(1!==r.length)throw new Error("Incorrect number of arguments for the @"+i+" directive.");var a=r[0];if(!a.name||"if"!==a.name.value)throw new Error("Invalid argument for the @"+i+" directive.");var o=r[0].value,s=!1;if(o&&"BooleanValue"===o.kind)s=o.value;else{if("Variable"!==o.kind)throw new Error("Argument for the @"+i+" directive must be a variable or a boolean value.");if(void 0===(s=t[o.name.value]))throw new Error("Invalid variable referenced in @"+i+" directive.")}"skip"===i&&(s=!s),s||(n=!1)}}),n}var f=new Map;function h(e){var t=f.get(e);if(t)return t;var n=e.definitions.filter(function(e){return e.selectionSet&&e.selectionSet.selections}).map(function(e){return function e(t){return t.selectionSet&&t.selectionSet.selections.length>0?[t].concat(t.selectionSet.selections.map(function(t){return[t].concat(e(t))}).reduce(function(e,t){return e.concat(t)},[])):[t]}(e)}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.directives&&e.directives.length>0}).map(function(e){return e.directives}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return e.name.value});return f.set(e,n),n}var p=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function m(e,t){var n=t,r=[];if(e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new Error("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&r.push(e)}),void 0===n){if(1!==r.length)throw new Error("Found "+r.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment.");n=r[0].name.value}return p({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}].concat(e.definitions)})}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){void 0!==t&&null!==t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function v(e){if("Document"!==e.kind)throw new Error('Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new Error('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});if(t.length>1)throw new Error("Ambiguous GraphQL document: contains "+t.length+" operations")}function _(e){return v(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function y(e){var t=_(e);if(!t)throw new Error("GraphQL document is missing an operation");return t}function b(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function w(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function E(e){var t=_(e);if(!t||"query"!==t.operation)throw new Error("Must contain a query definition.");return t}function k(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function S(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,n=e.defaultValue,i={};return r(i,t.name,n),i});return g.apply(void 0,[{}].concat(t))}return{}}function C(e){if(Array.isArray(e))return e.map(function(e){return C(e)});if(null!==e&&"object"==typeof e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=C(e[n]));return t}return e}var T={kind:"Field",name:{kind:"Name",value:"__typename"}};function A(e,t){return e.selectionSet.selections.filter(function(e){return!(e&&"FragmentSpread"===e.kind&&!A(t[e.name.value],t))}).length>0}function R(e){return function(t){return e.some(function(e){return!(!e.name||e.name!==t.name.value)||!(!e.test||!e.test(t))})}}function x(e,t){var n=C(t);return n.definitions.forEach(function(t){!function e(t,n){if(!n.selections)return n;var r=t.some(function(e){return e.remove});return n.selections=n.selections.map(function(e){if("Field"!==e.kind||!e||!e.directives)return e;var n,i=R(t);return e.directives=e.directives.filter(function(e){var t=!i(e);return n||t||!r||(n=!0),t}),n?null:e}).filter(function(e){return!!e}),n.selections.forEach(function(n){"Field"!==n.kind&&"InlineFragment"!==n.kind||!n.selectionSet||e(t,n.selectionSet)}),n}(e,t.selectionSet)}),A(y(n),k(w(n)))?n:null}var P=new Map;function I(e){v(e);var t=P.get(e);if(t)return t;var n=C(e);return n.definitions.forEach(function(e){var t="OperationDefinition"===e.kind;!function e(t,n){void 0===n&&(n=!1),t.selections&&(n||t.selections.some(function(e){return"Field"===e.kind&&"__typename"===e.name.value})||t.selections.push(T),t.selections.forEach(function(t){"Field"===t.kind?0!==t.name.value.lastIndexOf("__",0)&&t.selectionSet&&e(t.selectionSet):"InlineFragment"===t.kind&&t.selectionSet&&e(t.selectionSet)}))}(e.selectionSet,t)}),P.set(e,n),n}var O={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||console.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}},j=new Map;var D=n("mSTb");function N(e){try{return e()}catch(e){console.error&&console.error(e)}}function L(e){return e.errors&&e.errors.length}function M(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(null!=e&&"object"==typeof e&&null!=t&&"object"==typeof t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!M(e[n],t[n]))return!1}for(var n in t)if(!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}return!1}function F(e){return Object(D.a)()||Object(D.c)()?function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(n){!t.hasOwnProperty(n)||null===t[n]||"object"!=typeof t[n]&&"function"!=typeof t[n]||Object.isFrozen(t[n])||e(t[n])}),t}(e):e}var B=Object.create({});function U(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||void 0===e||null===e)return null;if(Array.isArray(e))return U(e[0]);var t=[];return Object.keys(e).forEach(function(n){var r={kind:"Field",name:{kind:"Name",value:n}},i=U(e[n]);i&&(r.selectionSet=i),t.push(r)}),{kind:"SelectionSet",selections:t}}var H,G={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},z=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},q=function(){function e(){}return e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:m(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:t})},e.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},e.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:m(e.fragment,e.fragmentName)})},e.prototype.writeData=function(e){var t,n,r=e.id,i=e.data;if(r){var a=null;try{a=this.read({rootId:r,optimistic:!1,query:G})}catch(e){}var o=a&&a.__typename||"__ClientData",s=z({__typename:o},i);this.writeFragment({id:r,fragment:(t=s,n=o,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:n||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:U(t)}]}),data:s})}else this.writeQuery({query:function(e){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:U(e)}]}}(i),data:i})},e}();H||(H={});var W=!1,$=function(){function e(){}return e.prototype.ensureReady=function(){return Promise.resolve()},e.prototype.canBypassInit=function(){return!0},e.prototype.match=function(e,t,n){var r=n.store.get(e.id);return!!r&&(r.__typename?r.__typename===t||(function(e,t){if(void 0===t&&(t="warn"),!Object(D.b)()&&!B[e])switch(Object(D.c)()||(B[e]=!0),t){case"error":console.error(e);break;default:console.warn(e)}}("You are using the simple (heuristic) fragment matcher, but your queries contain union or interface types.\n     Apollo Client will not be able to able to accurately map fragments.To make this error go away, use the IntrospectionFragmentMatcher as described in the docs: https://www.apollographql.com/docs/react/recipes/fragment-matching.html","error"),n.returnPartialData=!0,!0):(W||(console.warn("You're using fragments in your queries, but either don't have the addTypename:\n  true option set in Apollo Client, or you are trying to write a fragment to the store without the __typename.\n   Please turn on the addTypename option and include __typename when writing fragments so that Apollo Client\n   can accurately match fragments."),console.warn("Could not find __typename on Fragment ",t,r),console.warn("DEPRECATION WARNING: using fragments without __typename is unsupported behavior and will be removed in future versions of Apollo client. You should fix this and set addTypename to true now."),Object(D.c)()||(W=!0)),n.returnPartialData=!0,!0))},e}(),V=function(){function e(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return e.prototype.match=function(e,t,n){if(!this.isReady)throw new Error("FragmentMatcher.match() was called before FragmentMatcher.init()");var r=n.store.get(e.id);if(!r)return!1;if(!r.__typename)throw new Error("Cannot match fragment because __typename property is missing: "+JSON.stringify(r));if(r.__typename===t)return!0;var i=this.possibleTypesMap[t];return!!(i&&i.indexOf(r.__typename)>-1)},e.prototype.parseIntrospectionResult=function(e){var t={};return e.__schema.types.forEach(function(e){"UNION"!==e.kind&&"INTERFACE"!==e.kind||(t[e.name]=e.possibleTypes.map(function(e){return e.name}))}),t},e}(),K=n("xC4e"),Y=function(){function e(e){void 0===e&&(e={}),this.data=e}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e.prototype.delete=function(e){this.data[e]=void 0},e.prototype.clear=function(){this.data={}},e.prototype.replace=function(e){this.data=e||{}},e}();function Q(e){return new Y(e)}var X,J=this&&this.__extends||(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Z=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="WriteError",t}return J(t,e),t}(Error);function te(e,t){var n=new ee("Error writing result to store for query:\n "+Object(K.print)(t));return n.message+="\n"+e.message,n.stack=e.stack,n}function ne(e){var t=e.result,n=e.dataId,i=e.selectionSet,o=e.context,f=o.variables,h=o.store,p=o.fragmentMap;return i.selections.forEach(function(e){var i=d(e,f);if(l(e)){var h=s(e),m=t[h];if(i)if(void 0!==m)!function(e){var t,n,i=e.field,o=e.value,s=e.dataId,l=e.context,u=l.variables,d=l.dataIdFromObject,f=l.store,h=function(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach(function(i){var a=i.name,o=i.value;return r(n[e.name.value],a,o,t)})}));var i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach(function(e){var n=e.name,a=e.value;return r(i,n,a,t)})),a(e.name.value,i,n)}(i,u),p=!1,m="";if(i.selectionSet&&null!==o)if(Array.isArray(o)){var g=s+"."+h;t=function e(t,n,r,i){return t.map(function(t,a){if(null===t)return null;var o=n+"."+a;if(Array.isArray(t))return e(t,o,r,i);var s=!0;if(i.dataIdFromObject){var l=i.dataIdFromObject(t);l&&(o=l,s=!1)}ie(o,r,i.processedData)||ne({dataId:o,result:t,selectionSet:r,context:i});var u={type:"id",id:o,generated:s};return u})}(o,g,i.selectionSet,l)}else{var v=s+"."+h,_=!0;if(re(v)||(v="$"+v),d){var y=d(o);if(y&&re(y))throw new Error('IDs returned by dataIdFromObject cannot begin with the "$" character.');y&&(v=y,_=!1)}if(ie(v,i,l.processedData)||ne({dataId:v,result:o,selectionSet:i.selectionSet,context:l}),t={type:"id",id:v,generated:_},(n=f.get(s))&&n[h]!==t){var b=n[h];if(c(t)&&t.generated&&c(b)&&!b.generated)throw new Error("Store error: the application attempted to write an object with no provided id but the store already contains an id of "+b.id+" for this object. The selectionSet that was trying to be written is:\n"+Object(K.print)(i));c(b)&&b.generated&&(m=b.id,p=!0)}}else t=null!=o&&"object"==typeof o?{type:"json",json:o}:o;var w,E=Z({},f.get(s),((w={})[h]=t,w));p&&function e(t,n,r){var i=r.get(t);var a=r.get(n);Object.keys(i).forEach(function(o){var s=i[o],l=a[o];c(s)&&re(s.id)&&c(l)&&e(s.id,l.id,r),r.delete(t),r.set(n,Z({},i,a))})}(m,t.id,f);(n=f.get(s))&&t===n[h]||f.set(s,E)}({dataId:n,value:m,field:e,context:o});else!(e.directives&&e.directives.length&&e.directives.some(function(e){return e.name&&"defer"===e.name.value}))&&o.fragmentMatcherFunction&&(Object(D.b)()||console.warn("Missing field "+h+" in "+JSON.stringify(t,null,2).substring(0,100)))}else{var g=void 0;if(u(e))g=e;else if(!(g=(p||{})[e.name.value]))throw new Error("No fragment named "+e.name.value+".");var v=!0;if(o.fragmentMatcherFunction&&g.typeCondition){var _={store:new Y({self:t}),returnPartialData:!1,hasMissingField:!1,cacheRedirects:{}};v=o.fragmentMatcherFunction({type:"id",id:"self",generated:!1},g.typeCondition.name.value,_),!Object(D.b)()&&_.returnPartialData&&console.error("WARNING: heuristic fragment matching going on!")}i&&v&&ne({result:t,selectionSet:g.selectionSet,dataId:n,context:o})}}),h}function re(e){return"$"===e[0]}function ie(e,t,n){if(!n)return!1;if(n[e]){if(n[e].indexOf(t)>=0)return!0;n[e].push(t)}else n[e]=[t];return!1}function ae(e,t,n,r,i,a){void 0===a&&(a={});var o=function(e){var t;v(e);for(var n=0,r=e.definitions;n<r.length;n++){var i=r[n];if("OperationDefinition"===i.kind){var a=i.operation;if("query"===a||"mutation"===a||"subscription"===a)return i}"FragmentDefinition"!==i.kind||t||(t=i)}if(t)return t;throw new Error("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}(t),s={fragmentMap:k(w(t)),contextValue:r,variableValues:i,resultMapper:a.resultMapper,resolver:e,fragmentMatcher:a.fragmentMatcher||function(){return!0}};return oe(o.selectionSet,n,s)}function oe(e,t,n){var r=n.fragmentMap,i=n.contextValue,a=n.variableValues,c={};return e.selections.forEach(function(e){if(d(e,a))if(l(e)){var f=function(e,t,n){var r=n.variableValues,i=n.contextValue,a=n.resolver,l=e.name.value,u=o(e,r),c={isLeaf:!e.selectionSet,resultKey:s(e),directives:function(e,t){if(e.directives&&e.directives.length){var n={};return e.directives.forEach(function(e){n[e.name.value]=o(e,t)}),n}return null}(e,r)},d=a(l,t,u,i,c);if(!e.selectionSet)return d;if(null==d)return d;if(Array.isArray(d))return function e(t,n,r){return n.map(function(n){return null===n?null:Array.isArray(n)?e(t,n,r):oe(t.selectionSet,n,r)})}(e,d,n);return oe(e.selectionSet,d,n)}(e,t,n),h=s(e);void 0!==f&&(void 0===c[h]?c[h]=f:se(c[h],f))}else{var p=void 0;if(u(e))p=e;else if(!(p=r[e.name.value]))throw new Error("No fragment named "+e.name.value);var m=p.typeCondition.name.value;if(n.fragmentMatcher(t,m,i)){var g=oe(p.selectionSet,t,n);se(c,g)}}}),n.resultMapper?n.resultMapper(c,t):c}function se(e,t){if(null===t||"object"!=typeof t)return t;Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&se(e[n],t[n])}),Object.keys(t).forEach(function(n){e.hasOwnProperty(n)||(e[n]=t[n])})}function le(e){this.message=e,this.stack=""}le.prototype=Error.prototype;var ue=ae,ce=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de="undefined"!=typeof Symbol?Symbol("id"):"@@id";var fe=function(e,t,n,r,i){var o=i.resultKey,s=i.directives;!function(e){if(!c(e))throw new Error("Encountered a sub-selection on the query, but the store doesn't have an object reference. This should never happen during normal use unless you have custom code that is directly manipulating the store; please file an issue.")}(t);var l,u=t.id,d=r.store.get(u),f=a(e,n,s),h=(d||{})[f];if(void 0===h&&r.cacheRedirects&&d&&(d.__typename||"ROOT_QUERY"===u)){var p=d.__typename||"Query",m=r.cacheRedirects[p];if(m){var g=m[e];g&&(h=g(d,n,{getCacheKey:function(e){return t=r.dataIdFromObject(e),void 0===n&&(n=!1),{type:"id",id:t,generated:n};var t,n}}))}}if(void 0===h){if(!r.returnPartialData)throw new Error("Can't find field "+f+" on object ("+u+") "+JSON.stringify(d,null,2)+".");return r.hasMissingField=!0,h}return null!=(l=h)&&"object"==typeof l&&"json"===l.type?t.previousResult&&M(t.previousResult[o],h.json)?t.previousResult[o]:h.json:(t.previousResult&&(h=function e(t,n){if(c(t))return ce({},t,{previousResult:n});if(Array.isArray(t)){var r=new Map;return Array.isArray(n)&&n.forEach(function(e){e&&e[de]&&r.set(e[de],e)}),t.map(function(t,i){var a=n&&n[i];return c(t)&&(a=r.get(t.id)||a),e(t,a)})}return t}(h,t.previousResult[o])),h)};function he(e){var t=e.store,n=e.query,r=e.variables,i=e.previousResult,a=e.returnPartialData,o=void 0===a||a,s=e.rootId,l=void 0===s?"ROOT_QUERY":s,u=e.fragmentMatcherFunction,c=e.config;r=g({},S(E(n)),r);var d={store:t,returnPartialData:o,dataIdFromObject:c&&c.dataIdFromObject||null,cacheRedirects:c&&c.cacheRedirects||{},hasMissingField:!1};return{result:ue(fe,n,{type:"id",id:l,previousResult:i},d,r,{fragmentMatcher:u,resultMapper:pe}),complete:!d.hasMissingField}}function pe(e,t){if(t.previousResult){var n=Object.keys(e);if(Object.keys(t.previousResult).reduce(function(e,t){return e&&n.indexOf(t)>-1},!0)&&n.every(function(n){return function e(t,n){if(t===n)return!0;if(!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length)return!1;return t.every(function(t,r){return e(t,n[r])})}(e[n],t.previousResult[n])}))return t.previousResult}return Object.defineProperty(e,de,{enumerable:!1,configurable:!1,writable:!1,value:t.id}),e}var me=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge=function(){function e(e){void 0===e&&(e={}),this.data=e,this.recordedData={}}return e.prototype.record=function(e){e(this);var t=this.recordedData;return this.recordedData={},t},e.prototype.toObject=function(){return me({},this.data,this.recordedData)},e.prototype.get=function(e){return this.recordedData.hasOwnProperty(e)?this.recordedData[e]:this.data[e]},e.prototype.set=function(e,t){this.get(e)!==t&&(this.recordedData[e]=t)},e.prototype.delete=function(e){this.recordedData[e]=void 0},e.prototype.clear=function(){var e=this;Object.keys(this.data).forEach(function(t){return e.delete(t)}),this.recordedData={}},e.prototype.replace=function(e){this.clear(),this.recordedData=me({},e)},e}();var ve=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ye={fragmentMatcher:new $,dataIdFromObject:function(e){if(e.__typename){if(void 0!==e.id)return e.__typename+":"+e.id;if(void 0!==e._id)return e.__typename+":"+e._id}return null},addTypename:!0,storeFactory:Q};var be,we=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.optimistic=[],n.watches=[],n.silenceBroadcast=!1,n.config=_e({},ye,t),n.config.customResolvers&&(console.warn("customResolvers have been renamed to cacheRedirects. Please update your config as we will be deprecating customResolvers in the next major version."),n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(console.warn("cacheResolvers have been renamed to cacheRedirects. Please update your config as we will be deprecating cacheResolvers in the next major version."),n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=n.config.addTypename,n.data=n.config.storeFactory(),n}return ve(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){if(void 0===e&&(e=!1),e&&this.optimistic.length>0){var t=this.optimistic.map(function(e){return e.data});return Object.assign.apply(Object,[{},this.data.toObject()].concat(t))}return this.data.toObject()},t.prototype.read=function(e){return e.rootId&&void 0===this.data.get(e.rootId)?null:(t={store:this.config.storeFactory(this.extract(e.optimistic)),query:this.transformDocument(e.query),variables:e.variables,rootId:e.rootId,fragmentMatcherFunction:this.config.fragmentMatcher.match,previousResult:e.previousResult,config:this.config},he(ce({},t,{returnPartialData:!1})).result);var t},t.prototype.write=function(e){!function(e){var t=e.dataId,n=e.result,r=e.document,i=e.storeFactory,a=void 0===i?Q:i,o=e.store,s=void 0===o?a():o,l=e.variables,u=e.dataIdFromObject,c=e.fragmentMatcherFunction,d=_(r),f=d.selectionSet,h=k(w(r));l=g({},S(d),l);try{ne({result:n,dataId:t,selectionSet:f,context:{store:s,storeFactory:a,processedData:{},variables:l,dataIdFromObject:u,fragmentMap:h,fragmentMatcherFunction:c}})}catch(e){throw te(e,r)}}({dataId:e.dataId,result:e.result,variables:e.variables,document:this.transformDocument(e.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:this.config.fragmentMatcher.match}),this.broadcastWatches()},t.prototype.diff=function(e){return he({store:this.config.storeFactory(this.extract(e.optimistic)),query:this.transformDocument(e.query),variables:e.variables,returnPartialData:e.returnPartialData,previousResult:e.previousResult,fragmentMatcherFunction:this.config.fragmentMatcher.match,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.push(e),function(){t.watches=t.watches.filter(function(t){return t!==e})}},t.prototype.evict=function(e){throw new Error("eviction is not implemented on InMemory Cache")},t.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this,n=this.optimistic.filter(function(t){return t.id!==e});this.optimistic=[],n.forEach(function(e){t.recordOptimisticTransaction(e.transaction,e.id)}),this.broadcastWatches()},t.prototype.performTransaction=function(e){var t=this.silenceBroadcast;this.silenceBroadcast=!0,e(this),t||(this.silenceBroadcast=!1),this.broadcastWatches()},t.prototype.recordOptimisticTransaction=function(e,t){var n=this;this.silenceBroadcast=!0;var r=function(e,t){return new ge(e).record(t)}(this.extract(!0),function(t){var r=n.data;n.data=t,n.performTransaction(e),n.data=r});this.optimistic.push({id:t,transaction:e,data:r}),this.silenceBroadcast=!1,this.broadcastWatches()},t.prototype.transformDocument=function(e){return this.addTypename?I(e):e},t.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},t.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:this.transformDocument(m(e.fragment,e.fragmentName)),variables:e.variables,rootId:e.id,optimistic:t})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:this.transformDocument(e.query),variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,query:this.transformDocument(m(e.fragment,e.fragmentName)),variables:e.variables})},t.prototype.broadcastWatches=function(){var e=this;this.silenceBroadcast||this.watches.forEach(function(t){var n=e.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic});t.callback(n)})},t}(q);function Ee(e){return e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(be||(be={}));var ke=n("zSos"),Se=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ce=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};var Te=function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}return Se(t,e),t}(Error);function Ae(e){return e.request.length<=1}function Re(e){return new ke(function(t){t.error(e)})}function xe(e,t){var n=Ce({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n=Ce({},n,"function"==typeof e?e(n):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Ce({},n)}}),Object.defineProperty(t,"toKey",{enumerable:!1,value:function(){return function(e){return Object(K.print)(e.query)+"|"+JSON.stringify(e.variables)+"|"+e.operationName}(t)}}),t}var Pe=function(e,t){return t?t(e):ke.of()},Ie=function(e){return"function"==typeof e?new Le(e):e},Oe=function(){return new Le(function(e,t){return ke.of()})},je=function(e){return 0===e.length?Oe():e.map(Ie).reduce(function(e,t){return e.concat(t)})},De=function(e,t,n){void 0===n&&(n=new Le(Pe));var r=Ie(t),i=Ie(n);return Ae(r)&&Ae(i)?new Le(function(t){return e(t)?r.request(t)||ke.of():i.request(t)||ke.of()}):new Le(function(t,n){return e(t)?r.request(t,n)||ke.of():i.request(t,n)||ke.of()})},Ne=function(e,t){var n=Ie(e);if(Ae(n))return console.warn(new Te("You are calling concat on a terminating link, which will have no effect",n)),n;var r=Ie(t);return Ae(r)?new Le(function(e){return n.request(e,function(e){return r.request(e)||ke.of()})||ke.of()}):new Le(function(e,t){return n.request(e,function(e){return r.request(e,t)||ke.of()})||ke.of()})},Le=function(){function e(e){e&&(this.request=e)}return e.prototype.split=function(t,n,r){return void 0===r&&(r=new e(Pe)),this.concat(De(t,n,r))},e.prototype.concat=function(e){return Ne(this,e)},e.prototype.request=function(e,t){throw new Error("request is not implemented")},e.empty=Oe,e.from=je,e.split=De,e.execute=Me,e}();function Me(e,t){return e.request(xe(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?b(t.query):""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t.indexOf(i)<0)throw new Error("illegal argument: "+i)}return e}(t))))||ke.of()}var Fe=n("2MIV"),Be=n.n(Fe),Ue=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ue(t,e),t.prototype[Be.a]=function(){return this},t}(ke),Ge=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var ze,qe=function(e){var t="";return Array.isArray(e.graphQLErrors)&&0!==e.graphQLErrors.length&&e.graphQLErrors.forEach(function(e){var n=e?e.message:"Error message not found.";t+="GraphQL error: "+n+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},We=function(e){function t(t){var n=t.graphQLErrors,r=t.networkError,i=t.errorMessage,a=t.extraInfo,o=e.call(this,i)||this;return o.graphQLErrors=n||[],o.networkError=r||null,o.message=i||qe(o),o.extraInfo=a,o}return Ge(t,e),t}(Error);!function(e){e[e.normal=1]="normal",e[e.refetch=2]="refetch",e[e.poll=3]="poll"}(ze||(ze={}));var $e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ke=function(e){function t(t){var n=t.scheduler,r=t.options,i=t.shouldSubscribe,a=void 0===i||i,o=e.call(this,function(e){return o.onSubscribe(e)})||this;return o.isCurrentlyPolling=!1,o.isTornDown=!1,o.options=r,o.variables=r.variables||{},o.queryId=n.queryManager.generateQueryId(),o.shouldSubscribe=a,o.scheduler=n,o.queryManager=n.queryManager,o.observers=[],o.subscriptionHandles=[],o}return $e(t,e),t.prototype.result=function(){var e=this;return new Promise(function(t,n){var r,i={next:function(n){t(n),e.observers.some(function(e){return e!==i})||e.queryManager.removeQuery(e.queryId),setTimeout(function(){r.unsubscribe()},0)},error:function(e){n(e)}};r=e.subscribe(i)})},t.prototype.currentResult=function(){if(this.isTornDown)return{data:this.lastError?{}:this.lastResult?this.lastResult.data:{},error:this.lastError,loading:!1,networkStatus:be.error};var e,t,n=this.queryManager.queryStore.get(this.queryId);if(e=n,void 0===(t=this.options.errorPolicy)&&(t="none"),e&&(e.graphQLErrors&&e.graphQLErrors.length>0&&"none"===t||e.networkError))return{data:{},loading:!1,networkStatus:n.networkStatus,error:new We({graphQLErrors:n.graphQLErrors,networkError:n.networkError})};var r,i=this.queryManager.getCurrentQueryResult(this),a=i.data,o=i.partial,s=!n||n.networkStatus===be.loading,l="network-only"===this.options.fetchPolicy&&s||o&&"cache-only"!==this.options.fetchPolicy,u={data:a,loading:Ee(r=n?n.networkStatus:l?be.loading:be.ready),networkStatus:r};if(n&&n.graphQLErrors&&"all"===this.options.errorPolicy&&(u.errors=n.graphQLErrors),!o){this.lastResult=Ve({},u,{stale:!1})}return Ve({},u,{partial:o})},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastError,this.isTornDown=!1},t.prototype.refetch=function(e){if("cache-only"===this.options.fetchPolicy)return Promise.reject(new Error("cache-only fetchPolicy option should not be used together with query refetch."));M(this.variables,e)||(this.variables=Ve({},this.variables,e)),M(this.options.variables,this.variables)||(this.options.variables=Ve({},this.options.variables,this.variables));var t=Ve({},this.options,{fetchPolicy:"network-only"});return this.queryManager.fetchQuery(this.queryId,t,ze.refetch).then(function(e){return F(e)})},t.prototype.fetchMore=function(e){var t=this;if(!e.updateQuery)throw new Error("updateQuery option is required. This function defines how to update the query data with the new results.");return Promise.resolve().then(function(){var n,r=t.queryManager.generateQueryId();return(n=e.query?e:Ve({},t.options,e,{variables:Ve({},t.variables,e.variables)})).fetchPolicy="network-only",t.queryManager.fetchQuery(r,n,ze.normal,t.queryId)}).then(function(n){return t.updateQuery(function(t,r){var i=r.variables;return e.updateQuery(t,{fetchMoreResult:n.data,variables:i})}),n})},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(n){e.updateQuery&&t.updateQuery(function(t,r){var i=r.variables;return e.updateQuery(t,{subscriptionData:n,variables:i})})},error:function(t){e.onError?e.onError(t):console.error("Unhandled GraphQL subscription error",t)}});return this.subscriptionHandles.push(n),function(){var e=t.subscriptionHandles.indexOf(n);e>=0&&(t.subscriptionHandles.splice(e,1),n.unsubscribe())}},t.prototype.setOptions=function(e){var t=this.options;this.options=Ve({},this.options,e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var n="network-only"!==t.fetchPolicy&&"network-only"===e.fetchPolicy||"cache-only"===t.fetchPolicy&&"cache-only"!==e.fetchPolicy||"standby"===t.fetchPolicy&&"standby"!==e.fetchPolicy||!1;return this.setVariables(this.options.variables,n,e.fetchResults)},t.prototype.setVariables=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),this.isTornDown=!1;var r=Ve({},this.variables,e);return M(r,this.variables)&&!t?0!==this.observers.length&&n?this.result():new Promise(function(e){return e()}):(this.lastVariables=this.variables,this.variables=r,this.options.variables=r,0===this.observers.length?new Promise(function(e){return e()}):this.queryManager.fetchQuery(this.queryId,Ve({},this.options,{variables:this.variables})).then(function(e){return F(e)}))},t.prototype.updateQuery=function(e){var t=this.queryManager.getQueryWithPreviousResult(this.queryId),n=t.previousResult,r=t.variables,i=t.document,a=N(function(){return e(n,{variables:r})});a&&(this.queryManager.dataStore.markUpdateQueryResult(i,r,a),this.queryManager.broadcastQueries())},t.prototype.stopPolling=function(){this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.options.pollInterval=void 0,this.isCurrentlyPolling=!1)},t.prototype.startPolling=function(e){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.options.pollInterval=e,this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)},t.prototype.onSubscribe=function(e){var t=this;return e._subscription&&e._subscription._observer&&!e._subscription._observer.error&&(e._subscription._observer.error=function(e){console.error("Unhandled error",e.message,e.stack)}),this.observers.push(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),1===this.observers.length&&this.setUpQuery(),function(){t.observers=t.observers.filter(function(t){return t!==e}),0===t.observers.length&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this;if(this.shouldSubscribe&&this.queryManager.addObservableQuery(this.queryId,this),this.options.pollInterval){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)}var t={next:function(t){e.lastResult=t,e.observers.forEach(function(e){return e.next&&e.next(t)})},error:function(t){e.lastError=t,e.observers.forEach(function(e){return e.error&&e.error(t)})}};this.queryManager.startQuery(this.queryId,this.options,this.queryManager.queryListenerForObserver(this.queryId,this.options,t))},t.prototype.tearDownQuery=function(){this.isTornDown=!0,this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.subscriptionHandles.forEach(function(e){return e.unsubscribe()}),this.subscriptionHandles=[],this.queryManager.removeObservableQuery(this.queryId),this.queryManager.stopQuery(this.queryId),this.observers=[]},t}(He),Ye=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inFlightRequestObservables=new Map,t.subscribers=new Map,t}return Ye(t,e),t.prototype.request=function(e,t){var n=this;if(e.getContext().forceFetch)return t(e);var r=e.toKey(),i=function(e){return n.inFlightRequestObservables.delete(e),n.subscribers.get(e)};if(!this.inFlightRequestObservables.get(r)){var a,o=t(e),s=new ke(function(e){var t=n.subscribers.get(r);return t||(t={next:[],error:[],complete:[]}),n.subscribers.set(r,{next:t.next.concat([e.next.bind(e)]),error:t.error.concat([e.error.bind(e)]),complete:t.complete.concat([e.complete.bind(e)])}),a||(a=o.subscribe({next:function(e){var t=i(r);n.subscribers.delete(r),t&&(t.next.forEach(function(t){return t(e)}),t.complete.forEach(function(e){return e()}))},error:function(e){var t=i(r);n.subscribers.delete(r),t&&t.error.forEach(function(t){return t(e)})}})),function(){a&&a.unsubscribe(),n.inFlightRequestObservables.delete(r)}});this.inFlightRequestObservables.set(r,s)}return this.inFlightRequestObservables.get(r)},t}(Le),Xe=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Je=function(){function e(e){var t=e.queryManager,n=e.ssrMode;this.inFlightQueries={},this.registeredQueries={},this.intervalQueries={},this.pollingTimers={},this.ssrMode=!1,this.queryManager=t,this.ssrMode=n||!1}return e.prototype.checkInFlight=function(e){var t=this.queryManager.queryStore.get(e);return t&&t.networkStatus!==be.ready&&t.networkStatus!==be.error},e.prototype.fetchQuery=function(e,t,n){var r=this;return new Promise(function(i,a){r.queryManager.fetchQuery(e,t,n).then(function(e){i(e)}).catch(function(e){a(e)})})},e.prototype.startPollingQuery=function(e,t,n){if(!e.pollInterval)throw new Error("Attempted to start a polling query without a polling interval.");return this.ssrMode?t:(this.registeredQueries[t]=e,n&&this.queryManager.addQueryListener(t,n),this.addQueryOnInterval(t,e),t)},e.prototype.stopPollingQuery=function(e){delete this.registeredQueries[e]},e.prototype.fetchQueriesOnInterval=function(e){var t=this;this.intervalQueries[e]=this.intervalQueries[e].filter(function(n){if(!t.registeredQueries.hasOwnProperty(n)||t.registeredQueries[n].pollInterval!==e)return!1;if(t.checkInFlight(n))return!0;var r=t.registeredQueries[n],i=Xe({},r);return i.fetchPolicy="network-only",t.fetchQuery(n,i,ze.poll).catch(function(){}),!0}),0===this.intervalQueries[e].length&&(clearInterval(this.pollingTimers[e]),delete this.intervalQueries[e])},e.prototype.addQueryOnInterval=function(e,t){var n=this,r=t.pollInterval;if(!r)throw new Error("A poll interval is required to start polling query with id '"+e+"'.");this.intervalQueries.hasOwnProperty(r.toString())&&this.intervalQueries[r].length>0?this.intervalQueries[r].push(e):(this.intervalQueries[r]=[e],this.pollingTimers[r]=setInterval(function(){n.fetchQueriesOnInterval(r)},r))},e.prototype.registerPollingQuery=function(e){if(!e.pollInterval)throw new Error("Attempted to register a non-polling query with the scheduler.");return new Ke({scheduler:this,options:e})},e}(),Ze=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initMutation=function(e,t,n){this.store[e]={mutationString:t,variables:n||{},loading:!0,error:null}},e.prototype.markMutationError=function(e,t){var n=this.store[e];n&&(n.loading=!1,n.error=t)},e.prototype.markMutationResult=function(e){var t=this.store[e];t&&(t.loading=!1,t.error=null)},e.prototype.reset=function(){this.store={}},e}(),et=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tt=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initQuery=function(e){var t=this.store[e.queryId];if(t&&t.queryString!==e.queryString)throw new Error("Internal Error: may not update existing query string in store");var n,r=!1,i=null;e.storePreviousVariables&&t&&t.networkStatus!==be.loading&&(M(t.variables,e.variables)||(r=!0,i=t.variables)),n=r?be.setVariables:e.isPoll?be.poll:e.isRefetch?be.refetch:be.loading;var a=[];t&&t.graphQLErrors&&(a=t.graphQLErrors),this.store[e.queryId]={queryString:e.queryString,document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:a,networkStatus:n,metadata:e.metadata},"string"==typeof e.fetchMoreForQueryId&&(this.store[e.fetchMoreForQueryId].networkStatus=be.fetchMore)},e.prototype.markQueryResult=function(e,t,n){this.store[e]&&(this.store[e].networkError=null,this.store[e].graphQLErrors=t.errors&&t.errors.length?t.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=be.ready,"string"==typeof n&&(this.store[n].networkStatus=be.ready))},e.prototype.markQueryError=function(e,t,n){this.store[e]&&(this.store[e].networkError=t,this.store[e].networkStatus=be.error,"string"==typeof n&&this.markQueryError(n,t,void 0))},e.prototype.markQueryResultClient=function(e,t){this.store[e]&&(this.store[e].networkError=null,this.store[e].previousVariables=null,this.store[e].networkStatus=t?be.ready:be.loading)},e.prototype.stopQuery=function(e){delete this.store[e]},e.prototype.reset=function(e){var t=this;this.store=Object.keys(this.store).filter(function(t){return e.indexOf(t)>-1}).reduce(function(e,n){return e[n]=et({},t.store[n],{networkStatus:be.loading}),e},{})},e}(),nt=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rt={listeners:[],invalidated:!1,document:null,newData:null,lastRequestId:null,observableQuery:null,subscriptions:[]},it=function(){function e(e){var t=e.link,n=e.queryDeduplication,r=void 0!==n&&n,i=e.store,a=e.onBroadcast,o=void 0===a?function(){}:a,s=e.ssrMode,l=void 0!==s&&s;this.mutationStore=new Ze,this.queryStore=new tt,this.idCounter=1,this.queries=new Map,this.fetchQueryPromises=new Map,this.queryIdsByName={},this.link=t,this.deduplicator=Le.from([new Qe,t]),this.queryDeduplication=r,this.dataStore=i,this.onBroadcast=o,this.scheduler=new Je({queryManager:this,ssrMode:l})}return e.prototype.mutate=function(e){var t=this,n=e.mutation,r=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,s=void 0===o?[]:o,l=e.update,u=e.errorPolicy,c=void 0===u?"none":u,d=e.fetchPolicy,f=e.context,h=void 0===f?{}:f;if(!n)throw new Error("mutation option is required. You must specify your GraphQL document in the mutation option.");if(d&&"no-cache"!==d)throw new Error("fetchPolicy for mutations currently only supports the 'no-cache' policy");var p=this.generateQueryId(),m=this.dataStore.getCache();n=m.transformDocument(n),r=g({},S(function(e){v(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];if(!t)throw new Error("Must contain a mutation definition.");return t}(n)),r);var _=Object(K.print)(n);this.setQuery(p,function(){return{document:n}});var y=function(){var e={};return a&&Object.keys(a).forEach(function(n){return(t.queryIdsByName[n]||[]).forEach(function(r){e[r]={updater:a[n],query:t.queryStore.get(r)}})}),e};return this.mutationStore.initMutation(p,_,r),this.dataStore.markMutationInit({mutationId:p,document:n,variables:r||{},updateQueries:y(),update:l,optimisticResponse:i}),this.broadcastQueries(),new Promise(function(e,a){var o,u,f=t.buildOperationForLink(n,r,nt({},h,{optimisticResponse:i}));Me(t.link,f).subscribe({next:function(e){e.errors&&"none"===c?u=new We({graphQLErrors:e.errors}):(t.mutationStore.markMutationResult(p),"no-cache"!==d&&t.dataStore.markMutationResult({mutationId:p,result:e,document:n,variables:r||{},updateQueries:y(),update:l}),o=e)},error:function(e){t.mutationStore.markMutationError(p,e),t.dataStore.markMutationComplete({mutationId:p,optimisticResponse:i}),t.broadcastQueries(),t.setQuery(p,function(){return{document:void 0}}),a(new We({networkError:e}))},complete:function(){u&&t.mutationStore.markMutationError(p,u),t.dataStore.markMutationComplete({mutationId:p,optimisticResponse:i}),t.broadcastQueries(),u?a(u):("function"==typeof s&&(s=s(o)),s.forEach(function(e){"string"!=typeof e?t.query({query:e.query,variables:e.variables,fetchPolicy:"network-only"}):t.refetchQueryByName(e)}),t.setQuery(p,function(){return{document:void 0}}),"ignore"===c&&o&&o.errors&&delete o.errors,e(o))}})})},e.prototype.fetchQuery=function(e,t,n,r){var i,a=this,o=t.variables,s=void 0===o?{}:o,l=t.metadata,u=void 0===l?null:l,c=t.fetchPolicy,d=void 0===c?"cache-first":c,f=this.dataStore.getCache().transformDocument(t.query),p="network-only"===d||"no-cache"===d;if(n!==ze.refetch&&"network-only"!==d&&"no-cache"!==d){var m=this.dataStore.getCache().diff({query:f,variables:s,returnPartialData:!0,optimistic:!1}),g=m.complete,v=m.result;p=!g||"cache-and-network"===d,i=v}var _,y=p&&"cache-only"!==d&&"standby"!==d;_=["live"],h(f).some(function(e){return _.indexOf(e)>-1})&&(y=!0);var b=this.generateRequestId(),w=this.updateQueryWatch(e,f,t);if(this.setQuery(e,function(){return{document:f,lastRequestId:b,invalidated:!0,cancel:w}}),this.invalidate(!0,r),this.queryStore.initQuery({queryId:e,queryString:Object(K.print)(f),document:f,storePreviousVariables:y,variables:s,isPoll:n===ze.poll,isRefetch:n===ze.refetch,metadata:u,fetchMoreForQueryId:r}),this.broadcastQueries(),(!y||"cache-and-network"===d)&&(this.queryStore.markQueryResultClient(e,!y),this.invalidate(!0,e,r),this.broadcastQueries()),y){var E=this.fetchRequest({requestId:b,queryId:e,document:f,options:t,fetchMoreForQueryId:r}).catch(function(t){if(t.hasOwnProperty("graphQLErrors"))throw t;var n=a.getQuery(e).lastRequestId;throw b>=(n||1)&&(a.queryStore.markQueryError(e,t,r),a.invalidate(!0,e,r),a.broadcastQueries()),a.removeFetchQueryPromise(b),new We({networkError:t})});if("cache-and-network"!==d)return E;E.catch(function(){})}return Promise.resolve({data:i})},e.prototype.queryListenerForObserver=function(e,t,n){var r=this,i=!1;return function(a,o){if(r.invalidate(!1,e),a){var s=r.getQuery(e).observableQuery,l=s?s.options.fetchPolicy:t.fetchPolicy;if("standby"!==l){var u=s?s.options.errorPolicy:t.errorPolicy,c=s?s.getLastResult():null,d=s?s.getLastError():null,f=!o&&null!=a.previousVariables||"cache-only"===l||"cache-and-network"===l,h=Boolean(c&&a.networkStatus!==c.networkStatus),p=u&&(d&&d.graphQLErrors)!==a.graphQLErrors&&"none"!==u;if(!Ee(a.networkStatus)||h&&t.notifyOnNetworkStatusChange||f){if((!u||"none"===u)&&a.graphQLErrors&&a.graphQLErrors.length>0||a.networkError){var m=new We({graphQLErrors:a.graphQLErrors,networkError:a.networkError});if(i=!0,n.error)try{n.error(m)}catch(e){setTimeout(function(){throw e},0)}else setTimeout(function(){throw m},0),Object(D.b)()||console.info("An unhandled error was thrown because no error handler is registered for the query "+a.queryString);return}try{var g=void 0,v=void 0;if(o)r.setQuery(e,function(){return{newData:null}}),g=o.result,v=!o.complete&&!o.complete;else if(c&&c.data&&!p)g=c.data,v=!1;else{var _=r.getQuery(e).document,y=r.dataStore.getCache().diff({query:_,variables:a.previousVariables||a.variables,optimistic:!0});g=y.result,v=!y.complete}var b=void 0;if(b=v&&"cache-only"!==l?{data:c&&c.data,loading:Ee(a.networkStatus),networkStatus:a.networkStatus,stale:!0}:{data:g,loading:Ee(a.networkStatus),networkStatus:a.networkStatus,stale:!1},"all"===u&&a.graphQLErrors&&a.graphQLErrors.length>0&&(b.errors=a.graphQLErrors),n.next)if(!(c&&b&&c.networkStatus===b.networkStatus&&c.stale===b.stale&&c.data===b.data)||i)try{n.next(F(b))}catch(e){setTimeout(function(){throw e},0)}i=!1}catch(e){return i=!0,void(n.error&&n.error(new We({networkError:e})))}}}}}},e.prototype.watchQuery=function(e,t){if(void 0===t&&(t=!0),"standby"===e.fetchPolicy)throw new Error('client.watchQuery cannot be called with fetchPolicy set to "standby"');var n=E(e.query);if(n.variableDefinitions&&n.variableDefinitions.length){var r=S(n);e.variables=g({},r,e.variables)}void 0===e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var i=nt({},e);return new Ke({scheduler:this.scheduler,options:i,shouldSubscribe:t})},e.prototype.query=function(e){var t=this;if(!e.query)throw new Error("query option is required. You must specify your GraphQL document in the query option.");if("Document"!==e.query.kind)throw new Error('You must wrap the query string in a "gql" tag.');if(e.returnPartialData)throw new Error("returnPartialData option only supported on watchQuery.");if(e.pollInterval)throw new Error("pollInterval option only supported on watchQuery.");if(void 0!==e.notifyOnNetworkStatusChange)throw new Error('Cannot call "query" with "notifyOnNetworkStatusChange" option. Only "watchQuery" has that option.');e.notifyOnNetworkStatusChange=!1;var n=this.idCounter,r=new Promise(function(i,a){return t.addFetchQueryPromise(n,r,i,a),t.watchQuery(e,!1).result().then(function(e){t.removeFetchQueryPromise(n),i(e)}).catch(function(e){t.removeFetchQueryPromise(n),a(e)})});return r},e.prototype.generateQueryId=function(){var e=this.idCounter.toString();return this.idCounter++,e},e.prototype.stopQueryInStore=function(e){this.queryStore.stopQuery(e),this.invalidate(!0,e),this.broadcastQueries()},e.prototype.addQueryListener=function(e,t){this.setQuery(e,function(e){var n=e.listeners;return{listeners:(void 0===n?[]:n).concat([t]),invalidate:!1}})},e.prototype.updateQueryWatch=function(e,t,n){var r=this,i=this.getQuery(e).cancel;i&&i();return this.dataStore.getCache().watch({query:t,variables:n.variables,optimistic:!0,previousResult:function(){var t=null,n=r.getQuery(e).observableQuery;if(n){var i=n.getLastResult();i&&(t=i.data)}return t},callback:function(t){r.setQuery(e,function(){return{invalidated:!0,newData:t}})}})},e.prototype.addFetchQueryPromise=function(e,t,n,r){this.fetchQueryPromises.set(e.toString(),{promise:t,resolve:n,reject:r})},e.prototype.removeFetchQueryPromise=function(e){this.fetchQueryPromises.delete(e.toString())},e.prototype.addObservableQuery=function(e,t){this.setQuery(e,function(){return{observableQuery:t}});var n=E(t.options.query);if(n.name&&n.name.value){var r=n.name.value;this.queryIdsByName[r]=this.queryIdsByName[r]||[],this.queryIdsByName[r].push(t.queryId)}},e.prototype.removeObservableQuery=function(e){var t=this.getQuery(e),n=t.observableQuery,r=t.cancel;if(r&&r(),n){var i=E(n.options.query),a=i.name?i.name.value:null;this.setQuery(e,function(){return{observableQuery:null}}),a&&(this.queryIdsByName[a]=this.queryIdsByName[a].filter(function(e){return!(n.queryId===e)}))}},e.prototype.resetStore=function(){this.fetchQueryPromises.forEach(function(e){(0,e.reject)(new Error("Store reset while query was in flight."))});var e=[];this.queries.forEach(function(t,n){t.observableQuery&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset();var t=this.dataStore.reset(),n=this.getObservableQueryPromises();return this.broadcastQueries(),t.then(function(){return Promise.all(n)})},e.prototype.getObservableQueryPromises=function(e){var t=this,n=[];return this.queries.forEach(function(r,i){var a=r.observableQuery;if(a){var o=a.options.fetchPolicy;a.resetLastResults(),"cache-only"===o||!e&&"standby"===o||n.push(a.refetch()),t.setQuery(i,function(){return{newData:null}}),t.invalidate(!0,i)}}),n},e.prototype.reFetchObservableQueries=function(e){var t=this.getObservableQueryPromises(e);return this.broadcastQueries(),Promise.all(t)},e.prototype.startQuery=function(e,t,n){return this.addQueryListener(e,n),this.fetchQuery(e,t).catch(function(){}),e},e.prototype.startGraphQLSubscription=function(e){var t,n=this,r=e.query,i=this.dataStore.getCache().transformDocument(r),a=g({},S(_(r)),e.variables),o=[];return new He(function(e){if(o.push(e),1===o.length){var r={next:function(e){n.dataStore.markSubscriptionResult(e,i,a),n.broadcastQueries(),o.forEach(function(t){t.next&&t.next(e)})},error:function(e){o.forEach(function(t){t.error&&t.error(e)})}},s=n.buildOperationForLink(i,a);t=Me(n.link,s).subscribe(r)}return function(){0===(o=o.filter(function(t){return t!==e})).length&&t&&t.unsubscribe()}})},e.prototype.stopQuery=function(e){this.removeQuery(e),this.stopQueryInStore(e)},e.prototype.removeQuery=function(e){this.getQuery(e).subscriptions.forEach(function(e){return e.unsubscribe()}),this.queries.delete(e)},e.prototype.getCurrentQueryResult=function(e){var t=e.options,n=t.variables,r=t.query,i=e.getLastResult(),a=this.getQuery(e.queryId).newData;if(a)return F({data:a.result,partial:!1});try{return F({data:this.dataStore.getCache().read({query:r,variables:n,previousResult:i?i.data:void 0,optimistic:!0}),partial:!1})}catch(e){return F({data:{},partial:!0})}},e.prototype.getQueryWithPreviousResult=function(e){var t;if("string"==typeof e){var n=this.getQuery(e).observableQuery;if(!n)throw new Error("ObservableQuery with this id doesn't exist: "+e);t=n}else t=e;var r=t.options,i=r.variables,a=r.query;return{previousResult:this.getCurrentQueryResult(t).data,variables:i,document:a}},e.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(t,n){t.invalidated&&t.listeners&&t.listeners.filter(function(e){return!!e}).forEach(function(r){r(e.queryStore.get(n),t.newData)})})},e.prototype.fetchRequest=function(e){var t,n,r=this,i=e.requestId,a=e.queryId,o=e.document,s=e.options,l=e.fetchMoreForQueryId,u=s.variables,c=s.context,d=s.errorPolicy,f=void 0===d?"none":d,h=s.fetchPolicy,p=this.buildOperationForLink(o,u,nt({},c,{forceFetch:!this.queryDeduplication})),m=new Promise(function(e,s){r.addFetchQueryPromise(i,m,e,s);var c=Me(r.deduplicator,p).subscribe({next:function(e){var c=r.getQuery(a).lastRequestId;if(i>=(c||1)){if("no-cache"!==h)try{r.dataStore.markQueryResult(e,o,u,l,"ignore"===f||"all"===f)}catch(e){return void s(e)}r.queryStore.markQueryResult(a,e,l),r.invalidate(!0,a,l),r.broadcastQueries()}if(e.errors&&"none"===f)s(new We({graphQLErrors:e.errors}));else if("all"===f&&(n=e.errors),l)t=e.data;else try{t=r.dataStore.getCache().read({variables:u,query:o,optimistic:!1})}catch(e){}},error:function(e){r.removeFetchQueryPromise(i),r.setQuery(a,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==c})}}),s(e)},complete:function(){r.removeFetchQueryPromise(i),r.setQuery(a,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==c})}}),e({data:t,errors:n,loading:!1,networkStatus:be.ready,stale:!1})}});r.setQuery(a,function(e){return{subscriptions:e.subscriptions.concat([c])}})});return m},e.prototype.refetchQueryByName=function(e){var t=this,n=this.queryIdsByName[e];if(void 0!==n)return Promise.all(n.map(function(e){return t.getQuery(e).observableQuery}).filter(function(e){return!!e}).map(function(e){return e.refetch()}))},e.prototype.generateRequestId=function(){var e=this.idCounter;return this.idCounter++,e},e.prototype.getQuery=function(e){return this.queries.get(e)||nt({},rt)},e.prototype.setQuery=function(e,t){var n=this.getQuery(e),r=nt({},n,t(n));this.queries.set(e,r)},e.prototype.invalidate=function(e,t,n){t&&this.setQuery(t,function(){return{invalidated:e}}),n&&this.setQuery(n,function(){return{invalidated:e}})},e.prototype.buildOperationForLink=function(e,t,n){var r=this.dataStore.getCache();return{query:r.transformForLink?r.transformForLink(e):e,variables:t,operationName:b(e)||void 0,context:nt({},n,{cache:r,getCacheKey:function(e){if(r.config)return r.config.dataIdFromObject(e);throw new Error("To use context.getCacheKey, you need to use a cache that has a configurable dataIdFromObject, like apollo-cache-inmemory.")}})}},e}(),at=function(){function e(e){this.cache=e}return e.prototype.getCache=function(){return this.cache},e.prototype.markQueryResult=function(e,t,n,r,i){void 0===i&&(i=!1);var a=!L(e);i&&L(e)&&e.data&&(a=!0),!r&&a&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:t,variables:n})},e.prototype.markSubscriptionResult=function(e,t,n){L(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:t,variables:n})},e.prototype.markMutationInit=function(e){var t=this;if(e.optimisticResponse){var n;n="function"==typeof e.optimisticResponse?e.optimisticResponse(e.variables):e.optimisticResponse;this.cache.recordOptimisticTransaction(function(r){var i=t.cache;t.cache=r;try{t.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{t.cache=i}},e.mutationId)}},e.prototype.markMutationResult=function(e){var t=this;if(!L(e.result)){var n=[];n.push({result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),e.updateQueries&&Object.keys(e.updateQueries).filter(function(t){return e.updateQueries[t]}).forEach(function(r){var i=e.updateQueries[r],a=i.query,o=i.updater,s=t.cache.diff({query:a.document,variables:a.variables,returnPartialData:!0,optimistic:!1}),l=s.result;if(s.complete){var u=N(function(){return o(l,{mutationResult:e.result,queryName:b(a.document)||void 0,queryVariables:a.variables})});u&&n.push({result:u,dataId:"ROOT_QUERY",query:a.document,variables:a.variables})}}),this.cache.performTransaction(function(e){n.forEach(function(t){return e.write(t)})});var r=e.update;r&&this.cache.performTransaction(function(t){N(function(){return r(t,e.result)})})}},e.prototype.markMutationComplete=function(e){var t=e.mutationId;e.optimisticResponse&&this.cache.removeOptimistic(t)},e.prototype.markUpdateQueryResult=function(e,t,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:t,query:e})},e.prototype.reset=function(){return this.cache.reset()},e}(),ot=n("3Y6g"),st=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lt=!1,ut=new Le(function(e,t){return e.query=function(e){v(e);var t=j.get(e);if(t)return t;var n=x([O],e);return j.set(e,n),n}(e.query),t(e)}),ct=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[];var n=e.link,r=e.cache,i=e.ssrMode,a=void 0!==i&&i,o=e.ssrForceFetchDelay,s=void 0===o?0:o,l=e.connectToDevTools,u=e.queryDeduplication,c=void 0===u||u,d=e.defaultOptions;if(!n||!r)throw new Error("\n        In order to initialize Apollo Client, you must specify link & cache properties on the config object.\n        This is part of the required upgrade when migrating from Apollo Client 1.0 to Apollo Client 2.0.\n        For more information, please visit:\n          https://www.apollographql.com/docs/react/basics/setup.html\n        to help you get started.\n      ");this.link=ut.concat(n),this.cache=r,this.store=new at(r),this.disableNetworkFetches=a||s>0,this.queryDeduplication=c,this.ssrMode=a,this.defaultOptions=d||{},s&&setTimeout(function(){return t.disableNetworkFetches=!1},s),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var f=!Object(D.b)()&&"undefined"!=typeof window&&!window.__APOLLO_CLIENT__;(void 0===l?f:l&&"undefined"!=typeof window)&&(window.__APOLLO_CLIENT__=this),lt||Object(D.b)()||(lt=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&void 0===window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__&&navigator.userAgent.indexOf("Chrome")>-1&&console.debug("Download the Apollo DevTools for a better development experience: https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm")),this.version=ot.version}return e.prototype.watchQuery=function(e){return this.initQueryManager(),this.defaultOptions.watchQuery&&(e=st({},this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=st({},e,{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){if(this.initQueryManager(),this.defaultOptions.query&&(e=st({},this.defaultOptions.query,e)),"cache-and-network"===e.fetchPolicy)throw new Error("cache-and-network fetchPolicy can only be used with watchQuery");return this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=st({},e,{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.initQueryManager(),this.defaultOptions.mutate&&(e=st({},this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.initQueryManager(),this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e){return this.initProxy().readQuery(e)},e.prototype.readFragment=function(e){return this.initProxy().readFragment(e)},e.prototype.writeQuery=function(e){var t=this.initProxy().writeQuery(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.initProxy().writeFragment(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeData=function(e){var t=this.initProxy().writeData(e);return this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Me(this.link,e)},e.prototype.initQueryManager=function(){var e=this;this.queryManager||(this.queryManager=new it({link:this.link,store:this.store,queryDeduplication:this.queryDeduplication,ssrMode:this.ssrMode,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.queryStore.getStore(),mutations:e.queryManager.mutationStore.getStore()},dataWithOptimisticResults:e.cache.extract(!0)})}}))},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){e.queryManager?e.queryManager.resetStore():Promise.resolve(null)}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(e){return e()}))})},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(t){return t!==e})}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager?this.queryManager.reFetchObservableQueries(e):Promise.resolve(null)},e.prototype.extract=function(e){return this.initProxy().extract(e)},e.prototype.restore=function(e){return this.initProxy().restore(e)},e.prototype.initProxy=function(){return this.proxy||(this.initQueryManager(),this.proxy=this.cache),this.proxy},e}(),dt=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ft={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},ht=function(e,t,n){var r=new Error(n);throw r.response=e,r.statusCode=e.status,r.result=t,r},pt=function(e){return function(t){return t.text().then(function(e){try{return JSON.parse(e)}catch(r){var n=r;return n.response=t,n.statusCode=t.status,n.bodyText=e,Promise.reject(n)}}).then(function(n){return t.status>=300&&ht(t,n,"Response not successful: Received status code "+t.status),Array.isArray(n)||n.hasOwnProperty("data")||n.hasOwnProperty("errors")||ht(t,n,"Server response was missing for query '"+(Array.isArray(e)?e.map(function(e){return e.operationName}):e.operationName)+"'."),n})}},mt=function(e){if(!e&&"undefined"==typeof fetch){var t="unfetch";throw"undefined"==typeof window&&(t="node-fetch"),new Error("\nfetch is not found globally and no fetcher passed, to fix pass a fetch for\nyour environment like https://www.npmjs.com/package/"+t+".\n\nFor example:\nimport fetch from '"+t+"';\nimport { createHttpLink } from 'apollo-link-http';\n\nconst link = createHttpLink({ uri: '/graphql', fetch: fetch });")}},gt=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}},vt=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=dt({},t.options,{headers:t.headers,credentials:t.credentials}),a=t.http;n.forEach(function(e){i=dt({},i,e.options,{headers:dt({},i.headers,e.headers)}),e.credentials&&(i.credentials=e.credentials),a=dt({},a,e.http)});var o=e.operationName,s=e.extensions,l=e.variables,u=e.query,c={operationName:o,variables:l};return a.includeExtensions&&(c.extensions=s),a.includeQuery&&(c.query=Object(K.print)(u)),{options:i,body:c}},_t=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var r=new Error("Network request failed. "+t+" is not serializable: "+e.message);throw r.parseError=e,r}return n},yt=function(e,t){var n=e.getContext().uri;return n||("function"==typeof t?t(e):t||"/graphql")},bt=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wt=function(){function e(e){var t=e.batchInterval,n=e.batchMax,r=void 0===n?0:n,i=e.batchHandler,a=e.batchKey,o=void 0===a?function(){return""}:a;this.queuedRequests=new Map,this.batchInterval=t,this.batchMax=r,this.batchHandler=i,this.batchKey=o}return e.prototype.enqueueRequest=function(e){var t=this,n=bt({},e),r=!1,i=this.batchKey(e.operation);return n.observable||(n.observable=new ke(function(e){t.queuedRequests.has(i)||t.queuedRequests.set(i,[]),r||(t.queuedRequests.get(i).push(n),r=!0),n.next=n.next||[],e.next&&n.next.push(e.next.bind(e)),n.error=n.error||[],e.error&&n.error.push(e.error.bind(e)),n.complete=n.complete||[],e.complete&&n.complete.push(e.complete.bind(e)),1===t.queuedRequests.get(i).length&&t.scheduleQueueConsumption(i),t.queuedRequests.get(i).length===t.batchMax&&t.consumeQueue(i)})),n.observable},e.prototype.consumeQueue=function(e){void 0===e&&(e="");var t=this.queuedRequests.get(e);if(t){this.queuedRequests.delete(e);var n=t.map(function(e){return e.operation}),r=t.map(function(e){return e.forward}),i=[],a=[],o=[],s=[];t.forEach(function(e,t){i.push(e.observable),a.push(e.next),o.push(e.error),s.push(e.complete)});var l=function(e){o.forEach(function(t){t&&t.forEach(function(t){return t(e)})})};return(this.batchHandler(n,r)||ke.of()).subscribe({next:function(e){if(Array.isArray(e)||(e=[e]),a.length!==e.length){var t=new Error("server returned results with length "+e.length+", expected length of "+a.length);return t.result=e,l(t)}e.forEach(function(e,t){n[t].setContext({response:e}),a[t]&&a[t].forEach(function(t){return t(e)})})},error:l,complete:function(){s.forEach(function(e){e&&e.forEach(function(e){return e()})})}}),i}},e.prototype.scheduleQueueConsumption=function(e){var t=this;void 0===e&&(e=""),setTimeout(function(){t.queuedRequests.get(e)&&t.queuedRequests.get(e).length&&t.consumeQueue(e)},this.batchInterval)},e}(),Et=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this,r=t.batchInterval,i=void 0===r?10:r,a=t.batchMax,o=void 0===a?0:a,s=t.batchHandler,l=void 0===s?function(){return null}:s,u=t.batchKey,c=void 0===u?function(){return""}:u;return n.batcher=new wt({batchInterval:i,batchMax:o,batchHandler:l,batchKey:c}),t.batchHandler.length<=1&&(n.request=function(e){return n.batcher.enqueueRequest({operation:e})}),n}return Et(t,e),t.prototype.request=function(e,t){return this.batcher.enqueueRequest({operation:e,forward:t})},t}(Le),St=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ct=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},Tt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this,r=t.uri,i=void 0===r?"/graphql":r,a=t.fetch,o=t.includeExtensions,s=t.batchInterval,l=t.batchMax,u=t.batchKey,c=Ct(t,["uri","fetch","includeExtensions","batchInterval","batchMax","batchKey"]);mt(a),a||(a=fetch);var d={http:{includeExtensions:o},options:c.fetchOptions,credentials:c.credentials,headers:c.headers};n.batchInterval=s||10,n.batchMax=l||10;return u=u||function(e){var t=e.getContext(),n={http:t.http,options:t.fetchOptions,credentials:t.credentials,headers:t.headers};return yt(e,i)+JSON.stringify(n)},n.batcher=new kt({batchInterval:n.batchInterval,batchMax:n.batchMax,batchKey:u,batchHandler:function(e){var t=yt(e[0],i),n=e[0].getContext(),r={http:n.http,options:n.fetchOptions,credentials:n.credentials,headers:n.headers},o=e.map(function(e){return vt(e,ft,d,r)}),s=o.map(function(e){return e.body}),l=o[0].options;if("GET"===l.method)return Re(new Error("apollo-link-batch-http does not support GET requests"));try{l.body=_t(s,"Payload")}catch(e){return Re(e)}var u=gt(),c=u.controller,f=u.signal;return c&&(l.signal=f),new ke(function(n){return a(t,l).then(pt(e)).then(function(e){return n.next(e),n.complete(),e}).catch(function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))}),function(){c&&c.abort()}})}}),n}return St(t,e),t.prototype.request=function(e){return this.batcher.request(e)},t}(Le),At=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rt=function(e){return new Le(function(t,n){return new ke(function(r){var i;try{i=n(t).subscribe({next:function(n){n.errors&&e({graphQLErrors:n.errors,response:n,operation:t}),r.next(n)},error:function(n){e({operation:t,networkError:n,graphQLErrors:n.result&&n.result.errors}),r.error(n)},complete:r.complete.bind(r)})}catch(n){e({networkError:n,operation:t}),r.error(n)}return function(){i&&i.unsubscribe()}})})},xt=(function(e){function t(t){var n=e.call(this)||this;return n.link=Rt(t),n}At(t,e),t.prototype.request=function(e,t){return this.link.request(e,t)}}(Le),n("jRaX")),Pt={__schema:{queryType:{name:"Query"},mutationType:{name:"Mutation"},subscriptionType:null,types:[{kind:"INTERFACE",name:"Node",description:"An object with an ID.",fields:[{name:"id",description:"ID of the object.",args:[],type:{kind:"NON_NULL",name:null,ofType:{kind:"SCALAR",name:"ID",ofType:null}},isDeprecated:!1,deprecationReason:null}],inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"User",ofType:null},{kind:"OBJECT",name:"Project",ofType:null},{kind:"OBJECT",name:"Backing",ofType:null},{kind:"OBJECT",name:"Reward",ofType:null},{kind:"OBJECT",name:"RewardItem",ofType:null},{kind:"OBJECT",name:"ShippingRule",ofType:null},{kind:"OBJECT",name:"Location",ofType:null},{kind:"OBJECT",name:"Category",ofType:null},{kind:"OBJECT",name:"ProjectComment",ofType:null},{kind:"OBJECT",name:"Flagging",ofType:null},{kind:"OBJECT",name:"Message",ofType:null},{kind:"OBJECT",name:"Photo",ofType:null},{kind:"OBJECT",name:"Video",ofType:null},{kind:"OBJECT",name:"VideoTrack",ofType:null},{kind:"OBJECT",name:"VideoTrackCue",ofType:null},{kind:"OBJECT",name:"ProjectProfile",ofType:null},{kind:"OBJECT",name:"ProjectUpdate",ofType:null},{kind:"OBJECT",name:"Conversation",ofType:null},{kind:"OBJECT",name:"CuratedPage",ofType:null},{kind:"OBJECT",name:"Drop",ofType:null},{kind:"OBJECT",name:"BlockedUser",ofType:null},{kind:"OBJECT",name:"DropCategory",ofType:null},{kind:"OBJECT",name:"AttachedVideo",ofType:null},{kind:"OBJECT",name:"DropCreatorSettings",ofType:null},{kind:"OBJECT",name:"DropPledge",ofType:null},{kind:"OBJECT",name:"DropReward",ofType:null},{kind:"OBJECT",name:"DropSubscriberSettings",ofType:null},{kind:"OBJECT",name:"DropPost",ofType:null},{kind:"OBJECT",name:"DripComment",ofType:null},{kind:"OBJECT",name:"AttachedAudio",ofType:null},{kind:"OBJECT",name:"Organization",ofType:null},{kind:"OBJECT",name:"ProjectCollection",ofType:null},{kind:"OBJECT",name:"Promo",ofType:null},{kind:"OBJECT",name:"CategoryHeaderBlock",ofType:null},{kind:"OBJECT",name:"FeaturedProjectBlock",ofType:null},{kind:"OBJECT",name:"ProjectsRowContentBlock",ofType:null},{kind:"OBJECT",name:"FeaturedProjectsSection",ofType:null},{kind:"OBJECT",name:"NewsContentBlock",ofType:null},{kind:"OBJECT",name:"NewsContentSection",ofType:null},{kind:"OBJECT",name:"NewsletterSignupBlock",ofType:null},{kind:"OBJECT",name:"PromoSection",ofType:null},{kind:"OBJECT",name:"StatContentBlock",ofType:null},{kind:"OBJECT",name:"StatsContentSection",ofType:null},{kind:"OBJECT",name:"TciContentBlock",ofType:null},{kind:"OBJECT",name:"TciSection",ofType:null},{kind:"OBJECT",name:"Tag",ofType:null},{kind:"OBJECT",name:"Checkout",ofType:null},{kind:"OBJECT",name:"Layout",ofType:null}]},{kind:"UNION",name:"FlaggableContent",description:"Types that can be reported by users",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"Message",ofType:null},{kind:"OBJECT",name:"Project",ofType:null}]},{kind:"UNION",name:"CommentableType",description:"Objects the comment is attached to.",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"DropPost",ofType:null}]},{kind:"UNION",name:"RichTextItem",description:"Rich text items: html, photo, audio, video or oembed",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"RichTextAudioItem",ofType:null},{kind:"OBJECT",name:"RichTextHtmlItem",ofType:null},{kind:"OBJECT",name:"RichTextOembedItem",ofType:null},{kind:"OBJECT",name:"RichTextPhotoItem",ofType:null},{kind:"OBJECT",name:"RichTextVideoItem",ofType:null}]},{kind:"UNION",name:"AttachedMedia",description:"Attached Media",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"AttachedAudio",ofType:null},{kind:"OBJECT",name:"AttachedVideo",ofType:null},{kind:"OBJECT",name:"Photo",ofType:null}]},{kind:"UNION",name:"EditorialTools",description:"Editorial tool to create and modify content modules on discovery pages",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"ProjectCollection",ofType:null},{kind:"OBJECT",name:"Promo",ofType:null}]},{kind:"UNION",name:"ContentBlocks",description:"Content blocks to display on discovery pages",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"CategoryHeaderBlock",ofType:null},{kind:"OBJECT",name:"FeaturedProjectBlock",ofType:null},{kind:"OBJECT",name:"FeaturedProjectsSection",ofType:null},{kind:"OBJECT",name:"NewsContentBlock",ofType:null},{kind:"OBJECT",name:"NewsContentSection",ofType:null},{kind:"OBJECT",name:"NewsletterSignupBlock",ofType:null},{kind:"OBJECT",name:"ProjectsRowContentBlock",ofType:null},{kind:"OBJECT",name:"PromoSection",ofType:null},{kind:"OBJECT",name:"StatContentBlock",ofType:null},{kind:"OBJECT",name:"StatsContentSection",ofType:null},{kind:"OBJECT",name:"TciContentBlock",ofType:null},{kind:"OBJECT",name:"TciSection",ofType:null}]},{kind:"UNION",name:"Attachable",description:"An object that can be associated with uploaded assets",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"Drop",ofType:null},{kind:"OBJECT",name:"DropPost",ofType:null},{kind:"OBJECT",name:"Project",ofType:null},{kind:"OBJECT",name:"ProjectUpdate",ofType:null}]},{kind:"UNION",name:"ReportedContentType",description:"The type of content users can report.",fields:null,inputFields:null,interfaces:null,enumValues:null,possibleTypes:[{kind:"OBJECT",name:"DropPost",ofType:null}]}],directives:[{name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],args:[{name:"if",description:"Skipped when true.",type:{kind:"NON_NULL",name:null,ofType:{kind:"SCALAR",name:"Boolean",ofType:null}},defaultValue:null}]},{name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],args:[{name:"if",description:"Included when true.",type:{kind:"NON_NULL",name:null,ofType:{kind:"SCALAR",name:"Boolean",ofType:null}},defaultValue:null}]},{name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:["FIELD_DEFINITION","ENUM_VALUE"],args:[{name:"reason",description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted in [Markdown](https://daringfireball.net/projects/markdown/).",type:{kind:"SCALAR",name:"String",ofType:null},defaultValue:'"No longer supported"'}]}]}};n.d(t,"apolloClient",function(){return It});var It=function(e,t){void 0===e&&(e=null);var n=window.graph_hostname?"//"+window.graph_hostname:"",r=window.graph_hostname?{Authorization:"token "+e}:{"X-CSRF-Token":Object(xt.csrfToken)(document)},i=new Tt({uri:n+"/graph",credentials:"same-origin",headers:r,batchMax:25}),a=Rt(function(e){var n=e.graphQLErrors,r=e.networkError;Array.isArray(n)&&n.forEach(function(e){var n=new Error(e.message);t(n,"GraphQL Error")}),void 0!==r&&t(r,"GraphQL Network Error")}),o=new V({introspectionQueryResultData:Pt});return new ct({link:Le.from([a,i]),cache:new we({fragmentMatcher:o}),queryDeduplication:!0})}},UVf0:function(e,t,n){"use strict";var r=a(n("cnnw")),i=a(n("tW2u"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:i.default,CSSTransitionGroup:r.default}},UhhV:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("+bVi")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,i.default)(".NS-friends",function(e){var t=e.data("follows_count"),n=e.data("follows_backings_count"),i=e.find(".js-friend-count"),s=e.find(".js-backed-projects-count");e.on("ksr:follow_user",function(e){t+=1,n+=(0,r.default)(e.target).closest(".js-backer-count").data("backed_projects"),i.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0})),t>0&&(0,r.default)(".js-friends-tout").removeClass("friends-tout--no-friends")}),e.on("ksr:unfollow_user ksr:block_user",function(e){t-=1,n-=(0,r.default)(e.target).closest(".js-backer-count").data("backed_projects"),i.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0})),t<=0&&(0,r.default)(".js-friends-tout").addClass("friends-tout--no-friends")}),e.on("ksr:follow_all",function(e,r,a){t+=parseInt(r,10),n+=parseInt(a,10),i.text(o.default.format_number(t,{precision:0})),s.text(o.default.format_number(n,{precision:0}))}),(0,r.default)(document).on("mobius:loaded_page",function(){(0,r.default)(document).trigger("shifted")}),a.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},V8lC:function(e,t,n){"use strict";var r,i,a,o=n("l/Rs"),s=(r=o)&&r.__esModule?r:{default:r};n("Y0+b"),i=(0,s.default)("body.faqs").find(window.location.hash),a=(0,s.default)("#term.help"),i.length&&!i.find(".subcat").length&&i.animate({backgroundColor:"#ffffc9"},{duration:2e3,complete:function(){(0,s.default)(this).animate({backgroundColor:"#ffffff"},{duration:2500})}}),(0,s.default)(".NS_help__search_box").livequery(function(){(0,s.default)(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})}),(0,s.default)(document).on("livesearch:selected","#js-search .results li",function(e,t){t&&t[1]&&(window.location.href=t[1])}),(0,s.default)(document).on("click","body.help form.search .submit",function(){(0,s.default)(this).closest("form").submit()}),(0,s.default)(document).on("livesearch:revealed_results","#term.help",function(){(0,s.default)(this).addClass("expanded"),(0,s.default)(this).parents("#js-search").children(".submit").addClass("expanded")}),(0,s.default)(document).on("livesearch:close_results","#term.help",function(){(0,s.default)(this).removeClass("expanded"),(0,s.default)(this).parents("#js-search").children(".submit").removeClass("expanded")}),(0,s.default)("body.help").click(function(e){var t=(0,s.default)(e.target);t.is("#term")||t.closest("#js-search").length||a.trigger("livesearch:close_results")}),a.on("focus",function(){var e=a.data("livesearch");e&&e.search_xhr&&4===e.search_xhr.readyState&&a.trigger("livesearch:reveal_results")})},VIkj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a,o=(r=["\n  mutation($projectId: ID!, $body: String!, $parentId: ID) {\n    createProjectComment(\n      input: {\n        projectId:$projectId\n        body:$body\n        parentId:$parentId\n      }\n    )\n    {\n      comment {\n        id\n        body\n        createdAt\n        author {\n          id\n          imageUrl(width:200)\n          name\n          isSuperBacker\n          isKsrAdmin\n        }\n        parentId\n        authorIsProjectCreator\n        authorIsProjectCollaborator\n        canReport\n        hasFlaggings\n        replies {\n          totalCount\n          nodes {\n            id\n          }\n          pageInfo {\n            startCursor\n            hasPreviousPage\n          }\n        }\n      }\n    }\n  }\n"],i=["\n  mutation($projectId: ID!, $body: String!, $parentId: ID) {\n    createProjectComment(\n      input: {\n        projectId:$projectId\n        body:$body\n        parentId:$parentId\n      }\n    )\n    {\n      comment {\n        id\n        body\n        createdAt\n        author {\n          id\n          imageUrl(width:200)\n          name\n          isSuperBacker\n          isKsrAdmin\n        }\n        parentId\n        authorIsProjectCreator\n        authorIsProjectCollaborator\n        canReport\n        hasFlaggings\n        replies {\n          totalCount\n          nodes {\n            id\n          }\n          pageInfo {\n            startCursor\n            hasPreviousPage\n          }\n        }\n      }\n    }\n  }\n"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(i)}}))),s=n("tlQw");var l=(0,((a=s)&&a.__esModule?a:{default:a}).default)(o);t.default=l},VPQO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.telegraf=void 0;var r,i=n("jRaX"),a=n("tryQ"),o=n("BUS2"),s=(r=o)&&r.__esModule?r:{default:r},l=n("EAgE");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.telegraf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var r;if(!window.current_variants.includes("telegraf_proxy[experimental]"))return!1;var o=(u(r={},l.TELEGRAF_METHODS.INCREMENT,{method:l.TELEGRAF_METHODS.INCREMENT,name:t}),u(r,l.TELEGRAF_METHODS.GAUGE,{method:l.TELEGRAF_METHODS.GAUGE,name:t,value:n}),u(r,l.TELEGRAF_METHODS.TIME,{method:l.TELEGRAF_METHODS.TIME,name:t,value:n}),r),c={authenticity_token:(0,i.csrfToken)(document),data:o[e]};!0===window.isNativeAndroidRequest&&window.WebViewJavascriptInterface.setFormContents(window.$.param(c),"POST",null),c.checksum=s.default.create().update(JSON.stringify(c.data)).hex();var d={method:"POST",body:JSON.stringify(c),credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}};return fetch("/telegraf_requests",d).catch(function(e){a.Honeybadger.notify(e)})}catch(e){a.Honeybadger.notify(e)}}},VgNI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("GiK3"),i=m(r),a=m(n("XKW3")),o=m(n("LiGZ")),s=m(n("oiaa")),l=m(n("jEJt")),u=m(n("OMSm")),c=m(n("CF+r")),d=n("Ps9/"),f=n("P4S0"),h=n("0n0W"),p=n("x0LT");function m(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.author,n=e.pid,m=e.projectId,g=e.activateForm,v=e.deactivateForm,_=e.userCanComment,y=e.activeThreadId,b=e.comment,w=e.currentCursor,E=e.client,k=e.repliesLoading,S=e.toggleRepliesLoading,C=b.id,T=b.replies,A=b.body,R=b.author,x=b.createdAt,P=b.authorIsProjectCollaborator,I=b.authorIsProjectCreator,O=b.canReport,j=b.hasFlaggings,D=(0,p.configureRepliesPagination)(E,h.GET_COMMENT_WITH_REPLIES,C)(k,S,p.onLoadMoreReplies,p.onLoadMoreRepliesClick)(T),N=C===y,L=!!T.nodes&&T.nodes.length>0;return i.default.createElement(r.Fragment,null,i.default.createElement(a.default,{body:A,author:R,createdAt:x,authorIsProjectCreator:I,authorIsProjectCollaborator:P,canReport:O,hasFlaggings:j,id:C},_&&i.default.createElement(c.default,null,i.default.createElement(o.default,{isActive:N,activateForm:g,deactivateForm:v,commentId:C}))),(L||N)&&i.default.createElement("div",{className:"pl5 pt2"},L&&i.default.createElement(c.default,null,i.default.createElement(d.LoadMore,{buttonI18nKey:"project_page.comments.Load_previous",remainingI18nKey:"project_page.comments.Comments_remaining",totalCount:D.totalCount,showingCount:D.showingCount,pageSize:f.PAGE_SIZE.REPLIES,onClick:D.onClick,loading:D.loadingStatus,hasMorePages:D.hasMorePages,atoms:["mb2"]})),L&&i.default.createElement(c.default,null,i.default.createElement(s.default,{comments:T.nodes})),N?_&&i.default.createElement(c.default,null,i.default.createElement(l.default,{author:t,pid:n,projectId:m,parentId:C,onSuccess:v,currentCursor:w,replyCursor:T.pageInfo.startCursor})):L&&i.default.createElement(c.default,null,i.default.createElement(u.default,{activateForm:g,author:t,commentId:C}))))}},Vmib:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("w6g1"),a.default.fn.spin.presets.ksr={className:"",lines:8,length:4,width:2,radius:5,speed:2}},Vo5L:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)("body#help_fees form.select_country").on("change",function(){(0,a.default)(this).submit()})})},Vy0d:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){var e=(0,a.default)(".toggle_box_nav li"),t=(0,a.default)(".toggle_box_content");e.length&&t.length&&e.on("click",function(){var n=(0,a.default)(this),r=e.index(n);return t.removeClass("current"),e.removeClass("current"),(0,a.default)(t[r]).addClass("current"),n.addClass("current"),!1})})},WREU:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("click",".js-click_select",function(e){var t=document.createRange(),n=window.getSelection();t.setStartBefore(this.firstChild),t.setEndAfter(this.lastChild),n.removeAllRanges(),n.addRange(t),e.preventDefault()})})},WfYy:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".js-nav--subnav",function(e){e.on("change_current",function(e,t){var n=(0,r.default)(this),i=(0,r.default)(t);i.length&&(n.find(".current").removeClass("current"),i.addClass("current"),n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()}),(0,r.default)(window).resize(function(){n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()})}))});var t=window.location.pathname,n=e.find(".nav--subnav__item__link").filter(function(){return new URL(this.href).pathname===t});e.trigger("change_current",n)})},Wip1:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("#curated_pages_reorder",function(e){function t(){(0,r.default)(".js-project").each(function(e){(0,r.default)(this).find("input.text").val(e+1)})}(0,r.default)(".js-project input.text").on("blur",function(){var e=(0,r.default)(this),n=parseInt(e.val(),10),i=e.closest(".js-project");isNaN(n)||((0,r.default)(".js-project").not(i).eq(n-1).before(i),t())}).on("focus",function(){this.select()}),e.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:t})})},WoYN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.completed=!!e.backer_completed_at,e["is_"+e.status]=!0,e.formatted_deadline=(0,i.format)("ll",1e3*e.project.deadline),e.formatted_money=r.default.money(e.amount,{currency:e.project.currency}),e.formatted_status=a.default.t("presenters.backings.row.status."+e.display_status),e.project_state=l(e),e.pledge_url=u(e.project),e.reward){var t=e.reward.reward;if(e.formatted_reward=t.length>57?t.substring(0,57)+"…":t,e.reward.estimated_delivery_on){var n=1e3*e.reward.estimated_delivery_on;e.formatted_estimated_delivery_on=(0,i.format)("MMM YYYY",(0,o.toUTC)(n))}}return e.messages&&(e.formatted_messages_count=a.default.t("presenters.backings.row.messages_count",{count:e.messages.count,formatted_count:r.default.format_number(e.messages.count,{precision:0})}),e.formatted_messages_last_activity_at=(0,i.format)("ll",1e3*e.messages.last_activity_at)),e};var r=s(n("L3hI")),i=n("kVy0"),a=s(n("wmCY")),o=n("HZrJ");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){switch(e.project.state){case"canceled":return a.default.t("presenters.backings.row.Canceled");case"failed":return a.default.t("presenters.backings.row.Unsuccessful");case"live":return a.default.t("presenters.backings.row.In_progress");case"successful":return a.default.t("presenters.backings.row.Successful");case"suspended":return a.default.t("presenters.backings.row.Suspended");default:return""}},u=function(e){return"/projects/"+e.creator.slug+"/"+e.slug+"/pledge"}},X1nT:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("GCDY"),n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-lazy-video").livequery(function(){var e=this,t=(0,a.default)(this);t.whenNear(500,function(){e.src=t.data("src")})})})},X2U3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={name:"default","primary-light":"soft-black","primary-dark":"black","primary-accent":"ksr-green-400"}},X6aU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},XKW3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n("GiK3")),i=h(n("mXYp")),a=n("Z6GA"),o=n("MB1G"),s=n("COPM"),l=h(n("iGhc")),u=n("g9ya"),c=n("P4S0"),d=h(n("CF+r")),f=h(n("hYqS"));function h(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.id,n=e.body,h=e.author,p=e.createdAt,m=e.authorIsProjectCreator,g=void 0!==m&&m,v=e.authorIsProjectCollaborator,_=void 0!==v&&v,y=e.canReport,b=e.today,w=void 0===b?new Date:b,E=e.hasFlaggings,k=e.children,S=h.imageUrl?h.imageUrl:"DEFAULT_IMG.jpg",C=(0,i.default)(1e3*p,w)+" ago",T=n.split(/(?:\\r\\n|\\n)/g),A=new RegExp(c.TEMP_COMMENT_ID_PREFIX).test(t)?"o50p":"o100p";return r.default.createElement("div",{className:"border-box relative bg-white break-word border border-grey-400 p3 "+A},(g||_)&&r.default.createElement("span",{className:(g?"bg-ksr-green-700":_?"bg-ksr-green-700 o50p":void 0)+" w1 t0 b0 l0 absolute"}),r.default.createElement("div",{className:"flex mb3"},r.default.createElement(s.Avatar,{imageUrl:S,size:7,atoms:["mr2"]}),r.default.createElement("div",null,r.default.createElement("span",{className:"mr2"},h.name),r.default.createElement(d.default,null,r.default.createElement("span",null,g&&r.default.createElement(l.default,u.COMMENT_BADGES[c.USER_TYPES.CREATOR]),_&&r.default.createElement(l.default,u.COMMENT_BADGES[c.USER_TYPES.COLLABORATOR]),h.isSuperBacker&&r.default.createElement(l.default,u.COMMENT_BADGES[c.USER_TYPES.SUPERBACKER]))),r.default.createElement("time",{className:"block",dateTime:p},C))),r.default.createElement("div",null,T.map(function(e,t){var n=(0,a.computedAtoms)("type-16",(0,o.isLastItem)(T,t)?"mb0":"mb2");return r.default.createElement("p",{key:t,className:n},e)})),r.default.createElement("div",{className:"flex"},k,y&&r.default.createElement("div",{className:"ml-auto"},r.default.createElement(f.default,{contentId:t,kind:"SPAM",hasFlaggings:E}))))}},"Y0+b":function(e,t,n){"use strict";n("FD+P"),n("84+x"),n("b5hM"),n("Qijp"),n("ac+W"),n("zcvo"),n("2TxY");n("l/Rs"),n("l/Rs")},YBD5:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("Vh6Q"),n("wmCY"),n("8NzR"),n("aTdG"),n("ZVp/"),n("N/lE"),n("0ax2"),n("Et0E"),n("iQ9M"),n("QqbN"),n("9VV1"),n("yYdC"),n("RZwK"),n("4RZc"),n("9kaj"),n("asZU"),n("E5Nj"),n("2fYv"),n("yqLu"),n("3txR"),n("ofuh"),n("8bXp"),window.$=a.default},YBJb:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#site_about",function(){(0,r.default)(".js-charter-link").click(function(){(0,a.trackLinks)("About KSR About Charter Click")}),(0,r.default)(".js-stats-link").click(function(){(0,a.trackLinks)("About KSR About Stats Click")}),(0,r.default)(".js-team-link").click(function(){(0,a.trackLinks)("About KSR About Team Click")}),(0,r.default)(".js-jobs-link").click(function(){(0,a.trackLinks)("About KSR About Jobs Click")}),(0,r.default)(".js-toggle-founding-story").click(function(){(0,a.trackLinks)("About KSR About Founding Story Toggle")}),(0,r.default)(".js-press-link").click(function(){(0,a.trackLinks)("About KSR About Press Click")}),(0,r.default)(".js-start-link").click(function(){(0,a.trackLinks)("Clicked Start Project",{context:"about"})})})},YOqD:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("#country-select",function(e){e.livequery(function(){var t=(0,r.default)(this);t.find("a.btn--green").on("click",function(e){t.find("form").submit(),e.preventDefault()}),t.find("select#country").on("change",function(){var n=(0,r.default)(this).val().toLowerCase();t.find(".country").hide(),t.find("."+n).show(),e.removeClass().addClass(n)}).trigger("change")})})},YRFD:function(e,t,n){var r=n("xA5w");e.exports=function(e,t){var n=r(e).getTime(),i=r(t).getTime();return n>i?-1:n<i?1:0}},"YT+p":function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=8)}([function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){o[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=function(e,t){return t="["+e+"] > "+t}(e,r[0])),t.apply(self.console,r)}:i}(t)})}var l=function(e){if(!0===e||"object"===(void 0===e?"undefined":r(e))){s(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},u=a},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){"use strict";n.d(t,"b",function(){return i});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),a=(n+=10)+i;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&r.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,r=void 0,i=void 0,a=void 0,o="",s=0;s<n;){if(0===(r=e[s++])&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:i=e[s++],o+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[s++],a=e[s++],o+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&a)<<0)}}return o},e}(),i=r._utf8ArrayToStr;t.a=r},function(e,t,n){"use strict";var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var v=f[h],_=f[v],y=f[_],b=257*f[g]^16843008*g;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*y^65537*_^257*v^16843008*h,l[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,d[g]=b,h?(h=v^f[f[f[y^v]]],p^=f[f[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,f=this.invSubMix,h=f[0],p=f[1],m=f[2],g=f[3],v=void 0,_=void 0;for(o=0;o<a;o++)o<i?v=l[o]=t[o]:(_=v,o%i==0?(_=c[(_=_<<8|_>>>24)>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_],_^=d[o/i|0]<<24):i>6&&o%i==4&&(_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_]),l[o]=v=(l[o-i]^_)>>>0);for(s=0;s<a;s++)o=a-s,_=3&s?l[o]:l[o-4],u[s]=s<4||o<=4?_:h[c[_>>>24]]^p[c[_>>>16&255]]^m[c[_>>>8&255]]^g[c[255&_]],u[s]=u[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n){for(var r,i,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],m=h[1],g=h[2],v=h[3],_=new Int32Array(e),y=new Int32Array(_.length),b=void 0,w=void 0,E=void 0,k=void 0,S=void 0,C=void 0,T=void 0,A=void 0,R=void 0,x=void 0,P=void 0,I=void 0,O=this.networkToHostOrderSwap;t<_.length;){for(R=O(_[t]),x=O(_[t+1]),P=O(_[t+2]),I=O(_[t+3]),S=R^o[0],C=I^o[1],T=P^o[2],A=x^o[3],r=4,i=1;i<a;i++)b=u[S>>>24]^c[C>>16&255]^d[T>>8&255]^f[255&A]^o[r],w=u[C>>>24]^c[T>>16&255]^d[A>>8&255]^f[255&S]^o[r+1],E=u[T>>>24]^c[A>>16&255]^d[S>>8&255]^f[255&C]^o[r+2],k=u[A>>>24]^c[S>>16&255]^d[C>>8&255]^f[255&T]^o[r+3],S=b,C=w,T=E,A=k,r+=4;b=s[S>>>24]<<24^s[C>>16&255]<<16^s[T>>8&255]<<8^s[255&A]^o[r],w=s[C>>>24]<<24^s[T>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^o[r+1],E=s[T>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&C]^o[r+2],k=s[A>>>24]<<24^s[S>>16&255]<<16^s[C>>8&255]<<8^s[255&T]^o[r+3],r+=3,y[t]=O(b^p),y[t+1]=O(k^m),y[t+2]=O(E^g),y[t+3]=O(w^v),p=R,m=x,g=P,v=I,t+=4}return y.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=n(2),s=n(0);var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),o(u.decrypt(e,0,n))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(c,t)),this.fastAesKey.expandKey().then(function(i){new r(c,n).decrypt(e,i).catch(function(r){l.onWebCryptoError(r,e,t,n,o)}).then(function(e){o(e)})}).catch(function(r){l.onWebCryptoError(r,e,t,n,o)})}},e.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=l},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(u=n.slice()).length,l=0;l<o;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r,i,a,o,s;r=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(4),o=n(0);function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return!!(t+1<e.length&&s(e,t))}function d(e,t){if(t+1<e.length&&s(e,t)){var n=l(e,t);t+5<e.length&&(n=u(e,t));var r=t+n;if(r===e.length||r+1<e.length&&s(e,r))return!0}return!1}function f(e,t,n,r,a){if(!e.samplerate){var s=function(e,t,n,r){var a,s,l,u,c,d=navigator.userAgent.toLowerCase(),f=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[n+2])>>>6),!((s=(60&t[n+2])>>>2)>h.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+u),/firefox/i.test(d)?s>=6?(a=5,c=new Array(4),l=s-3):(a=2,c=new Array(2),l=s):-1!==d.indexOf("android")?(a=2,c=new Array(2),l=s):(a=5,c=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&s>=6?l=s-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(s>=6&&1===u||/vivaldi/i.test(d))||!r&&1===u)&&(a=2,c=new Array(2)),l=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=u<<3,5===a&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:u,codec:"mp4a.40."+a,manifestCodec:f};e.trigger(Event.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})}(t,n,r,a);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,o.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function h(e){return 9216e4/e}function p(e,t,n,r,i){var a=function(e,t,n,r,i){var a,o,s=e.length;if(a=l(e,t),o=u(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(t,n,r,i,h(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,c=a.frameLength,d={unit:t.subarray(n+s,n+s+c),pts:o,dts:o};return e.samples.push(d),e.len+=c,{sample:d,length:c+s}}}var m=n(3);var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(d(e,t))return o.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,r){for(var i=this._audioTrack,a=m.a.getID3Data(e,0)||[],s=m.a.getTimeStamp(a),l=s?90*s:9e4*t,u=0,d=l,h=e.length,g=a.length,v=[{pts:d,dts:d,data:a}];g<h-1;)if(c(e,g)&&g+5<h){f(i,this.observer,e,g,i.manifestCodec);var _=p(i,e,g,l,u);if(!_){o.b.log("Unable to parse AAC frame");break}g+=_.length,d=_.sample.pts,u++}else m.a.isHeader(e,g)?(a=m.a.getID3Data(e,g),v.push({pts:d,dts:d,data:a}),g+=a.length):g++;this.remuxer.remux(i,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,n,r)},e.prototype.destroy=function(){},e}();var v=Math.pow(2,32)-1,_=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,i,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?t:null})),this.observer.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!n.length)return null;for(r=l;r<o;)i=e.readUint32(t,r),a=e.bin2str(t.subarray(r+4,r+8)),u=i>1?r+i:o,a===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:u}):(s=e.findBox({data:t,start:r+8,end:u},n.slice(1))).length&&(c=c.concat(s))),r=u;return c},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var i=r.data[r.start],a=0===i?12:20,s=e.readUint32(r,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(i=l.data[l.start])?12:20;var u=e.readUint32(l,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=e.bin2str(f.data.subarray(f.start+12,f.start+16));o.b.log("MP4Demuxer:"+d+":"+h+" found")}n[s]={timescale:u,type:d},n[d]={timescale:u,id:s}}}}}}),n},e.getStartDTS=function(t,n){var r,i,a;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,a;return i=e.readUint32(r,4),a=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var a=e.readUint32(i,4),o=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*o);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*o,i=Math.max(i,0);var a=Math.floor(i/(v+1)),s=Math.floor(i%(v+1));e.writeUint32(t,4,a),e.writeUint32(t,8,s)}})})})},e.prototype.append=function(t,n,i,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-n,this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,t)},e.prototype.destroy=function(){},e}(),y={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),e.len+=a.frameLength,{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var s=3===n?3-r:3===r?3:4,l=1e3*y.BitratesMap[14*s+i-1],u=3===n?0:2===n?1:2,c=y.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,f=y.SamplesCoefficients[n][r],h=y.BytesInSlot[r],p=8*f*h;return{sampleRate:c,channelCount:d,frameLength:parseInt(f*l/c+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},b=y;var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.prototype.readSPS=function(){var e,t,n,r,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),m=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);if(d(),e=d(),f(5),m(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var y=h();if(3===y&&m(1),v(),v(),m(1),p())for(a=3!==y?8:12,o=0;o<a;o++)p()&&_(o<6?16:64)}v();var b=h();if(0===b)h();else if(1===b)for(m(1),g(),g(),t=h(),o=0;o<t;o++)g();v(),m(1),n=h(),r=h(),0===(i=f(1))&&m(1),m(1),p()&&(s=h(),l=h(),u=h(),c=h());var w=[1,1];if(p()&&p())switch(d()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:w}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();var E=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=r,this.discardEPB=i,this.decrypter=new a.a(t,n)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},e.prototype.decryptAvcSample=function(e,t,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,r)})},e.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},e}();var k={video:0,audio:1,id3:2,text:3},S=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.typeSupported=i,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new E(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:k[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,a,s){var l,u,c,d,f,h=t.length,p=!1;this.contiguous=a;var m=this.pmtParsed,g=this._avcTrack,v=this._audioTrack,_=this._id3Track,y=g.pid,b=v.pid,w=_.pid,E=this._pmtId,k=g.pesData,S=v.pesData,C=_.pesData,T=this._parsePAT,A=this._parsePMT,R=this._parsePES,x=this._parseAVCPES.bind(this),P=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),j=e._syncOffset(t);for(h-=(h+j)%188,l=j;l<h;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case y:u&&(k&&(f=R(k))&&x(f,!1),k={data:[],size:0}),k&&(k.data.push(t.subarray(d,l+188)),k.size+=l+188-d);break;case b:u&&(S&&(f=R(S))&&(v.isAAC?P(f):I(f)),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,l+188)),S.size+=l+188-d);break;case w:u&&(C&&(f=R(C))&&O(f),C={data:[],size:0}),C&&(C.data.push(t.subarray(d,l+188)),C.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),E=this._pmtId=T(t,d);break;case E:u&&(d+=t[d]+1);var D=A(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=D.avc)>0&&(g.pid=y),(b=D.audio)>0&&(v.pid=b,v.isAAC=D.isAAC),(w=D.id3)>0&&(_.pid=w),p&&!m&&(o.b.log("reparse from beginning"),p=!1,l=j-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(f=R(k))?(x(f,!0),g.pesData=null):g.pesData=k,S&&(f=R(S))?(v.isAAC?P(f):I(f),v.pesData=null):(S&&S.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=S),C&&(f=R(C))?(O(f),_.pesData=null):_.pesData=C,null==this.sampleAes?this.remuxer.remux(v,g,_,this._txtTrack,n,a,s):this.decryptAndRemux(v,g,_,this._txtTrack,n,a,s)},e.prototype.decryptAndRemux=function(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,a,o)})}else this.remuxer.remux(e,t,n,r,i,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,r){var i,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){o.b.log("unkown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!r){o.b.log("unkown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:n?-1===s.audio&&(s.audio=a,s.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},e.prototype._parsePES=function(e){var t,n,r,i,a,s,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&n?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),s-l>54e5&&(o.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),u=(i=t[8])+9,e.size-=u,a=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var m=(t=d[h]).byteLength;if(u){if(u>m){u-=m;continue}t=t.subarray(u),m-=u,u=0}a.set(t,c),c+=m}return r&&(r-=i+3),{data:a,pts:s,dts:l,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&o.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:r=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var f=new w(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:r=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,(n=new w(a.discardEPB(t.data))).readUByte();for(var h=0,p=0,m=!1,g=0;!m&&n.bytesAvailable>1;){h=0;do{h+=g=n.readUByte()}while(255===g);p=0;do{p+=g=n.readUByte()}while(255===g);if(4===h&&0!==n.bytesAvailable){if(m=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var v=n.readUByte(),_=31&v,y=[v,n.readUByte()];for(i=0;i<_;i++)y.push(n.readUByte()),y.push(n.readUByte()),y.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:y})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,u=!0,!o.sps){var b=(n=new w(t.data)).readSPS();o.width=b.width,o.height=b.height,o.pixelRatio=b.pixelRatio,o.sps=[t.data],o.duration=a._duration;var E=t.data.subarray(1,4),k="avc1.";for(i=0;i<3;i++){var S=E[i].toString(16);S.length<2&&(S="0"+S),k+=S}o.codec=k}break;case 8:r=!0,o.pps||(o.pps=[t.data]);break;case 9:r=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&r&&l.units.push(t)}),t&&l&&(c(l,o),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,n,r,i,a=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&e[0],l=0,a=1);a<o;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)r={data:e.subarray(d,a-l-1),type:i},c.push(r);else{var f=this._getLastNalUnit();if(f&&(u&&a<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(n=a-l-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(e.subarray(0,n),f.data.byteLength),f.data=h}}a<o?(d=a,i=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(r={data:e.subarray(d,o),type:i,state:l},c.push(r)),0===c.length){var p=this._getLastNalUnit();if(p){var m=new Uint8Array(p.data.byteLength+e.byteLength);m.set(p.data,0),m.set(e,p.data.byteLength),p.data=m}}return s.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},e.prototype._parseAACPES=function(e){var t,n,a,s,l,u,d,m=this._audioTrack,g=e.data,v=e.pts,_=this.aacOverFlow,y=this.aacLastPTS;if(_){var b=new Uint8Array(_.byteLength+g.byteLength);b.set(_,0),b.set(g,_.byteLength),g=b}for(a=0,l=g.length;a<l-1&&!c(g,a);a++);if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,d=!1):(u="no ADTS header found in AAC PES",d=!0),o.b.warn("parsing error:"+u),this.observer.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:d,reason:u}),d))return;if(f(m,this.observer,g,a,this.audioCodec),n=0,t=h(m.samplerate),_&&y){var w=y+t;Math.abs(w-v)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;a<l;)if(c(g,a)&&a+5<l){var E=p(m,g,a,v,n);if(!E)break;a+=E.length,s=E.sample.pts,n++}else a++;_=a<l?g.subarray(a,l):null,this.aacOverFlow=_,this.aacLastPTS=s},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(b.isHeader(t,i)){var o=b.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,r=m.a.getID3Data(e,0);if(r&&void 0!==m.a.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(b.probe(e,t))return o.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,r){for(var i=m.a.getID3Data(e,0),a=m.a.getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,l=e.length,u=0,c=0,d=this._audioTrack,f=[{pts:o,dts:o,data:i}];s<l;)if(b.isHeader(e,s)){var h=b.appendFrame(d,e,s,o,u);if(!h)break;s+=h.length,c=h.sample.pts,u++}else m.a.isHeader(e,s)?(i=m.a.getID3Data(e,s),f.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,r)},e.prototype.destroy=function(){},e}();var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();var A=Math.pow(2,32)-1,R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(A+1)),i=Math.floor(n%(A+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(A+1)),i=Math.floor(n%(A+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,a=t.height,o=Math.floor(r/(A+1)),s=Math.floor(r%(A+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),i=t.id,a=Math.floor(n/(A+1)),o=Math.floor(n%(A+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=u[r]).duration,o=i.size,s=i.flags,l=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();var x=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.typeSupported=r;var a=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,i,a,s,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,f=a;if(u&&c){var h=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;d+=Math.max(0,h),f+=Math.max(0,-h)}if(u){e.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p=this.remuxAudio(e,d,s,l);if(c){var m=void 0;p&&(m=p.endPTS-p.startPTS),t.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,f,s,m,l)}}else{var g=void 0;c&&(g=this.remuxVideo(t,f,s,l)),g&&e.codec&&this.remuxEmptyAudio(e,d,s,g)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var a,s,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,f="audio/mp4",h={},p={tracks:h},m=void 0===this._initPTS;if(m&&(a=s=1/0),e.config&&u.length&&(e.timescale=e.samplerate,o.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),h.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(a=s=u[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(a=Math.min(a,c[0].pts-g*n),s=Math.min(s,c[0].dts-g*n),this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(h).length?(l.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,m&&(this._initPTS=a,this._initDTS=s)):l.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,a,s){var l,u,c,d,f,h,p,m=8,g=e.timescale,v=e.samples,_=[],y=v.length,b=this._PTSNormalize,w=this._initDTS,E=this.nextAvcDts,k=this.isSafari;k&&(n|=v.length&&E&&(s&&Math.abs(t-E/g)<.1||Math.abs(v[0].pts-E-w)<g/5)),n||(E=t*g),v.forEach(function(e){e.pts=b(e.pts-w,E),e.dts=b(e.dts-w,E)}),v.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||(r||e.id-t.id)});var S=v.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(S<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var C=0;C<v.length;C++)v[C].dts+=S}var T=v[0];f=Math.max(T.dts,0),d=Math.max(T.pts,0);var A=Math.round((f-E)/90);n&&A&&(A>1?o.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC:"+-A+" ms overlapping between fragments detected"),f=E,v[0].dts=f,d=Math.max(d-A,E),v[0].pts=d,o.b.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(f/90)+",delta:"+A+" ms")),T=v[v.length-1],p=Math.max(T.dts,0),h=Math.max(T.pts,0,p),k&&(l=Math.round((p-f)/(v.length-1)));for(var x=0,P=0,I=0;I<y;I++){for(var O=v[I],j=O.units,D=j.length,N=0,L=0;L<D;L++)N+=j[L].data.length;P+=N,x+=D,O.length=N,O.dts=k?f+I*l:Math.max(O.dts,f),O.pts=Math.max(O.pts,O.dts)}var M=P+4*x+8;try{u=new Uint8Array(M)}catch(e){return void this.observer.trigger(r.a.ERROR,{type:i.b.MUX_ERROR,details:i.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(u.buffer);F.setUint32(0,M),u.set(R.types.mdat,4);for(var B=0;B<y;B++){for(var U=v[B],H=U.units,G=0,z=void 0,q=0,W=H.length;q<W;q++){var $=H[q],V=$.data,K=$.data.byteLength;F.setUint32(m,K),m+=4,u.set(V,m),m+=K,G+=4+K}if(k)z=Math.max(0,l*Math.round((U.pts-U.dts)/l));else{if(B<y-1)l=v[B+1].dts-U.dts;else{var Y=this.config,Q=U.dts-v[B>0?B-1:B].dts;if(Y.stretchShortVideoTrack){var X=Y.maxBufferHole,J=Y.maxSeekHole,Z=Math.floor(Math.min(X,J)*g),ee=(a?d+a*g:this.nextAudioPts)-U.pts;ee>Z?((l=ee-Q)<0&&(l=Q),o.b.log("It is approximately "+ee/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=Q}else l=Q}z=Math.round(U.pts-U.dts)}_.push({size:G,duration:l,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=p+l;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=_[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=_,c=R.moof(e.sequenceNumber++,f,e),e.samples=[];var re={data1:c,data2:u,startPTS:d/g,endPTS:(h+l)/g,startDTS:f/g,endDTS:this.nextAvcDts/g,type:"video",nb:_.length,dropped:te};return this.observer.trigger(r.a.FRAG_PARSING_DATA,re),re},e.prototype.remuxAudio=function(e,t,n,a){var s,l,u,c,d,f,h,p=e.inputTimeScale,m=e.timescale,g=p/m,v=(e.isAAC?1024:1152)*g,_=this._PTSNormalize,y=this._initDTS,b=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,E=[],k=this.nextAudioPts;if(n|=w.length&&k&&(a&&Math.abs(t-k/p)<.1||Math.abs(w[0].pts-k-y)<20*v),w.forEach(function(e){e.pts=e.dts=_(e.pts-y,t*p)}),0!==(w=w.filter(function(e){return e.pts>=0})).length){if(n||(k=a?t*p:w[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,C=0,A=k;C<w.length;){var x,P=w[C];x=P.pts-A;var I=Math.abs(1e3*x/p);if(x<=-S*v)o.b.warn("Dropping 1 audio frame @ "+(A/p).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),w.splice(C,1),e.len-=P.unit.length;else if(x>=S*v&&I<1e4&&A){var O=Math.round(x/v);o.b.warn("Injecting "+O+" audio frame @ "+(A/p).toFixed(3)+"s due to "+Math.round(1e3*x/p)+" ms gap.");for(var j=0;j<O;j++){var D=Math.max(A,0);(u=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=P.unit.subarray()),w.splice(C,0,{unit:u,pts:D,dts:D}),e.len+=u.length,A+=v,C++}P.pts=P.dts=A,A+=v,C++}else Math.abs(x),P.pts=P.dts=A,A+=v,C++}for(var N=0,L=w.length;N<L;N++){var M=w[N],F=M.unit,B=M.pts;if(void 0!==h)l.duration=Math.round((B-h)/g);else{var U=Math.round(1e3*(B-k)/p),H=0;if(n&&e.isAAC&&U){if(U>0&&U<1e4)H=Math.round((B-k)/v),o.b.log(U+" ms hole between AAC samples detected,filling it"),H>0&&((u=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=F.subarray()),e.len+=H*u.length);else if(U<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/p).toFixed(3)+"s/"+(B/p).toFixed(3)+"s/"+-U+"ms"),e.len-=F.byteLength;continue}B=k}if(f=B,!(e.len>0))return;var G=b?e.len:e.len+8;s=b?0:8;try{c=new Uint8Array(G)}catch(e){return void this.observer.trigger(r.a.ERROR,{type:i.b.MUX_ERROR,details:i.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}b||(new DataView(c.buffer).setUint32(0,G),c.set(R.types.mdat,4));for(var z=0;z<H;z++)(u=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=F.subarray()),c.set(u,s),s+=u.byteLength,l={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l)}c.set(F,s);var q=F.byteLength;s+=q,l={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l),h=B}var W=0,$=E.length;if($>=2&&(W=E[$-2].duration,l.duration=W),$){this.nextAudioPts=k=h+g*W,e.len=0,e.samples=E,d=b?new Uint8Array:R.moof(e.sequenceNumber++,f/g,e),e.samples=[];var V=f/p,K=k/p,Y={data1:d,data2:c,startPTS:V,endPTS:K,startDTS:V,endDTS:K,type:"audio",nb:$};return this.observer.trigger(r.a.FRAG_PARSING_DATA,Y),Y}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),s=this.nextAudioPts,l=(void 0!==s?s:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),f=T.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.b.warn("remux empty Audio"),f){for(var h=[],p=0;p<d;p++){var m=l+p*c;h.push({unit:f,pts:m,dts:m}),e.len+=f.length}e.samples=h,this.remuxAudio(e,t,n)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var n,i=e.samples.length,a=e.inputTimeScale,o=this._initPTS,s=this._initDTS;if(i){for(var l=0;l<i;l++)(n=e.samples[l]).pts=(n.pts-o)/a,n.dts=(n.dts-s)/a;this.observer.trigger(r.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,i=e.samples.length,a=e.inputTimeScale,o=this._initPTS;if(i){for(var s=0;s<i;s++)(n=e.samples[s]).pts=(n.pts-o)/a;this.observer.trigger(r.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(r.a.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,nb:1,dropped:0}),u.trigger(r.a.FRAG_PARSED)},e}();var I=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=n,this.config=r,this.vendor=i}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,i,o,s,l,u,c,d,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new a.a(this.observer,this.config));var m,g=this;try{m=performance.now()}catch(e){m=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a;try{a=performance.now()}catch(e){a=Date.now()}g.observer.trigger(r.a.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,o,s,l,u,c,d,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,o,s,l,u,c,d,f,h)},e.prototype.pushDecrypted=function(e,t,n,a,o,s,l,u,c,d,f,h){var p=this.demuxer;if(!p||l&&!this.probe(e)){for(var m=this.observer,v=this.typeSupported,y=this.config,b=[{demux:S,remux:x},{demux:_,remux:P},{demux:g,remux:x},{demux:C,remux:x}],w=0,E=b.length;w<E;w++){var k=b[w],T=k.demux.probe;if(T(e)){var A=this.remuxer=new k.remux(m,y,v,this.vendor);p=new k.demux(m,A,y,v),this.probe=T;break}}if(!p)return void m.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var R=this.remuxer;(l||u)&&(p.resetInitSegment(n,a,o,d),R.resetInitSegment()),l&&(p.resetTimeStamp(h),R.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,f)},e}();t.a=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};n.d(r,"newCue",function(){return Ee});var i=n(6),a=n.n(i),o=n(1),s=n(2),l=n(0),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===u(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){l.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();var d=/^(\d+)x(\d+)$/,f=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,h=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=d.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(f.lastIndex=0;null!==(t=f.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}(),p={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function m(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,y=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,E=function(){function e(){v(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return g(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),k=function(){function e(){v(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new E).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},g(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=a.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}();function S(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n}var C=function(e){function t(n){v(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var n=this.loaders[t.type];if(void 0!==n){var r=n.context;if(r&&r.url===e)return void l.b.trace("playlist request ongoing");l.b.warn("abort previous loader for type:"+t.type),n.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):"level"===t.type?(a=0,o=i.levelLoadingTimeOut):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,l.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var c,d;c={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,c,d)},t.prototype.resolve=function(e,t){return a.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){var n=[],r=void 0;function i(e,t){["video","audio"].forEach(function(n){var r=e.filter(function(e){return function(e,t){var n=p[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)});if(r.length){var i=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}for(_.lastIndex=0;null!=(r=_.exec(e));){var a={},o=a.attrs=new h(r[1]);a.url=this.resolve(r[2],t);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME,i([].concat((o.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),n.push(a)}return n},t.prototype.parseMasterPlaylistMedia=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=void 0,a=[],o=0;for(y.lastIndex=0;null!==(i=y.exec(e));){var s={},l=new h(i[1]);if(l.TYPE===n){if(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),r.length){var u=S(r,s.groupId);s.audioCodec=u?u.codec:r[0].codec}s.id=o++,a.push(s)}}return a},t.prototype.avc1toavcoti=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,n,r){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new E,d=0,f=null,p=new k;for(b.lastIndex=0;null!==(i=b.exec(e));){var m=i[1];if(m){p.duration=parseFloat(m);var g=(" "+i[2]).slice(1);p.title=g||null,p.tagList.push(g?["INF",m,g]:["INF",m])}else if(i[3]){if(!isNaN(p.duration)){var v=o++;p.type=r,p.start=s,p.levelkey=c,p.sn=v,p.level=n,p.cc=d,p.baseurl=t,p.relurl=(" "+i[3]).slice(1),u.fragments.push(p),f=p,s+=p.duration,p=new k}}else if(i[4]){if(p.rawByteRange=(" "+i[4]).slice(1),f){var _=f.byteRangeEndOffset;_&&(p.lastByteRangeEndOffset=_)}}else if(i[5])p.rawProgramDateTime=(" "+i[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(i[5]))-1e3*s));else{for(i=i[0].match(w),a=1;a<i.length&&void 0===i[a];a++);var y=(" "+i[a+1]).slice(1),S=(" "+i[a+2]).slice(1);switch(i[a]){case"#":p.tagList.push(S?[y,S]:[y]);break;case"PLAYLIST-TYPE":u.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(y);break;case"TARGETDURATION":u.targetduration=parseFloat(y);break;case"VERSION":u.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":d++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(y);break;case"KEY":var C=new h(y),T=C.enumeratedString("METHOD"),A=C.URI,R=C.hexadecimalInteger("IV");T&&(c=new E,A&&["AES-128","SAMPLE-AES"].indexOf(T)>=0&&(c.method=T,c.baseuri=t,c.reluri=A,c.key=null,c.iv=R));break;case"START":var x=new h(y).decimalFloatingPoint("TIME-OFFSET");isNaN(x)||(u.startTimeOffset=x);break;case"MAP":var P=new h(y);p.relurl=P.URI,p.rawByteRange=P.BYTERANGE,p.baseurl=t,p.level=n,p.type=r,p.sn="initSegment",u.initSegment=p,p=new k;break;default:l.b.warn("line parsed but not handled: "+i)}}}return(p=f)&&!p.relurl&&(u.fragments.pop(),s-=p.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=d,u},t.prototype.loadsuccess=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,a=e.url,u=n.type,c=n.id,d=n.level,f=this.hls;if(this.loaders[u]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=n.url),t.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var h="audioTrack"!==u&&"subtitleTrack"!==u,p=isNaN(d)?isNaN(c)?0:c:d,m=this.parseLevelPlaylist(i,a,p,"audioTrack"===u?"audio":"subtitleTrack"===u?"subtitle":"main");m.tload=t.tload,"manifest"===u&&f.trigger(o.a.MANIFEST_LOADED,{levels:[{url:a,details:m}],audioTracks:[],url:a,stats:t,networkDetails:r}),t.tparsed=performance.now(),m.targetduration?h?f.trigger(o.a.LEVEL_LOADED,{details:m,level:d||0,id:c||0,stats:t,networkDetails:r}):"audioTrack"===u?f.trigger(o.a.AUDIO_TRACK_LOADED,{details:m,id:c,stats:t,networkDetails:r}):"subtitleTrack"===u&&f.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:m,id:c,stats:t,networkDetails:r}):f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:r})}else{var g=this.parseMasterPlaylist(i,a);if(g.length){var v=g.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),_=this.parseMasterPlaylistMedia(i,a,"AUDIO",v),y=this.parseMasterPlaylistMedia(i,a,"SUBTITLES");if(_.length){var b=!1;_.forEach(function(e){e.url||(b=!0)}),!1===b&&g[0].audioCodec&&!g[0].attrs.AUDIO&&(l.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),_.unshift({type:"main",name:"main"}))}f.trigger(o.a.MANIFEST_LOADED,{levels:g,audioTracks:_,subtitles:y,url:a,stats:t,networkDetails:r})}else f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:r})}else f.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:r})},t.prototype.loaderror=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=s.a.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=s.a.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=s.a.AUDIO_TRACK_LOAD_ERROR,r=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:n,fatal:r,url:a.url,loader:a,response:e,context:t,networkDetails:i})},t.prototype.loadtimeout=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=s.a.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=s.a.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=s.a.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:n,fatal:r,url:a.url,loader:a,context:t,networkDetails:i})},t}(c);var T=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FRAG_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=this.hls.config;t.loaded=0,r&&(l.b.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=t.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var a,o,s=void 0;s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(u)||isNaN(c)||(s.rangeStart=u,s.rangeEnd=c),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(s,a,o)},t.prototype.loadsuccess=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.prototype.loadprogress=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},t}(c);var A=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;r&&(l.b.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var u,c,d;u={url:a,frag:t,responseType:"arraybuffer"},c={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(u,c,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.a.KEY_LOADED,{frag:r})},t.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(c),R={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},x={isBuffered:function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},bufferInfo:function(e,t,n){try{if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var r,i,a,o,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var u=l.length;if(u){var c=l[u-1].end;e[s].start-c<n?e[s].end>c&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,r=0,i=a=t;s<l.length;s++){var d=l[s].start,f=l[s].end;if(t+n>=d&&t<f)i=d,r=(a=f)-t;else if(t+n<d){o=d;break}}return{len:r,start:i,end:a,nextStart:o}}},P=n(7),I=n(5),O=n.n(I),j=n(9),D=n.n(j);function N(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var L=N(),M=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.id=n;var r=this.observer=new O.a,i=t.config;r.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit.apply(r,[e,e].concat(n))},r.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.removeListener.apply(r,[e].concat(n))};var a=function(e,n){(n=n||{}).frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);r.on(o.a.FRAG_DECRYPTED,a),r.on(o.a.FRAG_PARSING_INIT_SEGMENT,a),r.on(o.a.FRAG_PARSING_DATA,a),r.on(o.a.FRAG_PARSED,a),r.on(o.a.ERROR,a),r.on(o.a.FRAG_PARSING_METADATA,a),r.on(o.a.FRAG_PARSING_USERDATA,a),r.on(o.a.INIT_PTS_FOUND,a);var u={mp4:L.isTypeSupported("video/mp4"),mpeg:L.isTypeSupported("audio/mpeg"),mp3:L.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){l.b.log("demuxing in webworker");var d=void 0;try{d=this.w=D()(10),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){t.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:u,vendor:c,id:n,config:JSON.stringify(i)})}catch(e){l.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&URL.revokeObjectURL(d.objectURL),this.demuxer=new P.a(r,u,i,c),this.w=void 0}}else this.demuxer=new P.a(r,u,i,c)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,n,r,i,a,o,s){var u=this.w,c=isNaN(i.startDTS)?i.start:i.startDTS,d=i.decryptdata,f=this.frag,h=!(f&&i.cc===f.cc),p=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,g=!p&&m;if(h&&l.b.log(this.id+":discontinuity detected"),p&&l.b.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var v=this.demuxer;v&&v.push(e,d,t,n,r,c,h,p,g,a,o,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function F(e,t,n){var r=e[t],i=e[n],a=i.startPTS;isNaN(a)?i.start=n>t?r.start+r.duration:Math.max(r.start-i.duration,0):n>t?(r.duration=a-r.start,r.duration<0&&l.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&l.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function B(e,t,n,r,i,a){var o=n;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=r,t.startDTS=i,t.endDTS=a,t.duration=r-n;var u,c,d,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(u=f-e.startSN,(c=e.fragments)[u]=t,d=u;d>0;d--)F(c,d,d-1);for(d=u;d<c.length-1;d++)F(c,d,d+1);return e.PTSKnown=!0,l}function U(e,t){var n,r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=e.fragments,s=t.fragments,u=0;if(i<r)t.PTSKnown=!1;else{for(var c=r;c<=i;c++){var d=o[a+c],f=s[c];f&&d&&(u=d.cc-f.cc,isNaN(d.startPTS)||(f.start=f.startPTS=d.startPTS,f.endPTS=d.endPTS,f.duration=d.duration,f.backtracked=d.backtracked,f.dropped=d.dropped,n=f))}if(u)for(l.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<s.length;c++)s[c].cc+=u;if(n)B(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(a>=0&&a<o.length){var h=o[a].start;for(c=0;c<s.length;c++)s[c].start+=h}t.PTSKnown=e.PTSKnown}}var H={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function G(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function z(e,t,n){if(function(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,t,n)){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;l.b.log("No frag in previous level to align on")}else l.b.log("No fragments to align")}(t.details,n);r&&(l.b.log("Adjusting PTS using last level due to CC increase within current level"),G(r.start,n))}if(!1===n.PTSKnown&&t&&t.details){var i=t.details.programDateTime,a=(n.programDateTime-i)/1e3+t.details.fragments[0].start;isNaN(a)||(l.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),G(a,n))}}var q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var W={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},$=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED));return r.config=n.config,r.audioCodecSwap=!1,r.ticks=0,r._state=W.STOPPED,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=W.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(l.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=W.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=W.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=W.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case W.ERROR:break;case W.BUFFER_FLUSHING:this.fragLoadError=0;break;case W.IDLE:this._doTickIdle();break;case W.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=W.IDLE);break;case W.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(l.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=W.IDLE);break;case W.ERROR:case W.STOPPED:case W.FRAG_LOADING:case W.PARSING:case W.PARSED:case W.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var s=a.bitrate,u=void 0;u=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var c=x.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),d=c.len;if(!(d>=u)){l.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(void 0===f||!0===f.live&&this.levelLastLoaded!==i)this.state=W.WAITING_LEVEL;else{var h=this.fragPrevious;if(!f.live&&h&&!h.backtracked&&h.sn===f.endSN&&!c.nextStart)if(Math.min(n.duration,h.start+h.duration)-Math.max(c.end,h.start)<=Math.max(.2,h.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(o.a.BUFFER_EOS,p),void(this.state=W.ENDED)}this._fetchPayloadOrEos(r,c,f)}}}}},t.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,c=t.end,d=void 0;if(n.initSegment&&!n.initSegment.data)d=n.initSegment;else if(n.live){var f=this.config.initialLiveManifestSize;if(o<f)return void l.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(null===(d=this._ensureFragmentAtLivePoint(n,c,s,u,r,a,o)))return}else c<s&&(d=a[0]);d||(d=this._findFragment(s,r,o,a,c,u,n)),d&&this._loadFragmentOrKey(d,i,n,e,c)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,o){var s=this.hls.config,u=this.media,c=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);l.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,u&&u.readyState&&u.duration>f&&(u.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var h=i.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=a[h-e.startSN];i.cc===p.cc&&(c=p,l.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=R.search(a,function(e){return i.cc-e.cc}))&&l.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=a[Math.min(o-1,Math.round(o/2))],l.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},t.prototype._findFragment=function(e,t,n,r,i,a,o){var s=this.hls.config,u=void 0,c=void 0,d=s.maxFragLookUpTolerance,f=t?r[t.sn-r[0].sn+1]:void 0,h=function(e){var t=Math.min(d,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};if(i<a?(i>a-d&&(d=0),c=f&&!h(f)?f:R.search(r,h)):c=r[n-1],c){var p=(u=c).sn-o.startSN,m=t&&u.level===t.level,g=r[p-1],v=r[p+1];if(t&&u.sn===t.sn)if(m&&!u.backtracked)if(u.sn<o.endSN){var _=t.deltaPTS;_&&_>s.maxBufferHole&&t.dropped&&p?(u=g,l.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=v,l.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(v&&v.backtracked?(l.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+v.sn),u=v):(l.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,g?(g.loadCounter&&g.loadCounter--,(u=g).backtracked=!0):p&&(u=null)))}return u},t.prototype._loadFragmentOrKey=function(e,t,n,r,i){var a=this.hls,u=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(l.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var c=u.fragLoadingLoopThreshold;if(e.loadCounter>c&&Math.abs(this.fragLoadIdx-e.loadIdx)<c)return void a.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),a.trigger(o.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new M(a,"main")),void(this.state=W.FRAG_LOADING)}l.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=W.KEY_LOADING,a.trigger(o.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return R.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),x.isBuffered(n,t)?e=this.getBufferedFrag(t):x.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},t.prototype.immediateLevelSwitch=function(){if(l.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,x.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,r=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(e.currentTime+n))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=W.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,n)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||l.b.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,i=x.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===W.FRAG_LOADING){var a=this.fragCurrent;if(0===i.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;t<s||t>u?(a.loader&&(l.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=W.IDLE):l.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===W.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=W.IDLE);e&&(this.lastCurrentTime=t),this.state!==W.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||l.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){l.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){l.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&l.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=t.totalduration,s=0;if(l.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var u=i.details;u&&t.fragments.length>0?(U(u,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,u),t.PTSKnown&&!isNaN(s)?l.b.log("live playlist sliding:"+s.toFixed(3)):(l.b.log("live playlist - outdated PTS, unknown sliding"),z(this.fragPrevious,r,t))):(l.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,z(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(o.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;isNaN(c)?t.live?(this.startPosition=this.computeLivePosition(s,t),l.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(l.b.log("negative start time offset "+c+", count from end of last fragment"),c=s+a+c),l.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===W.WAITING_LEVEL&&(this.state=W.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===W.KEY_LOADING&&(this.state=W.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===W.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(l.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=W.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=W.IDLE,r.tparsed=r.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(o.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=W.PARSING;var s=a.totalduration,u=t.level,c=t.sn,d=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,l.b.log("Parsing "+c+" of ["+a.startSN+" ,"+a.endSN+"],level "+u+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new M(this.hls,"main"));var h=this.media,p=!(h&&h.seeking)&&(a.PTSKnown||!a.live),m=a.initSegment?a.initSegment.data:[];f.push(e.payload,m,d,i.videoCodec,t,s,p,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===W.PARSING){var r,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var s=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===u.indexOf("firefox")&&(s="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==i.container&&(s="mp4a.40.2",l.b.log("Android: force audio codec to "+s)),i.levelCodec=s,i.id=e.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(o.a.BUFFER_CODECS,a),a){i=a[r],l.b.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var c=i.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:r,data:c,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===W.PARSING){var i=this.levels[this.level],a=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),l.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)l.b.warn("Already backtracked on this fragment, appending with the gap");else{var s=i.details;if(!s||a.sn!==s.startSN)return l.b.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=W.IDLE,this.fragPrevious=a,void this.tick();l.b.warn("missing video frame(s) on first frag, appending with gap")}else a.backtracked=!1;var u=B(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(o.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:u,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===W.PARSING&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(o.a.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===W.PARSING&&(this.stats.tparsed=performance.now(),this.state=W.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){l.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(l.b.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=W.IDLE}var i=this.hls;i.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(l.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(r=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):i=!0}i&&n?(l.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==W.PARSING&&t!==W.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==W.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("main buffered : "+H.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return x.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=W.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&x.isBuffered(this.media,this.media.currentTime)&&x.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,l.b.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=W.FRAG_LOADING_WAITING_RETRY}else l.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=W.ERROR;break;case s.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=W.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=W.ERROR));break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==W.ERROR&&(e.fatal?(this.state=W.ERROR,l.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==W.WAITING_LEVEL||(this.state=W.IDLE));break;case s.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==W.PARSING&&this.state!==W.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=W.IDLE):(l.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,l.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,i=r.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var a=e.seeking?n:this.startPosition,u=x.isBuffered(r,a),c=i.start(0),d=!u&&Math.abs(a-c)<t.maxSeekHole;(n!==a||d)&&(l.b.log("target start position:"+a),d&&(a=c,l.b.log("target start position not buffered, seek to buffered.start(0) "+a)),l.b.log("adjust currentTime from "+n+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var f=x.bufferInfo(e,n,0),h=!(e.paused||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(l.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(h){var p=performance.now(),m=this.hls;if(this.stalled){var g=p-this.stalled,v=f.len,_=this.nudgeRetry||0;if(v<=.5&&g>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in low buffer @"+n),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v}));var y=f.nextStart,b=y-n;if(y&&b<t.maxSeekHole&&b>0){this.nudgeRetry=++_;var w=_*t.nudgeOffset;l.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+w),e.currentTime=y+w,this.stalled=void 0,m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+w-n})}}else if(v>.5&&g>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in high buffer @"+n),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v})),this.stalled=void 0,this.nudgeRetry=++_,_<t.nudgeMaxRetry){var E=e.currentTime,k=E+_*t.nudgeOffset;l.b.log("adjust currentTime from "+E+" to "+k),e.currentTime=k,m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else l.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),m.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=W.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return x.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=W.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},q(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("main stream:"+t+"->"+e),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(c),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var K=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.FRAG_LOADED,o.a.ERROR));return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],n=void 0,r={},i=null,a=!1,u=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,u=u||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===c&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(i=r[e.bitrate])?(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,t.push(e)):i.url.push(e.url)}),!0===a&&!0===u&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||m(t))&&(!n||m(n))}),e.audioTracks&&(d=e.audioTracks.filter(function(e){return!e.audioCodec||m(e.audioCodec,"audio")})),t.length>0){n=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var f=0;f<t.length;f++)if(t[f].bitrate===n){this._firstLevel=f,l.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:t,audioTracks:d,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:a,altAudio:d.length>0})}else this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){l.b.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(o.a.LEVEL_SWITCH,r),n.trigger(o.a.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||!0===a.live){var u=i.urlId;n.trigger(o.a.LEVEL_LOADING,{url:i.url[u],level:e,id:u})}}else n.trigger(o.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,n=!1,r=void 0;switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.FRAG_LOOP_LOADING_ERROR:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:r=e.frag.level,n=!0;break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:r=e.context.level,t=!0;break;case s.a.REMUX_ALLOC_ERROR:r=e.level,t=!0}void 0!==r&&this.recoverLevel(e,r,t,n)}else e.type===s.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.recoverLevel=function(e,t,n,r){var i=this,a=this.hls.config,o=e.details,s=this._levels[t],u=void 0,c=void 0,d=void 0;if(s.loadError++,s.fragmentError=r,!0===n){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return l.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},c),e.levelRetry=!0,this.levelRetryCount++,l.b.warn("level controller, "+o+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==r||((u=s.url.length)>1&&s.loadError<u?(l.b.warn("level controller, "+o+" for level "+t+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%u,s.details=void 0):-1===this.manualLevelIndex?(d=0===t?this._levels.length-1:t-1,l.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):!0===r&&(l.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var r=this._levels[n];!1===r.fragmentError&&(r.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=r.details;o&&i.endSN===o.endSN&&(a/=2,l.b.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),l.b.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&e.url.length>0&&(t=e.urlId,this.hls.trigger(o.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},V(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(c),Y=n(3);var Q=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=Y.a.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var l=0;l<a.length;l++){var u=a[l];if(!Y.a.isTimeStampFrame(u)){var c=new r(o,s,"");c.value=u,this.id3Track.addCue(c)}}}}},t}(c);var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();var J=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new X(n),this.fast_=new X(r)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ee=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=n,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;i?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this._bwEstimator=new J(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return l.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var s=performance.now()-a.trequest,u=Math.abs(t.playbackRate);if(s>500*n.duration/u){var c=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/s),f=c[n.level],h=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*h/8)),m=t.currentTime,g=(p-a.loaded)/d,v=(x.bufferInfo(t,m,e.config.maxBufferHole).end-m)/u;if(v<2*n.duration/u&&g>v){var _=void 0,y=void 0;for(y=n.level-1;y>i;y--){var b=c[y].realBitrate?Math.max(c[y].realBitrate,c[y].bitrate):c[y].bitrate;if((_=n.duration*b/(6.4*d))<v)break}_<g&&(l.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(s,a.loaded),r.abort(),this.clearTimer(),e.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;l.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,n,r,i,a,o,s,u){for(var c=i;c>=r;c--){var d=u[c].details,f=d?d.totalduration/d.fragments.length:t,h=!!d&&d.live,p=void 0;p=c<=e?o*n:s*n;var m=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,g=m*f/p;if(l.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+m+"/"+f+"/"+a+"/"+g),p>m&&(!g||h&&!this.bitrateTestDelay||g<a))return c}return-1},Z(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,c=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,f=(x.bufferInfo(a,u,r.maxBufferHole).end-u)/c,h=this._findBestLevel(o,s,d,i,t,f,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(h>=0)return h;l.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,m=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===f){var v=this.bitrateTestDelay;if(v)p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-v,l.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=g=1}return h=this._findBestLevel(o,s,d,i,t,f+p,m,g,n),Math.max(h,0)}}]),t}(c);var te=N(),ne=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){i=!0,l.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(l.b.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),l.b.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new te;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){l.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){l.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):l.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){l.b.log("media source opened"),this.hls.trigger(o.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){l.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){l.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;l.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(o.a.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){l.b.error("sourceBuffer error:",e),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,u=i.container+";codecs="+a;l.b.log("creating sourceBuffer("+u+")");try{var c=t[r]=n.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=c}catch(e){l.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){l.b.error("sourceBuffer error:",e.event),this.hls.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,l.b.log(r+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}l.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){l.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(l.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(l.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){l.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void l.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=t[r.type];i?i.updating?n.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){l.b.error("error while trying to append buffer:"+t.message),n.unshift(r);var a={type:s.b.MEDIA_ERROR,parent:r.parent};if(22===t.code)return this.segments=[],a.details=s.a.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(o.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=s.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return l.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(o.a.ERROR,a);a.fatal=!1,e.trigger(o.a.ERROR,a)}}}},t.prototype.flushBuffer=function(e,t,n){var r,i,a,o,s,u,c=this.sourceBuffer;if(Object.keys(c).length){if(l.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in c)if(!n||d===n){if((r=c[d]).ended=!1,r.updating)return l.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(a,e),u=Math.min(o,t)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,l.b.log("flush "+d+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,u),!1}catch(e){l.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else l.b.warn("abort flushing too many retries");l.b.log("buffer flushed")}return!0},t}(c),re=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ie=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e});return t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},re(t,[{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(c);var ae=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,u=1e3*a/i,c=this.hls;if(c.trigger(o.a.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:n}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*s){var d=c.currentLevel;l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(c);var oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var o=t.status;if(o>=200&&o<300){r.tload=Math.max(r.tfirst,performance.now());var s=void 0,u=void 0;u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,r,i,t)}else r.retry>=a.maxRetry||o>=400&&o<499?(l.b.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(l.b.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){l.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}(),se=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var le=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.AUDIO_TRACK_LOADED,o.a.ERROR));return r.ticks=0,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),c.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(o.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){if(e.default&&!r)return t.audioTrack=i,void(r=!0);i++}),!1===r&&n.length&&(l.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(l.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,a={id:e,type:r,url:i};n.trigger(o.a.AUDIO_TRACK_SWITCH,a),n.trigger(o.a.AUDIO_TRACK_SWITCHING,a);var s=t.details;!i||void 0!==s&&!0!==s.live||(l.b.log("(re)loading playlist for audioTrack "+e),n.trigger(o.a.AUDIO_TRACK_LOADING,{url:i,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&!0!==r.live||(l.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(o.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},se(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(c),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ce={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},de=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.AUDIO_TRACKS_UPDATED,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.BUFFER_RESET,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED,o.a.INIT_PTS_FOUND));return r.config=n.config,r.audioCodecSwap=!1,r.ticks=0,r._state=ce.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=ce.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,l.b.log("InitPTS for cc:"+n+" found from video track:"+r),this.state===ce.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(l.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ce.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ce.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ce.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ce.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case ce.ERROR:case ce.PAUSED:case ce.BUFFER_FLUSHING:break;case ce.STARTING:this.state=ce.WAITING_TRACK,this.loadedmetadata=!1;break;case ce.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var u=this.mediaBuffer?this.mediaBuffer:this.media,c=this.videoBuffer?this.videoBuffer:this.media,d=x.bufferInfo(u,e,i.maxBufferHole),f=x.bufferInfo(c,e,i.maxBufferHole),h=d.len,p=d.end,m=this.fragPrevious,g=Math.max(i.maxBufferLength,f.len),v=this.audioSwitch,_=this.trackId;if((h<g||v)&&_<a.length){if(void 0===(n=a[_].details)){this.state=ce.WAITING_TRACK;break}if(!v&&!n.live&&m&&m.sn===n.endSN&&!d.nextStart&&(!this.media.seeking||this.media.duration-p<m.duration/2)){this.hls.trigger(o.a.BUFFER_EOS,{type:"audio"}),this.state=ce.ENDED;break}var y=n.fragments,b=y.length,w=y[0].start,E=y[b-1].start+y[b-1].duration,k=void 0;if(v)if(n.live&&!n.PTSKnown)l.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,n.PTSKnown&&e<w){if(!(d.end>w||d.nextStart))return;l.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=w+.05}if(n.initSegment&&!n.initSegment.data)k=n.initSegment;else if(p<=w){if(k=y[0],null!==this.videoTrackCC&&k.cc!==this.videoTrackCC&&(k=function(e,t){return R.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(y,this.videoTrackCC)),n.live&&k.loadIdx&&k.loadIdx===this.fragLoadIdx){var S=d.nextStart?d.nextStart:w;return l.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var C=void 0,T=i.maxFragLookUpTolerance,A=m?y[m.sn-y[0].sn+1]:void 0,P=function(e){var t=Math.min(T,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<E?(p>E-T&&(T=0),C=A&&!P(A)?A:R.search(y,P)):C=y[b-1],C&&(k=C,w=C.start,m&&k.level===m.level&&k.sn===m.sn&&(k.sn<n.endSN?(k=y[k.sn+1-n.startSN],l.b.log("SN just loaded, load next one: "+k.sn)):k=null))}if(k)if(k.decryptdata&&null!=k.decryptdata.uri&&null==k.decryptdata.key)l.b.log("Loading key for "+k.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+_),this.state=ce.KEY_LOADING,r.trigger(o.a.KEY_LOADING,{frag:k});else{if(l.b.log("Loading "+k.sn+", cc: "+k.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+_+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,k.loadCounter){k.loadCounter++;var I=i.fragLoadingLoopThreshold;if(k.loadCounter>I&&Math.abs(this.fragLoadIdx-k.loadIdx)<I)return void r.trigger(o.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:k})}else k.loadCounter=1;k.loadIdx=this.fragLoadIdx,this.fragCurrent=k,this.startFragRequested=!0,isNaN(k.sn)||(this.nextLoadPosition=k.start+k.duration),r.trigger(o.a.FRAG_LOADING,{frag:k}),this.state=ce.FRAG_LOADING}}break;case ce.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=ce.IDLE);break;case ce.FRAG_LOADING_WAITING_RETRY:var O=performance.now(),j=this.retryDate,D=(u=this.media)&&u.seeking;(!j||O>=j||D)&&(l.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ce.IDLE);break;case ce.WAITING_INIT_PTS:var N=this.videoTrackCC;if(void 0===this.initPTS[N])break;var L=this.waitingFragment;if(L){var M=L.frag.cc;N!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(l.b.warn("Waiting fragment CC ("+M+") does not match video track CC ("+N+")"),this.waitingFragment=null,this.state=ce.IDLE):(this.state=ce.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ce.IDLE;break;case ce.STOPPED:case ce.FRAG_LOADING:case ce.PARSING:case ce.PARSED:case ce.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===ce.ENDED&&(this.state=ce.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){l.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=ce.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ce.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(l.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&t.fragments.length>0?(U(o,t),a=t.fragments[0].start,t.PTSKnown?l.b.log("live audio playlist sliding:"+a.toFixed(3)):l.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,l.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(l.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===ce.WAITING_TRACK&&(this.state=ce.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===ce.KEY_LOADING&&(this.state=ce.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===ce.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,s=t.level,u=t.sn,c=t.cc,d=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",f=this.stats=e.stats;if("initSegment"===u)this.state=ce.IDLE,f.tparsed=f.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(o.a.FRAG_BUFFERED,{stats:f,frag:t,id:"audio"}),this.tick();else{this.state=ce.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new M(this.hls,"audio"));var h=this.initPTS[c],p=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,l.b.log("Demuxing "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+s);this.demuxer.push(e.payload,p,d,null,t,a,!1,h)}else l.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+s),this.waitingFragment=e,this.state=ce.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ce.PARSING){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(o.a.BUFFER_CODECS,r),l.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,s))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===ce.PARSING){var i=this.trackId,a=this.tracks[i],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),l.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),B(a.details,n,e.startPTS,e.endPTS);var u=this.audioSwitch,c=this.media,d=!1;if(u&&c)if(c.readyState){var f=c.currentTime;l.b.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(l.b.log("switching audio track : flushing all audio"),this.state=ce.BUFFER_FLUSHING,s.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,s.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,s.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:i});var h=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})}),!d&&h.length&&(h.forEach(function(e){t.state===ce.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(o.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ce.PARSING&&(this.stats.tparsed=performance.now(),this.state=ce.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==ce.PARSING&&t!==ce.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==ce.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(o.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("audio buffered : "+H.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ce.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);l.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=ce.FRAG_LOADING_WAITING_RETRY}else l.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=ce.ERROR}break;case s.a.FRAG_LOOP_LOADING_ERROR:case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.state!==ce.ERROR&&(this.state=e.fatal?ce.ERROR:ce.IDLE,l.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case s.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===ce.PARSING||this.state===ce.PARSED)){var a=this.mediaBuffer,u=this.media.currentTime;if(a&&x.isBuffered(a,u)&&x.isBuffered(a,u+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,l.b.warn("audio:reduce max buffer length to "+c.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*c.fragLoadingLoopThreshold),this.state=ce.IDLE}else l.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ce.BUFFER_FLUSHING,this.hls.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(l.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(o.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=ce.PARSED):(this.state=ce.IDLE,this.fragPrevious=null,this.tick())},ue(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(c),fe=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function a(n,a,o){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,h=a,p=o,m=null,g="",v=!0,_="auto",y="start",b=50,w="middle",E=50,k="middle";if(Object.defineProperty(s,"id",i({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return g},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return _},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return k},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),he=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function pe(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new he,this.regionList=[]}function me(){this.values=Object.create(null)}function ge(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}me.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ve=new fe(0,0,0),_e="middle"===ve.align?"middle":"center";function ye(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var r=new me;ge(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",_e,"end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",_e,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",_e,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===ve.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",_e);var a=r.get("position","auto");"auto"===a&&50===ve.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function be(e){return e.replace(/<br(?: \/)?>/gi,"\n")}pe.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=be(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var i=(r=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=n(),t.state){case"HEADER":/:/.test(r)?ge(r,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new fe(0,0,""),t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{ye(r,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r;continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var we=pe;function Ee(e,t,n,r){for(var i,a,o,s,l,u=window.VTTCue||window.TextTrackCue,c=0;c<r.rows.length;c++)if(o=!0,s=0,l="",!(i=r.rows[c]).isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&o?s++:(l+=i.chars[d].uchar,o=!1);i.cueStartTime=t,t===n&&(n+=1e-4),a=new u(t,n,be(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ce=function(e){var t=e;return Se.hasOwnProperty(e)&&(t=Se[e]),String.fromCharCode(t)},Te=15,Ae=100,Re={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},xe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Pe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ie={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Oe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],je={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},De=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Ne=function(){function e(t,n,r,i,a){ke(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=r||!1,this.background=i||"black",this.flash=a||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Le=function(){function e(t,n,r,i,a,o){ke(this,e),this.uchar=t||" ",this.penState=new Ne(n,r,i,a,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Me=function(){function e(){ke(this,e),this.chars=[];for(var t=0;t<Ae;t++)this.chars.push(new Le);this.pos=0,this.currPenState=new Ne}return e.prototype.equals=function(e){for(var t=!0,n=0;n<Ae;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Ae;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Ae;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(je.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Ae&&(je.log("ERROR","Too large cursor position "+this.pos),this.pos=Ae)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Ce(e);this.pos>=Ae?je.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<Ae;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<Ae;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Fe=function(){function e(){ke(this,e),this.rows=[];for(var t=0;t<Te;t++)this.rows.push(new Me);this.currRow=Te-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<Te;e++)this.rows[e].clear();this.currRow=Te-1},e.prototype.equals=function(e){for(var t=!0,n=0;n<Te;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Te;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Te;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){je.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){je.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Te;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<je.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){je.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){je.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),je.log("INFO","Rolling up")}else je.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<Te;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Be=function(){function e(t,n){ke(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Fe,this.nonDisplayedMemory=new Fe,this.lastOutputScreen=new Fe,this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,je.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";je.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(je.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){je.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){je.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){je.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){je.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){je.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){je.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){je.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){je.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){je.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){je.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){je.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(je.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,je.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){je.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}je.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=je.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Ue=function(){function e(t,n,r){ke(this,e),this.field=t||1,this.outputs=[n,r],this.channels=[new Be(1,n),new Be(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,r,i,a=!1;this.lastTime=e,je.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(je.log("DATA","["+De([t[o],t[o+1]])+"] -> ("+De([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n)if(a=this.parseChars(r,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else je.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,je.log("WARNING","Couldn't parse cleaned data "+De([r,i])+" orig: "+De([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,je.log("DEBUG","Repeated command ("+De([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(je.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),je.log("DEBUG","MIDROW ("+De([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?Re[e]:Pe[e]:1===n?xe[e]:Ie[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.prototype.parseChars=function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),17<=i&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,je.log("INFO","Special char '"+Ce(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var o=De(r);je.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.prototype.parseBackgroundAttributes=function(e,t){var n,r,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=Oe[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();var He=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timelineController=t,this.track=n,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.track)},e}(),Ge=function(e,t,n){return e.substr(n||0,t.length)===t},ze=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},qe={parse:function(e,t,n,r,i,a){var o=Object(Y.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,u=0,c=0,d=[],f=void 0,h=!0,p=new we;p.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==u?i=n.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(n,r,c)),c&&(i=c+n.ccOffset-n.presentationOffset),e.startTime+=i-u,e.endTime+=i-u,e.id=ze(e.startTime.toString())+ze(e.endTime.toString())+ze(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&d.push(e)},p.onparsingerror=function(e){f=e},p.onflush=function(){f&&a?a(f):i(d)},o.forEach(function(e){if(h){if(Ge(e,"X-TIMESTAMP-MAP=")){h=!1,e.substr(16).split(",").forEach(function(e){Ge(e,"LOCAL:")?s=e.substr(6):Ge(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{l-=t=t<0?t+8589934592:t,n=s,r=parseInt(n.substr(-3)),i=parseInt(n.substr(-6,2)),a=parseInt(n.substr(-9,2)),o=n.length>9?parseInt(n.substr(0,n.indexOf(":"))):0,u=(isNaN(r)||isNaN(i)||isNaN(a)||isNaN(o)?-1:(r+=1e3*i,r+=6e4*a,r+=36e5*o))/1e3,c=l/9e4,-1===u&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){f=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(h=!1)}var n,r,i,a,o;p.parse(e+"\n")}),p.flush()}};function We(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var $e=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_USERDATA,o.a.FRAG_DECRYPTED,o.a.MANIFEST_LOADING,o.a.MANIFEST_LOADED,o.a.FRAG_LOADED,o.a.LEVEL_SWITCHING,o.a.INIT_PTS_FOUND));if(r.hls=n,r.config=n.config,r.enabled=!0,r.Cues=n.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.config.enableCEA708Captions){var i=new He(r,1),a=new He(r,2);r.cea608Parser=new Ue(0,i,a)}return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCues=function(e,t,n,r){for(var i,a,o,s,l=this.cueRanges,u=!1,c=l.length;c--;){var d=l[c],f=(i=d[0],a=d[1],o=t,s=n,Math.min(a,s)-Math.max(i,o));if(f>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),u=!0,f/(n-t)>.5))return}u||l.push([t,n]),this.Cues.newCue(this[e],t,n,r)},t.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(!0===r["textTrack"+e])return r}return null},t.prototype.sendAddTrackEvent=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var n=this.getExistingTrack(e);if(n)this[t]=n,We(this[t]),this.sendAddTrackEvent(this[t],this.media);else{var r=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config.captionsTextTrack1LanguageCode);r&&(r[t]=!0,this[t]=r)}}},t.prototype.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){We(this.textTrack1),We(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)We(t[n])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i=void 0;if(r<n.length){var a=n[r];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(a,e)&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e.default?"showing":"hidden",t.textTracks.push(i)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,n)}else this.hls.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var r=this.textTracks,i=this.hls;qe.parse(t,this.initPTS,n,e.cc,function(t){var n=r[e.trackId];t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(r){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),i.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){l.b.log("Failed to parse VTT cue: "+t),i.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},t.prototype.onFragDecrypted=function(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.prototype.extractCea608Data=function(e){for(var t,n,r,i=31&e[0],a=2,o=[],s=0;s<i;s++)t=e[a++],n=127&e[a++],r=127&e[a++],0===n&&0===r||0!=(4&t)&&0===(3&t)&&(o.push(n),o.push(r));return o},t}(c),Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ke(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}var Ye=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_LOADED,o.a.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r.subtitleDisplay=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Ke(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(o.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(l.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=Ke(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(t[this.trackId].mode="hidden"),this.trackId=e,l.b.log("switching to subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var n=this.tracks[e];this.subtitleDisplay&&(t[e].mode="showing");var r=n.details;void 0!==r&&!0!==r.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}}},Ve(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(c),Qe=n(4);var Xe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Je=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.a.MEDIA_ATTACHED,o.a.ERROR,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.SUBTITLE_TRACKS_UPDATED,o.a.SUBTITLE_TRACK_SWITCH,o.a.SUBTITLE_TRACK_LOADED,o.a.SUBTITLE_FRAG_PROCESSED));return r.config=n.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.state=Xe.STOPPED,r.currentTrackId=-1,r.ticks=0,r.decrypter=new Qe.a(n.observer,n.config),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this),this.state=Xe.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(o.a.FRAG_LOADING,{frag:e}),this.state=Xe.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=Xe.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=Xe.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.tick=function(){var e=this;this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){e.tick()},1),this.ticks=0)},t.prototype.doTick=function(){var e=this;switch(this.state){case Xe.IDLE:var t,n=this.tracks,r=this.currentTrackId,i=this.vttFragSNsProcessed[r],a=this.vttFragQueues[r],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!n)break;if(r<n.length&&(t=n[r].details),void 0===t)break;t.fragments.forEach(function(t){(function(e){return i.indexOf(e.sn)>-1})(t)||t.sn===s||function(e){return a.some(function(t){return t.sn===e.sn})}(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(l.b.log("Loading key for "+t.sn),e.state=Xe.KEY_LOADING,e.hls.trigger(o.a.KEY_LOADING,{frag:t})):(t.trackId=r,a.push(t),e.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;l.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===Xe.KEY_LOADING&&(this.state=Xe.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===Xe.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=n&&null!=n.key&&"AES-128"===n.method){var a;try{a=performance.now()}catch(e){a=Date.now()}this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}i.trigger(o.a.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t}(c),Ze={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:oe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:ee,bufferController:ne,capLevelController:ie,fpsController:ae,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Ze.subtitleStreamController=Je,Ze.subtitleTrackController=Ye,Ze.timelineController=$e,Ze.cueHandler=r,Ze.enableCEA708Captions=!0,Ze.enableWebVTT=!0,Ze.captionsTextTrack1Label="English",Ze.captionsTextTrack1LanguageCode="en",Ze.captionsTextTrack2Label="Spanish",Ze.captionsTextTrack2LanguageCode="es",Ze.audioStreamController=de,Ze.audioTrackController=le;var et=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var tt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in r)i in n||(n[i]=r[i]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(l.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var a=this.observer=new O.a;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var o=this.abrController=new n.abrController(this),s=new n.bufferController(this),u=new n.capLevelController(this),c=new n.fpsController(this),d=new C(this),f=new T(this),h=new A(this),p=new Q(this),m=[this.levelController=new K(this),this.streamController=new $(this)],g=n.audioStreamController;g&&m.push(new g(this)),this.networkControllers=m;var v=[d,f,h,o,s,u,c,p];if(g=n.audioTrackController){var _=new g(this);this.audioTrackController=_,v.push(_)}if(g=n.subtitleTrackController){var y=new g(this);this.subtitleTrackController=y,v.push(y)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&v.push(new e(t))}),this.coreComponents=v}return e.isSupported=function(){return e=N(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,!!n&&!!r;var e,t,n,r},et(e,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Ze},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){l.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){l.b.log("attachMedia"),this.media=e,this.trigger(o.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){l.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=a.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),l.b.log("loadSource:"+e),this.url=e,this.trigger(o.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;l.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){l.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){l.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){l.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},et(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){l.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){l.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){l.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){l.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){l.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){l.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=tt},function(e,t,n){function r(e){var t=[],n=e.toString(),r=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!r)return t;for(var i,a=r[1],o=new RegExp("(\\\\n|\\W)"+(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");i=o.exec(n);)t.push(i[3]);return t}e.exports=function(e,t){t=t||{};var i=n.m,a=t.all?Object.keys(i):function(e,t){for(var n=[t],i=[],a={};n.length;){var o=n.pop();if(!a[o]&&e[o]){a[o]=!0,i.push(o);var s=r(e[o]);n=n.concat(s)}}return i}(i,e),o="("+function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.map(function(e){return JSON.stringify(e)+": "+i[e].toString()}).join(",")+"})(self);",s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),u=new window.Worker(l);return u.objectURL=l,u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(1),a=n(0),o=n(5),s=n.n(o);t.default=function(e){var t=new s.a;t.trigger=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new r.a(t,o.typeSupported,s,o.vendor);try{Object(a.a)(!0===s.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(i.a.FRAG_DECRYPTED,n),t.on(i.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.a.FRAG_PARSED,n),t.on(i.a.ERROR,n),t.on(i.a.FRAG_PARSING_METADATA,n),t.on(i.a.FRAG_PARSING_USERDATA,n),t.on(i.a.INIT_PTS_FOUND,n),t.on(i.a.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})}}]).default},e.exports=r()},Ye5x:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=n("Z5jf"),a=s(n("8NzR")),o=n("U6+P");function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#users_edit_account",function(e){var t=!1;e.find("a.change_password_toggle").on("click",function(n){n.preventDefault();var i=(0,r.default)("li.change_password",e);t?(i.fadeOut(),i.find("input").prop("disabled",!0),i.find("input").val(""),t=!1):(i.fadeIn(),i.find("input").prop("disabled",!1),i.first().find("input").focus(),t=!0)}),e.find("a.js-request-data-export").on("click",function(e){e.preventDefault();var t=this,n=t.dataset.email,r=t.dataset.url,a=document.getElementById("modal-container");a&&(0,o.mountDataExportModal)({container:a,email:n,url:r,onSuccess:function(){var e=document.createElement("span");e.innerHTML=(0,i.boundT)("user_settings.Download_is_being_prepared"),t.parentNode.replaceChild(e,t)}})})})},YmKE:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("8NzR")),a=u(n("L3hI")),o=u(n("9VV1")),s=u(n("wmCY")),l=u(n("c5nH"));function u(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_projects__hero_funding",function(e){var t=e.find(".video-player .poster");function n(){var n=e.find(".video-player"),i=t.height(),a=n.height(),o=Math.abs(i-a)<=1;t.length&&i>0&&(o||e.find(".video-player").animate({height:i,maxHeight:screen.height},300,"easeOutExpo",function(){(0,r.default)(document).trigger("ksr:video_player_resize")}),t.css({minHeight:0}))}n(),(0,r.default)(document).on("resize",function(){n()}),(0,r.default)("#project_share.js-disabled").on("click",function(e){(0,o.default)({error:s.default.t("onloads.views.projects.hero_funding.Sharing_is_disabled_until_your_project_is_launched")}),e.preventDefault()}),l.default.listen("state",function(t){var n=t.state;e.find(".js-campaign-state").addClass("hidden"),e.find(".js-campaign-state__"+n).removeClass("hidden")}),"live"===l.default.get("state")&&function t(){var n=e.find(".ksr_page_timer.poll");if(n.length){var r=window.ksr_page_clock,i=new Date(n.data("end_time"))-r.get_remote_time();if(i>0){var a=Math.min(i,2147483647);setTimeout(t,a)}else e.find(".js-hide-unless-campaign-running").addClass("hidden")}}(),l.default.listen("state_changed_at",function(t){e.find(".js-state_changed_at").text(a.default.time_ago_in_words(t.state_changed_at))})})},Yxm8:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body#site_fulfillment_report",function(){(0,r.default)(".js-fulfillment-report-expand").on("click",function(e){var t=(0,r.default)(this).closest(".fulfillment-report-sidebar");t.is(".is-expanded")?(t.find(".js-fulfillment-report__expandable-content").hide(),t.removeClass("is-expanded")):(t.find(".js-fulfillment-report__expandable-content").fadeIn(),t.addClass("is-expanded")),e.preventDefault()}),(0,r.default)(".js-facebook").on("click",function(e){e.preventDefault(),window.open((0,r.default)(this).attr("href"),"popupWindow","width=600,height=600,scrollbars=yes")})})},YzsH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseSelectParams=t.baseSelectState=t.baseRewardState=t.initialState=void 0;var r=n("Z5jf"),i=n("IPoO"),a=n("Tvr3"),o=n("HeCS");t.initialState={selectedReward:{id:null,totalCost:null,pledgeCost:null,projectMin:0,shippingCost:0,shippingLocation:void 0,shippingRequired:!1,truncated:null,doNotPin:!1},pledgeData:{currencySymbol:"$",defaultPledge:{amount:100,min:10},isRight:!1,isSymbolic:!1},validation:{touched:{},errors:{},fields:[i.PLEDGE_AMOUNT,i.PLEDGE_NO_REWARD,i.SHIPPING_LOCATION],serverErrors:[]}},t.baseRewardState={id:"",backsThis:!1,conversionEstimate:"",title:"",description:"",unavailable:!1,backersCount:"",campaignSuccessful:!1,campaignLive:!1,managePath:"",maxPledge:!1,minPledge:{amount:"",symbol:"",formatted:""},items:[],deliveryDate:"",shippingSummary:"",endsAt:"",limitExists:!1,limit:"",offsetHeight:null,remainingItems:"",shippingRulesStatus:a.UNLOADED,memoizedShippingOption:{}},t.baseSelectState=(0,o.initialState)(),t.baseSelectParams={titleString:(0,r.boundT)("project_page.reward.Shipping_destination"),placeholder:(0,r.boundT)("project_page.reward.Select_a_country"),options:[]}},Z36P:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=n("4RZc"),a=l(n("shXp")),o=l(n("9VV1")),s=l(n("MA+5"));function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS_message_threads__show";function t(e){return e.closest("#preview, .render_mustache, .js-message-thread").data("data")}(0,r.default)(document).on("click",e+" .pledge_details_link",function(t){(0,r.default)(e).find(".pledge_details").toggleClass("visible"),(0,r.default)(document).trigger("resize"),(0,r.default)(this).toggleClass("selected"),(0,i.track)("Message Info Toggle",{text:r.default.trim((0,r.default)(this).text())}),t.preventDefault()}),(0,r.default)(e+":visible").livequery(function(){var n=(0,r.default)(this),a=t(n);function o(e){r.default.ajax({url:a.urls.web.read,type:"put"}),n.trigger("message_thread_read",[a]),e&&e.preventDefault()}a.unread_messages_count>0&&o(),(0,r.default)(e+" .mark_as_unread").on("click",function(e){r.default.ajax({url:a.urls.web.unread,type:"put"}),n.trigger("message_thread_unread",[a]),e&&e.preventDefault(),(0,i.track)("Message Read Toggle",{toggled_to:"unread"})}),(0,r.default)(e+" .mark_as_read").on("click",o)}),(0,r.default)(document).on("submit",e+" form.reply",function(n){var i=(0,r.default)(this);i.find('[name="message[body]"]').val()?i.is(".submitting")||(function(e){var t=e.find('input[type="submit"]');e.addClass("submitting"),t.addClass("btn--disabled")}(i),function(n){var i="messages";"undefined"!=typeof current_project&&(i="project_messages");n.closest(".modal_dialog").length&&(i="backer_modal");"backers_show"===(0,r.default)("body").attr("id")&&(i="backer_page");"backings_show"!==(0,r.default)("body").attr("id")&&"backings_index"!==(0,r.default)("body").attr("id")||(i="backings_show");r.default.ajax({url:n.attr("action"),type:n.attr("method"),dataType:"json",data:n.serialize()+"&"+r.default.param({"mp[message_context]":i}),success:function(i){var l=t(n),u=n.closest(e).find("ul.messages");i.errors?a.default.each(a.default.keys(i.errors),function(e){(0,o.default)({error:e+": "+i.errors[e]})}):(u.append((0,s.default)("messages/_show",i)).trigger("message_sent",l?[l.backing?l.backing.id:void 0,u.children().length]:[]),(0,r.default)(document).trigger("resize")),n.get(0).reset(),function(e){var t=e.find('input[type="submit"]');e.removeClass("submitting"),t.removeClass("btn--disabled")}(n)}})}(i)):(0,o.default)({error:"Please add a message"}),n.preventDefault()}),(0,r.default)(document).on("focus",e+" form.reply textarea",function(){var e=(0,r.default)(this);e.closest("form.reply").addClass("replying"),e.removeAttr("placeholder")}),(0,r.default)(document).on("click",e+" .respond_link",function(t){(0,r.default)(e+" form.reply textarea").focus(),(0,i.track)("Message Reply Click"),t.preventDefault()})})},ZDod:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("8NzR")),a=l(n("wmCY")),o=n("4RZc"),s=n("vgZZ");function l(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-language-banner",function(e){var t=void 0!==a.default.locale?a.default.locale:void 0;e.find(".js-yes").on("click",function(){(0,s.write_cookie)("dismiss_language_banner","1"),(0,o.track)("Language Banner Yes",{lang:t})}),e.find(".js-no").on("click",function(n){n.preventDefault();var i=(0,r.default)(n.currentTarget).closest("form");r.default.ajax({method:i.attr("method"),url:i.attr("action"),data:i.serialize()}),e.addClass("is-hidden"),(0,s.write_cookie)("dismiss_language_banner","1"),(0,o.track)("Language Banner No",{lang:t})}),e.removeClass("is-hidden"),(0,o.track)("Language Banner View",{lang:t})})},"ZG+P":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),function(){function e(e){var t=a.default.t("onloads.views.follows.follow_button.Follow"),n=a.default.t("onloads.views.follows.follow_button.Following")+'<svg class="svg-icon__check ml1"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg>';e.data("is-following")?(e.html(n),e.removeClass("btn--border-green"),e.addClass("btn--green")):(e.html(t),e.removeClass("btn--green"),e.addClass("btn--border-green")),e.removeClass("hidden")}function t(t,n){t.data("is-following")?(t.data("is-following",!1),e(t),n&&t.trigger("ksr:unfollow_user")):(t.data("is-following",!0),e(t),n&&t.trigger("ksr:follow_user"))}(0,r.default)(".js-follow-all").livequery(function(){var e=(0,r.default)(this);e.on("click",function(){var n=e.data("url"),o=(0,r.default)('<span class="spinner" />').spin("ksr","#000"),s=e.data("type");r.default.ajax({url:n,dataType:"json",method:"post",data:{type:s},beforeSend:function(){e.addClass("btn--disabled"),e.prepend(o)}}).success(function(n){200===n.status?(!function(e,n,i){(0,r.default)(".js-follow-user").each(function(){(0,r.default)(this).data("is-following")||t((0,r.default)(this),!1)}),e.unbind("click"),e.html(a.default.t("onloads.views.follows.follow_all_button.Following_all")),e.addClass("btn--disabled"),e.trigger("ksr:follow_all",[n,i])}(e,n.user_count,n.project_count),(0,i.default)({success:n.message})):(e.removeClass("btn--disabled"),(0,i.default)({success:n.message}))}).complete(function(){o.remove()})})}),(0,r.default)(".js-follow-user").livequery(function(){var n=(0,r.default)(this);n.on("click",function(e){var a=n.data("is-following")?n.data("unfollow-path"):n.data("follow-path");n.prop("disabled",!0),r.default.ajax({url:a,dataType:"json",method:"post"}).success(function(e){200===e.status?t(n,!0):(0,i.default)({error:e.message})}).complete(function(){n.prop("disabled",!1)}),e.preventDefault()}),n.on("mouseenter focus",function(){!function(e){e.data("is-following")&&(e.data("previous-html",e.html()),e.html(a.default.t("onloads.views.follows.follow_button.Unfollow")))}(n)}),n.on("mouseleave blur",function(){!function(e){var t=e.data("previous-html");e.data("is-following")&&t&&e.html(t)}(n)}),n.on("ksr:set_to_follow",function(){n.data("is-following")&&t(n,!0)}),e(n)})}()},ZYc1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PROJECT_STATES={canceled:"CANCELED",live:"LIVE",failed:"FAILED",successful:"SUCCESSFUL",started:"STARTED",submitted:"SUBMITTED",suspended:"SUSPENDED",purged:"PURGED"}},a1l5:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("hBlz")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body.profile",function(){function e(e){(e=e||(0,r.default)(".mobius")).each(function(){var e=(0,r.default)(this).data("mobius");if(e)for(var n in e.clear_extra_params(),t)t.hasOwnProperty(n)&&e.add_param(n,t[n])})}(0,r.default)("body#users_show").length&&void 0!==history.pushState&&((0,o.track)("Visited User Profile"),history.pushState(null,null,window.location.pathname));var t=(0,a.default)().query(!0);e(),(0,r.default)(".mobius").livequery(function(){e((0,r.default)(this))})})},aGLy:function(e,t,n){(function(r){var i,a,o,s;o=function(e,t,n,r){var i=e.Backbone,a=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],s(e,this),i)};case 4:return function(e,i,a){return n[t](this[r],s(e,this),i,a)};default:return function(){var e=a.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},c=/\s+/,d=function(e,t,r,i,a){var o,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in a&&void 0===a.context&&(a.context=i);for(o=n.keys(r);s<o.length;s++)t=d(e,t,o[s],r[o[s]],a)}else if(r&&c.test(r))for(o=r.split(c);s<o.length;s++)t=e(t,o[s],i,a);else t=e(t,r,i,a);return t};u.on=function(e,t,n){return f(this,e,t,n)};var f=function(e,t,n,r,i){(e._events=d(h,e._events||{},t,n,{context:r,ctx:e,listening:i}),i)&&((e._listeners||(e._listeners={}))[i.id]=i);return e};u.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=a[i];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=a[i]={obj:e,objId:i,id:s,listeningTo:a,count:0}}return f(e,t,r,this,o),this};var h=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),a=r.context,o=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:a,ctx:a||o,listening:s})}return e};u.off=function(e,t,n){return this._events?(this._events=d(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var a=e?[e._listenId]:n.keys(i),o=0;o<a.length;o++){var s=i[a[o]];if(!s)break;s.obj.off(t,r,this)}return this};var p=function(e,t,r,i){if(e){var a,o=0,s=i.context,l=i.listeners;if(t||r||s){for(var u=t?[t]:n.keys(e);o<u.length;o++){var c=e[t=u[o]];if(!c)break;for(var d=[],f=0;f<c.length;f++){var h=c[f];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?d.push(h):(a=h.listening)&&0==--a.count&&(delete l[a.id],delete a.listeningTo[a.objId])}d.length?e[t]=d:delete e[t]}return e}for(var p=n.keys(l);o<p.length;o++)delete l[(a=l[p[o]]).id],delete a.listeningTo[a.objId]}};u.once=function(e,t,r){var i=d(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},u.listenToOnce=function(e,t,r){var i=d(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var a=e[t]=n.once(function(){i(t,a),r.apply(this,arguments)});a._callback=r}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return d(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],a=e.all;i&&a&&(a=a.slice()),i&&v(i,r),a&&v(a,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};u.bind=u.on,u.unbind=u.off,n.extend(t,u);var _=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var a=r.unset,o=r.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,d=this._previousAttributes;for(var f in i)t=i[f],n.isEqual(u[f],t)||s.push(f),n.isEqual(d[f],t)?delete c[f]:c[f]=t,a?delete u[f]:u[f]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!o){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,u[s[h]],r)}if(l)return this;if(!o)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var a=e[i];n.isEqual(t[i],a)||(r[i]=a)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){var t=this,r=(e=n.extend({parse:!0},e)).success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},M(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var a=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!a){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,s=r.success,l=this.attributes;r.success=function(e){o.attributes=l;var t=r.parse?o.parse(e,r):e;if(a&&(t=n.extend({},i,t)),t&&!o.set(t,r))return!1;s&&s.call(r.context,o,e,r),o.trigger("sync",o,e,r)},M(this,r),i&&a&&(this.attributes=n.extend({},l,i));var u=this.isNew()?"create":r.patch?"patch":"update";"patch"!==u||r.attrs||(r.attrs=i);var c=this.sync(u,this,r);return this.attributes=l,c},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=e.wait,a=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&a(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(M(this,e),o=this.sync("delete",this,e)),i||a(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});o(_,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},E=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),a=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<a;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+a+n]=i[r]};n.extend(y.prototype,u,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,w))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},b,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var a,o,s=[],l=[],u=[],c=[],d={},f=t.add,h=t.merge,p=t.remove,m=!1,g=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(o=0;o<e.length;o++){a=e[o];var _=this.get(a);if(_){if(h&&a!==_){var y=this._isModel(a)?a.attributes:a;t.parse&&(y=_.parse(y,t)),_.set(y,t),u.push(_),g&&!m&&(m=_.hasChanged(v))}d[_.cid]||(d[_.cid]=!0,s.push(_)),e[o]=_}else f&&(a=e[o]=this._prepareModel(a,t))&&(l.push(a),this._addReference(a,t),d[a.cid]=!0,s.push(a))}if(p){for(o=0;o<this.length;o++)d[(a=this.models[o]).cid]||c.push(a);c.length&&this._removeModels(c,t)}var w=!1,k=!g&&f&&p;if(s.length&&k?(w=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,E(this.models,s,0),this.length=this.models.length):l.length&&(g&&(m=!0),E(this.models,l,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(o=0;o<l.length;o++)null!=i&&(t.index=i+o),(a=l[o]).trigger("add",a,this,t);(m||w)&&this.trigger("sort",this,t),(l.length||c.length||u.length)&&(t.changes={added:l,removed:c,merged:u},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},M(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,a=t.success;return t.success=function(e,t,n){r&&i.add(e,n),a&&a.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var a=this.indexOf(i);this.models.splice(a,1),this.length--,delete this._byId[i.cid];var o=this.modelId(i.attributes);null!=o&&delete this._byId[o],t.silent||(t.index=a,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof _},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);i!==a&&(null!=i&&delete this._byId[i],null!=a&&(this._byId[a]=t))}}this.trigger.apply(this,arguments)}});o(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var k=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,C)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(k.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(S);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var a=T[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:a,dataType:"json"};if(i.url||(o.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",i.emulateJSON&&(o.data._method=a);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),s)return s.apply(this,arguments)}}"GET"===o.type||i.emulateJSON||(o.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var u=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,u,i),u};var T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,P=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(A.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var a=this;return t.history.route(e,function(n){var o=a._extractParameters(e,n);!1!==a.execute(i,o,r)&&(a.trigger.apply(a,["route:"+r].concat(o)),a.trigger("route",r,o),t.history.trigger("route",a,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(I,"\\$&").replace(R,"(?:$1)?").replace(x,function(e,t){return t?e:"([^/?]+)"}).replace(P,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,N=/#.*$/;O.started=!1,n.extend(O.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(j,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");if(O.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(D,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!O.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(N,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new O;_.extend=y.extend=A.extend=k.extend=O.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var L=function(){throw new Error('A "url" property or function must be specified')},M=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t},s="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r,i=[n("shXp"),n("l/Rs"),t],void 0===(a=function(e,t,n){s.Backbone=o(s,n,e,t)}.apply(t,i))||(e.exports=a)}).call(t,n("DuR2"))},aHws:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("BafW"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(document).on("click",".NS_post_likes__button button",function(e){e.preventDefault();var t=(0,r.default)(this).closest("form");r.default.ajax({url:t.attr("action"),dataType:"json",type:"POST",success:function(e){(e.modal&&r.default.create_login_modal(e.data,"post_like"),e.post)&&(i.default.find(e.post.id)||new i.default({id:e.post.id})).set(e.post)}})})})},"ac+W":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.livesearch_pretty_input_dropdown(t),n.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(r)},arWD:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("yQDW"),n("LNuh"),(0,a.default)(function(){(0,a.default)(".js-lazy-image").livequery(function(){(0,a.default)(this).unveil(500,function(){var e=(0,a.default)('<div class="loader-dots loader-dots--mega loader-dots--inline loader-dots--overlay" />').css("visibility","hidden");(0,a.default)(this).after(e);var t={x:(0,a.default)(this).offset().left+this.clientWidth/2-e.width()/2,y:(0,a.default)(this).offset().top+this.clientHeight/2-e.height()/2};e.css("top",parseInt(t.y)+"px").css("left",parseInt(t.x)+"px").css("visibility","visible"),(0,a.default)(this).load(function(){return e.remove()})})})})},asZU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestId=void 0;var r=n("I2cB"),i=n("Z6GA"),a=t.requestId=function(e){return r.maybe.fromNullable(e.documentElement.dataset).chain((0,i.maybeProp)("requestId")).chain(function(e){return r.maybe.fromNullable("__REQUEST_ID_MIDDLEWARE_SWAP_TOKEN__"===e?null:e)}).getOrElse(null)};window.request_id=a(document)},axe2:function(e,t,n){"use strict";var r=f(n("GiK3")),i=f(n("O27J")),a=f(n("l/Rs")),o=f(n("shXp")),s=f(n("aGLy")),l=n("jCVd"),u=f(n("6djF")),c=f(n("wmCY")),d=n("Tvaj");function f(e){return e&&e.__esModule?e:{default:e}}n("SzcX"),window.VideoTrackView=s.default.View.extend({VIDEO_PAUSE_LENGTH:1e3,PIXELS_PER_SECOND:100,MINIMUM_MILLISECONDS:2e3,NEW_CAPTION_OFFSET:-500,events:{"click .js-timeline":"jumpTimelineEvent","click .js-cue":"pauseEvent","keypress .js-cue-textarea":"autoPauseEvent","keydown .js-cue-textarea":"catchWaywardKeysEvent","keyup .js-cue-textarea":"typeInCueEvent","cut .js-cue-textarea":"cutPasteInCueEvent","paste .js-cue-textarea":"cutPasteInCueEvent","mousemove .js-timeline":"showHoverLineEvent","mouseleave .js-timeline":"hideHoverLineEvent","click .js-save-track":"saveTrackEvent","click .js-destroy-cue":"destroyCueEvent"},initialize:function(){this.model.on("add:cues_attributes",o.default.bind(this.addCue,this)),this.model.on("destroy:cues_attributes",o.default.bind(this.removeCue,this)),this.model.on("add:cues_attributes destroy:cues_attributes",o.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*]",o.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*].start_time",o.default.bind(this.adjustCue,this)),this.model.on("change:cues_attributes[*].end_time",o.default.bind(this.adjustCue,this)),this.model.on("reset:cues_attributes",o.default.bind(this.renderCuesOnTimeline,this)),this._initializeDraggableBar(),this._initializeUnsavedNavigation(),this._initializeDocumentListeners(),this.disableSaveButton()},initializeVideo:function(){this.video=new window.CaptioningVideo(this.videoEl()),this.video.importTrackFrom(this.model),this._initializeVideoMetadata()},videoEl:function(){return this.$el.find("video").get(0)},_initializeVideoMetadata:function(){var e=this;this.video.el.readyState>=this.video.el.HAVE_METADATA?this.renderTimeline():this.video.$el.one("loadedmetadata",function(){e.renderTimeline()})},_initializeDraggableBar:function(){var e=this;this.$el.on("mousedown touchstart",".js-non-draggable",function(e){e.stopImmediatePropagation()}),this.$el.draggable_bar(".js-timeline",function(t,n,r){var i,o,s,l=e.$el.find(".js-timeline"),u=(0,a.default)(n),c=u.data("cue-cid")||u.closest("[data-cue-cid]").data("cue-cid"),d=e.model.get("cues_attributes"),f=d.get(c);f&&(e.video.pause(),i=f.get("start_time"),o=t*l.width()+l.scrollLeft()-r,o-=l.width()/2,u.is(".js-cue-handle")&&(o+=u.width()),o=e.xFromTimeline(o),u.is(".js-cue-handle")?(o=e._pointWithinBounds(d.indexOf(f),o),o=Math.max(i+e.MINIMUM_MILLISECONDS,o),f.set("end_time",o)):(s=f.get("end_time")-i,o=e._rangeWithinBounds(d.indexOf(f),o,s),f.set({start_time:o,end_time:o+s})))})},_pointWithinBounds:function(e,t){var n=this.model.get("cues_attributes"),r=n.at(e),i=n.at(e+1);return i&&i.get("start_time")<t&&(t=i.get("start_time")-1),Math.max(t,r.get("start_time")+.5)},_rangeWithinBounds:function(e,t,n){var r=this.model.get("cues_attributes"),i=r.at(e-1),a=r.at(e+1);return n=n||0,a&&a.get("start_time")<t+n&&(t=a.get("start_time")-n-1),i&&i.get("end_time")>t&&(t=i.get("end_time")+1),Math.max(0,Math.min(this.video.duration(),t+n)-n)},_initializeUnsavedNavigation:function(){var e=this;(0,a.default)(window).on("beforeunload.video_tracks",function(){if(e._dirty)return c.default.t("views.video_track.You_have_unsaved_changes")})},_initializeDocumentListeners:function(){var e=this;(0,a.default)(document).on("keydown.video_tracks",function(t){e.handleKeyboardShortcutsFromEvent(t)}).on("keyup.video_tracks",function(t){if(t.which===d.ENTER&&!t.shiftKey){var n,r=e.getCurrentCue();n=r?r.get("end_time")+1:e.video.getCurrentTime(),e.addCueAt(n),t.preventDefault()}})},remove:function(){(0,a.default)(window).off(".video_tracks"),(0,a.default)(document).off(".video_tracks"),s.default.View.prototype.remove.apply(this,arguments)},render:function(){var e,t={track:this.model.toJSON(),encodings:this.model.get("encodings")||{},editProjectPath:this.$el.data("edit-project-path")},n=Math.random().toString(16).substr(2);return(e=o.default.clone(t.encodings)).high&&(e.high+=(e.high.split("?")[1]?"&":"?")+n),t.encodings=e,i.default.render(p(t),this.el),this.initializeVideo(),this},createSpoke:function(e,t){var n=(t=t||{}).level||(e%1e4==0?3:e%5e3==0?2:e%500==0?1:0);return{msecs:e/1e3,x:this.xOnTimeline(e),level:n,displayText:n>1}},renderTimeline:function(){var e,t=this.video.duration(),n=this.xOnTimeline(t),r=this,a=o.default.range(500,t,500),s={};s.timelineEnd=n,s.spokes=o.default.map(a,function(e){return r.createSpoke(e)}),s.spokes.push(this.createSpoke(0,{level:4})),s.spokes.push(this.createSpoke(this.video.duration(),{level:4})),i.default.render(h(s),this.$el.find(".timeline_wrapper").get(0)),e=this.$el.find(".timeline"),this.renderCuesOnTimeline(),this._attachEventsToTimeline(e)},renderCuesOnTimeline:function(){var e=this.model.get("cues_attributes");this.$el.find(".js-timeline__cues").empty(),e.forEach(o.default.bind(this.adjustCue,this)),e.length>0&&this.focusCue(e.first())},_attachEventsToTimeline:function(e){var t=this;this.video.$el.on("timeupdate",function(){var n,r=t.video.getCurrentTime(),i=t.xOnTimeline(r);t.video.paused()||e.scrollLeft(i),t.$(".js-timeline-line").css("left",i+e.width()/2),(n=t.model.get("cues_attributes").find(function(e){return e.get("start_time")<=r&&e.get("end_time")>r}))&&t.focusCue(n)}),this.video.$el.on("play",function(){t.$(".js-timeline").css("overflow-x","hidden")}),this.video.$el.on("pause",function(){t.$(".js-timeline").css("overflow-x","scroll")})},enableSaveButton:function(){this.$(".js-save-track").text(c.default.t("views.video_track.Save")).addClass("btn--green").removeClass("btn--gray").prop("disabled",!1)},disableSaveButton:function(){this.$(".js-save-track").text(c.default.t("views.video_track.Saved")).removeClass("btn--green").addClass("btn--gray").prop("disabled",!0)},dirty:function(){this._dirty=!0,this._saving||this.enableSaveButton()},addCue:function(e){this.adjustCue(e),this.focusCue(e)},removeCue:function(e){this.$cue(e.cid).remove()},adjustCue:function(e){var t=this.$cue(e.cid),n=e.get("start_time"),r=e.get("end_time");t.css("left",Math.floor(this.xOnTimeline(n))),t.width(Math.floor(this.xOnTimeline(r-n)))},$cue:function(e){var t=this.$(".js-timeline"),n=t.find('[data-cue-cid="'+e+'"]'),r=this.model.get("cues_attributes").get(e);return r?(0===n.length&&(n=t.find(".js-cue-template").clone(),n.removeClass("js-cue-template"),n.addClass("js-cue"),n.attr("data-cue-cid",e),n.find(".js-cue-textarea").val(r.get("body")),n.appendTo(t.find(".js-timeline__cues"))),n.removeClass("hidden"),n):n},cue:function(e){var t=(0,a.default)(e),n=t.data("cue-cid")||t.closest("[data-cue-cid]").data("cue-cid");return this.model.get("cues_attributes").get(n)},autoPause:function(){var e=this;this.video.paused()&&!this.unpauseTimer||(this.video.pause(),this.unsetPauseTimer(),this.unpauseTimer=setTimeout(function(){delete e.unpauseTimer,e.video.play()},this.VIDEO_PAUSE_LENGTH))},unsetPauseTimer:function(){clearTimeout(this.unpauseTimer)},focusCue:function(e){this.showingCue(e)||this.video.setCurrentTime(e.get("start_time")),this.$cue(e.cid).find(":input").focus()},xOnTimeline:function(e){return e*this.PIXELS_PER_SECOND/1e3},xFromTimeline:function(e){return e/this.PIXELS_PER_SECOND*1e3},saveTrack:function(){var e=this.$(".js-save-track"),t=this.$(".js-last-save"),n=this.$(".js-timeline__cues :input"),r=this.model.save(),i=this;r&&(this._saving=!0,this._dirty=!1,this.disableSaveButton(),e.text(c.default.t("views.video_track.Saving")),n.prop("disabled",!0),r.success(function(){i.timedText(t)}).error(function(){e.text(c.default.t("views.video_track.Errored"))}).always(function(){i._saving=!1,i._dirty?i.enableSaveButton():i.disableSaveButton(),n.prop("disabled",!1)}))},focusPreviousCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=o.default.last(t.filter(function(e){return e.get("end_time")<n})))&&this.focusCue(e)},focusNextCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=t.find(function(e){return e.get("start_time")>n}))&&this.focusCue(e)},getCurrentCue:function(){var e=this.model.get("cues_attributes"),t=this.video.getCurrentTime();return e.find(function(e){return e.get("start_time")<=t&&e.get("end_time")>=t})},showingCue:function(e){var t=this.video.getCurrentTime(),n=e.get("start_time"),r=e.get("end_time");return t>=n&&t<r},pointOnTimeline:function(e){var t=this.$(".js-timeline");return e-=t.offset().left,e+=t.scrollLeft(),e-=t.width()/2,this.xFromTimeline(e)},willOverlapCues:function(e,t){return!!this.model.get("cues_attributes").find(function(n){var r=n.get("start_time"),i=n.get("end_time");return r>=e&&r<e+t||i>=e&&i<e+t})},alignWithCursor:function(e,t){var n=this.$(".js-timeline"),r=n.offset().left,i=n.scrollLeft();e.removeClass("hidden"),e.css("left",u.default.pageX(t)-r+i)},addCueAt:function(e,t){var n=this.model.get("cues_attributes");t=t||this.MINIMUM_MILLISECONDS,this.willOverlapCues(e,t)||n.add({start_time:e,end_time:e+t})},jumpTimelineEvent:function(e){var t,n=(0,a.default)(e.target);n.is(".js-timeline")?this.video.setCurrentTime(0):n.is(".js-timeline--area")&&(t=this.pointOnTimeline(u.default.pageX(e)),this.video.setCurrentTime(t))},addCueEvent:function(e){var t=this.pointOnTimeline(u.default.pageX(e));this.addCueAt(t),e.preventDefault()},pauseEvent:function(){this.video.pause()},autoPauseEvent:function(){this.autoPause()},catchWaywardKeysEvent:function(e){e.which===d.BACKSPACE?this.autoPause():e.which!==d.ENTER||e.shiftKey||e.preventDefault()},typeInCueEvent:function(e){var t=this.cue(e.currentTarget);if(e.which!==d.ENTER||e.shiftKey)t.set("body",(0,a.default)(e.currentTarget).val());else{var n=this.video.getCurrentTime(),r=t.get("start_time"),i=n;t.shouldOverrideEndTime&&(n<r&&(i=r,r=n),(i+=this.NEW_CAPTION_OFFSET)-r<this.MINIMUM_MILLISECONDS&&(i=r+this.MINIMUM_MILLISECONDS),t.set({start_time:r,end_time:i})),this.addCueAt(Math.max(t.get("end_time"),i)+1),e.stopPropagation()}e.preventDefault()},cutPasteInCueEvent:function(e){var t=this.cue(e.currentTarget);setTimeout(function(){t.set("body",(0,a.default)(e.currentTarget).val())},0)},destroyCueEvent:function(e){this.cue(e.currentTarget).destroy(),e.preventDefault()},showHoverLineEvent:function(e){var t=this.$(".js-timeline-mouse-line");this.alignWithCursor(t,e)},hideHoverLineEvent:function(){this.$(".js-timeline-mouse-line").addClass("hidden")},saveTrackEvent:function(e){!this._saving&&this._dirty&&this.saveTrack(),e.preventDefault()},handleKeyboardShortcuts:function(e,t){return e===d.ESC?(this.video.paused()?this.video.play():this.video.pause(),this.$(".js-onboarding").addClass("fade-out"),!0):e===d.TAB&&(t?this.focusPreviousCue():this.focusNextCue(),!0)},handleKeyboardShortcutsFromEvent:function(e){return!!this.handleKeyboardShortcuts(e.which,e.shiftKey)&&(e.preventDefault(),!0)},timedText:function(e,t,n){var r=this;t=t||1e3,n=n||new Date,clearTimeout(this.timedTextTimeoutId),this.timedTextTimeoutId=setTimeout(function(){r.timedText(e,t,n)},t),this._renderLastSaved(e,n)},_renderLastSaved:function(e,t){e.text(c.default.t("views.video_track.Saved")+" "+(0,l.distance)(new Date,t))}});var h=function(e){var t=e.spokes,n=e.timelineEnd;return r.default.createElement("div",{className:"timeline relative bg-white clear border-top js-timeline user-select-none"},r.default.createElement("div",{className:"timeline_scroller z1 relative js-timeline--area",style:{width:n}},r.default.createElement("div",{className:"timeline_spokes absolute grey"},t.map(function(e,t){return r.default.createElement("div",{key:t},r.default.createElement("div",{className:"spoke spoke--level-"+e.level+" absolute",style:{bottom:0,left:e.x}}),e.displayText&&r.default.createElement("div",{className:"absolute pl2",style:{bottom:15,left:e.x}},e.msecs,"s"))}),r.default.createElement("div",{className:"spoke end",style:{bottom:0,left:0}}),r.default.createElement("div",{className:"spoke end",style:{bottom:0,left:n}})),r.default.createElement("div",{className:"js-timeline__cues absolute"}),r.default.createElement("div",{className:"js-cue-template timeline_handle z1 absolute bg-white border rounded tiny_type hidden"},r.default.createElement("div",{className:"timeline_drag_handle js-cue-handle absolute"},r.default.createElement("span",{className:"ss-icon ss-navigateright"})),r.default.createElement("div",{className:"js-non-draggable"},r.default.createElement("div",{className:"cue-textarea-wrapper"},r.default.createElement("textarea",{className:"cue-textarea js-cue-textarea",placeholder:c.default.t("video_tracks.Transcribe_and_press_Enter"),maxLength:"200"})),r.default.createElement("div",{className:"caption-actions"},r.default.createElement("a",{href:"javascript:void(0)",className:"js-destroy-cue"},r.default.createElement("div",{className:"ss-icon ss-delete"})))))),r.default.createElement("div",{className:"timeline_hover_line js-timeline-mouse-line absolute hidden"}),r.default.createElement("div",{className:"timeline_line absolute z1 js-timeline-line"}))},p=function(e){var t=e.track,n=e.encodings,i=e.editProjectPath;return r.default.createElement("div",null,r.default.createElement("div",{className:"clearfix mt3 mt5-sm"},r.default.createElement("div",{className:"f5 right mt3 mt5-sm"},r.default.createElement("button",{className:"btn btn--gray button_save_track right js-save-track",disabled:!0},c.default.t("views.video_track.Saved")),r.default.createElement("div",{className:"right mr2 js-last-save mt2 grey-dark"})),r.default.createElement("h2",{className:"mb2"},c.default.t("views.video_track.Language_track",{label:t.label})),r.default.createElement("a",{className:"left mb3 mb5-sm regular blue",href:i},r.default.createElement("span",{className:"ss-icon ss-navigateleft",style:{fontSize:"0.8em"}})," ",c.default.t("views.video_track.Back_to_edit"))),r.default.createElement("div",{className:"container-flex bg-grey-light border rounded mb3 mb10-sm"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col col-4 mt3 mt5-sm mr2 ml3 ml5-sm"},r.default.createElement("h4",{className:"grey-dark"},c.default.t("views.video_track.Controls")),r.default.createElement("hr",null),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Play_pause")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Esc"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Add_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Enter"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Line_break")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Shift")),"+",r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Enter"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Next_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Tab"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},c.default.t("views.video_track.Previous_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Shift")),"+",r.default.createElement("span",{className:"border rounded key"},c.default.t("views.video_track.Tab"))),r.default.createElement("hr",{className:"mt2"})),r.default.createElement("div",{className:"col col-7 mt3 mt5-sm pb3 pb5-sm ml2"},r.default.createElement("div",{className:"onboarding js-onboarding"},r.default.createElement("div",{className:"onboarding-copy formatted-lists"},r.default.createElement("h3",{className:"mb3 mb5-sm"},c.default.t("views.video_track.Getting_started")),r.default.createElement("ol",null,r.default.createElement("li",{dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.Press_esc_to_play")}}),r.default.createElement("li",null,c.default.t("views.video_track.When_you_type_the_video")),r.default.createElement("li",{dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.When_its_time_to_start_a_new_caption")}})),r.default.createElement("h3",{className:"center mt3 mt7-sm",dangerouslySetInnerHTML:{__html:c.default.t("views.video_track.Press_esc_and_start_typing")}})),r.default.createElement("div",{className:"onboarding-bg"})),r.default.createElement("div",{className:"video-player show-controls-below js-video-player"},r.default.createElement("video",null,n&&r.default.createElement("source",{src:n.high,type:"video/mp4"})),r.default.createElement("div",{className:"play_button_big play_button_dark absolute-center rounded has_played_hide play_button_big_hide"},r.default.createElement("span",{className:"ss-icon ss-play"}),c.default.t("views.video_track.Play")),r.default.createElement("div",{className:"player_controls white bg-green-dark"},r.default.createElement("div",{className:"left"},r.default.createElement("a",{className:"button button_icon button_dark playpause play mr2"},r.default.createElement("span",{className:"play ss-icon ss-play"}),r.default.createElement("span",{className:"pause ss-icon ss-pause"})),r.default.createElement("span",{className:"time current_time f12 left"},"00:00")),r.default.createElement("div",{className:"right"},r.default.createElement("span",{className:"time total_time f12 left mr2"},"00:00"),r.default.createElement("a",{className:"left button button_icon button_icon_white volume"},r.default.createElement("span",{className:"ss-icon ss-volume icon_volume_nudge"}),r.default.createElement("span",{className:"ss-icon ss-highvolume"})),r.default.createElement("div",{className:"volume_container left"},r.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},r.default.createElement("div",{className:"progress_bar_bg"}),r.default.createElement("div",{className:"progress progress_bar_progress"}),r.default.createElement("div",{className:"progress_handle progress_bar_handle"}))),r.default.createElement("a",{className:"left button button_icon button_icon_white fullscreen"},r.default.createElement("span",{className:"ss-icon ss-expand"}),r.default.createElement("span",{className:"ss-icon ss-contract"}))),r.default.createElement("div",{className:"clip"},r.default.createElement("div",{className:"progress_container pr2 pl2"},r.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},r.default.createElement("div",{className:"progress_bar_bg"}),r.default.createElement("div",{className:"buffer progress_bar_buffer"}),r.default.createElement("div",{className:"progress progress_bar_progress"}),r.default.createElement("div",{className:"progress_handle progress_bar_handle"})))),r.default.createElement("div",{className:"clear"}))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col col-12 relative"},r.default.createElement("div",{className:"timeline_wrapper"})))))}},b5hM:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){var t=38,n=40,r=13;function i(t,n){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},n);var r=this.$elem.closest(".field_with_icon"),i=e([]);(i=r.length?r.siblings(".results"):this.$elem.siblings(".results")).length?(this.$results=i,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),r.length?r.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}e.fn.livesearch_input_dropdown=function(t){return t=t||{},e(this).each(function(){var n=e(this).data("livesearch.input_dropdown");n||(n=new i(e(this),t),e(this).data("livesearch.input_dropdown",n))})},e.extend(i.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,n){e.options.process_results&&(n=e.options.process_results(n)),e.show_results(n),e.push_history(n)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(i){var a,o,s,l=!!e.$results.find(".selected").length;switch(i.keyCode){case t:l?((a=e.$results.find(".selected").prev(":not(.not_result)")).length||(a=e.$results.find("li:not(.not_result)").last()),e.select(a,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),i.preventDefault();break;case n:l?((o=e.$results.find(".selected").next(":not(.not_result)")).length||(o=e.$results.find("li:not(.not_result)").first()),e.select(o,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),i.preventDefault();break;case r:s=e.$results.find(".selected"),e.input_can_submit()||i.preventDefault(),s.length&&(i.preventDefault(),e.select(s,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input")})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&e<4;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(n){t.select(e(this),!0),n.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var n=[],r=this;return e.each(t,function(e,t){r.options.return_name_from_result?t=r.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),n.push(t)}),n},show_results:function(t){var n,r,i,a=this.$results.children("ul"),o=e([]);t.results&&(i=t,t=t.results),this.unselect_currently_selected(),a.empty(),t.length?(this.$no_results.hide(),a.show()):(this.$no_results.show(),a.hide()),n=this.build_result_names_list(t),e.each(n,function(n,r){var i=e("<li>"+r+"</li>");i.data("livesearch_result",t[n]),a.append(i)}),i&&i.count>t.length&&(r="see all "+i.count+" results",o=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:r,class:"see_all not_result"}).html(r).wrap("<li>"),a.append(o)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul").children("li.selected");e.trigger("livesearch:unselect"),e.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var n=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){n.$elem.val(e.text()),n.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(r)},bAet:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(".NS-curated_page_projects-new").livequery(function(){var e=(0,a.default)(this),t=e.find("form.curated_pages_form"),n=parseInt((0,a.default)("div.blurb .character_counter .number:first",e).text(),10);(0,a.default)(".blurb textarea",e).validates_max_length().validates_presence(),(0,a.default)(".blurb",e).on("validate:invalid",function(){(0,a.default)(this).addClass("errored")}),(0,a.default)(document).on("validate:valid",".blurb, .meta h1",function(){(0,a.default)(this).removeClass("errored")}),(0,a.default)("div.blurb",e).on("keypress cut paste input",function(){var e=(0,a.default)(this),t=e.find("textarea").val().length,r=n-t;e.find("textarea").validate(),e.find(".character_counter .number").text(r)}),e.find(".save").click(function(){var e=t.find(".buttons .loading");(0,a.default)("div.blurb textarea").validate()&&(e.show(),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",global:!1,success:function(n){t.trigger("close.modal_dialog"),t.trigger("project_added_to_curated_page",[n]),e.hide()}}))}),e.find(".cancel").click(function(){(0,a.default)(this).trigger("close.modal_dialog")})})},bRLv:function(e,t,n){"use strict";(function(e){(function(e,t){function n(e){return"function"==typeof Symbol&&Boolean(Symbol[e])}function r(e){return n(e)?Symbol[e]:"@@"+e}function i(e){setTimeout(function(){throw e})}function a(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function o(e){var t=e.constructor;return void 0!==t&&null===(t=t[r("species")])&&(t=void 0),void 0!==t?t:f}function s(e,t){Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e,n,r)})}function l(e){var t=e._cleanup;if(t){e._cleanup=void 0;try{t()}catch(e){i(e)}}}function u(e){return void 0===e._observer}function c(e,t){if(Object(e)!==e)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=e;try{var n=a(e,"start");n&&n.call(e,this)}catch(e){i(e)}if(!u(this)){e=new d(this);try{var r=t.call(void 0,e);if(null!=r){if("function"==typeof r.unsubscribe)o=r,r=function(){o.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(t){return void e.error(t)}var o;u(this)&&l(this)}}function d(e){this._subscription=e}function f(e){if(!(this instanceof f))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),s(c.prototype={},{get closed(){return u(this)},unsubscribe:function(){var e;u(e=this)||(e._observer=void 0,l(e))}}),s(d.prototype={},{get closed(){return u(this._subscription)},next:function(e){var t=this._subscription;if(!u(t)){var n=t._observer;try{var r=a(n,"next");r&&r.call(n,e)}catch(e){i(e)}}},error:function(e){var t=this._subscription;if(u(t))i(e);else{var n=t._observer;t._observer=void 0;try{var r=a(n,"error");if(!r)throw e;r.call(n,e)}catch(e){i(e)}l(t)}},complete:function(){var e=this._subscription;if(!u(e)){var t=e._observer;e._observer=void 0;try{var n=a(t,"complete");n&&n.call(t)}catch(e){i(e)}l(e)}}}),s(f.prototype,{subscribe:function(e){for(var t=[],n=1;n<arguments.length;++n)t.push(arguments[n]);return"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"==typeof e&&null!==e||(e={}),new c(e,this._subscriber)},forEach:function(e){var t=this;return new Promise(function(n,r){if("function"!=typeof e)return Promise.reject(new TypeError(e+" is not a function"));t.subscribe({_subscription:null,start:function(e){if(Object(e)!==e)throw new TypeError(e+" is not an object");this._subscription=e},next:function(t){var n=this._subscription;if(!n.closed)try{e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:n})})},map:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(o(this))(function(n){return t.subscribe({next:function(t){if(!n.closed){try{t=e(t)}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})})},filter:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(o(this))(function(n){return t.subscribe({next:function(t){if(!n.closed){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})})},reduce:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=o(this),r=arguments.length>1,i=!1,a=arguments[1];return new n(function(n){return t.subscribe({next:function(t){if(!n.closed){var o=!i;if(i=!0,!o||r)try{a=e(a,t)}catch(e){return n.error(e)}else a=t}},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(a),n.complete()}})})}}),Object.defineProperty(f.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),s(f,{from:function(e){var t="function"==typeof this?this:f;if(null==e)throw new TypeError(e+" is not an object");var i=a(e,r("observable"));if(i){var o=i.call(e);if(Object(o)!==o)throw new TypeError(o+" is not an object");return o.constructor===t?o:new t(function(e){return o.subscribe(e)})}if(n("iterator")&&(i=a(e,r("iterator"))))return new t(function(t){for(var n,r=i.call(e)[Symbol.iterator]();!(n=r.next()).done;){var a=n.value;if(t.next(a),t.closed)return}t.complete()});if(Array.isArray(e))return new t(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()});throw new TypeError(e+" is not observable")},of:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return new("function"==typeof this?this:f)(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()})}}),Object.defineProperty(f,r("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(f,"extensions",{value:{observableSymbol:r("observable"),setHostReportError:function(e){i=e}}}),e.Observable=f})(t)}).call(t,n("3IRH")(e))},bRUp:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("#NS_discover__sorts",function(e){var t=e.hasClass("refresh_enabled");e.find("li > a").on("click",function(n){var i=(0,r.default)(this),a=i.closest("li");t?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),i.addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),a.addClass("selected")),(0,r.default)(document).trigger("discovery:sorts:changed",a.data("sort")),e.trigger("ksr_popover:close"),n.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(n,r){t?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),e.find('li[data-sort="'+(r.sort||"magic")+'"] a').addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),e.find('li[data-sort="'+(r.sort||"magic")+'"]').addClass("selected"))}),(0,r.default)(document).on("discovery:sorts:load_sample",function(n,r){e.find(".selected").removeClass(),t?r.sort?e.find('li[data-sort="'+r.sort+'"] a').addClass("ksr-green-500").removeClass("black"):e.find('li[data-sort="magic"] a').addClass("ksr-green-500").removeClass("black"):r.sort?e.find('li[data-sort="'+r.sort+'"]').addClass("selected"):e.find('li[data-sort="magic"]').addClass("selected")})})},bsLU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n("GiK3")),a=f(n("KSGD")),o=n("tryQ"),s=n("b04z"),l=n("0n0W"),u=n("Z6GA"),c=f(n("3C9o")),d=n("Z5jf");function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.reportError=function(e){return o.Honeybadger.notify(JSON.stringify(e),{context:{tags:"project_community"}})},n.poll=function(){setInterval(function(){(0,u.fetchGraph)(l.GET_COMMENTS_COUNT,{pid:n.props.pid}).then(function(e){var t=e.data;return n.setState(function(){return{data:t}})}).catch(n.reportError)},5e3)},n.getNewComments=function(e,t){return function(){n.setState(function(){return{loading:!0}});var r=function(){return n.setState(function(){return{loading:!1}})};e({pid:t}).then(r,r).catch(n.reportError)}},n.messageOrSpinner=function(e,t){return e?i.default.createElement(c.default,null):i.default.createElement(d.BoundTranslate,{i18nKey:"project_page.comments.Show_new_comments",count:t})},n.state={pollId:null,loading:!1,data:{project:{comments:{totalCount:null}}}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){if(!this.state.pollId){var e=setTimeout(this.poll.bind(this),1);this.setState(function(){return{pollId:e}})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.pollId)}},{key:"render",value:function(){var e=this.props,t=e.currentCount,n=e.refetch,r=e.pid,a=this.state.data.project;if(!a||!a.comments||!a.comments.totalCount)return null;var o=a.comments.totalCount;return o>t?i.default.createElement(s.Button,{onClick:this.getNewComments(n,r),atoms:["block","w100p"],color:"blue"},this.messageOrSpinner(this.state.loading,o-t)):null}}]),t}();h.propTypes={pid:a.default.oneOfType([a.default.string,a.default.number]),refetch:a.default.func.isRequired,currentCount:a.default.number.isRequired},t.default=h},c1YT:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){e.fn.render=function(t){return e(this).each(function(){e(this).data("renderer")(t)}),this},e.fn.define_renderer=function(t){return e(this).data("renderer",t),this}}(r)},c3QO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.addMemoizedShippingLocation=function(e,t){return r({type:"ADD_MEMOIZED_SHIPPING_TO_SELECTED_REWARD"},e,{namespace:t})},t.continueToNextPage=function(e){return{type:"REWARD_CONTINUE",rewardId:e}},t.freezePin=function(){return{type:"REWARD_FREEZE_PIN"}},t.onCheckoutFailure=function(e){return{type:"REWARD_CHECKOUT_FAILURE",err:e}},t.onRewardSelected=function(e){return{type:"REWARD_SET_SELECTED_REWARD",rewardFacts:e}},t.onPledgeValueUpdated=function(e){return{type:"REWARD_NEW_PLEDGE_VALUE",newValue:e}},t.payWithApplePay=function(e,t){return{type:"REWARD_APPLE_PAY",dispatch:e,rewardId:t}},t.requestRedirect=function(e){return{type:"REWARD_REQUEST_REDIRECT",path:e}},t.saveRewardOffset=function(e,t){return{type:"REWARD_SAVE_OFFSET",offsetHeight:t,rewardId:e}},t.toggleTruncation=function(){return{type:"REWARD_TRUNCATION_TOGGLE"}},t.truncateDescription=function(){return{type:"REWARD_TRUNCATE_DESCRIPTION"}},t.updateApplePayCapable=function(e){return{type:"REWARD_UPDATE_APPLE_PAY",newValue:e}},t.validateField=function(e){return{type:"REWARD_TOUCH_FIELD",fieldName:e}},t.noopAction=function(){return{type:"NOOP"}}},cBsc:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("oTWu"),n("h1HY"),(0,i.default)("body#blog_posts_category",function(e){var t,n;(t=(0,r.default)("#sidebar",e)).sticky_bar({parent:t.closest("#content")}),n=(0,r.default)(".mobius",e),(0,r.default)("div.load_more",e).show(),(0,r.default)("div.pagination",e).hide(),n.persistent_paging()})},cDEd:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("change","body#help_copyright form.select_country",function(){(0,a.default)(this).submit()})})},cFFW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},cLqc:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-project-faqs-content",function(e){e.on("click",".js-faq-question-toggle",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".js-faq"),n=t.find(".js-faq-answer"),i=(0,r.default)(this).data("faq_id"),o=t.find(".js-arrow-icon");t.hasClass("js-expanded")?(0,a.track)("Clicked Project FAQ Question",{context:"collapsed",which:i}):(0,a.track)("Clicked Project FAQ Question",{context:"expanded",which:i}),t.toggleClass("js-expanded"),o.toggleClass("rotate-90"),n.toggleClass("hide")}),e.on("click",".js-ask-a-question",function(){(0,a.track)("Clicked Ask Question")}),(0,r.default)("body").on("click",".js-submit-question",function(){(0,a.track)("Submitted Ask Question")}),e.on("click",".js-edit-faqs",function(){(0,a.track)("Edited FAQ Question")})})},cWTi:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=(0,r.default)("#curated_pages_show"),t="#curated_pages_show form.curated_pages_form",n=(0,r.default)(t);n.length&&(!function(){var a,o=(0,r.default)("#main.published"),s=(0,r.default)(".project-card-list.live",e),l=(0,r.default)(".tools .delete").closest("form"),u=!!o.length,c=(0,r.default)(".find_projects .project-results ul.result_list",e).clone(),d=(0,r.default)(".find_projects .project-results div.instructions",e).clone(),f=!!c.length;function h(e){var t=e.siblings(".value"),n=e.children("span.add_prompt");if(!t.siblings("textarea:visible, input:visible").length)return""===r.default.trim(t.text())?(n.show(),e.addClass("empty")):(n.hide(),e.removeClass("empty")),e}function p(){var e,t,n=(0,r.default)(".submit.launch, #add_shortcut_url");e=(0,r.default)(".curated_page_project:visible:not(.new)"),t=e.length-e.find("div.blurb.errored").length,""===r.default.trim((0,r.default)("#curated_page_title:not(:visible)").val())||""===r.default.trim((0,r.default)("#curated_page_description:not(:visible)").val())||t<1?n.attr("disabled",!0).addClass("disabled"):n.removeAttr("disabled").removeClass("disabled")}function m(e){var t={};e.data("livesearch_result")?(t.html=e.data("livesearch_result").html,t.id=e.data("livesearch_result").id):(t.html=e.data("html"),t.id=+e.data("id")),console.assert(t.html.length),console.assert(t.id);var n=(0,r.default)(t.html).find(".project-card").parent().html();return console.assert(n.length),t.card=n,t}(0,r.default)(document).on("form_synced","form.header_form",function(e,t){var n=(0,r.default)(this);t.curated_page&&t.curated_page.description&&h(n.find(".description .value").html(t.curated_page.description).siblings(".edit_prompt"))}),(0,r.default)(document).on("form_synced",".curated_page_project > form",function(e,t){var n=(0,r.default)(this);t.curated_page_project&&t.curated_page_project.blurb&&h(n.find(".blurb .value").html(t.curated_page_project.blurb).siblings(".edit_prompt"))}),e.on("click",".value:not(.image), .edit_prompt",function(){var e,t,n,a,o,s,l=(0,r.default)(this),u=(0,r.default)(this).siblings("input, textarea");u.is(":visible")||(u.show().focus(),u.parent().append((e=u,t=(0,r.default)('<div class="buttons"></div>'),n=e.val(),a=(0,r.default)('<div class="save btn btn--green btn--small">'+i.default.t("onloads.views.curated_pages.show.Save")+"</div>"),o=(0,r.default)('<div class="cancel btn btn--gray btn--small">'+i.default.t("onloads.views.curated_pages.show.Cancel")+"</div>"),s=(0,r.default)('<span class="loading icon-loading-small"></span>'),a.click(function(){e.trigger("close")}),o.click(function(){e.val(n),e.trigger("close")}),s.hide(),t.append(a),t.append(o),t.append(s),t)),setTimeout(function(){(0,r.default)(document).on("click",c)},100),l.is(".empty")?l.find(".add_prompt").hide():l.hide(),l.siblings(".value").hide(),l.trigger("field_opened"));function c(e){e.target===u[0]||(0,r.default)(e.target).is("a.cancel, a.save")||(0,r.default)(document).off("click",c)}}),(0,r.default)(".edit_prompt",n).each(function(){h((0,r.default)(this))}),e.on("close","input:not(.not_edit_in_place), textarea",function(){var e=(0,r.default)(this),t=e.siblings(".edit_prompt"),n=e.siblings(".value");function i(){n.show(),u||t.show(),e.siblings(".buttons").remove(),e.hide(),e.trigger("field_closed")}e.validate()?e.is("textarea")?(e.siblings(".buttons").find(".loading").css("display","inline-block"),e.closest("form").sync_form({success:function(e){e.valid&&i()},complete:function(){e.siblings(".buttons").find(".loading").hide()}})):(n.text(e.val()),h(t),i(),e.closest("form").sync_form()):e.focus()}),(0,r.default)(document).on("keydown",t+" input:not(.not_edit_in_place)",function(e){13===e.keyCode&&(e.preventDefault(),(0,r.default)(this).trigger("close")),27===e.keyCode&&(e.preventDefault(),(0,r.default)(this).siblings(".buttons").find(".cancel").click())}),(0,r.default)(document).on("click",".curated_page_project a.remove",function(e){e.preventDefault();var t,n,i=(0,r.default)(this),a=i.closest("form"),o=parseInt(a.find("input.project_id").val(),10);c.find("li").each(function(){(0,r.default)(this).attr("data-id")===o&&(0,r.default)(this).show()}),a.sync_form({type:"delete",success:function(){n&&i.closest(".curated_page_project").remove(),t=!0}}),i.closest(".curated_page_project").fadeOut(function(){p(),t&&(0,r.default)(this).remove(),n=!0})}),(0,r.default)(".blurb textarea, .meta .description textarea").livequery(function(){(0,r.default)(this).validates_max_length().validates_presence()}),(0,r.default)("#curated_page_title").data("validations",[[function(e){return!(!e.length&&u)}]]),(0,r.default)(document).on("field_opened",".blurb",function(){(0,r.default)(this).find(".label").show(),(0,r.default)(this).find(".character_counter").show()}),(0,r.default)(document).on("field_closed",".blurb",function(){(0,r.default)(this).find(".label").hide(),(0,r.default)(this).find(".character_counter").hide()}),(0,r.default)(document).on("field_opened",".meta .description",function(){(0,r.default)(this).find(".character_counter").show()}),(0,r.default)(document).on("field_closed",".meta .description",function(){(0,r.default)(this).find(".character_counter").hide()}),(0,r.default)(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){(0,r.default)(this).addClass("errored")}),(0,r.default)(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){(0,r.default)(this).removeClass("errored")}),(0,r.default)(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(e){var t=(0,r.default)(this),n=t.find("textarea").val().length,i=parseInt(t.find("textarea").data("maxlength"),10)-n;"field_opened"!==e.type&&t.find("textarea").validate(),t.find(".character_counter .number").text(i)}),(0,r.default)(document).on("form_synced",".curated_page_project",function(e,t){var n=(0,r.default)(this),i=n.find("form");t.valid&&(i.attr("action",t.url),i.attr("method","put"),i.find("#curated_page_project_id").val(t.curated_page_project.id),n.css("border","0"))}),(0,r.default)(document).on("click",".image a.remove",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(e){t.closest(".image").find("img").attr("src",e)}})}),e.on("click",".add_project",function(){var e=(0,r.default)(this).closest(".curated_page_project").find(".find_projects");e.show(),e.find(".input-search").focus()}),(0,r.default)(document).on("livesearch:soft_select livesearch:unselect",".find_projects .project-results ul.result_list li",function(e){var t=(0,r.default)(this),n=t.closest(".curated_page_project").find(".project");console.assert(n.length);var i=n.children(".add_project");console.assert(i.length);var a,o=n.find(".project-card");if("livesearch:soft_select"===e.type){a=m(t);var s=(0,r.default)(a.card);i.hide(),o.remove(),n.append(s)}else console.assert(o),o.remove(),i.show()}),(0,r.default)(document).on("livesearch:selected",".find_projects .project-results ul.result_list li",function(e){e.preventDefault();var t,n,i=(0,r.default)(this),o=m(i),l=(0,r.default)('<div class="curated_page_project">'+o.html+"</div>"),u=i.closest(".curated_page_project");console.assert(u.length),i.trigger("livesearch:unselect"),c.find("li").each(function(){(0,r.default)(this).attr("data-id")===o.id&&(0,r.default)(this).hide()}),f?(u.find("ul.result_list").replaceWith(c.clone()),u.find(".project-results > h2").text("My Backed Projects"),a.bind_results()):(u.find("ul.result_list").empty().before(d.clone()),u.find(".project-results > h2").text("Adding Projects")),a.livesearch.last_search=!1,u.find("input.input-search").val("").blur(),t=u.find("input.exclude"),n="",s.children(".curated_page_project").each(function(){var e=(0,r.default)(this).find("input.project_id").val();e&&(n+=e+",")}),n+=l.find("input.project_id").val(),t.val(n),u.hide(),u.after(l),l.find(".blurb .value").click()}),(0,r.default)(document).on("livesearch:results",".find_projects",function(){(0,r.default)(this).find(".project-results > h2").text("Search Results"),(0,r.default)(this).find(".project-results > .instructions").remove()}),(0,r.default)(".find_projects input.input-search").livequery(function(){var e=(0,r.default)(this),t=(0,r.default)(this).siblings("input.exclude"),n=e.siblings(".ss-search");a=e.livesearch_input_dropdown({url:e.data("livesearch-url"),serialize:e.add(t),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(e){return e.name}}).data("livesearch.input_dropdown"),e.on("livesearch:searching",function(){n.removeClass("ss-search").addClass("icon-loading-small")}),e.on("livesearch:results livesearch:ajax_error",function(){n.removeClass("icon-loading-small").addClass("ss-search")})}),(0,r.default)(document).on("form_synced",p),p(),u&&((0,r.default)(document).on("mouseenter",".curated_page_project, .image.value",function(){(0,r.default)(this).find("a.remove").show()}).on("mouseleave",".curated_page_project, .image.value",function(){(0,r.default)(this).find("a.remove").hide()}),(0,r.default)(document).on("mouseenter",".project-card-list.live .value, .value ~ textarea, .value ~ input",function(){(0,r.default)(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){(0,r.default)(this).siblings(".edit_prompt:not(.empty)").hide()})),(0,r.default)(document).on("click","#new_root_slug .cancel",function(e){e.preventDefault(),(0,r.default)(this).trigger("close.modal_dialog")}),(0,r.default)(document).on("submit","#new_root_slug",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.find(".shortcut.url");n.addClass("processing"),n.removeClass("invalid"),n.find(".error_message").text(""),r.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){if(n.removeClass("processing"),e.valid){t.trigger("close.modal_dialog");var i=(0,r.default)(".tools .launch");i.length&&i.closest("form").submit(),(0,r.default)("#add_shortcut_url").replaceWith('<a class="btn btn--red shortcut_url" href="'+e.url+'">'+e.url+"</a>")}else t.removeClass("submitting-non-ajax"),n.addClass("invalid"),n.find(".error_message").text(e.errors.slug[0])}})}),l.confirm_submit({title:i.default.t("onloads.views.curated_pages.show.Delete_your_Curated_Page"),copy:i.default.t("onloads.views.curated_pages.show.Are_you_sure_you_want_to_delete_your_current_Curated_Page"),yes_copy:i.default.t("onloads.views.curated_pages.show.Yes_delete"),no_copy:i.default.t("onloads.views.curated_pages.show.Nevermind")})}(),(0,r.default)(".js-add_project").on("click",function(e){var t=(0,r.default)(".new");console.assert(t.length),t.is(":visible")?t.hide():t.show().find(".add_project").click(),e.preventDefault()}))})},cnnw:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n("GiK3")),a=u(n("KSGD")),o=u(n("tW2u")),s=u(n("UE8d")),l=n("QzNM");function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.nameShape.isRequired,a.default.bool,a.default.bool,a.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=c(this,e.call.apply(e,[this].concat(o))),r._wrapChild=function(e){return i.default.createElement(s.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.default.createElement(o.default,r({},this.props,{childFactory:this._wrapChild}))},t}(i.default.Component);d.displayName="CSSTransitionGroup",d.propTypes={},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=d,e.exports=t.default},crWv:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},"d/4O":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("LNuh"),function(){function e(e,t){var n,r,i,a=("normal"===(r=(n=e).css("line-height"))?1.2*parseInt(n.css("font-size"),10):parseInt(r,10))*t;return e.css("max-height",a+"px"),(i=e[0]).clientHeight<i.scrollHeight}(0,a.default)(".js-line-clamp").livequery(function(){var t=(0,a.default)(this),n=(0,a.default)(this).find(".clamped"),r=t.find(".fade,.expand");!function(e,t){var n=e.parents(":hidden:last"),r=n.attr("style");n.length&&n.show(),t(),n.length&&(void 0===r?n.removeAttr("style"):n.attr("style",r))}(t,function(){!function(e){var t,n=e.children(":not(.fade)").last();t=parseInt(n.css("padding-bottom"),10)+parseInt(n.css("margin-bottom"),10),e.css("margin-bottom",t),n.css("padding-bottom",0),n.css("margin-bottom",0)}(n),e(n,t.data("lines"))&&(r.show(),r.one("click",function(e){e.preventDefault(),e.stopPropagation(),function(e){e.css("max-height",e[0].scrollHeight+"px")}(n),r.hide()}))})})}()},d3qi:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("qBp/"),(0,a.default)(function(){a.default.clipster(".clipster")})},d4Y8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectCardContainer=void 0;var r=s(n("GiK3")),i=s(n("FbaH")),a=n("ci1u"),o=s(n("Fe8w"));function s(e){return e&&e.__esModule?e:{default:e}}t.ProjectCardContainer=function(e){var t=e.dispatch,n=e.horizontal,s=void 0!==n&&n,l=e.projects,u=void 0===l?[]:l,c=e.refTag,d=e.remindMeEnabled,f=u.map(function(e,n){var a=s?"col-full":"col-full col-sm-12-24 col-lg-8-24";return r.default.createElement("div",{className:a,key:e?e.pid:n},r.default.createElement(i.default,{horizontal:s,refTag:c,state:e||{}},d&&e&&r.default.createElement(o.default,{dispatch:t,project:e,atoms:["absolute","t2","r2"]})))});return r.default.createElement(a.Grid,{atoms:["js-project-group"]},r.default.createElement(a.Row,{atoms:["flex","flex-wrap"]},f))}},dKWP:function(e,t,n){"use strict";var r=d(n("l/Rs")),i=d(n("8NzR")),a=d(n("9VV1")),o=d(n("wmCY")),s=n("4RZc");n("LNuh"),n("jN36"),n("9DJv");var l=n("8Ml/"),u=d(n("shXp")),c=n("PP63");function d(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#checkouts_thanks",function(e){(0,c.thanksPageRecs)(),(0,r.default)(".short_url",e).click(function(){(0,r.default)(this).select(),(0,s.track)("Checkout Share",{share_type:"copy_link"})}),(0,r.default)(".js-verifying",e).livequery(function(){r.default.pollster((0,r.default)(this).data("poll_url"),function(e){if("verifying"!==e.state)return window.location.reload(),!0},{delay:2500})}),e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),"undefined"!=typeof FB){r.default.ajax((0,r.default)(this).data("ks-share-url")),(0,s.track)("Checkout Show Share",{share_type:"facebook"});var t=(0,r.default)(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&void 0===e.error_code?((0,a.default)({success:o.default.t("onloads.views.checkouts.thanks.Facebook_post_was_published")}),(0,s.track)("Checkout Share",{share_type:"facebook"})):(0,a.default)({notice:o.default.t("onloads.views.checkouts.thanks.Facebook_post_was_not_published")})})}}),twttr.ready(function(t){t.events.bind("click",function(){(0,s.track)("Checkout Show Share",{share_type:"twitter"}),r.default.ajax(e.find(".js-twitter-share").data("ks-share-url"))})}),(0,l.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=u.default.debounce(l.trackProjectCards,150)})},dRgk:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("+bVi")),a=n("Tvaj");function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),(0,r.default)(function(){var e;function t(t){var n=(0,r.default)(t.currentTarget);if(!n.hasClass("ksr-popover-excluded")){var a=(0,r.default)('.ksr-popover[data-target-id="#'+n.attr("id")+'"], .js-popover[data-target-id="#'+n.attr("id")+'"]');if(!a.hasClass("visible")&&!a.hasClass("block"))return function(t){var n=t.data("ksr_popover_override");if("function"==typeof n&&!n(t))return;var a=(0,r.default)(t.data("targetId"));a.hasClass("js-popover-trigger")?a.removeClass("shadow-2 border-transparent").addClass("border-dark-grey-500"):a.addClass("ksr-popover-active");e&&o();e=t,t.hasClass("js-popover")?t.addClass("block"):t.addClass("visible");(0,r.default)("body").addClass("ksr-popover-visible"),i.default.mobile&&(0,r.default)("body, html").addClass("ksr-mobile-popover-visible");s(t),(0,r.default)(document).trigger("ksr_popover:opened",{$popover:t})}(a),!1;o()}}var n={};function o(t){var n=(t=t||{}).update_focus||!1;if(e){var i=(0,r.default)(e.data("targetId"));i.hasClass("js-popover-trigger")?i.addClass("shadow-2 border-transparent").removeClass("border-dark-grey-500"):i.removeClass("ksr-popover-active"),e.hasClass("js-popover")?e.removeClass("block"):e.removeClass("visible"),(0,r.default)("body").removeClass("ksr-popover-visible"),(0,r.default)("body, html").removeClass("ksr-mobile-popover-visible"),n&&i.find(".ksr-icon__arrow-down").focus(),(0,r.default)(document).trigger("ksr_popover:closed",{$popover:e}),e=!1}}function s(e){if(!i.default.mobile){var t,n=e.data("targetId"),a=(0,r.default)(n),o=(0,r.default)(window).width(),s=a.offset().top+a.outerHeight()+20;e.hasClass("js-popover")?(o<600?(t=0,s=0):(t=a.offset().left,t-=Math.max(0,t+e.outerWidth()-(o-4)),t=Math.max(4,t)),e.offset({left:t,top:s})):(t=a.offset().left-32,t-=Math.max(0,t+e.outerWidth()-(o-32)),t=Math.max(4,t),e.offset({left:t,top:s}),e.find(".arrow").css({left:a.offset().left-e.offset().left+a.outerWidth()/2}))}}(0,r.default)(".ksr-popover, .js-popover").livequery(function(){var e=(0,r.default)(this).data("targetId");n[e]||((0,r.default)(document).on("click",e,t),n[e]=!0)}),(0,r.default)(document).on("click",".ksr-popover .close, .js-popover .close",function(e){o(),e.preventDefault()}),(0,r.default)(document).on("ksr_popover:reposition",".ksr-popover, .js-popover",function(){s((0,r.default)(this))}),(0,r.default)(document).on("ksr_popover:close",".ksr-popover, .js-popover",function(){o()}),(0,r.default)(document).on("click",function(t){(0,r.default)(t.target).closest(e).length||o()}),(0,r.default)(document).on("keydown",function(e){e.keyCode===a.ESC&&o({update_focus:!0})}),(0,r.default)(document).on("ksr_popover:opened",function(e,t){t.$popover.aria_set_visible().aria_focus_first_element().aria_activate_keyboard_tabindex()}),(0,r.default)(document).on("ksr_popover:closed",function(e,t){t.$popover.aria_set_hidden().aria_deactivate_keyboard_tabindex()})})},"dY/E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namespaceModule=t.namespaceDispatchFactory=t.namespaceActions=t.namespaceActionFactory=t.namespaceReducerFactory=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("Z6GA");var a=t.namespaceReducerFactory=function(e){return function(t,n){return function(r,i){var a=void 0===r;return(i&&i.namespace)===e||a?t(r,i,n):r}}},o=t.namespaceActionFactory=function(e){return function(t){return function(){var n=t.apply(void 0,arguments);return r({},n,{namespace:e})}}},s=t.namespaceActions=function(e){return function(t){return(0,i.mapObject)(o(e),t)}},l=t.namespaceDispatchFactory=function(e){return function(t){return function(n){return t(r({},n,{namespace:e}))}}};t.namespaceModule=function(e,t,n){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.uuidNoDashes)(),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.Component,d=void 0===c?e:c,f=u.reducer,h=void 0===f?t:f,p=u.actions,m=void 0===p?n:p,g=a(o),v=l(o),_=s(o)(m);return{namespace:o,actions:_,reducer:g(h,_),Component:function(e,t){var n=e.dispatch,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["dispatch"]);return d(r({dispatch:v(n)},i),t)}}}}},dgQY:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=n("4RZc"),a=o(n("c5nH"));function o(e){return e&&e.__esModule?e:{default:e}}!function(){function e(e,t){if(void 0!==e){var n="internal";(0,r.default)("body").is(".widget")&&(n="external"),r.default.ajax({url:e,type:"post",data:{event_type:t,location:n}})}}function t(e){return(0,r.default)("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}var n;function o(e){window.koala_video_progress_endpoint&&(n=setInterval(function(){var t=e.current_position();!function(e){r.default.ajax({type:"POST",url:window.window.koala_video_progress_endpoint,data:JSON.stringify({project_name:a.default.data.name,project_pid:a.default.data.id,backers_count:a.default.data.backers_count,blurb:a.default.data.blurb,category_name:a.default.data.category.name,comments_count:a.default.data.comments_count,creator_name:a.default.data.creator.name,currency_symbol:a.default.data.currency_symbol,goal:a.default.data.goal,launched_at:a.default.data.launched_at,photo_full:a.default.data.photo.full,photo_thumb:a.default.data.photo.thumb,project_url:a.default.data.urls.web.project,usd_pledged:a.default.data.usd_pledged,video:a.default.data.video,video_playhead_position:e}),contentType:"text/plain; charset=UTF-8"})}(Math.floor(t))},1e3))}function s(e){return function(n){var a=(0,r.default)(n.target),o=t(a),s=a.attr("data-video-name");(0,i.track)(o+" "+e,{video_name:s})}}(0,r.default)(document).on("ksr_video:playing",function(n,a){var s=(0,r.default)(n.target),l=t(s),u=s.data("ksr_video"),c=u.current_position(),d=s.closest(".video-player").attr("data-video-tracker-url"),f=s.attr("data-video-name");o(u),a?(e(d,"start"),(0,i.track)(l+" Video Start",{track_count:s.find("track").length,track_language:s.data("language"),video_name:f})):(0,i.track)(l+" Video Resume",{position:c,video_name:f})}).on("ksr_video:paused",function(e){var a=(0,r.default)(e.target),o=a.data("ksr_video"),s=t(a),l=o.current_position(),u=a.attr("data-video-name");clearInterval(n),(0,i.track)(s+" Video Pause",{position:l,video_name:u})}).on("ksr_video:ended",function(n){var a=(0,r.default)(n.target),o=a.data("ksr_video"),s=t(a),l=o.duration(),u=a.closest(".video-player").attr("data-video-tracker-url"),c=a.attr("data-video-name");e(u,"complete"),(0,i.track)(s+" Video Complete",{duration:l,video_name:c})}).on("ksr_video:change_track",function(e,n){var a=(0,r.default)(e.target),o=t(a),s=a.attr("data-video-name");(0,i.track)(o+" Video Change Track",{track_language:n,video_name:s})}).on("ksr_video:muted",s("Video Mute")).on("ksr_video:unmuted",s("Video Unmute")).on("ksr_video:volume_adjusted",s("Video Volume Adjustment"))}()},eFoH:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(document).on("click","input#share_a_link",function(){(0,a.default)("#share_a_link").focus().select()})},eVnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n("GiK3")),a=s(n("KSGD")),o=s(n("y5MZ"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeThreadId:""},n.activateForm=n.activateForm.bind(n),n.deactivateForm=n.deactivateForm.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"activateForm",value:function(e){this.setState(function(){return{activeThreadId:e}})}},{key:"deactivateForm",value:function(){this.setState(function(){return{activeThreadId:""}})}},{key:"render",value:function(){return i.default.createElement(o.default,{comments:this.props.comments,author:this.props.author,pid:this.props.pid,projectId:this.props.projectId,activeThreadId:this.state.activeThreadId,activateForm:this.activateForm,deactivateForm:this.deactivateForm,userCanComment:this.props.userCanComment,currentCursor:this.props.currentCursor,pagination:this.props.pagination,refetch:this.props.refetch})}}]),t}();l.propTypes={pid:a.default.oneOfType([a.default.string,a.default.number]),projectId:a.default.string,comments:a.default.array,userCanComment:a.default.bool,author:a.default.shape({id:a.default.string,imageUrl:a.default.string,name:a.default.string,isSuperBacker:a.default.bool,isKsrAdmin:a.default.bool}),pagination:a.default.shape({onClick:a.default.func.isRequired,loadingStatus:a.default.bool,totalCount:a.default.number,showingCount:a.default.number,hasMorePages:a.default.bool}),currentCursor:a.default.string,refetch:a.default.func.isRequired},t.default=l},"f+bT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnavailableReward=t.InactiveReward=t.BackedReward=t.AvailableReward=t.RewardsList=void 0;var r=_(n("GiK3")),i=n("Z5jf"),a=n("Z6GA"),o=n("Tvaj"),s=n("c3QO"),l=n("dY/E"),u=n("E/SE"),c=n("Tvr3"),d=_(n("Ak0P")),f=n("uA/L"),h=n("hP+2"),p=n("IPoO"),m=n("8UPI"),g=n("+4Bd"),v=n("pJCm");function _(e){return e&&e.__esModule?e:{default:e}}var y=function(e){return(!e.which||e.which===o.ENTER||e.which===o.SPACE)&&(e.which==o.SPACE&&e.preventDefault(),!0)},b="relative px3 pt3 pb6 border",w=(t.RewardsList=function(e){var t=e.state,n=e.dispatch,o=e.dropdowns,d=function(e,t){var r=e.id,i=(e.closedHeight,e.minPledge),o=e.shippingEnabled,d=e.shippingRulesStatus;if(y(t)){if(o&&d===c.UNLOADED){var f=(0,l.namespaceActionFactory)(r)(u.loadAsync);n(f((0,a.encodeId)("Reward",r)))}n((0,s.onRewardSelected)({id:r,minPledge:i,shippingEnabled:o}))}},h=function(e){return n((0,s.continueToNextPage)(e))},p=function(e){return n((0,s.requestRedirect)(e))},m=function(e){return n((0,s.validateField)(e))},g=(0,a.partial)(function(e,t){return e((0,s.payWithApplePay)(e,t))},n),v=(0,a.debounce)(m,750),_=function(e,t){n((0,s.onPledgeValueUpdated)(t.target.value)),v(e)},b=t.reward.rewardsList[t.reward.rewardsListOrder[0]],T=!b||b.isCreator||b.campaignSuccessful||!b.campaignLive||t.reward.backedReward.length>0,A=!!t.reward.backedReward.length,R=!!t.reward.unavailableRewardsListOrder.length;return r.default.createElement("div",null,r.default.createElement(f.Heading,{atoms:["normal mb3 mb7-sm mobile-hide"]},(0,i.boundT)("project_page.reward.Support")),A&&r.default.createElement(E,{state:t.reward,backedRewardArray:t.reward.backedReward,onRedirectClick:p}),!T&&r.default.createElement(S,{state:t.reward,onApplePayClick:g,onContinueClick:h,onPledgeValueChange:_,onRewardSelect:d,onValidateField:m}),T&&r.default.createElement(k,{state:t,onRedirectClick:p}),!T&&r.default.createElement(w,{state:t,dispatch:n,dropdowns:o,onApplePayClick:g,onContinueClick:h,onPledgeValueChange:_,onRewardSelect:d,onValidateField:m}),R&&r.default.createElement(C,{state:t}))},function(e){var t=e.state,n=e.dispatch,i=e.dropdowns,o=e.onApplePayClick,l=e.onContinueClick,u=e.onPledgeValueChange,c=e.onRewardSelect,d=e.onValidateField;return t.reward.rewardsListOrder.map(function(e){var f=t.reward.rewardsList[e],m=e==t.reward.selectedReward.id,g=m?"border-dark-grey-400":"border-grey-400",v=m&&t.reward.selectedReward.truncated;return r.default.createElement(h.Hover,{active:m,dispatch:n,doNotPin:t.reward.selectedReward.doNotPin,savedOffset:f.offsetHeight,rewardId:e,type:p.AVAILABLE,onClick:(0,a.partial)(c,f),onKeyPress:(0,a.partial)(c,f),key:"hover-"+e},r.default.createElement(T,{key:e,reward:f,dispatch:n,state:t.reward,activeReward:m,atoms:(0,a.computedAtoms)(b,"pointer",g),onApplePayClick:o,onBlurField:(0,a.partial)(d,p.PLEDGE_AMOUNT),onContinueClick:l,onPledgeValueChange:(0,a.partial)(u,p.PLEDGE_AMOUNT),onTruncateClick:function(){return n((0,s.toggleTruncation)())},ShippingCountryDropdown:i[e],selectState:t.shippingSelects[e+"-select"],truncationStatus:v}))})}),E=function(e){var t=e.state,n=e.backedRewardArray,i=e.onRedirectClick;return n.map(function(e){var n=function(e,t){y(t)&&!e.campaignSuccessful&&i(e.managePath)},o=e.campaignSuccessful?p.BACKED_SUCCESSFUL:p.BACKED_LIVE;return e.id===p.NO_REWARD?r.default.createElement(h.Hover,{type:o,onClick:(0,a.partial)(n,e),onKeyPress:(0,a.partial)(n,e),key:"hover-"+e.id},r.default.createElement(S,{state:t,backed:!0,backingAmount:e.backingAmount})):r.default.createElement(h.Hover,{type:o,onClick:(0,a.partial)(n,e),onKeyPress:(0,a.partial)(n,e),key:"hover-"+e.id},r.default.createElement(A,{key:e.id,reward:e,atoms:(0,a.computedAtoms)(b,"pointer border-blue-500")}))})},k=function(e){var t=e.state,n=e.onRedirectClick;return t.reward.rewardsListOrder.map(function(e){var i=t.reward.rewardsList[e];return r.default.createElement(R,{key:e,atoms:(0,a.computedAtoms)(b,"border-grey-400 mb3"),reward:i,backerReportClick:(0,a.partial)(n,i.reportPath)})})},S=function(e){var t=e.backed,n=e.backingAmount,i=e.state,o=e.onApplePayClick,s=void 0===o?function(){}:o,l=e.onContinueClick,u=void 0===l?function(){}:l,c=e.onPledgeValueChange,d=void 0===c?function(){}:c,f=e.onRewardSelect,h=void 0===f?function(){}:f,_=e.onValidateField,y=void 0===_?function(){}:_,w="\n    "+i.pledgeData.currencySymbol+"\n    "+i.pledgeData.defaultPledge.min;return r.default.createElement(m.PledgeWithoutReward,{atoms:(0,a.computedAtoms)(b),backed:t,backingAmount:n,continueClick:u,currentTotalCost:i.selectedReward.totalCost,errors:(0,g.unboundValidator)((0,v.ERROR_MESSAGES)(w))({fields:[p.PLEDGE_NO_REWARD],state:i.validation}),onBlurField:(0,a.partial)(y,p.PLEDGE_NO_REWARD),onApplePayClick:s,onPledgeValueChange:(0,a.partial)(d,p.PLEDGE_NO_REWARD),onRewardClick:h,onRewardKeyPress:h,pledgeData:i.pledgeData,selected:i.selectedReward.id===p.NO_REWARD,serverErrors:i.validation.serverErrors})},C=function(e){var t=e.state;return r.default.createElement("div",null,r.default.createElement(f.Heading,{weight:"normal"},(0,i.boundT)("projects.rewards_list_experiment.All_gone")),t.reward.unavailableRewardsListOrder.map(function(e){var n=t.reward.unavailableRewardsList[e];return r.default.createElement(x,{key:e,reward:n,atoms:(0,a.computedAtoms)("bg-grey-100 border-grey-400 mb3",b)})}))},T=t.AvailableReward=function(e){var t=e.atoms,n=void 0===t?[]:t,i=e.reward,o=e.dispatch,s=e.activeReward,l=e.truncationStatus,u=e.ShippingCountryDropdown,c=e.selectState,f=e.state,p=e.onApplePayClick,_=e.onBlurField,y=e.onContinueClick,b=e.onPledgeValueChange,w=e.onTruncateClick,E=s,k=E&&i.shippingEnabled,S="\n    "+i.minPledge.symbol+"\n    "+(+f.selectedReward.pledgeCost+f.selectedReward.shippingCost)+"\n  ",C=(0,g.unboundValidator)((0,v.ERROR_MESSAGES)(S)),T=(0,a.partial)(h.truncateReward,o,E,l);return r.default.createElement("div",{className:(0,a.computedAtoms)(n)},r.default.createElement(m.RewardSummary,{active:E,onTruncateClick:w,reward:i,truncateReward:T,truncationStatus:l}),r.default.createElement(m.BackerCountAndLimits,{reward:i}),r.default.createElement(d.default,{enter:"slide-down",leave:"slide-up",durationLeave:150,durationAppear:300},E&&r.default.createElement(m.ShippingAndPayments,{consts:{DISPLAY_SHIPPING:k},reward:i,selectState:c,dispatch:o,currentTotalCost:f.selectedReward.totalCost,onApplePayClick:(0,a.partial)(p,i.id),onBlurField:_,onClick:(0,a.partial)(y,i.id),onPledgeValueChange:b,pledgeData:f.pledgeData,ShippingCountryDropdown:u,validator:C,validation:f.validation})))},A=t.BackedReward=function(e){var t=e.atoms,n=e.reward,i=n.campaignSuccessful,o=n.unavailable;return r.default.createElement("div",{className:(0,a.computedAtoms)(t)},r.default.createElement(m.BackedLabel,null),r.default.createElement(m.RewardSummary,{reward:n}),o&&r.default.createElement(m.Unavailable,null),r.default.createElement(m.BackerCountAndLimits,{reward:n}),i&&r.default.createElement(m.SurveyInfo,{surveys:n.surveys}))},R=t.InactiveReward=function(e){var t=e.atoms,n=e.backerReportClick,i=e.reward,o=i.campaignSuccessful,s=i.isCreator,l=+i.backersCount>0;return r.default.createElement("div",{className:(0,a.computedAtoms)("default-cursor",t)},r.default.createElement(m.RewardSummary,{reward:i}),r.default.createElement(m.BackerCountAndLimits,{reward:i}),o&&s&&l&&r.default.createElement(m.CreatorInformation,{surveys:i.creatorSurveyData,onClick:n}))},x=t.UnavailableReward=function(e){var t=e.atoms,n=e.reward;return r.default.createElement("div",{className:(0,a.computedAtoms)(t)},r.default.createElement(m.RewardSummary,{reward:n}),r.default.createElement(m.Unavailable,null),r.default.createElement(m.BackerCountAndLimits,{reward:n,unavailable:!0}))}},f4ga:function(e,t,n){var r=n("WNGz");e.exports=function(e,t){var n=r(e),i=r(t);return n.getTime()===i.getTime()}},fbTF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.short_filesize=a.default.number_to_human_size(e.data_file_size,{precision:1}),e};var r,i=n("L3hI"),a=(r=i)&&r.__esModule?r:{default:r}},fp5o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n("KSGD")),a=n("GiK3"),o=l(a),s=l(n("VgNI"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleRepliesLoading=function(){n.setState(function(e){return{repliesLoading:!e.repliesLoading}})},n.state={repliesLoading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return o.default.createElement(s.default,{author:this.props.author,pid:this.props.pid,projectId:this.props.projectId,activateForm:this.props.activateForm,deactivateForm:this.props.deactivateForm,activeThreadId:this.props.activeThreadId,userCanComment:this.props.userCanComment,comment:this.props.comment,currentCursor:this.props.currentCursor,client:this.props.client,repliesLoading:this.state.repliesLoading,toggleRepliesLoading:this.toggleRepliesLoading})}}]),t}();u.propTypes={author:i.default.shape({id:i.default.string,imageUrl:i.default.string,name:i.default.string,isSuperBacker:i.default.bool,isKsrAdmin:i.default.bool}),pid:i.default.oneOfType([i.default.string,i.default.number]),projectId:i.default.string,activateForm:i.default.func.isRequired,deactivateForm:i.default.func.isRequired,userCanComment:i.default.bool,comment:i.default.shape({id:i.default.string,body:i.default.string,createdAt:i.default.number,parentId:i.default.string,author:i.default.shape({id:i.default.string,imageUrl:i.default.string,name:i.default.string,isSuperBacker:i.default.bool,isKsrAdmin:i.default.bool}),authorIsProjectCreator:i.default.bool,authorIsProjectCollaborator:i.default.bool,canReport:i.default.bool,hasFlaggings:i.default.bool,replies:i.default.shape({nodes:i.default.array,pageInfo:i.default.shape({startCursor:i.default.string,hasPreviousPage:i.default.bool}),totalCount:i.default.number})}),client:i.default.any.isRequired},t.default=u},fpIj:function(e,t,n){"use strict";var r,i=n("l/Rs");var a={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(e){e.domains=e.domains||a.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||a.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||a.sift3Distance,e.ignoreTLDs=e.ignoreTLDs||!1;var t=a.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction,e.ignoreTLDs);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,r,i){e=e.toLowerCase();var a,o,s,l=this.splitEmail(e),u=this.findClosestDomain(l.domain,t,r);for(s=0;s<this.whitelistRegexes.length;s+=1)if(this.whitelistRegexes[s].exec(l.domain))return!1;if(u){if(u!==l.domain)return{address:l.address,domain:u,full:l.address+"@"+u}}else if(!i&&(a=this.findClosestDomain(l.topLevelDomain,n),l.domain&&a&&a!==l.topLevelDomain))return u=(o=l.domain).substring(0,o.lastIndexOf(l.topLevelDomain))+a,{address:l.address,domain:u,full:l.address+"@"+u};return!1},findClosestDomain:function(e,t,n){var r,i,a=99,o=null;if(!e||!t)return!1;for(n||(n=this.sift3Distance),i=0;i<t.length;i+=1){if(e===t[i])return e;(r=n(e,t[i]))<a&&(a=r,o=t[i])}return a<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){var n,r=0,i=0,a=0,o=0;if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(;r+i<e.length&&r+a<t.length;){if(e.charAt(r+i)===t.charAt(r+a))o+=1;else for(i=0,a=0,n=0;n<5;n+=1){if(r+n<e.length&&e.charAt(r+n)===t.charAt(r)){i=n;break}if(r+n<t.length&&e.charAt(r)===t.charAt(r+n)){a=n;break}}r+=1}return(e.length+t.length)/2-o},splitEmail:function(e){var t,n,r,i=e.split("@"),a="";if(i.length<2)return!1;for(t=0;t<i.length;t+=1)if(""===i[t])return!1;if(0===(r=(n=i.pop()).split(".")).length)return!1;if(1===r.length)a=r[0];else{for(t=1;t<r.length;t+=1)a+=r[t]+".";r.length>=2&&(a=a.substring(0,a.length-1))}return{topLevelDomain:a,domain:n,address:i.join("@")}}}};((r=i)&&r.__esModule?r:{default:r}).default.fn.mailcheck=function(e){var t,n,r=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(r,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,r)}),e.email=this.val(),a.mailcheck.run(e)}},g9ya:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.COMMENT_BADGES=void 0;var i,a=n("P4S0"),o=n("wmCY"),s=(i=o)&&i.__esModule?i:{default:i};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.COMMENT_BADGES=(l(r={},a.USER_TYPES.CREATOR,{text:s.default.t("project_page.comments.Creator"),classes:"bg-ksr-green-700 white px1 type-14 mr1"}),l(r,a.USER_TYPES.COLLABORATOR,{text:s.default.t("project_page.comments.Collaborator"),classes:"bg-ksr-green-700 o50p white o0p px1 type-14 mr1"}),l(r,a.USER_TYPES.SUPERBACKER,{text:s.default.t("project_page.comments.Superbacker"),classes:"apricot-600 type-14 mr1"}),r)},gHGJ:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_guest_checkouts__new",function(e){var t={email_invalid:a.default.t("guest_checkouts.new.Your_email_is_invalid"),email_presence:a.default.t("guest_checkouts.new.Your_email_must_be_present"),finished_checkout:a.default.t("guest_checkouts.new.This_checkout_has_already_been_completed"),other_backer:a.default.t("guest_checkouts.new.Another_email_is_associated_with_this_checkout"),password_presence:a.default.t("guest_checkouts.new.Your_password_must_be_present"),previous_backer:a.default.t("guest_checkouts.new.You_have_already_backed_this_project"),registered_user:a.default.t("guest_checkouts.new.This_email_has_already_been_taken_Try_logging_in")};function n(e,t){var n=(0,r.default)(t).data("error");return void 0!==n&&null!==n}function i(e,n){var i=(0,r.default)(n),a=i.data("error");t.hasOwnProperty(a)&&i.addClass("atomic-form-v1-error").closest("div").find(".js-error-message").removeClass("hide h0").addClass("inline-block mb4").text(t[a])}function o(e,t){(0,r.default)(t).removeClass("atomic-form-v1-error").data("error",null).closest("div").find(".js-error-message").addClass("hide h0").removeClass("inline-block mb4")}function s(e,t){t.find(":input").each(o),e.find("input[type=submit]").removeClass("bttn-grey").addClass("bttn-green"),t.find("input[type=submit]").addClass("bttn-grey").removeClass("bttn-green")}var l=e.find("#user_login_form :input, #user_registration_form :input");l.filter("[type=email]").validates_email({error:"email_invalid"}).validates_presence({error:"email_presence"}),l.filter("[type=password]").validates_presence({error:"password_presence"}),l.on("paste keyup cut change input click",function(e){setTimeout(function(){var t=(0,r.default)(e.target);t.validate();var i=t.closest("form").find(":input").filter(n).length<1;t.closest("form").find("input[type=submit]").attr("disabled",i?null:"disabled")},0)}).on("blur",function(){(0,r.default)(this).each(i)}).on("validate:valid",function(){(0,r.default)(this).each(o)}).on("validate:invalid",function(e,t){(0,r.default)(this).data("error",t)});var u=e.find("#user_registration_form");u.on("submit",function(e){e.preventDefault();var t=(0,r.default)(this);t.validate()?r.default.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serialize(),success:function(e){window.location.href=window.location.pathname.replace(location.pathname,e.redirect_path)},error:function(e){t.find("input[type=email]").trigger("validate:invalid",e.responseJSON.error).each(i)}}):t.find(":input").each(i)}),u.find(":input").on("focus",function(){s(u,c)});var c=e.find("#user_login_form");c.on("submit",function(e){(0,r.default)(this).validate()||(e.preventDefault(),(0,r.default)(this).find(":input").each(i))}),c.find(":input").on("focus",function(){s(c,u)})})},gmJr:function(e,t,n){"use strict";var r,i=o(n("l/Rs")),a=o(n("TGXB"));function o(e){return e&&e.__esModule?e:{default:e}}(r=i.default)(document).on("click",".message .report-spam a",function(e){e.preventDefault();var t=r(this),n=this,i=t.closest(".message"),o=i.clone(),s=r('<p class="flagged_message"><em class="spam_reported"></em></p>');o.find("span.report-spam").remove(),r.modal_confirm(function(){return i.find(".body").before(s),a.default.get(t.data("url"),"post",s.find("em"),n)},{message:o.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})}),r(document).on("ksr_json:complete",".message .spam_reported",function(e,t){var n=r(this).closest(".message"),i=n.find(".report-spam");t.modal||(i.hide(),200!==t.status||i.is(".admin")||n.find(".body").hide())})},grXb:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n){var r;t._hashFence?t._hashFence=!1:(r=window.location.hash.substring(1),t.slides.each(function(i){if(e(this).data("cycle-hash")==r){if(!0===n)t.startingSlide=i;else{var a=t.currSlide<i;t.nextSlide=i,t.API.prepareTx(!0,a)}return!1}}))}e(document).on("cycle-pre-initialize",function(n,r){t(r,!0),r._onHashChange=function(){t(r,!1)},e(window).on("hashchange",r._onHashChange)}),e(document).on("cycle-update-view",function(e,t,n){n.hash&&"#"+n.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=n.hash)}),e(document).on("cycle-destroyed",function(t,n){n._onHashChange&&e(window).off("hashchange",n._onHashChange)})}(r)},gwva:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body#users_watched_projects",function(e){e.on("click","a.js-unstar",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"DELETE",dataType:"json",success:function(){var e=t.closest(".project");e.fadeOut(function(){var t=e.closest(".section");t.find(".project:visible").length||t.remove()})}})}),e.on("click","a.potd",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){window.location.reload()}})})})},gyRD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0;var r,i=n("JiIc"),a=(r=i)&&r.__esModule?r:{default:r};t.Source=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.body=t,this.name=n||"GraphQL request",this.locationOffset=r||{line:1,column:1},this.locationOffset.line>0||(0,a.default)(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||(0,a.default)(0,"column in locationOffset is 1-indexed and must be positive")}},"h+ZX":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShippingRules=void 0;var r=n("Z6GA");t.getShippingRules=function(e){return(0,r.fetchGraph)("\n  query($rewardId: ID!) {\n    reward: node (id: $rewardId) {\n      ... on Reward {\n        shippingRulesExpanded {\n          nodes {\n            id\n            cost {\n              amount\n              symbol\n            }\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n",{rewardId:e})}},h1HY:function(e,t,n){"use strict";n("RORv");var r=n("l/Rs");n("l/Rs");!function(e){e.fn.persistent_paging=function(){return e(this).each(function(){var t=e(this),n=[[1,0,t.find(".page")]],r=[],i=!1,a=t.data("mobius"),o=/^#p(\d*)/.exec(window.location.hash);o&&1!==parseInt(o[1],10)&&(t.one("mobius:loaded_page",function(t,n,r){e.scrollTo(r.offset().top+70)}),a.load_page(parseInt(o[1],10))),t.on("mobius:loaded_page",function(r,i,o){var s,l,u,c=[];function d(){if(this[0]===l)return s=!0,!1}for(n.push([i,!1,o]),u=[],e.each(n,function(){u.push([this[0],this[2].offset().top,this[2]])}),n=u,l=1;l<=n[n.length-1][0];l+=1)s=!1,e.each(n,d),s||c.push(l);c.length?e.each(c,function(){var r=n[0],i=parseInt(this,10),o=e([]),s=[],l=e([]),u=e([]);e.each(n,function(){this[0]>r[0]&&this[0]<i&&(r=this)}),(o=r[2].next(".missing")).length?(s=o.data("missing_pages"),-1===e.inArray(i,s)&&(s.push(i),o.data("missing_pages",s))):(l=(o=t.siblings(".missing").clone()).find(".loading"),u=o.find(".load_more"),o.data("missing_pages",[i]),o.find("a").click(function(e){var n=o.data("missing_pages"),r=n.pop();e.preventDefault(),n.length&&o.data("missing_pages",n),u.addClass("loading"),a.load_page(r,o),t.one("mobius:loaded_page",function(){u.removeClass("loading")})}),r[2].after(o),l.hide(),o.show())}):t.find("div.missing").remove()}),e(document).scroll(function(){var t,a=e(window).scrollTop();e.each(n,function(){var e=this[1];a>e&&(r=this)}),r[0]!==i&&(t="#p"+r[0],window.history&&window.history.replaceState?history.replaceState(null,null,t):window.location.replace(t),e(document).trigger("infinite_scroll:scrolled_to",[r[0]]),i=r[0])})})}}(r)},h8C7:function(e,t,n){"use strict";var r=a(n("9VV1")),i=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}var o=n("l/Rs");n("l/Rs");!function(e){function t(t){var n=t.data("status-url");n&&e.pollster(n,function(n){var a,o=t.data("track-label");return n.ok?(a=e(n.html),t.replaceWith(a),(0,r.default)({success:i.default.t("library.video_tracks_editor.Successfully_imported_label",{label:o})}),!0):!!n.error&&(a=e(n.html),t.replaceWith(a),(0,r.default)({error:i.default.t("library.video_tracks_editor.Something_went_wrong_while_importing_label",{label:o,error:n.error})}),!0)},{delay:1e3})}e.fn.videoTracksEditor=function(){var n=e(this);n.on("click",".js-add-track",function(t){var n=e(t.currentTarget),r=n.closest(".js-subtitles"),i=r.find(".js-language-select"),a=r.find(".js-track-list"),o=i.find("option:selected").val();e.ajax({method:"POST",url:n.data("create-track-path"),data:{language:o,captionable_type:n.data("captionable-type"),captionable_id:n.data("captionable-id")},dataType:"json"}).success(function(e){a.append(e.html),i.find('option[value="'+o+'"]').prop("disabled",!0),i.ksr_val(i.find("option").not("[disabled]").first().val())}),t.preventDefault()}),n.on("click",".js-captionable--destroy-track",function(t){var n=e(t.currentTarget),r=n.closest(".js-subtitles").find(".js-language-select"),a=n.data("path");t.preventDefault(),confirm(i.default.t("library.video_tracks_editor.Are_you_sure_you_want_to_delete_this_track"))&&e.ajax({method:"DELETE",url:a}).success(function(e){var t=n.data("language");e.ok&&(r.find('option[value="'+t+'"]').prop("disabled",!1),n.closest(".js-captionable--track-item").remove())})}),n.on("change",".js-importer--input",function(){var n,a=e(this),o=a.closest(".js-importer"),s=a.closest(".js-captionable--track-item"),l=o.find(".js-importer--text"),u=this.files&&this.files[0],c=new FormData;u&&(a.hide(),l.text(i.default.t("library.video_tracks_editor.Uploading")),c.append("track[file]",u),(n=e.ajax({url:a.data("url"),type:"PUT",processData:!1,contentType:!1,data:c})).success(function(n){var i;n.ok?(i=e(n.html),s.replaceWith(i),t(i)):(0,r.default)({error:n.error})}),n.error(function(){(0,r.default)({error:i.default.t("library.video_tracks_editor.Something_went_wrong_while_uploading_file",{file:u.name})}),a.show()}))}),n.find(".js-captionable--track-item").each(function(){t(e(this))})}}(o)},"hP+2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateReward=t.Hover=void 0;var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf"),s=n("uA/L"),l=n("c3QO"),u=n("IPoO");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Hover=function(e){var t,n=e.active,r=e.children,i=e.dispatch,d=e.doNotPin,f=e.savedOffset,h=e.rewardId,p=e.type,m=e.onClick,g=void 0===m?function(){}:m,v=e.onKeyPress,_=void 0===v?function(){}:v,y=(c(t={},u.AVAILABLE,{text:(0,o.boundT)("project_page.reward.Select_this_reward"),classes:"pledge--available"}),c(t,u.BACKED_LIVE,{text:(0,o.boundT)("project_page.reward.Manage_your_pledge"),classes:"pledge--backed"}),c(t,u.BACKED_SUCCESSFUL,{text:(0,o.boundT)("project_page.reward.View_your_pledge"),classes:"pledge--backed js-view_your_pledge"}),t);return a.default.createElement("div",{role:"button",ref:function(e){if(e&&p===u.AVAILABLE&&!f&&e.offsetTop>0)setTimeout(function(){return i((0,l.saveRewardOffset)(h,e.offsetTop))},0);else if(window&&e&&n&&!d){var t=document.getElementById("global-header"),r=t&&t.classList.contains("stick")?t.offsetHeight:0,a=document.getElementsByClassName("NS_projects__hero_funding"),o=a.length?a[0].offsetHeight:820;window.scrollTo(0,f+o-(r+20)),i((0,l.freezePin)())}},className:y[p].classes+" hover-group mb3 pointer block text-left",tabIndex:"0",onClick:g,onKeyPress:_},!n&&a.default.createElement("div",{className:"pledge__hover hover-zoomout"},a.default.createElement("div",{className:"pledge__hover-content"},a.default.createElement(s.Paragraph,{type:"body-200"},y[p].text))),r)},t.truncateReward=function(e,t,n,r){!n&&r&&t&&r.clientHeight>80&&e((0,l.truncateDescription)())}},hU5k:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(".NS_blogs__blog_header .js-show-blog-search").on("click",function(e){e.preventDefault(),(0,a.default)(".js-blog-search").addClass("is-visible"),(0,a.default)(".js-blog-search input.text").focus()}),(0,a.default)(".NS_blogs__blog_header .js-blog-search input.text").on("blur",function(){(0,a.default)(".js-blog-search").removeClass("is-visible")})},hYij:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,o=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(c){var f=u(n);f&&f!==c&&e(t,f,d)}var h=o(n);s&&(h=h.concat(s(n)));for(var p=0;p<h.length;++p){var m=h[p];if(!(r[m]||i[m]||d&&d[m])){var g=l(n,m);try{a(t,m,g)}catch(e){}}}return t}return t}},hYqS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3zLD"),i=o(n("yR81")),a=o(n("wTuk"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.graphql)(i.default)(a.default)},iDDm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.filters={},(e=function(e){return r.default.each(r.default.keys(e.aggregations),function(t){r.default.each(r.default.keys(e.aggregations[t]),function(n){var r=e.aggregations[t][n];e.aggregations[t][n]={count:r}})}),e}(e=function(e){e.project.disputed>0&&(e.filters.disputed={true:{count:e.project.disputed}});return e}(e))).aggregations.must_have_creator_note={true:{},false:{}},e.not_filtered=!0,"successful"===(e=function(e){e.params&&(r.default.each(r.default.keys(e.params),function(t){r.default.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):r.default.has(e.filters,t)?e.filters[t][e.params[t]].selected=!0:(e.aggregations[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.actual_reward_selected=!1,e.params.reward_id&&(e.actual_reward_selected=!0,e.selected_reward=r.default.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.actual_reward_selected=!1,e.selected_reward=r.default.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),r.default.each(["survey_answered","completed","must_have_creator_note","status","backer_banned","disputed"],function(t){e.params[t]&&(e.not_filtered=!1)}));return e}(e)).project.state&&(e.project.is_successful=!0),(e=function(e){return e.show_aggregations=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e}(e)).formatted_total_entries=i.default.format_number(e.total_entries,{precision:0}),e.count=e.total_entries,(e=function(e){return r.default.each(e.rewards,function(e){e.formatted_minimum=i.default.money(e.minimum,{currency:o.default.get("currency"),precision:0}),e.reward.length>35?e.truncated_description=e.reward.substring(0,35)+"…":e.truncated_description=e.reward}),e}(e)).message_url=(0,a.default)(e.urls.web.message_batches).segment("new").query(e.params),e.isCreator=o.default.get("creator.id")===s.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var r=l(n("shXp")),i=l(n("L3hI")),a=l(n("hBlz")),o=l(n("c5nH")),s=l(n("eF8u"));function l(e){return e&&e.__esModule?e:{default:e}}},iGhc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.text,n=e.classes;return a.default.createElement("span",{className:n},t)}},iQ9M:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("shXp")),a=n("kVy0"),o=u(n("wmCY")),s=u(n("dH3X")),l=n("jO9b");function u(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),n("CCL3"),n("v4vi"),n("A/M2"),n("IhN0"),n("kUTX"),n("Y0+b"),(0,r.default)(".field.search.location-search").livequery(function(){var e=(0,r.default)(this);e.on("livesearch_selector:select",function(){(0,r.default)(this).siblings("span.input-tip").hide(),(0,r.default)(this).parent().siblings("span.input-tip").hide(),(0,r.default)(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){(0,r.default)(this).siblings("span.input-tip").show(),(0,r.default)(this).parent().siblings("span.input-tip").show(),(0,r.default)(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return i.default.map(e.locations,function(e){return[e.short_name,e.id]})}})}),(0,r.default)("input.date").livequery(function(){var e=(0,r.default)(this),t=e.val(),n=e.closest(".js-date-field").find(".js-hidden-calendar-input");n.val(t?(0,a.format)("YYYY-MM-DD",t):""),e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l");return(0,s.default)(t)?t:void 0},format_callback:function(e){return n.val(e?(0,a.format)("YYYY-MM-DD",e):""),e?(0,a.format)("l",e):""}})}),(0,r.default)("input.datetime").livequery(function(){var e=(0,r.default)(this),t=e.data("options")||{};e.datetime_picker_field(r.default.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:o.default.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l LT");return(0,s.default)(t)?t:void 0},format_callback:function(t){return e.closest(".js-datetime-field").find(".js-hidden-calendar-input").val(t?(0,a.formatWithLocale)("en","YYYY-MM-DD HH:mm:ss Z",t):""),t?(0,a.format)("l LT",t):""}},t))}),(0,r.default)(".js-calendar-picker").livequery(function(){var e,t=(0,r.default)(this),n=t.find('input[type="hidden"]'),s=t.find(".calendar"),l=s.data("options")||{};s.on("calendar_date_picker:date_selected",function(e,t){t?n.val((0,a.format)("YYYY-MM-DD HH:mm:ss Z",t)):n.val(""),n.trigger("change")}),""!==n.val()&&(e=new Date(n.val())),s.calendar_date_picker(i.default.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:o.default.t("onloads.initializers.forms.Time"),selected_date:e},l)).data("calendar_date_picker")}),(0,r.default)("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable").livequery(function(){var e=(0,r.default)(this),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){(0,r.default)(this).val(e+1)})}}),e.closest("form").submit(function(){e.find("input.position").each(function(e){(0,r.default)(this).val(e+1)})})})},iUX3:function(e,t,n){"use strict";n("RORv"),n("orei");var r=n("l/Rs");n("l/Rs");!function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("infinite_carousel");r||(r=new t(e(this),n),e(this).data("infinite_carousel",r))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,n){e.total_elements=e.$elem.find(e.options.items).length+1,n+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(r)},ienZ:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};a.default.fn.validate.defaults.on_valid.push(function(e){(0,a.default)(e).removeClass("errored")}),a.default.fn.validate.defaults.on_invalid.push(function(e){(0,a.default)(e).addClass("errored")})},"if/t":function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("jN36"),(0,i.default)(".NS-social--follow-friends",function(e){r.default.pollster(window.location.href,function(t){return 200===t.status&&(e.html(t.html),!0)},{delay:1e3})})},iis7:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".js-project-community-content",function(e){e.on("click",".js-hero-scroll",function(e){r.default.scrollTo((0,r.default)(".js-community-locations").offset().top-45,400),e.preventDefault()})})},iptH:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(e){return(e||"").toLowerCase()}e.fn.cycle=function(n){var r;return 0!==this.length||e.isReady?this.each(function(){var r,i,a,o,s=e(this),l=e.fn.cycle.log;if(!s.data("cycle.opts")){for(var u in(!1===s.data("cycle-log")||n&&!1===n.log||i&&!1===i.log)&&(l=e.noop),l("--c2 init--"),r=s.data())r.hasOwnProperty(u)&&/^cycle[A-Z]+/.test(u)&&(o=r[u],l((a=u.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t))+":",o,"("+typeof o+")"),r[a]=o);(i=e.extend({},e.fn.cycle.defaults,r,n||{})).timeoutId=0,i.paused=i.paused||!1,i.container=s,i._maxZ=i.maxZ,i.API=e.extend({_container:s},e.fn.cycle.API),i.API.log=l,i.API.trigger=function(e,t){return i.container.trigger(e,t),i.API},s.data("cycle.opts",i),s.data("cycle.API",i.API),i.API.trigger("cycle-bootstrap",[i,i.API]),i.API.addInitialSlides(),i.API.preInitSlideshow(),i.slides.length&&i.API.initSlideshow()}}):(r={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(r.s,r.c).cycle(n)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),n=t.slides;t.slideCount=0,t.slides=e(),n=n.jquery?n:t.container.find(n),t.random&&n.sort(function(){return Math.random()-.5}),t.API.add(n)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.preInit)&&n.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.postInit)&&n.postInit(t)},initSlideshow:function(){var t,n=this.opts(),r=n.container;n.API.calcFirstSlide(),"static"==n.container.css("position")&&n.container.css("position","relative"),e(n.slides[n.currSlide]).css("opacity",1).show(),n.API.stackSlides(n.slides[n.currSlide],n.slides[n.nextSlide],!n.reverse),n.pauseOnHover&&(!0!==n.pauseOnHover&&(r=e(n.pauseOnHover)),r.hover(function(){n.API.pause(!0)},function(){n.API.resume(!0)})),n.timeout&&(t=n.API.getSlideOpts(n.currSlide),n.API.queueTransition(t,t.timeout+n.delay)),n._initialized=!0,n.API.updateView(!0),n.API.trigger("cycle-initialized",[n]),n.API.postInitSlideshow()},pause:function(t){var n=this.opts(),r=n.API.getSlideOpts(),i=n.hoverPaused||n.paused;t?n.hoverPaused=!0:n.paused=!0,i||(n.container.addClass("cycle-paused"),n.API.trigger("cycle-paused",[n]).log("cycle-paused"),r.timeout&&(clearTimeout(n.timeoutId),n.timeoutId=0,n._remainingTimeout-=e.now()-n._lastQueue,(n._remainingTimeout<0||isNaN(n._remainingTimeout))&&(n._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),n=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,n||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,n){var r,i=this.opts(),a=i.slideCount;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var r,a=e(this);n?i.container.prepend(a):i.container.append(a),i.slideCount++,r=i.API.buildSlideOpts(a),i.slides=n?e(a).add(i.slides):i.slides.add(a),i.API.initSlide(r,a,--i._maxZ),a.data("cycle.opts",r),i.API.trigger("cycle-slide-added",[i,r,a])}),i.API.updateView(!0),i._preInitialized&&a<2&&i.slideCount>=1&&(i._initialized?i.timeout&&(r=i.slides.length,i.nextSlide=i.reverse?r-1:1,i.timeoutId||i.API.queueTransition(i)):i.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();((e=parseInt(t.startingSlide||0,10))>=t.slides.length||e<0)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,n){var r,i=t;return n&&i.manualFx&&(r=e.fn.cycle.transitions[i.manualFx]),r||(r=e.fn.cycle.transitions[i.fx]),r||(r=e.fn.cycle.transitions.fade,i.API.log('Transition "'+i.fx+'" not found.  Using fade.')),r},prepareTx:function(e,t){var n,r,i,a,o,s=this.opts();s.slideCount<2?s.timeoutId=0:(!e||s.busy&&!s.manualTrump||(s.API.stopTransition(),s.busy=!1,clearTimeout(s.timeoutId),s.timeoutId=0),s.busy||(0!==s.timeoutId||e)&&(r=s.slides[s.currSlide],i=s.slides[s.nextSlide],a=s.API.getSlideOpts(s.nextSlide),o=s.API.calcTx(a,e),s._tx=o,e&&void 0!==a.manualSpeed&&(a.speed=a.manualSpeed),s.nextSlide!=s.currSlide&&(e||!s.paused&&!s.hoverPaused&&s.timeout)?(s.API.trigger("cycle-before",[a,r,i,t]),o.before&&o.before(a,r,i,t),n=function(){s.busy=!1,s.container.data("cycle.opts")&&(o.after&&o.after(a,r,i,t),s.API.trigger("cycle-after",[a,r,i,t]),s.API.queueTransition(a),s.API.updateView(!0))},s.busy=!0,o.transition?o.transition(a,r,i,t,n):s.API.doTransition(a,r,i,t,n),s.API.calcNextSlide(),s.API.updateView()):s.API.queueTransition(a)))},doTransition:function(t,n,r,i,a){var o=t,s=e(n),l=e(r),u=function(){l.animate(o.animIn||{opacity:1},o.speed,o.easeIn||o.easing,a)};l.css(o.cssBefore||{}),s.animate(o.animOut||{},o.speed,o.easeOut||o.easing,function(){s.css(o.cssAfter||{}),o.sync||u()}),o.sync&&u()},queueTransition:function(t,n){var r=this.opts(),i=void 0!==n?n:t.timeout;if(0===r.nextSlide&&0==--r.loop)return r.API.log("terminating; loop=0"),r.timeout=0,i?setTimeout(function(){r.API.trigger("cycle-finished",[r])},i):r.API.trigger("cycle-finished",[r]),void(r.nextSlide=r.currSlide);i&&(r._lastQueue=e.now(),void 0===n&&(r._remainingTimeout=t.timeout),r.paused||r.hoverPaused||(r.timeoutId=setTimeout(function(){r.API.prepareTx(!1,!r.reverse)},i)))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(n){var r,i,a=this.opts(),o=n.data()||{};for(var s in o)o.hasOwnProperty(s)&&/^cycle[A-Z]+/.test(s)&&(r=o[s],i=s.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),a.API.log("["+(a.slideCount-1)+"]",i+":",r,"("+typeof r+")"),o[i]=r);(o=e.extend({},e.fn.cycle.defaults,a,o)).slideNum=a.slideCount;try{delete o.API,delete o.slideCount,delete o.currSlide,delete o.nextSlide,delete o.slides}catch(e){}return o},getSlideOpts:function(t){var n=this.opts();void 0===t&&(t=n.currSlide);var r=n.slides[t],i=e(r).data("cycle.opts");return e.extend({},n,i)},initSlide:function(t,n,r){var i=this.opts();n.css(t.slideCss||{}),r>0&&n.css("zIndex",r),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),n.addClass(i.slideClass)},updateView:function(e,t,n){var r=this.opts();if(r._initialized){var i=r.API.getSlideOpts(),a=r.slides[r.currSlide];!e&&!0!==t&&(r.API.trigger("cycle-update-view-before",[r,i,a]),r.updateView<0)||(r.slideActiveClass&&r.slides.removeClass(r.slideActiveClass).eq(r.currSlide).addClass(r.slideActiveClass),e&&r.hideNonActive&&r.slides.filter(":not(."+r.slideActiveClass+")").hide(),0===r.updateView&&setTimeout(function(){r.API.trigger("cycle-update-view",[r,i,a,e])},i.speed/(r.sync?2:1)),0!==r.updateView&&r.API.trigger("cycle-update-view",[r,i,a,e]),e&&r.API.trigger("cycle-update-view-after",[r,i,a]))}},getComponent:function(t){var n=this.opts(),r=n[t];return"string"==typeof r?/^\s*[\>|\+|~]/.test(r)?n.container.find(r):e(r):r.jquery?r:e(r)},stackSlides:function(t,n,r){var i,a=this.opts();t||(t=a.slides[a.currSlide],n=a.slides[a.nextSlide],r=!a.reverse),e(t).css("zIndex",a.maxZ);var o=a.maxZ-2,s=a.slideCount;if(r){for(i=a.currSlide+1;i<s;i++)e(a.slides[i]).css("zIndex",o--);for(i=0;i<a.currSlide;i++)e(a.slides[i]).css("zIndex",o--)}else{for(i=a.currSlide-1;i>=0;i--)e(a.slides[i]).css("zIndex",o--);for(i=s-1;i>a.currSlide;i--)e(a.slides[i]).css("zIndex",o--)}e(n).css("zIndex",a.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: 2.0.2"},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,n,r){e.API.stackSlides(n,t,r),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,n,r,i){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,r,i),t.cssBefore=e.extend(a,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,n,r,i){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,r,i),t.cssBefore=e.extend(a,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,n,r){e.API.stackSlides(t,n,r);var i=e.container.css("overflow","hidden").width();e.cssBefore={left:r?i:-i,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:r?-i:i}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(r)},jAPW:function(e,t,n){var r,i,a;!function(o){"use strict";i=[n("l/Rs")],void 0===(a="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=a)}(function(e){"use strict";var t=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};function n(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function r(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(i,a,o){"object"==typeof a&&(o=a,a=0),"function"==typeof o&&(o={onAfter:o}),"max"===i&&(i=9e9),o=e.extend({},t.defaults,o),a=a||o.duration;var s=o.queue&&o.axis.length>1;return s&&(a/=2),o.offset=r(o.offset),o.over=r(o.over),this.each(function(){if(null!==i){var l,u=n(this),c=u?this.contentWindow||window:this,d=e(c),f=i,h={};switch(typeof f){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=r(f);break}f=u?e(f):e(f,c);case"object":if(0===f.length)return;(f.is||f.style)&&(l=(f=e(f)).offset())}var p=e.isFunction(o.offset)&&o.offset(c,f)||o.offset;e.each(o.axis.split(""),function(e,n){var r="x"===n?"Left":"Top",i=r.toLowerCase(),a="scroll"+r,g=d[a](),v=t.max(c,n);if(l)h[a]=l[i]+(u?0:g-d.offset()[i]),o.margin&&(h[a]-=parseInt(f.css("margin"+r),10)||0,h[a]-=parseInt(f.css("border"+r+"Width"),10)||0),h[a]+=p[i]||0,o.over[i]&&(h[a]+=f["x"===n?"width":"height"]()*o.over[i]);else{var _=f[i];h[a]=_.slice&&"%"===_.slice(-1)?parseFloat(_)/100*v:_}o.limit&&/^\d+$/.test(h[a])&&(h[a]=h[a]<=0?0:Math.min(h[a],v)),!e&&o.axis.length>1&&(g===h[a]?h={}:s&&(m(o.onAfterFirst),h={}))}),m(o.onAfter)}function m(t){var n=e.extend({},o,{queue:!0,duration:a,complete:t&&function(){t.call(c,f,o)}});d.animate(h,n)}})},t.max=function(t,r){var i="x"===r?"Width":"Height",a="scroll"+i;if(!n(t))return t[a]-e(t)[i.toLowerCase()]();var o="client"+i,s=t.ownerDocument||t.document,l=s.documentElement,u=s.body;return Math.max(l[a],u[a])-Math.min(l[o],u[o])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var r=Math.round(t.now);n!==r&&(e(t.elem)[t.prop](r),t._last=this.get(t))}},t})},jCVd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distance=t.distanceWithLocale=void 0;var r=l(n("mXYp")),i=l(n("HKs4")),a=l(n("uyaC")),o=l(n("X66P")),s=l(n("40X/"));function l(e){return e&&e.__esModule?e:{default:e}}var u={de:i.default,en:a.default,es:o.default,fr:s.default},c=t.distanceWithLocale=function(e,t,n){return(0,r.default)(t,n,{addSuffix:!0,locale:u[e]})};t.distance=function(e,t){return c(window.I18n.locale,e,t)}},jD6c:function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)(".NS_project_profiles__project_link",function(e){e.find(".js-profile-link").on("click",function(){(0,o.track)("Spotlight Hero Link Click")})})},jEJt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3zLD"),i=o(n("VIkj")),a=o(n("5T2m"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.graphql)(i.default)(a.default)},jN36:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){function t(t,n,r){this.url=t,this.finished=n||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},r),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,n,r){return new t(e,n,r)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){var t=!1,n=this;function r(){t?n.stop():n.start()}this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){t=n.finished(e),r()},error:function(){n.options.continue_on_error&&r(),n.options.on_error()},complete:function(){n.xhr=!1,n.options.on_complete()}}))}}(r)},jO9b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseWithFormat=t.parseWithFormatAndLocale=void 0;var r,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n("xA5w"),o=(r=a)&&r.__esModule?r:{default:r};var s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["day","month","year"],r=t.split(e),i=n.reduce(function(e,t,n){return e[t]=r[n],e},{}),a=i.day;return i.month+"/"+a+"/"+i.year},l={l:{de:function(e){return s(".",e)},en:function(e){return e},es:function(e){return s("/",e)},fr:function(e){return s("/",e)},ja:function(e){return s("/",e,["year","month","day"])}},"l LT":{de:function(e){var t=e.split(" "),n=i(t,2),r=n[0],a=n[1];return s(".",r)+" "+a},en:function(e){return e},es:function(e){var t=e.split(" "),n=i(t,2),r=n[0],a=n[1];return s("/",r)+" "+a},fr:function(e){var t=e.split(" "),n=i(t,2),r=n[0],a=n[1];return s("/",r)+" "+a},ja:function(e){var t=e.split(" "),n=i(t,2),r=n[0],a=n[1];return s("/",r,["year","month","day"])+" "+a}}},u=t.parseWithFormatAndLocale=function(e,t,n){return(0,o.default)(l[t][e](n))};t.parseWithFormat=function(e,t){return u(window.I18n.locale,t,e)}},joJ6:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)(".NS_users__profile",function(){(0,r.default)("#profile_tools .js-profile-share-link").click(function(e){(0,r.default)("#profile_tools .share_hover").toggle(),e.preventDefault()}),(0,r.default)("a.twitter").click(function(e){window.open((0,r.default)(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),(0,r.default)("a.facebook").click(function(e){window.open((0,r.default)(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()})})},k7Hi:function(e,t,n){"use strict";var r=a(n("9VV1")),i=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");var o=n("l/Rs");o.fn.in_place_editor=function(){return o(this).each(function(){var e=o(this),t=e.next("form.in_place_editor"),n=t.find(".js-in-place-editor-cancel"),a=e.siblings(".trigger_editor")||e,s=t.find("input.text"),l=!1;function u(){t.addClass("inactive"),e.show()}a.on("click",function(){s.css("fontSize",e.css("fontSize")),e.hide(),t.removeClass("inactive"),s.focus()}),n.on("click",function(){s.val(e.text()),u()}),t.on("submit",function(n){n.preventDefault(),l||(t.addClass("submitting"),l=!0,o.ajax({url:t.attr("action").replace(/(\.\w+)?$/,".js"),data:t.serialize(),type:"POST",complete:function(){t.removeClass("submitting"),l=!1},success:function(){var n=s.val();e.html(n),u(),l=!1,t.siblings(".clipster").data("text",n)},error:function(e){var n=JSON.parse(e.responseText),a="<p>"+i.default.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");t.removeClass("submitting"),l=!1,n.errors?(a+=":<br/>"+o.map(n.errors,function(e,t){return t+": "+e}),a+="</p>"):a+=". "+i.default.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",(0,r.default)({error:o(a).html()})}}))})})},o("span.in_place_editor").in_place_editor()},kDLH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf"),s=n("COPM");var l=function(e){var t=e.message;return a.default.createElement("p",{className:"type-12 red-500 mb0"},t)};t.default=function(e){var t=e.body,n=e.onSubmit,r=e.imageUrl,i=e.errors,u=void 0===i?[]:i,c=e.onChange,d=e.maxLength,f=void 0===d?9001:d,h=u.length?"red-500":"soft-black";return a.default.createElement("div",{className:"border border-"+h+" p2 mb2 flex items-start self-stretch bg-white"},a.default.createElement(s.Avatar,{imageUrl:r,size:7}),a.default.createElement("form",{className:"ml2 grow-1",onSubmit:n},a.default.createElement("fieldset",{className:"m0 p0"},a.default.createElement("textarea",{name:"comment_field",maxLength:f,rows:"3",className:"relative type-12 border-none no-outline mt1",value:t,onChange:c,placeholder:(0,o.boundT)("project_page.comments.What_would_you")})),a.default.createElement("div",{className:"flex items-center mb3"},a.default.createElement("input",{type:"submit",className:"bttn bttn-medium bttn-black mr3 submit",value:(0,o.boundT)("project_page.comments.Post_Comment")}),u.length>0&&a.default.createElement("div",null,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(u))).map(function(e,t){return a.default.createElement(l,{message:e,key:t})})))))}},kUTX:function(e,t,n){"use strict";n("FPSz");n("l/Rs");!function(e){function t(t,n){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},n),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(n){return this.each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,n=e("<div></div>"),r=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?n.addClass(this.options.class_name):(n.css("position","absolute"),n.css("z-index",1e3)),"bottom"===this.options.position?(n.css("left",this.$field.offset().left),n.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(n.css("left",this.$field.offset().left+this.$field.width()+20),n.css("top",this.$field.offset().top)),n.hide(),this._get_surrounding_element().append(n),n.calendar_date_picker(r),n.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),n.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),n.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,n.bind("calendar_date_picker:date_selected",function(e,n){if(!t._in_manual_edit){var r=t.options.format_callback(n);r!==t.$field.val()&&(t.$field.val(r),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),n.find(".time input").bind("keydown",function(n){13===n.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=n,n.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return this.options.surrounding_element?e(this.options.surrounding_element):e("body")}})}(n("l/Rs"))},kqul:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_survey_questions__address",function(e){e.find(".country select").change(function(){var t=(0,r.default)(this).closest(".country"),n=t.data("original_country"),i=t.data("original_shipping_amount"),o=(0,r.default)(this).val(),s=(0,r.default)(this).find("option:selected").html(),l=(0,r.default)(this).find("option:selected").data("cost"),u=(0,r.default)("body").attr("id"),c=t.find(".shipping_changed_message"),d=(0,r.default)(".state .select"),f=(0,r.default)(".state .text"),h=(0,r.default)(".state .text_container");d.prop("disabled",!0).addClass("hidden"),f.prop("disabled",!0),h.addClass("hidden"),e.hasClass("is_preview")||(d.hasClass(o)?r.default.each(d,function(){var e=(0,r.default)(this);e.hasClass(o)&&e.prop("disabled",!1).removeClass("hidden")}):(f.prop("disabled",!1),h.removeClass("hidden")),n&&(l>i?(c.show(),c.find(".country-name").html(s),(0,a.track)("Survey Address for Backing with Restricted Shipping",{original_country:n,country:o,original_shipping_amount:i,shipping_amount:l,survey_context:u})):c.hide()))}),e.find(".country select").trigger("change")})},kwpy:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=d(n("rXeC")),a=d(n("8NzR")),o=n("vgZZ"),s=n("mEL7"),l=n("4RZc"),u=d(n("hBlz")),c=d(n("c5nH"));function d(e){return e&&e.__esModule?e:{default:e}}(0,a.default)("#projects_show",function(e){var t={live:"aspect-ratio--16x9",replay:"aspect-ratio--4x1-lg aspect-ratio--3x1-md aspect-ratio--7x3-sm aspect-ratio--5x3",countdown:"aspect-ratio--2x1-lg aspect-ratio--5x3-md aspect-ratio--5x4-sm aspect-ratio--5x6"};(0,i.default)("#verifying-pledge.modal_dialog .remote_modal_dialog",e).click(function(){(0,i.default)(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),location.hash&&setTimeout(function(){(0,i.default)(location.hash).find(".faq-question a").click()},500),(0,i.default)("body").is(".touchable")&&(e.on("modal_dialog:opened",function(){(0,i.default)("video").length&&window.Touch&&((0,i.default)("#video-section",e).css("visibility","hidden"),(0,i.default)("video")[0].pause())}),e.on("close.modal_dialog",function(){(0,i.default)("#video-section",e).css("visibility","visible")}));var n=(0,o.read_cookie)("edit_survey_response");n&&i.default.open_remote_modal_dialog(u.default.decode(n),{class_name:"backings-info__modal",remote_modal_dialog_contents_loaded:function(){(0,o.destroy_cookie)("edit_survey_response",u.default.parse(window.location.href).path)},dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")}});var a=function(){var e=c.default.get("backing"),t=e?e.urls.web.backing:null;i.default.open_remote_modal_dialog((0,u.default)(t).addQuery("ref","reward_view_pledge").addQuery("clicked_reward","true").suffix("js").toString(),{id:(0,i.default)(this).attr("data-modal-id"),class_name:"backings-info__modal",dataType:"html"})};(0,i.default)(document).on("click",".js-view_your_pledge",function(){a()}),(0,i.default)(document).on("keypress",".js-view_your_pledge",function(e){13!=e.which&&32!=e.which||a()}),e.find(".js-livestream-notice").on("click",function(e){e.preventDefault(),i.default.scrollTo((0,i.default)("#kickstarter_live_livestream"),"easeOutExp")}),window.addEventListener("message",function(n){if(-1!==["https://huzza.io","https://live.kickstarter.com",window.location.origin].indexOf(n.origin)&&"object"===r(n.data)&&"kickstarter_live_state_change"===n.data.type){var i=n.data.value;!function(e,n){var r,i=[];for(var a in t)a===n?r=t[a]:i.push(t[a]);e.removeClass(i.join(" ")),e.addClass(r)}(e.find(".js-livestream-ratio"),i),"live"===i?e.find(".js-livestream-notice").removeClass("hidden"):"replay"!==i&&"countdown"!==i||e.find(".js-livestream-notice").addClass("hidden")}},!1);var d=1;(0,i.default)(window).resize(function(){d>0&&((0,l.track)("Window Resize Start"),d-=1)}),(0,i.default)(document).on("ksr_popover:opened",function(){(0,i.default)(".ksr-popover.visible").parent(".NS_projects__project_share")&&(0,l.track)("Project Show Share Sheet")}),e.find(".js-launched").length>0&&(0,s.trackPixel)(s.PixelEvent.COMPLETE_REGISTRATION)})},l8Wg:function(e,t,n){"use strict";var r=u(n("shXp")),i=u(n("9VV1")),a=u(n("wmCY")),o=n("4RZc"),s=u(n("hBlz"));n("4C6Z");var l=u(n("c5nH"));function u(e){return e&&e.__esModule?e:{default:e}}n("l/Rs");var c=n("l/Rs");c.fn.ksr_uploader=function(e){function t(t,n,r){return c.pollster(t,function(t){return!!t.image_src&&(n.find(".success img.preview").attr("src",t.image_src).removeAttr("data-status_url"),c(".js-subs-preview").removeClass("o0p"),n.removeClass("encoding"),r.trigger("ksr_uploader:uploaded",[t]),e.after_encode&&e.after_encode(),!0)},{delay:5e3})}return e=e||{},c(this).each(function(){var n,u,d=c(this),f=new RegExp(window.location.host+"|^/"),h=!d.attr("url").match(f),p=h?r.default.map(d.data("params"),function(e,t){return{name:t,value:e}}):[{name:"new_style",value:!0}],m=d.siblings(".progress"),g=d.parent(),v=g.parent(),_=d.closest("form"),y=v.find(".success img.preview"),b=_.find("input[type=submit]"),w=b.map(function(){return c(this).val()}).get(),E=!1;function k(e){E=e,d.data("uploading",e)}function S(e){var r=e,i=_.find(".success");if("string"==typeof r)try{r=c.parseJSON(r)||{}}catch(e){r={}}k(!1),r.image_src&&i.find("img.preview").attr("src",r.image_src),r.id&&i.find("input.asset_id").val(r.id),y.attr("data-status_url",r.status_url),d.trigger("file_added",[r]),b.val(function(e){return w[e]}),v.removeClass("uploading"),v.addClass("has_file"),c(".js-subs-percentage").addClass("hide"),c(".js-subs-preview").addClass("o0p"),c(".js-subs-uploader-icon").addClass("hide"),r.status_url?n=t(r.status_url,v,d):d.trigger("ksr_uploader:uploaded",[r])}function C(e,t,n){var r=c.map(t.messages,function(e){return e}),i=_.find(".js-asset-upload").attr("class");void 0===i&&(i=_.closest(".js-asset-upload").attr("class")),c.each(r,function(t,r){(0,o.track)(e,{project_pid:l.default.data.id,type:n.type,file_size:n.size,context:i,error_description:r})})}d.siblings("label").hide(),d.fileupload({dataType:"text",dropZone:g,pasteZone:null,url:d.attr("url"),type:"POST",replaceFileInput:!1,add:function(e,t){t.files[0].size<1?t.files=[]:(n&&n.stop(),u=t.submit(),k(!0),m.removeClass("finished"),v.addClass("uploading"),d.trigger("file_queued"),window.onbeforeunload=function(){if(E)return a.default.t("library.ksr_uploader.Your_upload_has_not_completed_yet_Click_Stay")})},submit:function(e,t){h?p.push({name:"success_action_redirect",value:c.support.xhrFormDataFileUpload?"":(0,s.default)().path("/iframe_upload_catcher.html").fragment("").toString()}):p.push({name:"authenticity_token",value:c('meta[name="csrf-token"]').attr("content")}),t.formData=p},done:function(t,n){h?function(t){if("function"==typeof e.remote_upload_success)return void e.remote_upload_success.apply(d,arguments);var n=t.files[0];c.ajax({url:d.data("assetPath"),data:{file_name:encodeURIComponent(n.name),content_type:n.type,updated_at:(n.lastModifiedDate||new Date).getTime(),file_size:n.size,s3_key:r.default.findWhere(p,{name:"key"}).value},type:"POST",success:function(e){S(e)},error:function(){_.trigger("ksr_file_upload:reset"),k(!1),(0,i.default)({error:a.default.t("library.ksr_uploader.Could_not_upload_this_file")}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&C("Errored Project Asset Upload",t,n)}})}(n):S(n.result)},progress:function(e,t){var n=parseInt(t.loaded/t.total*100,10);m.find(".bar").css("width",n+"%"),m.find(".percentage").text(n+"%"),c(".js-subs-percentage").text(n+"%"),100===n&&(m.addClass("finished"),m.find(".percentage").text(a.default.t("library.ksr_uploader.Processing")),b.val(a.default.t("library.ksr_uploader.Processing_please_wait")),c(".js-subs-percentage").text("Processing..."))},fail:function(e,t){d.trigger("error"),_.trigger("ksr_file_upload:reset"),k(!1),(0,i.default)({error:a.default.t("library.ksr_uploader.There_was_an_error_with_this_file_Please_try_a_different")}),b.val(function(e){return w[e]}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&C("Failed Project Asset Upload",t,t.files[0])}}),y.data("status_url")&&(n=t(y.data("status_url"),v,d),y.removeAttr("status_url")),g.on("pollster:stop",function(){n&&n.stop()}),g.on("ksr_file_upload:cancel cancel",function(){u&&u.abort(),_.trigger("ksr_file_upload:reset"),d.trigger("error"),k(!1)}),g.on("destroy",function(){g.trigger("ksr_file_upload:cancel")}),g.on("resize",function(){g.find("object").attr("width",g.outerWidth()).attr("height",g.outerHeight())})})}},lQ6a:function(e,t,n){var r,i,a;a=function(){"use strict";var e,t,n=["webkit","Moz","ms","O"],r={};function i(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function a(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(n,i,a,o){var s=["opacity",i,~~(100*n),a,o].join("-"),l=.01+a/o*100,u=Math.max(1-(1-n)/i*(100-l),n),c=e.substring(0,e.indexOf("Animation")).toLowerCase(),d=c&&"-"+c+"-"||"";return r[s]||(t.insertRule("@"+d+"keyframes "+s+"{0%{opacity:"+u+"}"+l+"%{opacity:"+n+"}"+(l+.01)+"%{opacity:1}"+(l+i)%100+"%{opacity:"+n+"}100%{opacity:"+u+"}}",t.cssRules.length),r[s]=1),s}function s(e,t){var r,i,a=e.style;if(void 0!==a[t=t.charAt(0).toUpperCase()+t.slice(1)])return t;for(i=0;i<n.length;i++)if(void 0!==a[r=n[i]+t])return r}function l(e,t){for(var n in t)e.style[s(e,n)||n]=t[n];return e}function u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function c(e,t){return"string"==typeof e?e:e[t%e.length]}var d,f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function h(e){this.opts=u(e||{},h.defaults,f)}if(h.defaults={},u(h.prototype,{spin:function(t){this.stop();var n=this,r=n.opts,a=n.el=i(null,{className:r.className});if(l(a,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(a,t.firstChild||null),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!e){var o,s=0,u=(r.lines-1)*(1-r.direction)/2,c=r.fps,d=c/r.speed,f=(1-r.opacity)/(d*r.trail/100),h=d/r.lines;!function e(){s++;for(var t=0;t<r.lines;t++)o=Math.max(1-(s+(r.lines-t)*h)%d*f,r.opacity),n.opacity(a,t*r.direction+u,o,r);n.timeout=n.el&&setTimeout(e,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(t,n){var r,s=0,u=(n.lines-1)*(1-n.direction)/2;function d(e,t){return l(i(),{position:"absolute",width:n.scale*(n.length+n.width)+"px",height:n.scale*n.width+"px",background:e,boxShadow:t,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*s+n.rotate)+"deg) translate("+n.scale*n.radius+"px,0)",borderRadius:(n.corners*n.scale*n.width>>1)+"px"})}for(;s<n.lines;s++)r=l(i(),{position:"absolute",top:1+~(n.scale*n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:e&&o(n.opacity,n.trail,u+s*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&a(r,l(d("#000","0 0 4px #000"),{top:"2px"})),a(t,a(r,d(c(n.color,s),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){d=i("style",{type:"text/css"}),a(document.getElementsByTagName("head")[0],d),t=d.sheet||d.styleSheet;var p=l(i("group"),{behavior:"url(#default#VML)"});!s(p,"transform")&&p.adj?function(){function e(e,t){return i("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}t.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){var r=n.scale*(n.length+n.width),i=2*n.scale*r;function o(){return l(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+-r}),{width:i,height:i})}var s,u=-(n.width+n.length)*n.scale*2+"px",d=l(o(),{position:"absolute",top:u,left:u});function f(t,i,s){a(d,a(l(o(),{rotation:360/n.lines*t+"deg",left:~~i}),a(l(e("roundrect",{arcsize:n.corners}),{width:r,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:s}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}if(n.shadow)for(s=1;s<=n.lines;s++)f(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=n.lines;s++)f(s);return a(t,d)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=(i=(i=i.childNodes[t+r])&&i.firstChild)&&i.firstChild)&&(i.opacity=n)}}():e=s(p,"animation")}return h},"object"==typeof e&&e.exports?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},lRBY:function(e,t,n){"use strict";n("l/Rs");var r=n("l/Rs");r.fn.tabs=function(){return r(this).each(function(){var e=r(this);e.on("activate",function(t,n){var i=r(n),a=r("#"+i.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",a.trigger("activated"))}),e.children().on("click",function(){r(this).parent().trigger("activate",r(this))})})},r.fn.panes=function(){var e=r(this);return e.each(function(){e.children().on("activated",function(){r(this).show()}).on("deactivated",function(){r(this).hide()})})}},lSD1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("cFFW");var a,o="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),r=setTimeout(e,n);return u=t,r},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};((r=i)&&r.__esModule?r:{default:r}).default&&["","webkit","moz","o","ms"].some(function(e){var t=l(e,"request");if(t in window)return o=l(e,"cancel"),s=function(e){return window[t](e)}});var u=(new Date).getTime();(a=function(e){return s(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)},t.default=a,e.exports=t.default},lX5T:function(e,t,n){n("l/Rs"),n("l/Rs");var r=function(){var e,t,n,i,a,o,s="undefined",l="object",u="application/x-shockwave-flash",c="SWFObjectExprInst",d=window,f=document,h=navigator,p=!1,m=[],g=[],v=[],_=[],y=!1,b=!1,w=!0,E=!1,k=function(){var e=typeof f.getElementById!=s&&typeof f.getElementsByTagName!=s&&typeof f.createElement!=s,t=h.userAgent.toLowerCase(),n=h.platform.toLowerCase(),r=/win/.test(n||t),i=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===h.appName,c=[0,0,0],m=null;if(typeof h.plugins!=s&&typeof h.plugins["Shockwave Flash"]==l)(m=h.plugins["Shockwave Flash"].description)&&typeof h.mimeTypes!=s&&h.mimeTypes[u]&&h.mimeTypes[u].enabledPlugin&&(p=!0,o=!1,m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=B(m.replace(/^(.*)\..*$/,"$1")),c[1]=B(m.replace(/^.*\.(.*)\s.*$/,"$1")),c[2]=/[a-zA-Z]/.test(m)?B(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof d.ActiveXObject!=s)try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");g&&(m=g.GetVariable("$version"))&&(o=!0,c=[B((m=m.split(" ")[1].split(","))[0]),B(m[1]),B(m[2])])}catch(e){}return{w3:e,pv:c,wk:a,ie:o,win:r,mac:i}}();k.w3&&((typeof f.readyState!=s&&("complete"===f.readyState||"interactive"===f.readyState)||typeof f.readyState==s&&(f.getElementsByTagName("body")[0]||f.body))&&S(),y||(typeof f.addEventListener!=s&&f.addEventListener("DOMContentLoaded",S,!1),k.ie&&(f.attachEvent("onreadystatechange",function e(){"complete"==f.readyState&&(f.detachEvent("onreadystatechange",e),S())}),d==top&&function e(){if(!y){try{f.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}S()}}()),k.wk&&function e(){y||(/loaded|complete/.test(f.readyState)?S():setTimeout(e,0))}()));function S(){if(!y&&document.getElementsByTagName("body")[0]){try{var e,t=F("span");t.style.display="none",(e=f.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(e){return}y=!0;for(var n=m.length,r=0;r<n;r++)m[r]()}}function C(e){y?e():m[m.length]=e}function T(){var e=g.length;if(e>0)for(var t=0;t<e;t++){var n=g[t].id,r=g[t].callbackFn,i={success:!1,id:n};if(k.pv[0]>0){var a=M(n);if(a)if(!U(g[t].swfVersion)||k.wk&&k.wk<312)if(g[t].expressInstall&&R()){var o={};o.data=g[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var l={},u=a.getElementsByTagName("param"),c=u.length,d=0;d<c;d++)"movie"!=u[d].getAttribute("name").toLowerCase()&&(l[u[d].getAttribute("name")]=u[d].getAttribute("value"));x(o,l,n,r)}else P(a),r&&r(i);else G(n,!0),r&&(i.success=!0,i.ref=A(n),i.id=n,r(i))}else if(G(n,!0),r){var f=A(n);f&&typeof f.SetVariable!=s&&(i.success=!0,i.ref=f,i.id=f.id),r(i)}}}function A(e){var t=null,n=M(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==s?n:n.getElementsByTagName(l)[0]||n),t}function R(){return!b&&U("6.0.65")&&(k.win||k.mac)&&!(k.wk&&k.wk<312)}function x(r,a,o,l){var u=M(o);if(o=L(o),b=!0,n=l||null,i={success:!1,id:o},u){"OBJECT"==u.nodeName.toUpperCase()?(e=I(u),t=null):(e=u,t=o),r.id=c,(typeof r.width==s||!/%$/.test(r.width)&&B(r.width)<310)&&(r.width="310"),(typeof r.height==s||!/%$/.test(r.height)&&B(r.height)<137)&&(r.height="137");var h=k.ie?"ActiveX":"PlugIn",p="MMredirectURL="+encodeURIComponent(d.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+h+"&MMdoctitle="+encodeURIComponent(f.title.slice(0,47)+" - Flash Player Installation");if(typeof a.flashvars!=s?a.flashvars+="&"+p:a.flashvars=p,k.ie&&4!=u.readyState){var m=F("div");o+="SWFObjectNew",m.setAttribute("id",o),u.parentNode.insertBefore(m,u),u.style.display="none",D(u)}O(r,a,o)}}function P(e){if(k.ie&&4!=e.readyState){e.style.display="none";var t=F("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(I(e),t),D(e)}else e.parentNode.replaceChild(I(e),e)}function I(e){var t=F("div");if(k.win&&k.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(l)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;a<i;a++)1==r[a].nodeType&&"PARAM"==r[a].nodeName||8==r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function O(e,t,n){var r,i,a,o,c=M(n);if(n=L(n),k.wk&&k.wk<312)return r;if(c){var d,f,h,p=k.ie?F("div"):F(l);for(h in typeof e.id==s&&(e.id=n),t)t.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&j(p,h,t[h]);for(d in k.ie&&(i=e.data,a=p.innerHTML,(o=F("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+i+"'>"+a+"</object>",p=o.firstChild),e)e.hasOwnProperty(d)&&("styleclass"===(f=d.toLowerCase())?p.setAttribute("class",e[d]):"classid"!==f&&"data"!==f&&p.setAttribute(d,e[d]));k.ie?v[v.length]=e.id:(p.setAttribute("type",u),p.setAttribute("data",e.data)),c.parentNode.replaceChild(p,c),r=p}return r}function j(e,t,n){var r=F("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function D(e){var t=M(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(k.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function N(e){return e&&e.nodeType&&1===e.nodeType}function L(e){return N(e)?e.id:e}function M(e){if(N(e))return e;var t=null;try{t=f.getElementById(e)}catch(e){}return t}function F(e){return f.createElement(e)}function B(e){return parseInt(e,10)}function U(e){e+="";var t=k.pv,n=e.split(".");return n[0]=B(n[0]),n[1]=B(n[1])||0,n[2]=B(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function H(e,t,n,r){var i=f.getElementsByTagName("head")[0];if(i){var l="string"==typeof n?n:"screen";if(r&&(a=null,o=null),!a||o!=l){var u=F("style");u.setAttribute("type","text/css"),u.setAttribute("media",l),a=i.appendChild(u),k.ie&&typeof f.styleSheets!=s&&f.styleSheets.length>0&&(a=f.styleSheets[f.styleSheets.length-1]),o=l}a&&(typeof a.addRule!=s?a.addRule(e,t):typeof f.createTextNode!=s&&a.appendChild(f.createTextNode(e+" {"+t+"}")))}}function G(e,t){if(w){var n=t?"visible":"hidden",r=M(e);y&&r?r.style.visibility=n:"string"==typeof e&&H("#"+e,"visibility:"+n)}}function z(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=s?encodeURIComponent(e):e}m[0]=function(){p?function(){var e=f.getElementsByTagName("body")[0],t=F(l);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",u);var n=e.appendChild(t);if(n){var r=0;!function i(){if(typeof n.GetVariable!=s)try{var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),k.pv=[B(a[0]),B(a[1]),B(a[2])])}catch(e){k.pv=[8,0,0]}else if(r<10)return r++,void setTimeout(i,10);e.removeChild(t),n=null,T()}()}else T()}():T()};k.ie&&window.attachEvent("onunload",function(){for(var e=_.length,t=0;t<e;t++)_[t][0].detachEvent(_[t][1],_[t][2]);for(var n=v.length,i=0;i<n;i++)D(v[i]);for(var a in k)k[a]=null;for(var o in k=null,r)r[o]=null;r=null});return{registerObject:function(e,t,n,r){if(k.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,g[g.length]=i,G(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(k.w3)return A(e)},embedSWF:function(e,t,n,r,i,a,o,u,c,d){var f=L(t),h={success:!1,id:f};k.w3&&!(k.wk&&k.wk<312)&&e&&t&&n&&r&&i?(G(f,!1),C(function(){n+="",r+="";var p={};if(c&&typeof c===l)for(var m in c)p[m]=c[m];p.data=e,p.width=n,p.height=r;var g={};if(u&&typeof u===l)for(var v in u)g[v]=u[v];if(o&&typeof o===l)for(var _ in o)if(o.hasOwnProperty(_)){var y=E?encodeURIComponent(_):_,b=E?encodeURIComponent(o[_]):o[_];typeof g.flashvars!=s?g.flashvars+="&"+y+"="+b:g.flashvars=y+"="+b}if(U(i)){var w=O(p,g,t);p.id==f&&G(f,!0),h.success=!0,h.ref=w,h.id=w.id}else{if(a&&R())return p.data=a,void x(p,g,t,d);G(f,!0)}d&&d(h)})):d&&d(h)},switchOffAutoHideShow:function(){w=!1},enableUriEncoding:function(e){E=typeof e===s||e},ua:k,getFlashPlayerVersion:function(){return{major:k.pv[0],minor:k.pv[1],release:k.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(e,t,n){return k.w3?O(e,t,n):void 0},showExpressInstall:function(e,t,n,r){k.w3&&R()&&x(e,t,n,r)},removeSWF:function(e){k.w3&&D(e)},createCSS:function(e,t,n,r){k.w3&&H(e,t,n,r)},addDomLoadEvent:C,addLoadEvent:function(e){if(typeof d.addEventListener!=s)d.addEventListener("load",e,!1);else if(typeof f.addEventListener!=s)f.addEventListener("load",e,!1);else if(typeof d.attachEvent!=s)!function(e,t,n){e.attachEvent(t,n),_[_.length]=[e,t,n]}(d,"onload",e);else if("function"==typeof d.onload){var t=d.onload;d.onload=function(){t(),e()}}else d.onload=e},getQueryParamValue:function(e){var t=f.location.search||f.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return z(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return z(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var r=M(c);r&&e&&(r.parentNode.replaceChild(e,r),t&&(G(t,!0),k.ie&&(e.style.display="block")),n&&n(i)),b=!1}},version:"2.3"}}()},lk0j:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=n("4RZc"),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_projects_view_fees",function(){(0,r.default)(".js-view-fees").on("click",function(){(0,a.track)("Viewed Fees Breakdown",{project_pid:o.default.data.id})})})},lr9w:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("GiK3"),a=(r=i)&&r.__esModule?r:{default:r},o=n("Z5jf");t.default=function(){return a.default.createElement("p",{className:"text-center bg-grey-200 p2 type-12 border border-red-500 rounded red-500 bold"},(0,o.boundT)("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now"))}},m3X0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureErrorBoundary=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("GiK3"),s=(r=o)&&r.__esModule?r:{default:r},l=n("DDkI"),u=n("RH2O");var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(){return{hasError:!0}}),this.props.onComponentError(e,t,this.props.tags)}},{key:"render",value:function(){return this.state.hasError?this.props.fallbackRender?this.props.fallbackRender():s.default.createElement("div",null):this.props.children}}]),t}();t.configureErrorBoundary=function(e){return function(t){var n=i({},e,t);return s.default.createElement(c,n)}};t.default=(0,u.connect)(null,function(e){return{onComponentError:function(t,n,r){return e((0,l.componentError)(t,n,r))}}})(c)},mCzb:function(e,t,n){"use strict";var r=c(n("shXp")),i=c(n("8NzR")),a=c(n("l/Rs")),o=c(n("+bVi")),s=c(n("c5nH")),l=c(n("eF8u")),u=n("4RZc");function c(e){return e&&e.__esModule?e:{default:e}}n("wGdM"),(0,i.default)(".NS_projects__content",function(){var e,t;void 0!==l.default&&(e=l.default.get("id")===s.default.get("creator.id"),t=s.default.get("is_backing"));var n,i,c=t||e,d=0,f=!o.default["not-mobile"],h=(0,a.default)(".js-project-nav").height(),p=20;function m(){return r.default.filter(n,function(e){return!0===e.state.is_selected})}function g(){var e=m();if(e.length){var t=e[0];t.toggle_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.el.$truncate_link.addClass("hide"),t.reset_pledge_form(),t.reset_pledge_error(),t.reset_country_error()}}function v(){i=(0,a.default)(".js-reward-available"),window.rewards=i.map(function(e,t){var n=(0,a.default)(t),i=function(e){return r.default.filter(s.default.get("rewards"),function(t){return t.id===e})}(n.data("rewardId"))[0];return i.closed_height=n.height(),i.index=n.index(),new window.RewardController(n,i)}).get(),i.on("change","select",function(e){var t=(0,a.default)(e.delegateTarget).data("reward");t.shipping_rules.length&&(t.update_pledge_total(),t.reset_pledge_error()),t.validate()}),i.on("click",function(e){!function(e,t){if(d=0,"live"!==s.default.get("state")&&t.preventDefault(),!c&&!e.state.is_selected){var n=m(),r=0;n.length>0&&n[0].index<e.index&&(r=n[0].el.$rw.height()-n[0].closed_height);var i=e.el.$rw.offset().top-r-p;(0,a.default)(document).scrollTo(i,100),g(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),(0,u.track)("Checkout Reward Click",{checkout_reward_id:e.id,checkout_amount:e.reward_data.minimum})}}((0,a.default)(this).data("reward"),e)}),i.on("submit","form",function(e){var t=(0,a.default)(e.delegateTarget).data("reward"),n=t.validate();return t.state.submit_halted=!n,t.state.submit_halted&&(0,a.default)(e.target).removeClass("submitting-non-ajax"),n&&(0,u.track)("Checkout Reward Continue Click"),n}),i.on("blur input",'input[name="backing[amount]"]',function(e){(0,a.default)(e.delegateTarget).data("reward").validate()}),i.on("click",".js-desc-toggle",function(e){var t=(0,a.default)(e.delegateTarget).data("reward");e.preventDefault(),t.toggle_description_truncation()})}f||(p+=h),(0,a.default)(document).on("click",function(){3===(d+=1)&&(g(),d=0)}),(0,a.default)(document).on("projectnav:rewards projectnav:description",function(){v()}),v()})},mL1Z:function(e,t,n){"use strict";var r=n("APD3"),i=/^ms-/;e.exports=function(e){return r(e).replace(i,"-ms-")}},mSTb:function(e,t,n){"use strict";(function(e){function n(t){return(void 0!==e?"production":"development")===t}t.b=function(){return!0===n("production")},t.a=function(){return!0===n("development")},t.c=function(){return!0===n("test")}}).call(t,n("W2nU"))},mXYp:function(e,t,n){var r=n("YRFD"),i=n("xA5w"),a=n("25hp"),o=n("GI7G"),s=n("uyaC"),l=1440,u=2520,c=43200,d=86400;e.exports=function(e,t,n){var f=n||{},h=r(e,t),p=f.locale,m=s.distanceInWords.localize;p&&p.distanceInWords&&p.distanceInWords.localize&&(m=p.distanceInWords.localize);var g,v,_={addSuffix:Boolean(f.addSuffix),comparison:h};h>0?(g=i(e),v=i(t)):(g=i(t),v=i(e));var y,b=a(v,g),w=v.getTimezoneOffset()-g.getTimezoneOffset(),E=Math.round(b/60)-w;if(E<2)return f.includeSeconds?b<5?m("lessThanXSeconds",5,_):b<10?m("lessThanXSeconds",10,_):b<20?m("lessThanXSeconds",20,_):b<40?m("halfAMinute",null,_):m(b<60?"lessThanXMinutes":"xMinutes",1,_):0===E?m("lessThanXMinutes",1,_):m("xMinutes",E,_);if(E<45)return m("xMinutes",E,_);if(E<90)return m("aboutXHours",1,_);if(E<l)return m("aboutXHours",Math.round(E/60),_);if(E<u)return m("xDays",1,_);if(E<c)return m("xDays",Math.round(E/l),_);if(E<d)return m("aboutXMonths",y=Math.round(E/c),_);if((y=o(v,g))<12)return m("xMonths",Math.round(E/c),_);var k=y%12,S=Math.floor(y/12);return k<3?m("aboutXYears",S,_):k<9?m("overXYears",S,_):m("almostXYears",S+1,_)}},mYWD:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".js-project-description-content, #description",function(){var e=5,t=(0,r.default)(".js-open-supporting-material");function n(e){(0,r.default)(".js-carousel-thumbnail").removeClass("cycle-slide-active"),(0,r.default)(".js-carousel-thumbnail:eq("+e+")").addClass("cycle-slide-active")}function i(t,n){var r=Math.floor(n/e)*e;t.trigger("goto",r)}function o(){return(0,r.default)(".cycle-slide-active .js-slide-media .video-player")}function s(){var e=o(),t=(0,r.default)(".cycle-slide-active .js-slide-media");e.height(t.height()).width(t.width())}function l(e){var t=(0,r.default)(".js-prototype-gallery-slide:eq("+e+")").data("slide-id");(0,a.track)("Viewed Prototype Gallery Slide",{slide_id:t})}t.click(function(){(0,r.default)("html").css("overflow","hidden")}),-1!==window.location.hash.indexOf("prototype-slide-")&&t.click(),(0,r.default)("#NS_project_supporting_material_showcase__show").livequery(function(){(0,r.default)(document).trigger("ksr_video:pause_all_videos");var t=(0,r.default)(this).closest(".modal_dialog");t.on("before_close.modal_dialog",function(){(0,r.default)(".js-prototype-slideshow").cycle("destroy"),window.location.hash="",(0,r.default)(window).off("resize.projectSupportingMaterials"),(0,r.default)("html").css("overflow","visible")}),(0,r.default)(window).on("hashchange",function(){""===window.location.hash&&t.trigger("close.modal_dialog")});var u=(0,r.default)(".js-prototype-carousel");(0,r.default)(".js-carousel-thumbnail").length>e?(u.serialScroll({items:".js-carousel-thumbnail",lock:!1,step:e,cycle:!1,duration:500}),(0,r.default)(".prototype-carousel__next").click(function(){u.trigger("next")}),(0,r.default)(".prototype-carousel__previous").click(function(){u.trigger("prev")})):(0,r.default)(".js-prototype-carousel-pager").addClass("hide"),u.on("click",".js-carousel-thumbnail",function(){window.location.hash=(0,r.default)(this).data("slide-hash"),(0,a.track)("Selected Prototype Gallery Thumbnail")}),(0,r.default)(".js-prototype-gallery-pager").click(function(){(0,a.track)("Advanced Prototype Gallery Carousel")});var c=(0,r.default)(".js-prototype-slideshow");c.on("cycle-before",function(){o().trigger("ksr_video:pause")}),c.on("cycle-after",function(e,t){n(t.nextSlide),i(u,t.nextSlide),l(t.nextSlide),s()}),c.on("cycle-post-initialize",function(e,t){n(t.currSlide),i(u,t.currSlide),l(t.currSlide),s(),(0,r.default)(window).on("resize.projectSupportingMaterials",s)}),c.cycle()})})},mZAT:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(r)},mjY1:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.History=e.History||{},r=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){r(e)}},void 0!==n.init&&n.init()}}(window)},mnU0:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("8NzR")),a=l(n("9VV1")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,i.default)("#credit_cards_new",function(e){var t,n=e.find(".js-new-card-form"),i=e.find(".js-credit-card-choice"),l=e.find(".js-edit-ccs"),u=o.default.t("onloads.views.credit_cards.new.This_card_will_not_be_shown_again"),c=o.default.t("onloads.views.credit_cards.new.Edit_credit_cards"),d=o.default.t("onloads.views.credit_cards.new.Cancel"),f=o.default.t("onloads.views.credit_cards.new.Looks_like_something_went_wrong");i.on("click",".js-remove-cc-btn",function(e){t=(0,r.default)(e.delegateTarget)}),(0,r.default)(document).on("click",".js-yes-remove-btn",function(e){e.preventDefault();var o=(0,r.default)(this).attr("href");r.default.getJSON(o,function(){((0,r.default)(".modal_dialog").trigger("close.modal_dialog"),t.remove(),(0,a.default)({success:u}),(0,r.default)(".js-credit-card-choice").length)?i.find(".js-credit-card-info").first().click():((0,r.default)(".js-stored-card-form").html(n),n.show())}).fail(function(){(0,r.default)(".modal_dialog").trigger("close.modal_dialog"),(0,a.default)({error:f})})}),l.on("click",function(e){e.preventDefault(),i.find(".js-remove-cc-btn").toggle(),l.toggleClass("js-editing-inactive"),l.hasClass("js-editing-inactive")?((0,r.default)(this).text(c),(0,s.track)("Collapsed Edit Payment Sources Form")):((0,r.default)(this).text(d),(0,s.track)("Expanded Edit Payment Sources Form"))})})},mvPF:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";function t(t,n){var r,i,a,o=n.autoHeight;if("container"==o)i=e(n.slides[n.currSlide]).outerHeight(),n.container.height(i);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===o||"number"==e.type(o)&&o>=0){if((a="calc"===o?function(t,n){var r=0,i=-1;return n.slides.each(function(t){var n=e(this).height();n>i&&(i=n,r=t)}),r}(0,n):o>=n.slides.length?0:o)==n._sentinelIndex)return;n._sentinelIndex=a,n._sentinel&&n._sentinel.remove(),(r=e(n.slides[a].cloneNode(!0))).removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),r.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),r.find("*").css("visibility","hidden"),n._sentinel=r}}function n(t,n,r,i,a){var o=e(i).outerHeight();n.container.animate({height:o},n.autoHeightSpeed,n.autoHeightEasing)}function r(i,a){a._autoHeightOnResize&&(e(window).off("resize orientationchange",a._autoHeightOnResize),a._autoHeightOnResize=null),a.container.off("cycle-slide-added cycle-slide-removed",t),a.container.off("cycle-destroyed",r),a.container.off("cycle-before",n),a._sentinel&&(a._sentinel.remove(),a._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(i,a){var o,s=a.autoHeight,l=e.type(s),u=null;function c(){t(i,a)}"string"!==l&&"number"!==l||(a.container.on("cycle-slide-added cycle-slide-removed",t),a.container.on("cycle-destroyed",r),"container"==s?a.container.on("cycle-before",n):"string"===l&&/\d+\:\d+/.test(s)&&(o=(o=s.match(/(\d+)\:(\d+)/))[1]/o[2],a._autoHeightRatio=o),"number"!==l&&(a._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(c,50)},e(window).on("resize orientationchange",a._autoHeightOnResize)),setTimeout(c,30))})}(r)},mxM5:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_site__about_subnav",function(){(0,r.default)(".js-about-link").click(function(){(0,a.track)("About KSR Subnav About Click")}),(0,r.default)(".js-charter-link").click(function(){(0,a.track)("About KSR Subnav Charter Click")}),(0,r.default)(".js-press-link").click(function(){(0,a.track)("About KSR Subnav Press Click")}),(0,r.default)(".js-jobs-link").click(function(){(0,a.track)("About KSR Subnav Jobs Click")}),(0,r.default)(".js-team-link").click(function(){(0,a.track)("About KSR Subnav Team Click")}),(0,r.default)(".js-stats-link").click(function(){(0,a.track)("About KSR Subnav Stats Click")}),(0,r.default)(".js-happening-link").click(function(){(0,a.track)("About KSR Subnav Happening Click")})})},"n+Gj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitFlaggingMutation=t.CREATE_FLAGGING_MUTATION=void 0;var r=n("OgtI"),i=t.CREATE_FLAGGING_MUTATION="\n  mutation($contentId: ID!, $details: String, $kind: FlaggingKind!) {\n    createFlagging(\n      input: {\n        contentId: $contentId,\n        details: $details,\n        kind: $kind\n      }\n    ) {\n      flagging {\n        kind\n      }\n    }\n  }\n";t.submitFlaggingMutation=function(e,t){var n=(0,r.encodeId)("Project",window.current_project.data.id);return(0,r.fetchGraph)(i,{details:e,kind:t,contentId:n})}},nC2W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DirectiveLocation=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"})},nEat:function(e,t,n){"use strict";var r=s(n("shXp")),i=s(n("l/Rs")),a=s(n("nW38")),o=s(n("L3hI"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(function(){(0,i.default)(document).on("click",".NS_post_likes__namepile a#full_namepile",function(e){e.preventDefault();var t=(0,i.default)(this);i.default.ajax({url:t.attr("href"),dataType:"json",type:"GET",success:function(e){var n=r.default.map(e.users,function(e){return(0,a.default)('<a href="{{url}}">{{name}}</a>',e)});n=o.default.to_sentence(n),t.parent().html(n+" like this update.")}})})})},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},nHv6:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){var e=".ksr_toggle";(0,a.default)(e).length&&((0,a.default)(e+" a").on("click",function(t){var n=(0,a.default)(this);n.closest(e).find("a").removeClass("selected"),n.addClass("selected"),n.closest(e).find(".bg").css({left:n.position().left}),t.preventDefault()}),(0,a.default)(e+" a.selected").click(),(0,a.default)(e+" .bg").addClass("show"))})},"nV3+":function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=s(n("9VV1")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#two_factor_authentication_confirm",function(e){e.find(".js-resend_code").on("click",function(e){(0,o.track)("Two-factor Authentication Resend Code"),r.default.ajax({dataType:"json",success:function(e){(0,a.default)(e)}}),e.preventDefault()}),e.find("#remember").on("change",function(){(0,o.track)("Two-factor Authentication Remember Changed")})})},nW38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateSettings=void 0,t.default=function(e,t){return a.default.template(e,o)(t)};var r,i=n("shXp"),a=(r=i)&&r.__esModule?r:{default:r};var o=t.templateSettings={interpolate:/\{\{(.+?)\}\}/g}},nh5m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backerRewardsInit=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=p(n("GiK3")),a=p(n("O27J")),o=n("LbfT"),s=n("EIRz"),l=n("FlGX"),u=n("tRFe"),c=p(n("RKyf")),d=n("49v0"),f=n("f+bT"),h=n("c3QO");function p(e){return e&&e.__esModule?e:{default:e}}var m=void 0,g=void 0,v=function(e){var t=e.state,n=e.dispatch,r=e.dropdowns;return i.default.createElement(f.RewardsList,{state:t,dispatch:n,dropdowns:r})},_=function(){var e=document.getElementById("react-backer-rewards"),t=g=g||(0,l.loadAndParseRewardData)(e.dataset),n=t.hydratedState,f=t.shippingReducers,p=t.shippingDropdowns,_=(0,s.combineReducers)({applePay:d.reducer,reward:u.reducer,shippingSelects:(0,s.combineReducers)(r({},f)),tracking:c.default});m=m||(0,o.createEnhancedStore)(_,n),a.default.render(i.default.createElement(v,{state:m.getState(),dispatch:m.dispatch,dropdowns:p}),e,function(e,t){if(void 0===e.reward.pledgeData.applePayCapable&&"undefined"!=typeof Stripe){var n=void 0!==window.STRIPE_PUBLISHABLE_KEY,r=(0,d.checkApplePay)(window,n);(0,d.initApplePay)(r,function(e){return t((0,h.updateApplePayCapable)(e))})}}.bind(null,m.getState(),m.dispatch))};(t.backerRewardsInit=function(){document.getElementById("react-backer-rewards")&&(_(),m.subscribe(_))})()},nzM3:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("shXp")),a=s(n("9VV1")),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(document).on("click",".js-watch a",function(e){var t=(0,r.default)(this);e.preventDefault(),o.default.set("is_starred",!0),r.default.ajax({url:t.attr("href"),dataType:"json",type:"POST",success:function(e){e.modal&&(r.default.create_login_modal(e.data,"star_project"),o.default.set("is_starred",!1)),e.flash&&(0,a.default)(i.default.map(e.flash,function(e){return e[e.length-1]}))}})})})},oAbu:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.options=n,this.$target=this.options.target||t,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.offset=this.$target.width():this.offset=this.$target.height(),this.index=0,this.playing=!0,this.options.index_control?this.$index_control_children=this.options.index_control.children():this.$index_control_children=e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),n.play_delay&&this.playing_timer()}e.fn.spriteshow=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("spriteshow");r||(r=new t(e(this),n),e(this).data("spriteshow",r))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(n){n.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;e<0&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(r)},oLWu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardTypeFromNumber=t.cardFromType=t.cardFromNumber=t.truncateString=t.floatsOnly=t.digitsOnly=t.isDigitsSpacesOrDashes=t.isFloatsOnly=t.isDigitsOnly=t.cleanInputValue=void 0;var r,i=n("GMuJ"),a=n("I2cB"),o=(t.cleanInputValue=function(e){return"string"==typeof e?e.trim():e},t.isDigitsOnly=function(e){return"number"==typeof e||/^\d+$/.test(e)}),s=t.isFloatsOnly=function(e){return"number"==typeof e||/^(\d|\.)+$/.test(e)},l=(t.isDigitsSpacesOrDashes=function(e){return/^[\d\s-]+$/g.test(e)},t.digitsOnly=function(e){if(!o(e)){return a.maybe.fromNullable(e.toString().match(/(\d)+/g)).map(function(e){return e.join("")}).getOrElse("")}return e},t.floatsOnly=function(e){if(!s(e)){return a.maybe.fromNullable(e.toString().match(/(\d|\.)+/g)).map(function(e){return e.join("")}).getOrElse("")}return e},t.truncateString=function(e,t){return"string"!=typeof e?e:e>t?e.slice(0,t):e},t.cardFromNumber=(r=i.cards,function(e){var t=function(t){return e.slice(0,t.length)===t},n=r.filter(function(e){return e.patterns.some(t)});return n.length?n[0]:i.DEFAULT}));t.cardFromType=function(e){return function(t){var n=e.filter(function(e){return t===e.type});return n.length?n[0]:i.DEFAULT}}(i.cards),t.cardTypeFromNumber=function(e){var t=l(e);return t&&t.type}},oTWu:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},n),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function n(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},n),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("stickybar");r?e(this).trigger("shifted"):(r=new t(e(this),n),e(this).data("stickybar",r))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var r=e(this).data("simple_stickybar");r?e(this).trigger("shifted"):(r=new n(e(this),t),e(this).data("simple_stickybar",r))})},e.extend(n.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){e(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},lockToBottom:function(e){this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",e-this.$elem.outerHeight()-this.$elem.offsetParent().offset().top)},reposition:function(t){var n=e(window).scrollTop(),r=n+e(window).height(),i=this.$elem.offset().top,a=i+this.$elem.height(),o=this.options.parent,s=o.offset().top+o.outerHeight(),l=t&&"scroll"===t.type,u=!(n>this.last_scroll_top),c=u!==this.last_up;e("body").width()<640||this.attach_to_top&&n<this.original_top||this.attach_to_bottom&&r>this.original_bottom?(this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto")):this.options.lock_to_bottom&&!this.window_larger_then_elem&&r>s?this.lockToBottom(s):this.options.lock_to_bottom&&this.window_larger_then_elem&&n+this.$elem.height()>s?this.lockToBottom(s):c&&l?this.window_larger_then_elem||(this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",i),this.$elem.css("bottom","auto")):this.fixed||(this.attach_to_top?this.window_larger_then_elem||(!l||u)&&n<i?(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",0)):l&&u||!(r>a)||(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-e(window).height()))):(this.window_larger_then_elem||(!l||!u)&&r>a)&&(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("bottom",0))),this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",[this.fixed]),this.last_scroll_top=n,this.last_up=u}})}(r)},"of/u":function(e,t,n){"use strict";var r=o(n("8NzR")),i=o(n("l/Rs")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".pledges__checkout_faqs",function(e){e.on("click",".faq-question a",function(e){var t=(0,i.default)(this).closest(".faq");t.toggleClass("expanded"),(0,a.track)("Toggled Pledge Checkout FAQ",{pledge_faq_question:t.find(".question").text()}),e.preventDefault()}),(0,i.default)("body#pledges_edit").length&&setTimeout(function(){(0,i.default)(".faqs li#change_my_pledge_amount").addClass("expanded"),(0,i.default)(".faqs li#change_my_reward_selection").addClass("expanded"),(0,i.default)(".faqs li#cancel_my_pledge").length&&(0,i.default)(".faqs li#cancel_my_pledge").addClass("expanded")},800)})},ofuh:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("shXp")),a=u(n("8NzR")),o=u(n("L3hI")),s=n("16WZ"),l=u(n("wmCY"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(".NS_layouts__notifications",function(e){function t(t){var n=(0,r.default)(".js-banner-text",e);if(0!==n.length){var a=i.default.pairs(i.default.countBy((0,r.default)(".js-alert-box",e).map(function(){return(0,r.default)(this).data("category")}).get(),function(e){return e})),s=i.default.reduce(a,function(e,t){return e+t[1]},0),u=(0,r.default)(".js-cta",e),c=(0,r.default)(".js-banner-dismiss",e),d=(0,r.default)(".js-banner-toggle-button",e);if(1===s&&t){n.html((0,r.default)(".js-alert-body",e).html()),n.has("a")&&(0,r.default)(".js-banner-text a").addClass("white text-underline");var f=(0,r.default)(".js-alert-cta")[0];f?(u.html(f),u.show()):(u.html(""),u.hide());var h=(0,r.default)(".js-alert-dismiss",e);h.length?(c[0].setAttribute("href",h.attr("href")),c.show()):c.hide(),d.hide()}else{var p=i.default.map(a,function(e){return e[0]}).sort().map(function(e){return"<span class='bold'>"+l.default.t(e)+"</span>"}),m="<span class='bold'>"+l.default.t("banners.title.alerts",{count:s})+"</span>",g=o.default.to_sentence(p);n.html(l.default.t("banners.title.text",{alerts:m,categories:g})),(0,r.default)(".js-alert-title--urgent",e).text(l.default.t("banners.subtitles.urgent")),(0,r.default)(".js-alert-title--nonurgent",e).text(2===(0,r.default)(".js-alert-section",e).length?l.default.t("banners.subtitles.nonurgent.more"):l.default.t("banners.subtitles.nonurgent.less")),u.hide(),c.hide(),d.show()}(0,r.default)(".js-banner-buttons-container",e).show()}}t(!0),(0,r.default)(".js-alert-body").has("a")&&(0,r.default)(".js-alert-body a").addClass("text-underline"),e.on("click",".js-alert-dismiss, .js-banner-dismiss",function(){function e(e){e.slideUp(200,function(){(0,r.default)(this).remove(),t(!1),(0,s.rebindScroll)()})}var n=(0,r.default)(this),i=n.closest(".js-banner-wrap"),a=n.closest(".js-alert-wrap"),o=".js-alert-box";return 1===i.find(o).length?e(i):1===a.find(o).length?e(a):e(n.closest(o)),r.default.post(n.attr("href"),{_method:"delete"}),!1}),e.on("click",".js-banner-toggle, .js-banner-toggle-button",function(){(0,r.default)(".js-banner-wrap",e).toggleClass("bg-red-400 bg-grey-200",500),(0,r.default)(".js-banner-text",e).toggleClass("o-none",500).toggleClass("click-through",500),(0,r.default)(".alert-container",e).toggleClass("alert-container--open",500),(0,r.default)(".js-banner-toggle-icon",e).toggleClass("rotate-180",500),setTimeout(function(){(0,s.rebindScroll)()},501)})})},oiaa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("GiK3")),i=o(n("XKW3")),a=n("x0LT");function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.comments;return r.default.createElement("ul",null,(0,a.sortReplies)(t).map(function(e){return r.default.createElement("li",{key:e.id,className:"mb2"},r.default.createElement(i.default,e))}))}},olXR:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("c5nH"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(document).on("click",".js-unwatch a",function(e){var t=(0,r.default)(this);e.preventDefault(),i.default.set("is_starred",!1),r.default.ajax({url:t.attr("href"),dataType:"json",type:"DELETE"})})})},oo6k:function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)("body#survey_responses_edit_address",function(e){e.find(".back").click(function(e){e.preventDefault(),window.history.go(-1)}),(0,o.track)("Edit Address Page")})},orEx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getContextFromPathName=function(e){return/^\/projects\/.+pledge\/new$/.test(e)?"Reward Selection":/^\/checkouts\/.+payments\/new$/.test(e)?"Payments Page":/^\/projects\/[^\/pledge|\/payments]/.test(e)?"Project Page":null},t.parseResponseForMessage=function(e,t){try{var n=e.responseJSON.data.errors,r=[];for(var i in n)r.push(n[i][0]);return r[0]}catch(e){return t}}},orNa:function(e,t,n){var r=n("xA5w");e.exports=function(e,t){var n=r(e),i=r(t);return 12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())}},orei:function(e,t,n){(function(e){var t,n,r;n=".serialScroll",(r=(t=e).serialScroll=function(e){return t(window).serialScroll(e)}).defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},t.fn.serialScroll=function(e){return this.each(function(){var i,a=t.extend({},r.defaults,e),o=a.event,s=a.step,l=a.lazy,u=a.target?this:document,c=t(a.target||this,u),d=c[0],f=a.items,h=a.start,p=a.interval,m=a.navigation;function g(e){e.data+=h,v(e,this)}function v(e,n){t.isNumeric(n)||(n=e.data);var r,o=e.type,l=a.exclude?b().slice(0,-a.exclude):b(),u=l.length-1,d=l[n],f=a.duration;if(o&&e.preventDefault(),p&&(y(),i=setTimeout(_,a.interval)),!d){if(h!==(r=n<0?0:u))n=r;else{if(!a.cycle)return;n=u-r}d=l[n]}!d||a.lock&&c.is(":animated")||o&&a.onBefore&&!1===a.onBefore(e,d,c,b(),n)||(a.stop&&c.stop(!0),a.constant&&(f=Math.abs(f/s*(h-n))),c.scrollTo(d,f,a),w("notify",n))}function _(){w("next")}function y(){clearTimeout(i)}function b(){return t(f,d)}function w(e){c.trigger(e+n,[].slice.call(arguments,1))}function E(e){if(t.isNumeric(e))return e;for(var n,r=b();-1===(n=r.index(e))&&e!==d;)e=e.parentNode;return n}delete a.step,delete a.start,d&&(l||(f=b()),(a.force||p)&&v({},h),t(a.prev||[],u).bind(o,-s,g),t(a.next||[],u).bind(o,s,g),d._bound_||c.bind("prev"+n,-s,g).bind("next"+n,s,g).bind("goto"+n,v),p&&c.bind("start"+n,function(e){p||(y(),p=!0,_())}).bind("stop"+n,function(){y(),p=!1}),c.bind("notify"+n,function(e,t){var n=E(t);n>-1&&(h=n)}),d._bound_=!0,a.jump&&(l?c:b()).bind(o,function(e){v(e,E(e.target))}),m&&(m=t(m,u).bind(o,function(e){e.data=Math.round(b().length/m.length)*m.index(this),v(e,this)})))})}}).call(t,n("l/Rs"))},p44K:function(e,t,n){"use strict";var r,i=n("shXp"),a=(r=i)&&r.__esModule?r:{default:r};var o=n("l/Rs"),s=n("l/Rs");s.fn.validate=function(){var e=!0;return!this.length||(this.is(":input")?(this.each(function(){var t,n=s(this),r=!1,i=n.data("validations");i&&i.length&&(a.default.each(i,function(i){var a=i[0],o=i[1]||{};if("function"!=typeof o.when||o.when.call(n))return a.call(n,n.val())?void 0:(e=!1,r=!0,"string"==typeof o.error&&(t=o.error),!1)}),r?s.each(s.fn.validate.defaults.on_invalid,function(e,r){r(n,t)}):s.each(s.fn.validate.defaults.on_valid,function(e,t){t(n)}))}),e):this.find(":input").validate())},s.fn.validate.defaults={on_valid:[function(e){s(e).trigger("validate:valid")}],on_invalid:[function(e,t){s(e).trigger("validate:invalid",[t])}]},function(e){function t(t,n){var r=e(this);r.data("validations")||r.data("validations",[]),r.data("validations").push([t,n])}function n(e){return function(n){return this.each(function(){t.call(this,e,n)}),this}}e.fn.validates_custom=function(e,n){return this.each(function(){t.call(this,e,n)}),this},e.fn.validates_format=n(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=n(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=n(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=n(function(t){return!!e.trim(t)}),e.fn.validates_email=n(function(e){return e.match(/^.+@.+\..{2,}$/)}),e.fn.validates_luhn_check=n(function(e){var t,n,r,i=String(e).replace(/[^\d]/g,""),a=0;for(n=i.length-1;n>=0;n-=1)r=n%2+1,a+=(t=parseInt(i[n],10))>4&&2===r?t*r%10+1:t*r;return a%10==0}),e.fn.validates_routing_number=n(function(t){var n,r,i,a=String(t).replace(/[^\d]/g,""),o=e(this).closest("form").attr("data-country"),s=(a+"").split(""),l=0,u=[0,3,6];switch(o){case"US":for(r=0,i=u.length;r<i;r+=1)n=u[r],l+=3*parseInt(s[n],10),l+=7*parseInt(s[n+1],10),l+=parseInt(s[n+2],10);return 0!==l&&l%10==0;case"CA":return 8===a.length;case"AU":case"NZ":return 6===a.length;default:return!0}}),e.fn.validates_vat_format=n(function(e){var t=String(e).toUpperCase();switch(t.substr(0,2)){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_postal_code=n(function(t){var n=e(this).closest("form").data("country"),r=!1,i={US:[/(^\d{5}$)|(^\d{5}-\d{4}$)/]};return void 0===i[n]||(e.each(i[n],function(e,n){n.test(t)&&(r=!0)}),r)}),e.fn.validates_business_id=n(function(t){var n=String(t).toUpperCase().replace(/\s+/g,""),r=e(this).closest("form").attr("data-country"),i=!1,a={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===n||(void 0===a[r]||(e.each(a[r],function(e,t){t.test(n)&&(i=!0)}),i))})}(o)},"p5+3":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("change","body#terms_oct2012 form.select_country",function(){(0,a.default)(this).submit()})})},p5aI:function(e,t,n){"use strict";function r(){}function i(e){if(!(this instanceof i))return new i(e);this.value=e}function a(e){if(!(this instanceof a))return new a(e);this.value=e}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype=new r,a.prototype=new r,i.prototype.isSuccess=!0,i.prototype.isFailure=!1,a.prototype.isSuccess=!1,a.prototype.isFailure=!0,i.prototype.toString=function(){return"Validation.Success("+this.value+")"},a.prototype.toString=function(){return"Validation.Failure("+this.value+")"},i.prototype.concat=function(e){return e},a.prototype.concat=function(e){return e.isSuccess?this:a(this.value.concat(e.value))},t.Validation=r,t.Success=i,t.Failure=a},pD7l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n("fbTF")),i=_(n("iDDm")),a=_(n("0SSf")),o=_(n("WoYN")),s=_(n("Eaq5")),l=_(n("sZX6")),u=_(n("X6aU")),c=_(n("5GF7")),d=_(n("stBO")),f=_(n("HSFe")),h=_(n("R4hA")),p=_(n("CcZ3")),m=_(n("5RPx")),g=_(n("SNFf")),v=_(n("TXOG"));function _(e){return e&&e.__esModule?e:{default:e}}var y={"assets/_uploaded_item":r.default,"backer_report/_index":i.default,"backer_report/_row":a.default,"backings/_row":o.default,"backings/_table":s.default,"discover/_location_li":l.default,"discover/_location_refresh_li":u.default,"discover/_location_options":c.default,"discover/_project_baseball_card_li":d.default,"discover/_search_location_li":f.default,"discover/_search_location_refresh_li":h.default,"message_threads/_show":p.default,"messages/_show":m.default,"projects/_baseball_card_grid":g.default,"projects/_baseball_card_tall":v.default};t.default=y},pJCm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shippingValidations=t.ERROR_MESSAGES=void 0;var r=n("Z5jf"),i=n("NBJa"),a=n("IPoO");t.ERROR_MESSAGES=function(e){return{shipping_country_presence:(0,r.boundT)("project_page.reward_errors.Please_select_a_shipping_country"),pledge_value_presence:(0,r.boundT)("project_page.reward_errors.Please_enter_a_pledge_amount"),pledge_value_sufficient:(0,r.boundT)("project_page.reward_errors.Please_enter_a_pledge_amount_of_at_least",{amount:e})}},t.shippingValidations=function(e){return[(0,i.validateField)(a.PLEDGE_AMOUNT,"pledge_value_presence",function(){return e.id===a.NO_REWARD||e.totalCost&&+e.totalCost>0}),(0,i.validateField)(a.PLEDGE_AMOUNT,"pledge_value_sufficient",function(){return e.id===a.NO_REWARD||e.totalCost&&+e.totalCost>=+e.pledgeCost+e.shippingCost}),(0,i.validateField)(a.PLEDGE_NO_REWARD,"pledge_value_presence",function(){return e.id!==a.NO_REWARD||e.totalCost&&+e.totalCost>0}),(0,i.validateField)(a.PLEDGE_NO_REWARD,"pledge_value_sufficient",function(){return e.totalCost&&+e.totalCost>=+e.projectMin}),(0,i.validateField)(a.SHIPPING_LOCATION,"shipping_country_presence",function(){return!e.shippingRequired||!!e.shippingLocation})]}},pJzG:function(e,t,n){"use strict";var r=l(n("l/Rs")),i=l(n("shXp")),a=l(n("8NzR")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),n("FJRQ"),n("p44K"),(0,a.default)("#credit_card_form.js-ksr-stripe",function(e){if(0===(0,r.default)("#react-payments-form").length){var t=e.find("form"),n=(0,r.default)("#saving-layer"),a=e.find(".errored"),l=t.find("#name"),u=t.find("#number"),c=t.find("#cvc"),d=t.find("#exp_month"),f=t.find("#exp_year"),h=t.find("#reusable"),p=(0,r.default)("#js-stripe_form"),m=p.find("#stripe_token"),g=p.find("#stripe_reusable"),v=p.find("#payment_type"),_=e.data("checkout-reward-id"),y=parseFloat(e.data("checkout-amount")),b=e.data("checkout-id"),w=""===e.data("checkout-is-guest"),E=t.data("accepted-card-types"),k={name_presence:o.default.t("onloads.views.credit_cards.form.Cardholder_name_must_be_present"),number_presence:o.default.t("onloads.views.credit_cards.form.Card_number_must_be_present"),number_invalid:o.default.t("onloads.views.credit_cards.form.Card_number_format_is_invalid"),type_invalid:o.default.t("onloads.views.credit_cards.form.Card_type_is_not_accepted"),security_code_presence:o.default.t("onloads.views.credit_cards.form.Card_security_code_must_be_present"),security_code_invalid:o.default.t("onloads.views.credit_cards.form.Card_security_code_format_is_invalid"),exp_month_presence:o.default.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_present"),exp_month_invalid:o.default.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_valid"),exp_year_presence:o.default.t("onloads.views.credit_cards.form.Card_expiration_year_must_be_present"),exp_year_invalid:o.default.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),stripe_timeout:o.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")},S="new";l.validates_presence({error:"name_presence"}),u.validates_presence({error:"number_presence"}),u.validates_custom(function(e){return R(e)},{error:"number_invalid",when:function(){return r.default.trim(u.val()).length>0}}),u.validates_custom(function(e){return t=A(e),i.default.include(E,t);var t},{error:"type_invalid",when:function(){return r.default.trim(u.val()).length>0&&R(u.val())}}),c.validates_presence({error:"security_code_presence"}),c.validates_custom(function(e){return t=e,n=A(u.val()),r.default.payment.validateCardCVC(t,n);var t,n},{error:"security_code_invalid",when:function(){return r.default.trim(c.val()).length>0}}),d.validates_presence({error:"exp_month_presence"}),d.validates_custom(function(e){return parseInt(e,10)>=(new Date).getMonth()+1},{error:"exp_month_invalid",when:function(){return parseInt(f.val(),10)<=(new Date).getFullYear()}}),f.validates_presence({error:"exp_year_presence"}),f.validates_custom(function(e){return parseInt(e,10)>=(new Date).getFullYear()},{error:"exp_year_invalid"}),l.add(u).add(c).on("keyup input paste cut",function(){(0,r.default)(this).validate()}).on("blur",function(){T((0,r.default)(this))}),d.on("change",function(){d.validate(),T(d),f.validate(),T(f)}),f.on("change",function(){f.validate(),T(f),d.validate(),T(d)}),t.find(":input").on("validate:valid",function(){(0,r.default)(this).data("error",null).attr("aria-invalid",!1).closest("li").removeClass("invalid")}).on("validate:invalid",function(e,t){(0,r.default)(this).data("error",t)}),u.on("validate:valid",function(){e.find("#js-card_type_list").addClass("selected").find(".js-"+A(u.val())).addClass("selected")}).on("validate:invalid",function(){e.find("#js-card_type_list").removeClass("selected").find("li").removeClass("selected")}),u.payment("formatCardNumber"),c.payment("formatCardCVC"),t.on("submit",function(e){if(e.preventDefault(),t.validate()){a.html("").addClass("hide"),n.show();var i=setTimeout(function(){n.find(".modal_dialog_body").html(k.stripe_timeout),n.removeClass("spinning"),(0,s.track)("Checkout Error",{type:"stripe_timeout",checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})},3e4);Stripe.setPublishableKey(t.data("public-key")),Stripe.card.createToken({name:C(l.val()),number:C(u.val()),exp_month:C(d.val()),exp_year:C(f.val()),cvc:C(c.val())},function(e,t){t.error?(clearTimeout(i),n.hide(),a.html("<li>"+t.error.message+"</li>").removeClass("hide"),(0,s.track)("Checkout Error",{type:"stripe_token",context:t.error.message,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})):(m.val(t.id),g.val(h.is(":checked")),v.val("credit_card"),p.submit())})}else t.find(":input").each(function(){T((0,r.default)(this))})}),function(){var e=(0,r.default)("#new_card_form").find("form"),t=(0,r.default)(".selected input.card_toggle");(0,r.default)("#credit_card_form .errored").not(".hide").length&&(t=(0,r.default)("#new-card input.card_toggle")),t.length||(t=(0,r.default)("input.card_toggle:first")),(0,r.default)(document).on("change click","input.card_toggle",function(t){t.preventDefault();var n,i=(0,r.default)(this),a=(0,r.default)("#new_card_form");i.is("input.card_toggle")||(i=i.find("input.card_toggle")),(n=(0,r.default)("input.card_toggle").not(i)).prop("checked",!1),i.prop("checked",!0),n.closest(".payment_option").removeClass("selected"),i.closest(".payment_option").addClass("selected"),i.closest("#new-card").length?(a.slideDown(400),e=a.find("form"),S="new"):(a.slideUp(400),e=i.closest("form"),S="stored"),(0,s.track)("Selected Payment Source",{type:S,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w})}),(0,r.default)(document).on("click",".js-pledge-submit",function(t){t.preventDefault(),(0,r.default)(".payment_option.selected").find(".account_toggle.radio").length?e=(0,r.default)("#sepa-account-info"):(0,r.default)(".js-credit-card-choice").length||(e=(0,r.default)("#new_card_form").find("form")),(0,s.track)("Submitted Payment Source Form",{type:S,checkout_reward_id:_,checkout_amount:y}),e.submit()}),t.prop("checked",!0).trigger("change")}()}function C(e){return"string"==typeof e?r.default.trim(e):e}function T(e){var t=e.data("error");void 0!==t&&k.hasOwnProperty(t)&&(e.attr("aria-invalid",!0).closest("li").addClass("invalid").find(".js-error-messages").html("<li>"+k[t]+"</li>"),(0,s.track)("Checkout Error",{type:t,checkout_reward_id:_,checkout_id:b,checkout_is_guest:w}))}function A(e){return/^(450823|450875|450878)/.test(e)?"visa":r.default.payment.cardType(e)}function R(e){return r.default.payment.validateCardNumber(e)}})},pawd:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"projectCardFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Project"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"backers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"canceledAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"creator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"imageWidth"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"deadlineAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"friends"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"imageWidth"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"imageWidth"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"isProjectWeLove"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isProjectOfTheDay"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percentFunded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pledged"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"goal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blurb"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"featureImageUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"imageWidth"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}],loc:{start:0,end:571}};n.loc.source={body:"fragment projectCardFragment on Project {\n  backers {\n    totalCount\n  }\n  canceledAt\n  category {\n    name\n    url\n  }\n  creator {\n    imageUrl(width: $imageWidth)\n    name\n    url\n  }\n  deadlineAt\n  description\n  friends {\n    nodes {\n      imageUrl(width: $imageWidth)\n      name\n    }\n  }\n  id\n  imageUrl(width: $imageWidth)\n  isProjectWeLove\n  isProjectOfTheDay\n  name\n  percentFunded\n  pid\n  pledged {\n    amount\n    currency\n  }\n  goal {\n    amount\n    currency\n  }\n  profile {\n    blurb\n    featureImageUrl(width: $imageWidth)\n    name\n  }\n  slug\n  state\n  url\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},pqDf:function(e,t,n){"use strict";var r=a(n("8NzR")),i=a(n("+bVi"));function a(e){return e&&e.__esModule?e:{default:e}}n("M1ti"),(0,r.default)("body#help_images",function(){i.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},pxxf:function(e,t,n){"use strict";var r=d(n("l/Rs")),i=d(n("shXp")),a=d(n("Ae7L")),o=d(n("8NzR")),s=d(n("+bVi")),l=n("Tvaj"),u=d(n("MA+5")),c=n("4RZc");function d(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("#NS_discover__locations",function(e){var t,n,o,d,f,h,p,m=e.hasClass("refresh_enabled"),g=e.find("form"),v=g.find("input"),_=500;function y(e){var t;t=m?(0,r.default)((0,u.default)("discover/_location_refresh_li",e)):(0,r.default)((0,u.default)("discover/_location_li",e)),o.empty(),n.children("li:not(:first-child)").remove(),n.append(t),m?(d.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),t.find("a").addClass("ksr-green-500").removeClass("black")):(d.find("li.selected").removeClass("selected"),t.addClass("selected")),(0,r.default)(document).trigger("discovery:locations:updated",e),(0,r.default)(document).trigger("discovery:locations:changed",e),h&&h.abort(),h=r.default.ajax({url:e.urls.web.location,dataType:"json",success:function(e){o.children().remove(),i.default.each(e.nearby_locations,function(e){m?o.append((0,u.default)("discover/_location_refresh_li",e)):o.append((0,u.default)("discover/_location_li",e))}),n.children("li:not(:first-child)").remove(),i.default.each(e.ancestor_locations.reverse(),function(e){m?n.append((0,u.default)("discover/_location_refresh_li",e)):n.append((0,u.default)("discover/_location_li",e))}),n.append(t),(0,r.default)(document).trigger("discovery:locations:updated",e)},complete:function(){h=!1}})}m?(t=g.find(".js-results"),n=e.find(".js-broader-locations ul"),o=e.find(".js-nearby-locations ul"),d=e.find(".js-broader-locations ul, .js-nearby-locations ul")):(t=g.find("ul.results"),n=e.find(".broader-locations ul"),o=e.find(".nearby-locations ul"),d=e.find(".broader-locations ul, .nearby-locations ul")),g.on("submit",function(e){e.preventDefault()}),d.on("click","li > a",function(t){var n=(0,r.default)(this),i=n.closest("li"),a=i.data("location")||{};m?(d.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.addClass("ksr-green-500").removeClass("black")):(d.find(".selected").removeClass("selected"),i.addClass("selected")),(0,r.default)(document).trigger("discovery:locations:changed",a),e.trigger("ksr_popover:close"),t.preventDefault()}),v.on("blur",function(){setTimeout(function(){m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible")},500)}),v.on("cut paste input keydown",function(e){e.keyCode===l.ESC?((0,r.default)(this).val(""),m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible")):-1===i.default.indexOf(l.NOT_INPUT,e.keyCode)&&function(){f&&f.abort();g.addClass("loading"),clearTimeout(p),p=setTimeout(function(){f=r.default.ajax({url:g.attr("action"),dataType:"json",data:g.serialize(),success:function(e){m?t.removeClass("display-none").addClass("block"):g.addClass("results_visible"),t.empty(),i.default.each(e.locations,function(e){m?t.append((0,u.default)("discover/_search_location_refresh_li",e)):t.append((0,u.default)("discover/_search_location_li",e))}),(0,c.track)("Discover Location Search Results",{discover_location_search_term:v.val(),discover_location_search_hits:e.total_hits})},complete:function(){g.removeClass("loading"),f=!1}})},_)}()}),e.on("ksr_popover:opened",function(){s.default["not-touchable"]&&v.focus()}),e.find(".current_location, .js-current_location").on("click",function(e){e.preventDefault(),y(a.default.get()),v.val(""),(0,c.track)("Discovery Current Location Click",{discover_used_html5:!1})}),t.on("click","li > a",function(e){y((0,r.default)(this).closest("li").data("location")||{}),m?t.addClass("display-none").removeClass("block"):g.removeClass("results_visible"),(0,c.track)("Discover Location Search Click",{discover_location_search_term:v.val()}),e.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(t,n){m?(e.find(".ksr-green-500").removeClass("ksr-green-500").addClass("black"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id+" a").addClass("ksr-green-500").removeClass("black"):e.find("li:first a").addClass("ksr-green-500").removeClass("black")):(e.find(".selected").removeClass("selected"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id).addClass("selected"):e.find("li:first").addClass("selected"))}),(0,r.default)(document).on("discovery:locations:load_sample",function(e,t){t.location&&y(t.location),e.preventDefault()})})},"q1R/":function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#jobs_index",function(){(0,r.default)(".js-current-openings").click(function(){r.default.scrollTo((0,r.default)((0,r.default)(this).attr("href")),{duration:3e3}),(0,a.track)("About KSR Jobs Current Openings Click")}),(0,r.default)(".js-charter-link").click(function(){(0,a.track)("About KSR Jobs Charter Click")}),(0,r.default)(".js-team-link").click(function(){(0,a.track)("About KSR Jobs Team Click")}),(0,r.default)(".js-job-section a").click(function(){(0,a.track)("About KSR Jobs Posting Click")})})},q1oh:function(e,t,n){"use strict";var r,i=n("8NzR"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)("body#survey_responses_new",function(e){var t=e.find("input:hidden#dirty");e.length&&(e.on("keydown","input:text",function(e){13===e.which&&e.preventDefault()}),"0"===t.val()?t.val("1"):(0,o.track)("Back to Survey Response Page"),(0,o.track)("Survey Response Page"))})},"qBp/":function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){var t=e('<div id="jquery-clipster-overlay"><div><p>Press ⌘C to copy</p><p><textarea></textarea></p></div></div>'),n=t.find("textarea");function r(e,t){t||(t={}),this.text=t.text||e.data("text")||e.text(),this.$elem=e,this.is_on=!1,this.bind()}t.hide(),e(function(){e("body").append(t)}),e.clipster=function(t,n){e(document).on("click",t,function(t){e(this).clipster(n).data("clipster").activate(),t.preventDefault()})},e.fn.clipster=function(t){return this.each(function(){var n=e(this),i=n.data("clipster");i||(i=new r(n,t),n.data("clipster",i))})},r.prototype.bind=function(){var t=this;this.$elem.on("click",function(e){t.activate(),e.preventDefault()}),e(document).on("copy click",function(r){var i=e(r.target);i.closest(t.$elem).length||"click"===r.type&&i.is(n)||t.deactivate()}),e(document).on("keydown",function(e){27===e.which&&t.deactivate()})},r.prototype.activate=function(){this.active||(t.show(),n.val(this.text),n[0].select(),n.focus(),this.active=!0)},r.prototype.deactivate=function(){this.active&&(setTimeout(function(){t.hide()}),this.active=!1)}}(r)},qQYM:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("click",".activity_mini_comment .excerpt a",function(e){e.preventDefault();var t=(0,a.default)(this).parents("blockquote.excerpt"),n=t.siblings("blockquote.everything");t.hide(),n.css("display","inline")})})},rI7t:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){"use strict";e.extend({tablesorter:new function(){var t=this;function n(){var e=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];"undefined"!=typeof console&&void 0!==console.log?console.log(e):alert(e)}function r(e,t){n(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function i(e){for(var t in e)return!1;return!0}function a(t,n,r){if(!n)return"";var i=t.config,a=i.textExtraction,o="";return o="simple"===a?i.supportsTextContent?n.textContent:e(n).text():"function"==typeof a?a(n,t,r):"object"==typeof a&&a.hasOwnProperty(r)?a[r](n,t,r):i.supportsTextContent?n.textContent:e(n).text(),e.trim(o)}function o(e,r,i,o){for(var s,l=t.parsers.length,u=!1,c="",d=!0;""===c&&d;)r[++i]?(c=a(e,u=r[i].cells[o],o),e.config.debug&&n("Checking if value was empty on row "+i+", column: "+o+': "'+c+'"')):d=!1;for(;--l>=0;)if((s=t.parsers[l])&&"text"!==s.id&&s.is&&s.is(c,e,u))return s;return t.getParserById("text")}function s(e){var i,a,s,l,u,c,d,f,h=e.config,p=h.$tbodies=h.$table.children("tbody:not(."+h.cssInfoBlock+")"),m="";if(0===p.length)return h.debug?n("*Empty table!* Not building a parser cache"):"";if(h.debug&&(f=new Date,n("Detecting parsers for each column")),(i=p[0].rows)[0])for(a=[],s=i[0].cells.length,l=0;l<s;l++)u=(u=h.$headers.filter(":not([colspan])")).add(h.$headers.filter('[colspan="1"]')).filter('[data-column="'+l+'"]:last'),c=h.headers[l],d=t.getParserById(t.getData(u,c,"sorter")),h.empties[l]=t.getData(u,c,"empty")||h.emptyTo||(h.emptyToBottom?"bottom":"top"),h.strings[l]=t.getData(u,c,"string")||h.stringTo||"max",d||(d=o(e,i,-1,l)),h.debug&&(m+="column:"+l+"; parser:"+d.id+"; string:"+h.strings[l]+"; empty: "+h.empties[l]+"\n"),a.push(d);h.debug&&(n(m),r("Completed detecting parsers",f)),h.parsers=a}function l(i){var o,s,l,u,c,d,f,h,p,m,g=i.tBodies,v=i.config,_=v.parsers,y=[];if(v.cache={},!_)return v.debug?n("*Empty table!* Not building a cache"):"";for(v.debug&&(m=new Date),v.showProcessing&&t.isProcessing(i,!0),f=0;f<g.length;f++)if(v.cache[f]={row:[],normalized:[]},!e(g[f]).hasClass(v.cssInfoBlock)){for(o=g[f]&&g[f].rows.length||0,s=g[f].rows[0]&&g[f].rows[0].cells.length||0,c=0;c<o;++c)if(p=[],(h=e(g[f].rows[c])).hasClass(v.cssChildRow))v.cache[f].row[v.cache[f].row.length-1]=v.cache[f].row[v.cache[f].row.length-1].add(h);else{for(v.cache[f].row.push(h),d=0;d<s;++d)l=a(i,h[0].cells[d],d),u=_[d].format(l,i,h[0].cells[d],d),p.push(u),"numeric"===(_[d].type||"").toLowerCase()&&(y[d]=Math.max(Math.abs(u)||0,y[d]||0));p.push(v.cache[f].normalized.length),v.cache[f].normalized.push(p)}v.cache[f].colMax=y}v.showProcessing&&t.isProcessing(i),v.debug&&r("Building cache for "+o+" rows",m)}function u(n,a){var o,s,l,u,c,d,f,h,p,m,g,v,_=n.config,y=_.widgetOptions,b=n.tBodies,w=[],E=_.cache;if(!i(E)){for(_.debug&&(v=new Date),p=0;p<b.length;p++)if((c=e(b[p])).length&&!c.hasClass(_.cssInfoBlock)){for(d=t.processTbody(n,c,!0),o=E[p].row,u=(l=(s=E[p].normalized).length)?s[0].length-1:0,f=0;f<l;f++)if(g=s[f][u],w.push(o[g]),!_.appender||_.pager&&(!_.pager.removeRows||!y.pager_removeRows)&&!_.pager.ajax)for(m=o[g].length,h=0;h<m;h++)d.append(o[g][h]);t.processTbody(n,d,!1)}_.appender&&_.appender(n,w),_.debug&&r("Rebuilt table",v),a||_.appender||t.applyWidget(n),e(n).trigger("sortEnd",n),e(n).trigger("updateComplete",n)}}function c(e){return/^d/i.test(e)||1===e}function d(i){var a,o,s,l,u,d,f,p=function(t){var n,r,i,a,o,s,l,u,c,d,f,h,p=[],m={},g=0,v=e(t).find("thead:eq(0), tfoot").children("tr");for(n=0;n<v.length;n++)for(s=v[n].cells,r=0;r<s.length;r++){for(u=(l=(o=s[r]).parentNode.rowIndex)+"-"+o.cellIndex,c=o.rowSpan||1,d=o.colSpan||1,void 0===p[l]&&(p[l]=[]),i=0;i<p[l].length+1;i++)if(void 0===p[l][i]){f=i;break}for(m[u]=f,g=Math.max(f,g),e(o).attr({"data-column":f}),i=l;i<l+c;i++)for(void 0===p[i]&&(p[i]=[]),h=p[i],a=f;a<f+d;a++)h[a]="x"}return t.config.columns=g+1,m}(i),m=i.config;m.headerList=[],m.headerContent=[],m.debug&&(f=new Date),l=m.cssIcon?'<i class="'+m.cssIcon+" "+t.css.icon+'"></i>':"",m.$headers=e(i).find(m.selectorHeaders).each(function(n){o=e(this),a=m.headers[n],m.headerContent[n]=e(this).html(),u=m.headerTemplate.replace(/\{content\}/g,e(this).html()).replace(/\{icon\}/g,l),m.onRenderTemplate&&(s=m.onRenderTemplate.apply(o,[n,u]))&&"string"==typeof s&&(u=s),e(this).html('<div class="tablesorter-header-inner">'+u+"</div>"),m.onRenderHeader&&m.onRenderHeader.apply(o,[n]),this.column=p[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=c(t.getData(o,a,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(d=t.getData(o,a,"lockedOrder")||!1)&&!1!==d&&(this.order=this.lockedOrder=c(d)?[1,1,1]:[0,0,0]),o.addClass(t.css.header+" "+m.cssHeader),m.headerList[n]=this,o.parent().addClass(t.css.headerRow+" "+m.cssHeaderRow),o.attr("tabindex",0)}),h(i),m.debug&&(r("Built headers:",f),n(m.$headers))}function f(e,t,n){var r=e.config;r.$table.find(r.selectorRemove).remove(),s(e),l(e),_(r.$table,t,n)}function h(n){var r,i=n.config;i.$headers.each(function(n,a){r="false"===t.getData(a,i.headers[n],"sorter"),a.sortDisabled=r,e(a)[r?"addClass":"removeClass"]("sorter-false")})}function p(n){var r,i,a,o,s=n.config,l=s.sortList,u=[t.css.sortAsc+" "+s.cssAsc,t.css.sortDesc+" "+s.cssDesc],c=e(n).find("tfoot tr").children().removeClass(u.join(" "));for(s.$headers.removeClass(u.join(" ")),o=l.length,i=0;i<o;i++)if(2!==l[i][1]&&(r=s.$headers.not(".sorter-false").filter('[data-column="'+l[i][0]+'"]'+(1===o?":last":""))).length)for(a=0;a<r.length;a++)r[a].sortDisabled||(r.eq(a).addClass(u[l[i][1]]),c.length&&c.filter('[data-column="'+l[i][0]+'"]').eq(a).addClass(u[l[i][1]]))}function m(e,t){return e&&e[t]&&e[t].type||""}function g(e){var n,a,o,s,l,u,c,d,f,h,p,g,v,_=0,y=e.config,b=y.textSorter||"",w=y.sortList,E=w.length,k=e.tBodies.length;if(!y.serverSideSorting&&!i(y.cache)){for(y.debug&&(h=new Date),a=0;a<k;a++)u=y.cache[a].colMax,(c=y.cache[a].normalized).length,f=c&&c[0]?c[0].length-1:0,c.sort(function(r,i){for(n=0;n<E;n++){if(l=w[n][0],d=w[n][1],g=(_=0===d)?r:i,v=_?i:r,o=y.string[y.empties[l]||y.emptyTo],""===g[l]&&0!==o)return("boolean"==typeof o?o?-1:1:o||1)*(_?1:-1);if(""===v[l]&&0!==o)return("boolean"==typeof o?o?1:-1:-o||-1)*(_?1:-1);if((s=/n/i.test(m(y.parsers,l)))&&y.strings[l]?(s="boolean"==typeof y.string[y.strings[l]]?(_?1:-1)*(y.string[y.strings[l]]?-1:1):y.strings[l]&&y.string[y.strings[l]]||0,p=y.numberSorter?y.numberSorter(g[l],v[l],_,u[l],e):t.sortNumeric(g[l],v[l],s,u[l])):p="function"==typeof b?b(g[l],v[l],_,l,e):"object"==typeof b&&b.hasOwnProperty(l)?b[l](g[l],v[l],_,l,e):t.sortNatural(g[l],v[l]),p)return p}return r[f]-i[f]});y.debug&&r("Sorting on "+w.toString()+" and dir "+d+" time",h)}}function v(e,t){var n=e[0].config;n.pager&&!n.pager.ajax&&e.trigger("updateComplete"),"function"==typeof t&&t(e[0])}function _(e,t,n){!1===t||e[0].isProcessing?v(e,n):e.trigger("sorton",[e[0].config.sortList,function(){v(e,n)}])}function y(n){var r,o,c=n.config,m=c.$table;c.$headers.find(c.selectorSort).add(c.$headers.filter(c.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(r,a){if(!(1!==(r.which||r.button)&&!/sort|keypress/.test(r.type)||"keypress"===r.type&&13!==r.which||"mouseup"===r.type&&!0!==a&&(new Date).getTime()-o>250)){if("mousedown"===r.type)return o=(new Date).getTime(),"INPUT"===r.target.tagName?"":!c.cancelSelection;c.delayInit&&i(c.cache)&&l(n);var s=(/TH|TD/.test(this.tagName)?e(this):e(this).parents("th, td").filter(":first"))[0];s.sortDisabled||function(n,r,i){var a,o,s,l,c,d=n.config,f=!i[d.sortMultiSortKey],h=e(n);if(h.trigger("sortStart",n),r.count=i[d.sortResetKey]?2:(r.count+1)%(d.sortReset?3:2),d.sortRestart&&(o=r,d.$headers.each(function(){this===o||!f&&e(this).is("."+t.css.sortDesc+",."+t.css.sortAsc)||(this.count=-1)})),o=r.column,f){if(d.sortList=[],null!==d.sortForce)for(a=d.sortForce,s=0;s<a.length;s++)a[s][0]!==o&&d.sortList.push(a[s]);if((l=r.order[r.count])<2&&(d.sortList.push([o,l]),r.colSpan>1))for(s=1;s<r.colSpan;s++)d.sortList.push([o+s,l])}else if(d.sortAppend&&d.sortList.length>1&&t.isValueInArray(d.sortAppend[0][0],d.sortList)&&d.sortList.pop(),t.isValueInArray(o,d.sortList))for(s=0;s<d.sortList.length;s++)c=d.sortList[s],l=d.$headers[c[0]],c[0]===o&&(c[1]=l.order[r.count],2===c[1]&&(d.sortList.splice(s,1),l.count=-1));else if((l=r.order[r.count])<2&&(d.sortList.push([o,l]),r.colSpan>1))for(s=1;s<r.colSpan;s++)d.sortList.push([o+s,l]);if(null!==d.sortAppend)for(a=d.sortAppend,s=0;s<a.length;s++)a[s][0]!==o&&d.sortList.push(a[s]);h.trigger("sortBegin",n),setTimeout(function(){p(n),g(n),u(n)},1)}(n,s,r)}}),c.cancelSelection&&c.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),m.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(e){e.stopPropagation(),c.sortList=[],p(n),g(n),u(n)}).bind("updateAll.tablesorter",function(e,r,i){e.stopPropagation(),t.refreshWidgets(n,!0,!0),t.restoreHeaders(n),d(n),y(n),f(n,r,i)}).bind("update.tablesorter updateRows.tablesorter",function(e,t,r){e.stopPropagation(),h(n),f(n,t,r)}).bind("updateCell.tablesorter",function(t,r,i,o){t.stopPropagation(),m.find(c.selectorRemove).remove();var s,l,u,d=m.find("tbody"),f=d.index(e(r).parents("tbody").filter(":first")),h=e(r).parents("tr").filter(":first");r=e(r)[0],d.length&&f>=0&&(l=d.eq(f).find("tr").index(h),u=r.cellIndex,s=c.cache[f].normalized[l].length-1,c.cache[f].row[n.config.cache[f].normalized[l][s]]=h,c.cache[f].normalized[l][u]=c.parsers[u].format(a(n,r,u),n,r,u),_(m,i,o))}).bind("addRows.tablesorter",function(e,t,i,o){e.stopPropagation();var l,u=t.filter("tr").length,d=[],f=t[0].cells.length,h=m.find("tbody").index(t.parents("tbody").filter(":first"));for(c.parsers||s(n),l=0;l<u;l++){for(r=0;r<f;r++)d[r]=c.parsers[r].format(a(n,t[l].cells[r],r),n,t[l].cells[r],r);d.push(c.cache[h].row.length),c.cache[h].row.push([t[l]]),c.cache[h].normalized.push(d),d=[]}_(m,i,o)}).bind("sorton.tablesorter",function(t,r,a,o){var s=n.config;t.stopPropagation(),m.trigger("sortStart",this),function(t,n){var r,i,a,o=t.config,s=n||o.sortList;o.sortList=[],e.each(s,function(t,n){r=[parseInt(n[0],10),parseInt(n[1],10)],(a=o.$headers[r[0]])&&(o.sortList.push(r),i=e.inArray(r[1],a.order),a.count=i>=0?i:r[1]%(o.sortReset?3:2))})}(n,r),p(n),s.delayInit&&i(s.cache)&&l(n),m.trigger("sortBegin",this),g(n),u(n,o),"function"==typeof a&&a(n)}).bind("appendCache.tablesorter",function(e,t,r){e.stopPropagation(),u(n,r),"function"==typeof t&&t(n)}).bind("applyWidgetId.tablesorter",function(e,r){e.stopPropagation(),t.getWidgetById(r).format(n,c,c.widgetOptions)}).bind("applyWidgets.tablesorter",function(e,r){e.stopPropagation(),t.applyWidget(n,r)}).bind("refreshWidgets.tablesorter",function(e,r,i){e.stopPropagation(),t.refreshWidgets(n,r,i)}).bind("destroy.tablesorter",function(e,r,i){e.stopPropagation(),t.destroy(n,r,i)})}t.version="2.13.3",t.parsers=[],t.widgets=[],t.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},t.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"},t.log=n,t.benchmark=r,t.construct=function(n){return this.each(function(){var r=e.extend(!0,{},t.defaults,n);!this.hasInitialized&&t.buildTable&&"TABLE"!==this.tagName&&t.buildTable(this,r),t.setup(this,r)})},t.setup=function(r,i){if(!r||!r.tHead||0===r.tBodies.length||!0===r.hasInitialized)return i.debug?n("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var a,o="",u=e(r),c=e.metadata;r.hasInitialized=!1,r.isProcessing=!0,r.config=i,e.data(r,"tablesorter",i),i.debug&&e.data(r,"startoveralltimer",new Date),i.supportsTextContent="x"===e("<span>x</span>")[0].textContent,i.supportsDataObject=((a=e.fn.jquery.split("."))[0]=parseInt(a[0],10),a[0]>1||1===a[0]&&parseInt(a[1],10)>=4),i.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,null:0,top:!0,bottom:!1},/tablesorter\-/.test(u.attr("class"))||(o=""!==i.theme?" tablesorter-"+i.theme:""),i.$table=u.addClass(t.css.table+" "+i.tableClass+o),i.$tbodies=u.children("tbody:not(."+i.cssInfoBlock+")"),i.widgetInit={},d(r),function(t){if(t.config.widthFixed&&0===e(t).find("colgroup").length){var n=e("<colgroup>"),r=e(t).width();e(t.tBodies[0]).find("tr:first").children("td:visible").each(function(){n.append(e("<col>").css("width",parseInt(e(this).width()/r*1e3,10)/10+"%"))}),e(t).prepend(n)}}(r),s(r),i.delayInit||l(r),y(r),i.supportsDataObject&&void 0!==u.data().sortlist?i.sortList=u.data().sortlist:c&&u.metadata()&&u.metadata().sortlist&&(i.sortList=u.metadata().sortlist),t.applyWidget(r,!0),i.sortList.length>0?u.trigger("sorton",[i.sortList,{},!i.initWidgets]):i.initWidgets&&t.applyWidget(r),i.showProcessing&&u.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(e){t.isProcessing(r,"sortBegin"===e.type)}),r.hasInitialized=!0,r.isProcessing=!1,i.debug&&t.benchmark("Overall initialization time",e.data(r,"startoveralltimer")),u.trigger("tablesorter-initialized",r),"function"==typeof i.initialized&&i.initialized(r)},t.isProcessing=function(n,r,i){var a=(n=e(n))[0].config,o=i||n.find("."+t.css.header);r?(a.sortList.length>0&&(o=o.filter(function(){return!this.sortDisabled&&t.isValueInArray(parseFloat(e(this).attr("data-column")),a.sortList)})),o.addClass(t.css.processing+" "+a.cssProcessing)):o.removeClass(t.css.processing+" "+a.cssProcessing)},t.processTbody=function(t,n,r){var i;if(r)return t.isProcessing=!0,n.before('<span class="tablesorter-savemyplace"/>'),i=e.fn.detach?n.detach():n.remove();i=e(t).find("span.tablesorter-savemyplace"),n.insertAfter(i),i.remove(),t.isProcessing=!1},t.clearTableBody=function(t){e(t)[0].config.$tbodies.empty()},t.restoreHeaders=function(t){var n=t.config;n.$table.find(n.selectorHeaders).each(function(t){e(this).find(".tablesorter-header-inner").length&&e(this).html(n.headerContent[t])})},t.destroy=function(n,r,i){if((n=e(n)[0]).hasInitialized){t.refreshWidgets(n,!0,!0);var a=e(n),o=n.config,s=a.find("thead:first"),l=s.find("tr."+t.css.headerRow).removeClass(t.css.headerRow+" "+o.cssHeaderRow),u=a.find("tfoot:first > tr").children("th, td");s.find("tr").not(l).remove(),a.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),o.$headers.add(u).removeClass([t.css.header,o.cssHeader,o.cssAsc,o.cssDesc,t.css.sortAsc,t.css.sortDesc].join(" ")).removeAttr("data-column"),l.find(o.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),t.restoreHeaders(n),!1!==r&&a.removeClass(t.css.table+" "+o.tableClass+" tablesorter-"+o.theme),n.hasInitialized=!1,"function"==typeof i&&i(n)}},t.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i},t.sortNatural=function(e,n){if(e===n)return 0;var r,i,a,o,s,l,u,c,d=t.regex;if(d.hex.test(n)){if((i=parseInt(e.match(d.hex),16))<(o=parseInt(n.match(d.hex),16)))return-1;if(i>o)return 1}for(r=e.replace(d.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),a=n.replace(d.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),c=Math.max(r.length,a.length),u=0;u<c;u++){if(s=isNaN(r[u])?r[u]||0:parseFloat(r[u])||0,l=isNaN(a[u])?a[u]||0:parseFloat(a[u])||0,isNaN(s)!==isNaN(l))return isNaN(s)?1:-1;if(typeof s!=typeof l&&(s+="",l+=""),s<l)return-1;if(s>l)return 1}return 0},t.sortText=function(e,t){return e>t?1:e<t?-1:0},t.getTextValue=function(e,t,n){if(n){var r,i=e?e.length:0,a=n+t;for(r=0;r<i;r++)a+=e.charCodeAt(r);return t*a}return 0},t.sortNumeric=function(e,n,r,i){return e===n?0:(isNaN(e)&&(e=t.getTextValue(e,r,i)),isNaN(n)&&(n=t.getTextValue(n,r,i)),e-n)},t.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},t.replaceAccents=function(e){var n,r="[",i=t.characterEquivalents;if(!t.characterRegex){for(n in t.characterRegexArray={},i)"string"==typeof n&&(r+=i[n],t.characterRegexArray[n]=new RegExp("["+i[n]+"]","g"));t.characterRegex=new RegExp(r+"]")}if(t.characterRegex.test(e))for(n in i)"string"==typeof n&&(e=e.replace(t.characterRegexArray[n],n));return e},t.isValueInArray=function(e,t){var n,r=t.length;for(n=0;n<r;n++)if(t[n][0]===e)return!0;return!1},t.addParser=function(e){var n,r=t.parsers.length,i=!0;for(n=0;n<r;n++)t.parsers[n].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&t.parsers.push(e)},t.getParserById=function(e){var n,r=t.parsers.length;for(n=0;n<r;n++)if(t.parsers[n].id.toLowerCase()===e.toString().toLowerCase())return t.parsers[n];return!1},t.addWidget=function(e){t.widgets.push(e)},t.getWidgetById=function(e){var n,r,i=t.widgets.length;for(n=0;n<i;n++)if((r=t.widgets[n])&&r.hasOwnProperty("id")&&r.id.toLowerCase()===e.toLowerCase())return r},t.applyWidget=function(n,i){var a,o,s,l=(n=e(n)[0]).config,u=l.widgetOptions,c=[];l.debug&&(a=new Date),l.widgets.length&&(l.widgets=e.grep(l.widgets,function(t,n){return e.inArray(t,l.widgets)===n}),e.each(l.widgets||[],function(e,n){(s=t.getWidgetById(n))&&s.id&&(s.priority||(s.priority=10),c[e]=s)}),c.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),e.each(c,function(t,r){r&&(!i&&l.widgetInit[r.id]||(r.hasOwnProperty("options")&&(u=n.config.widgetOptions=e.extend(!0,{},r.options,u),l.widgetInit[r.id]=!0),r.hasOwnProperty("init")&&r.init(n,r,l,u)),!i&&r.hasOwnProperty("format")&&r.format(n,l,u,!1))})),l.debug&&(o=l.widgets.length,r("Completed "+(!0===i?"initializing ":"applying ")+o+" widget"+(1!==o?"s":""),a))},t.refreshWidgets=function(r,i,a){var o,s=(r=e(r)[0]).config,l=s.widgets,u=t.widgets,c=u.length;for(o=0;o<c;o++)u[o]&&u[o].id&&(i||e.inArray(u[o].id,l)<0)&&(s.debug&&n("Refeshing widgets: Removing "+u[o].id),u[o].hasOwnProperty("remove")&&(u[o].remove(r,s,s.widgetOptions),s.widgetInit[u[o].id]=!1));!0!==a&&t.applyWidget(r,i)},t.getData=function(t,n,r){var i,a,o="",s=e(t);return s.length?(i=!!e.metadata&&s.metadata(),a=" "+(s.attr("class")||""),void 0!==s.data(r)||void 0!==s.data(r.toLowerCase())?o+=s.data(r)||s.data(r.toLowerCase()):i&&void 0!==i[r]?o+=i[r]:n&&void 0!==n[r]?o+=n[r]:" "!==a&&a.match(" "+r+"-")&&(o=a.match(new RegExp("\\s"+r+"-([\\w-]+)"))[1]||""),e.trim(o)):""},t.formatFloat=function(t,n){return"string"!=typeof t||""===t?t:(t=(n&&n.config?!1!==n.config.usNumberFormat:void 0===n||n)?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),r=parseFloat(t),isNaN(r)?e.trim(t):r);var r},t.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var t=e.tablesorter;e.fn.extend({tablesorter:t.construct}),t.addParser({id:"text",is:function(){return!0},format:function(n,r){var i=r.config;return n&&(n=e.trim(i.ignoreCase?n.toLocaleLowerCase():n),n=i.sortLocaleCompare?t.replaceAccents(n):n),n},type:"text"}),t.addParser({id:"digit",is:function(e){return t.isDigit(e)},format:function(n,r){var i=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),r);return n&&"number"==typeof i?i:n?e.trim(n&&r.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[,. ]/g,""))},format:function(n,r){var i=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),r);return n&&"number"==typeof i?i:n?e.trim(n&&r.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,n){var r,i=e?e.split("."):"",a="",o=i.length;for(r=0;r<o;r++)a+=("00"+i[r]).slice(-3);return e?t.formatFloat(a,n):e},type:"numeric"}),t.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(t){return t?e.trim(t.replace(/(https?|ftp|file):\/\//,"")):t},type:"text"}),t.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,n){return e?t.formatFloat(""!==e&&new Date(e.replace(/-/g,"/")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,n){return e?t.formatFloat(e.replace(/%/g,""),n):e},type:"numeric"}),t.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,n,r,i){if(e){var a=n.config,o=a.headerList[i],s=o.dateFormat||t.getData(o,a.headers[i],"dateFormat")||a.dateFormat;e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===s&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?t.formatFloat(new Date(e).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,n,r){var i=n.config,a=i.parserMetadataName?i.parserMetadataName:"sortValue";return e(r).metadata()[a]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(n,r,i){var a,o,s,l,u,c,d=new RegExp(r.cssChildRow,"i"),f=r.$tbodies;for(r.debug&&(u=new Date),c=0;c<f.length;c++)(a=f.eq(c)).children("tr").length>1&&(s=0,a.children("tr:visible").each(function(){o=e(this),d.test(this.className)||s++,l=s%2==0,o.removeClass(i.zebra[l?1:0]).addClass(i.zebra[l?0:1])}));r.debug&&t.benchmark("Applying Zebra widget",u)},remove:function(t,n,r){var i,a,o=n.$tbodies,s=(r.zebra||["even","odd"]).join(" ");for(i=0;i<o.length;i++)(a=e.tablesorter.processTbody(t,o.eq(i),!0)).children().removeClass(s),e.tablesorter.processTbody(t,a,!1)}})}(r)},rNU7:function(e,t,n){"use strict";e.exports=n("HHS1")},rXeC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("Vh6Q"),n("CCL3"),n("v4vi"),n("A/M2"),n("IhN0"),n("RIos"),n("UBnO"),n("+V2Z"),n("FPSz"),n("CuRd"),n("HW66"),n("BQ76"),n("kUTX"),n("SzcX"),n("vf3z"),n("k7Hi"),n("iUX3"),n("6TZa"),n("l8Wg"),n("E7OR"),n("Y0+b"),n("ybIR"),n("RORv"),n("h1HY"),n("sWK4"),n("0JET"),n("DXZ8"),n("c1YT"),n("LOOJ"),n("6CtT"),n("Tqsz"),n("oAbu"),n("oTWu"),n("zx33"),n("lRBY"),n("mZAT"),n("98MR"),n("thKT"),n("M99n"),n("p44K"),n("h8C7"),n("GCDY"),n("iptH"),n("91We"),n("MfwZ"),n("7HQH"),n("EZtX"),n("mvPF"),n("45vE"),n("grXb"),n("5Sqs"),n("LNuh"),n("jN36"),n("jAPW"),n("orei");var o=a.default;t.default=o},rbUO:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("MA+5")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(".widget_show").livequery(function(){var e=(0,r.default)(this),t=e.find(".size form"),n=e.find(".video .code"),o=t.find(".custom"),s=n.data("path");function l(e,t){var r=(0,i.default)("widgets/_video_embed_code",{width:e,height:t,path:s});o.find("input#width").val(e),o.find("input#height").val(t),n.find("textarea").val(r)}l(480,Math.ceil(270)),t.find("input.radio").on("change",function(){var e=(0,r.default)("input.radio:checked"),i=e.closest("label");t.find("label").removeClass("selected"),i.addClass("selected"),l(i.data("width"),i.data("height")),n.find("textarea").select(),e.is("#widget-size_size-custom")&&i.find("input.text").val("").eq(0).select()}),o.find("input").on("keyup input cut paste",function(e){var t=(0,r.default)(e.target),n=o.find("input#width").val(),i=o.find("input#height").val();t.is("#width")?i=Math.ceil(n/(16/9)):n=Math.ceil(i*(16/9)),l(n,i)}),e.find("#video_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"video_embed"})}),e.find("#widget_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"widget_embed"})}),e.find("#shortlink_embed").on("click",function(){(0,a.track)("Project Share",{share_type:"shortlink_embed"})})})})},rmI3:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=".NS_backings__info";(0,r.default)(document).on("message_sent",e+" .messages_panel",function(t,n,a){(0,r.default)(this).closest(e).find(".messages_link").html(i.default.t("onloads.views.backings.info.Messages_count",{count:a}))}),(0,r.default)(document).on("click",e+" .js-backing-complete form",function(t){var n=(0,r.default)(this),i=n.find("label.with_data"),a=n.find(".checkbox"),o=!i.data("completed");t.preventDefault(),r.default.ajax({url:n.attr("action"),data:{"backing[backer_completed]":o},dataType:"json",type:"PUT",success:function(t){n.trigger("backer_completed",[n.closest(e).data("backing_id"),t.backing.backer_completed_at]),a.prop("checked",o),i.data("completed",o),i.toggleClass("js-completed",o)}})})})},s94J:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){e.jGrowl=function(t,n){0===e("#jGrowl").length&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo(n&&n.appendTo?n.appendTo:e.jGrowl.defaults.appendTo),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(void 0===n&&e.isPlainObject(t)&&(t=(n=t).message),e.isFunction(this.each)){var r=arguments;return this.each(function(){void 0===e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(r).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var r=e.extend({},this.defaults,n);void 0!==r.speed&&(r.openDuration=r.speed,r.closeDuration=r.speed),this.notifications.push({message:t,options:r}),r.log.apply(this.element,[this.element,t,r])},render:function(t){var n=this,r=t.message,i=t.options;i.themeState=""===i.themeState?"":"ui-state-"+i.themeState;var a=e("<div/>").addClass("jGrowl-notification alert "+i.themeState+" ui-corner-all"+(void 0!==i.group&&""!==i.group?" "+i.group:"")).append(e("<button/>").addClass("jGrowl-close").html(i.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(i.header)).append(e("<div/>").addClass("jGrowl-message").html(r)).data("jGrowl",i).addClass(i.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return e(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();e(a).bind("mouseover.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){!1!==i.beforeOpen.apply(a,[a,r,i,n.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){!1!==i.open.apply(a,[a,r,i,n.element])&&("after"==i.glue?e(".jGrowl-notification:last",n.element).after(a):e(".jGrowl-notification:first",n.element).before(a),e(this).animate(i.animateOpen,i.openDuration,i.easing,function(){!1===e.support.opacity&&this.style.removeAttribute("filter"),null!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){i.afterOpen.apply(a,[a,r,i,n.element])}).bind("click",function(){i.click.apply(a,[a,r,i,n.element])}).bind("jGrowl.beforeClose",function(){!1!==i.beforeClose.apply(a,[a,r,i,n.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(i.animateClose,i.closeDuration,i.easing,function(){e.isFunction(i.close)?!1!==i.close.apply(a,[a,r,i,n.element])&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==i.corners&&void 0!==e.fn.corner&&e(a).corner(i.corners),e(".jGrowl-notification:parent",n.element).length>1&&0===e(".jGrowl-closer",n.element).length&&!1!==this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life,10)<(new Date).getTime()&&!0!==e(this).data("jGrowl").sticky&&(void 0===e(this).data("jGrowl.pause")||!0!==e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||e(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find(".jGrowl-notification:parent").length<2&&e(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){var n=e(t).data("jGrowl.instance");void 0!==n&&n.update()},parseInt(this.defaults.check,10))},shutdown:function(){e(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){e(this.element).find(".jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(r)},s9QN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("3zLD"),a=n("fp5o"),o=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.withApollo)(o.default)},sSrd:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("wmCY")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,a.trackLinks)(".js-switch-to-login","Signup to Login Switch"),(0,r.default)(document).on("blur","#new_user input#user_email",function(){(0,r.default)(this).mailcheck({suggested:function(e,t){var n=(0,r.default)('<div class="mailcheck_suggestion f5 grey-dark mb1">'+i.default.t("onloads.views.users.new.Did_you_mean",{suggestion:t.full})+"</div>");e.siblings(".mailcheck_suggestion").remove(),n.find("a").on("click",function(n){n.preventDefault(),e.val(t.full)}),e.before(n),n.slideDown(),"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors","Invalid domain or TLD detected",e.val())},ignoreTLDs:!0})})})},sWK4:function(e,t,n){"use strict";var r=s(n("DkOX")),i=s(n("I1z3")),a=s(n("wmCY")),o=n("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}var l=n("l/Rs");n("l/Rs");!function(e){function t(t,n){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var r=t.children(),i=r.children(),a=i.children(),o=t.add(r).add(i).add(a).add(this.$close_a);this.options=e.extend({close_link:o,scroll_margin:20,ignore_parent:!1,prevent_close:!1},n),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}e.fn.modal_dialog=function(n){return n=n||{},e(this).each(function(){var r=e(this).data("modal_dialog");r||(r=new t(e(this),n),e(this).data("modal_dialog",r)),r.open()})};var n={};e.create_modal_dialog=function(n,r,i){i=i||{},n.length&&(n="<h4>"+n+"</h4>");var a,o=e('<div class="modal_dialog '+(void 0!==i.theme?i.theme:"dark")+(void 0!==i.class_name?" "+i.class_name:"")+'"'+(void 0!==i.id?' id="'+i.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+n+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+r+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(o),a=new t(o,i),o.data("modal_dialog",a),o},e.create_login_modal=function(t,n){(0,o.track)("Application Login or Signup",{context:"Login",type:"modal",intent:n});var r=e.create_modal_dialog("",t);r.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(r.find(".modal_dialog_body")[0])},e.open_remote_modal_dialog=function(t,i){var a=e(".modal_dialog:visible");if(!a.data("modal_dialog")||a.data("modal_dialog").remote_url!==t){var o=function(t,i){var a,o=e([]);return e.each(n,function(e){(0,r.default)(t,e,{include_query:!0})&&(a=this)}),a||((o=e.create_modal_dialog(i.title||"","spinner",i)).addClass("spinning"),(a=o.data("modal_dialog")).remote_url=t,a.remote_xhr=e.ajax({url:t,type:"get",dataType:i.dataType,beforeSend:i.beforeSend,success:function(n){var r=e(n);i.remote_modal_dialog_contents_loaded&&i.remote_modal_dialog_contents_loaded.apply(this,[r,i,t]),o.find(".modal_dialog_body").html(r),o.removeClass("spinning"),o.trigger("size_change"),o.trigger("modal_dialog:remote_dialog_loaded")},error:function(){o.trigger("modal_dialog:errored",arguments),o.remove(),delete n[t]}}),i.do_not_cache||(n[t]=a)),a}(t,i=i||{});return o.open(),o}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,n=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),n.on("click.modal_dialog",function(e){-1!==n.index(e.target)&&(t.close(e),e.preventDefault())}),this.$elem.keydown(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var n=e(document).height(),r=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,i=this.$elem.find("div.modal_dialog_inner"),a=i.height(),o=this.options.scroll_margin,s=r+a+2*o,l=(s>n?s:n)-r-a-2*o,u="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",n),u&&!t||(i.css("margin-top",r+o),i.css("margin-bottom",l))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),n=["position","top"],r=["margin-top","margin-bottom"],i=this;e.each(n,function(e){var t=n[e];i._elem_original_css[t]=i.$elem.css(t)}),e.each(r,function(e){var n=r[e];i._inner_original_css[n]=t.css(n)})},_get_viewport_height:function(){return i.default.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,n=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],n.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","scroll"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,n){var r,i,o,s={message:a.default.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:a.default.t("library.modal_dialog.Confirm"),cancel_text:a.default.t("library.modal_dialog.Cancel"),title:a.default.t("library.modal_dialog.Are_you_sure")};r='<div style="max-width:600px;">'+(n=e.extend({},s,n)).message+'<p class="clearfix"><a class="confirm btn btn--blue left" href="#">'+n.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+n.cancel_text+"</a></p></div>",i=e.create_modal_dialog(n.title,r),o=i.data("modal_dialog"),i.find(".cancel").click(function(e){e.preventDefault(),o.close()}),i.find(".confirm").click(function(e){e.preventDefault(),t.call(i),o.close()}),o.open()}}(l)},sWQm:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("9VV1")),a=n("ZG75"),o=s(n("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){(0,r.default)(document).on("project_added_to_curated_page",function(e,t){var n=(0,r.default)("#add_to_curated_page_widget .button-curate");n.addClass("on"),n.attr("href",t.edit_url)}),void 0!==o.default&&o.default.on_change("pledged",function(){var e=(0,r.default)("#stats"),t=e[0].className.match(/digits_\d+/),n="digits_"+Math.floor(o.default.get("pledged")).toString().length;t&&t[0]!==n&&e.removeClass(t[0]).addClass(n)}),(0,r.default)(".js-checkout-poller").livequery(function(){var e=(0,r.default)(this),t=(0,r.default)('<span class="spinner" />').spin("ksr","#333");e.append(t),r.default.pollster(e.data("href"),function(t){return"successful"===t.state?(window.location.reload(),!0):"failed"===t.state?((0,i.default)({error:t.state_reason}),e.closest(".notification-message").remove(),!0):void 0},{delay:2500})});var e={};(0,r.default)(".poll[data-dynamic]").livequery(function(){var t,n=(0,r.default)(this),i=parseInt(n.data("dynamic"),10),o=n.data("poll_url"),s=5,l=60;function u(e){var n,r=e.responseText;if("string"==typeof r)try{r=JSON.parse(r)}catch(e){r={}}r.project&&(n=a.Project.find(r.project.id),i=r.poll_interval_override||function(e,t,n){var r;return t.get("pledged")!==n.pledged||t.get("comments_count")!==n.comments_count?(r=e-Math.ceil((e-s)/2),Math.max(r,s)):(r=e+10,Math.min(r,l))}(i,n,r.project),n.set(r.project)),t(i)}o&&"number"==typeof i&&!isNaN(i)&&(t=function(t){e[o]=setTimeout(function(){e[o]=r.default.ajax({global:!1,url:o,complete:u})},1e3*t)})(i)},function(){var t=e[(0,r.default)(this).data("poll_url")];"number"==typeof t?clearTimeout(t):"function"==typeof t.abort&&t.abort()})})},sYfk:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("submit","#beneficiary_container form.beneficiary_reset",function(e){var t=(0,a.default)(this),n=(0,a.default)('<div class="spinner" />').spin("ksr","#fff");t.closest("#beneficiary_container").append(n),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(e){t.closest("#account-setup-panel").html(e)}}),e.preventDefault()})})},sZX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},"slH/":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};(0,a.default)(function(){(0,a.default)(document).on("submit","ol.admin-notes form",function(){var e,t=(0,a.default)("#admin-menu .note_count"),n=t.text().match(/^(\d+)/);n&&(e=parseInt(n[1],10),t.text(e+1+" notes"))})})},stBO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var r,i=n("TXOG"),a=(r=i)&&r.__esModule?r:{default:r}},sxpx:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r},o=n("4RZc");(0,a.default)(function(){(0,a.default)(document).on("click",".js-tabbed-nav-link",function(e){(0,a.default)(".js-tabbed-nav-link").removeClass("is-active"),(0,a.default)(this).addClass("is-active"),(0,a.default)(".js-tabbed-nav-panel").removeClass("is-active"),(0,a.default)(".js-tabbed-nav-panel[data-panel="+(0,a.default)(this).data("panel")+"]").addClass("is-active"),(0,o.track)((0,a.default)(this).closest(".js-tabbed-nav").data("tracking_name"),{toggled_to:(0,a.default)(this).data("panel")}),e.preventDefault()})})},"t/I/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locatedError=function(e,t,n){if(e&&Array.isArray(e.path))return e;return new r.GraphQLError(e&&e.message,e&&e.nodes||t,e&&e.source,e&&e.positions,n,e)};var r=n("QmgZ")},tAtq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notify=t.reducer=void 0;var r=n("EIRz"),i=n("tryQ"),a=(t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"APPLE_PAY_CHECKOUT_FAILURE":case"APPLE_PAY_REQ_FAILURE":case"APPLE_PAY_VENDOR_ERROR":case"APPLE_PAY_TRACKING_ERROR":return a(e,t);default:return e}},function(e,t){return(0,r.loop)(e,r.Cmd.run(o,{args:[t.error]}))}),o=t.notify=function(e){Array.isArray(e)?e.forEach(function(e){return i.Honeybadger.notify(e)}):i.Honeybadger.notify(e)}},tI6b:function(e,t,n){"use strict";var r=a(n("rXeC")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("5Sqi"),(0,i.default)("body#projects_dashboard",function(){var e=(0,r.default)("#projects_dashboard #activity").find(".mobius").data("mobius");if(void 0===e)return!1;e.current_page=0,(0,r.default)(document).on("click","#projects_dashboard .activity-filters a",function(t){var n=(0,r.default)(this);n.closest(".activity-filters").find("a").removeClass("current"),n.addClass("current"),r.default.ajax({type:"get",dataType:"html",url:n.attr("href"),success:function(t){var i=(0,r.default)(t).find(".mobius").children();(0,r.default)("#activity .mobius").html(i).trigger("mobius:loaded_page",[1,i]),e.clear_extra_params(),e.add_param("cat",n.data("filter")),e.current_page=1}}),t.preventDefault()})})},tRFe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckout=t.redirectTo=t.generateTotalCost=t.reducer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("EIRz"),a=n("tryQ"),o=n("m+pb"),s=n("Z6GA"),l=n("oLWu"),u=n("Tvr3"),c=n("IPoO"),d=n("OXrv"),f=n("3e15"),h=n("dY/E"),p=n("NBJa"),m=n("c3QO"),g=n("pJCm"),v=n("49v0");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.reducer=function(e,t){switch(t.type){case"ASYNC_LOAD_SUCCESS":return C(e,t.data);case"SELECT_ON_VALUE_UPDATE":return I(e,t);case"ON_BLUR":return x(e,t);case"APPLE_PAY_CHECKOUT_FAILURE":case"APPLE_PAY_REQ_FAILURE":case"APPLE_PAY_VENDOR_ERROR":return k(e);case"ADD_MEMOIZED_SHIPPING_TO_SELECTED_REWARD":return E(e,t);case"REWARD_APPLE_PAY":return T(e,t.dispatch,(0,s.partial)(g.shippingValidations,e.selectedReward));case"REWARD_CHECKOUT_FAILURE":return y(e,t.err);case"REWARD_CONTINUE":return A(e,(0,s.partial)(g.shippingValidations,e.selectedReward));case"REWARD_REQUEST_REDIRECT":return R(e,t.path);case"REWARD_NEW_PLEDGE_VALUE":return r({},e,{selectedReward:r({},e.selectedReward,{totalCost:t.newValue})});case"REWARD_SAVE_OFFSET":return r({},e,{rewardsList:r({},e.rewardsList,_({},t.rewardId,r({},e.rewardsList[t.rewardId],{offsetHeight:t.offsetHeight})))});case"REWARD_SET_SELECTED_REWARD":return P(e,t.rewardFacts);case"REWARD_TOUCH_FIELD":return r({},e,{validation:(0,i.getModel)((0,p.handleTouchField)(e.validation,t.fieldName,(0,s.partial)(g.shippingValidations,e.selectedReward)))});case"REWARD_TRUNCATE_DESCRIPTION":return r({},e,{selectedReward:r({},e.selectedReward,{truncated:c.CLOSED})});case"REWARD_TRUNCATION_TOGGLE":var n=e.selectedReward.truncated===c.CLOSED?c.EXPANDED:c.CLOSED;return r({},e,{selectedReward:r({},e.selectedReward,{truncated:n})});case"REWARD_UPDATE_APPLE_PAY":return S(e,t);case"REWARD_FREEZE_PIN":return r({},e,{selectedReward:r({},e.selectedReward,{doNotPin:!0})});case"NOOP":default:return e}};var y=function(e,t){return r({},e,{validation:r({},e.validation,{serverErrors:t})})},b=t.generateTotalCost=function(e,t){return(+(0,l.digitsOnly)(e)||0)+(+(0,l.digitsOnly)(t)||0)},w=t.redirectTo=function(e){window.location.href=window.location.pathname.replace(location.pathname,e)},E=function(e,t){var n=(0,i.getModel)(I(e,t)),r=(0,h.namespaceActionFactory)(t.namespace)(f.changeSelectedIndex)(t.userLocationIndex,"Selected from user location");return(0,i.loop)(n,i.Cmd.batch([i.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION)),i.Cmd.action(r)]))},k=function(e){return y(e,[{message:"We're sorry. Something went wrong with Apple Pay. Please try another payment option or try again."}])},S=function(e,t){var n=r({},e,{pledgeData:r({},e.pledgeData,{applePayCapable:t.newValue})});return t.newValue?(0,i.loop)(n,i.Cmd.run(v.toggleApplePayClasses)):n},C=function(e,t){var n=t.reward.shippingRulesExpanded.nodes.map(function(t){var n=t.cost.symbol||e.pledgeData.currencySymbol,r=+t.cost.amount>0?"(+ "+n+Math.round(+t.cost.amount)+")":"";return{label:t.location.name+" "+r,value:+t.cost.amount,shippingLocation:t.location.id}}),a=e.selectedReward.id,o=r({},e,{rewardsList:r({},e.rewardsList,_({},a,r({},e.rewardsList[a],{shippingRulesStatus:u.LOADED,shippingRules:r({},e.rewardsList[a].shippingRules,{options:n})})))}),l=n.findIndex(function(t){return(0,s.decodeId)(t.shippingLocation)==e.currentUser.location});if(l>-1){var c=n[l].value,d=b(e.selectedReward.pledgeCost,c);o=r({},o,{selectedReward:r({},o.selectedReward,{shippingLocation:n[l].shippingLocation,shippingCost:c,totalCost:d}),rewardsList:r({},o.rewardsList,_({},a,r({},o.rewardsList[a],{memoizedShippingOption:{value:n[l],userLocationIndex:l}})))})}var p=(0,h.namespaceActionFactory)(a)(f.changeSelectedIndex)(l,"Selected from user location");return(0,i.loop)(o,i.Cmd.action(p))},T=function(e,t,n){return(0,p.isValid)(n)?(0,i.loop)(e,i.Cmd.run(v.createApplePayCheckout,{args:[e,t],successActionCreator:s.identity,failActionCreator:function(e){return(0,v.onApplePayVendorErrors)(e)}})):r({},e,{validation:(0,i.getModel)((0,p.handleTouchAllFields)(e.validation,n))})},A=function(e,t){return(0,p.isValid)(t)?(0,i.loop)(e,i.Cmd.batch([i.Cmd.run(O,{args:[e],successActionCreator:s.identity,failActionCreator:s.identity}),i.Cmd.action((0,o.track)("Checkout Reward Continue Click"))])):r({},e,{validation:(0,i.getModel)((0,p.handleTouchAllFields)(e.validation,t))})},R=function(e,t){return(0,i.loop)(e,i.Cmd.run(w,{args:[t]}))},x=function(e,t){return t.namespace&&t.namespace===e.selectedReward.id?(0,i.loop)(e,i.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION))):e},P=function(e,t){var n=t.minPledge,a=t.id,s=t.shippingEnabled;if(a===e.selectedReward.id)return e;var l=s,c=n.amount,d=b(c,0),f=r({},e,{selectedReward:r({},e.selectedReward,{id:a,pledgeCost:c,shippingRequired:l,totalCost:d,shippingCost:0,shippingLocation:null,truncated:null,doNotPin:!1}),validation:r({},e.validation,{touched:{},errors:{},serverErrors:[]})}),h=e.rewardsList[a]?e.rewardsList[a].shippingRulesStatus:null,p=e.rewardsList[a]?e.rewardsList[a].memoizedShippingOption:null,g=l&&h===u.LOADED?i.Cmd.batch([i.Cmd.action((0,o.track)("Checkout Reward Click")),i.Cmd.action((0,m.addMemoizedShippingLocation)(p,a))]):i.Cmd.action((0,o.track)("Checkout Reward Click"));return(0,i.loop)(f,g)},I=function(e,t){var n=e.selectedReward,a=n.id,o=n.pledgeCost,s=n.totalCost,l=t.namespace,u=t.value,d=u.shippingLocation,f=u.value;if(l!==a)return e;var h=b(o,f),p=h>s?h:s;return(0,i.loop)(r({},e,{selectedReward:r({},e.selectedReward,{shippingCost:f,totalCost:p,shippingLocation:d})}),i.Cmd.action((0,m.validateField)(c.SHIPPING_LOCATION)))},O=t.createCheckout=function(e){var t=e.selectedReward,n=t.id,r=t.shippingLocation,i=t.totalCost,o=r?(0,s.decodeId)(r):void 0,l=e.projectId,u=i.toString();return(0,d.createCheckout)({projectId:l,amount:u,rewardId:n,locationId:o}).then(function(t){if(t.errors)return Promise.reject(t.errors);var n=(0,s.decodeId)(t.data.createCheckout.checkout.id),r=e.currentUser?"/checkouts/"+n+"/payments/new?clicked_reward=true":"/checkouts/"+n+"/guest/new?clicked_reward=true";return w(r),(0,m.noopAction)()}).catch(function(e){return e.forEach(function(e){return a.Honeybadger.notify(e)}),(0,m.onCheckoutFailure)(e)})}},tV3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createApplePayCheckout=t.paymentCompletion=t.thanksPage=t.finalizeCharge=t.createPledge=t.buildRequest=t.paddedString=t.initApplePay=t.canMakePaymentsWithApplePayCard=t.toggleApplePayClasses=t.checkApplePay=void 0;var r=n("Z6GA"),i=n("Z5jf"),a=n("twwy"),o=n("3+HK"),s=n("OXrv"),l=n("IPoO"),u=(t.checkApplePay=function(e,t){return!!(e&&t&&void 0!==e.current_user&&void 0!==e.current_project&&void 0!==e.apple_pay_countries&&"live"===e.current_project.get("state")&&!/\/retry$/.test(e.location.pathname)&&"pledges_edit"!==document.body.id&&e.apple_pay_countries.indexOf(e.current_project.get("country"))>=0)},t.toggleApplePayClasses=function(){document&&(document.body.classList.remove("not-apple-pay-capable"),document.body.classList.add("apple-pay-capable"))},t.canMakePaymentsWithApplePayCard=function(e,t){return function(n){return n?e():t()}}),c=(t.initApplePay=function(e,t){e&&"undefined"!=typeof Stripe?(Stripe.setPublishableKey(window.STRIPE_PUBLISHABLE_KEY),Stripe.applePay.checkAvailability(u(function(){return t(!0)},function(){return t(!1)}))):t(!1)},void 0),d=t.paddedString=function(e){var t=e.toString();return t.includes(".")?t:t.concat(".00")},f=t.buildRequest=function(e){var t=e.selectedReward.id,n=t===l.NO_REWARD?e.projectName+": No reward":e.rewardsList[t].title,r=d(e.selectedReward.totalCost);return{countryCode:e.pledgeData.projectCountry,currencyCode:e.pledgeData.projectCurrency,lineItems:[{label:""+(""===n?e.projectName:n),amount:r}],total:{label:"Kickstarter, PBC. ("+(0,i.boundT)("project_page.reward_form.applepay.if_funded")+")",amount:r}}},h=t.createPledge=function(e,t){var n=e.selectedReward,i=n.id,a=n.shippingLocation,o=n.totalCost,s=a?(0,r.decodeId)(a):void 0;return t({projectId:e.projectId,amount:o.toString(),rewardId:i,locationId:s}).then(function(e){return e.errors?Promise.reject(e.errors):{data:{checkoutURL:"/checkouts/"+(0,r.decodeId)(e.data.createCheckout.checkout.id)+"/payments"}}})},p=t.finalizeCharge=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fetch,i={token:e,payment_type:"apple_pay",apple_pay_capable:"1",authenticity_token:n},a={method:"POST",body:JSON.stringify(i),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}};return r(t.data.checkoutURL,a).then(function(e){return e.json()})},m=t.thanksPage=function(e,t){if(200!==e.status)return Promise.reject(e.data.message);t(ApplePaySession.STATUS_SUCCESS),window.location.pathname=""+e.data.thankyou_url.replace(/\?.*$/,"")},g=t.paymentCompletion=function(e,t,n){return function(r,i){try{(0,a.trackApplePayTokenCreated)()}catch(e){t((0,o.onApplePayTrackingError)(e))}h(e,n).then(function(t){return p(r.token.id,t,e.currentUser.authToken)}).then(function(e){m(e,i)}).catch(function(e){t((0,o.onApplePayCheckoutFailure)(e)),i(ApplePaySession.STATUS_FAILURE)})}};t.createApplePayCheckout=function(e,t){(c=Stripe.applePay.buildSession(function(e,t){var n=void 0;try{n=f(e)}catch(e){t((0,o.onApplePayRequestFailure)(e))}return n}(e,t),g(e,t,s.createCheckout),(0,r.partial)(function(e,t){return e((0,o.onApplePayVendorErrors)(t))},t))).oncancel=a.trackApplePayCancelled,(0,a.trackApplePayShowSheet)(),c.begin()}},tW2u:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n("zcFO")),a=l(n("GiK3")),o=l(n("KSGD")),s=(l(n("GvBW")),n("1olO"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var u=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return a.performAppear=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(a._handleDoneAppearing.bind(a,e,t)):a._handleDoneAppearing(e,t)},a._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performEnter=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(a._handleDoneEntering.bind(a,e,t)):a._handleDoneEntering(e,t)},a._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performLeave=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(a._handleDoneLeaving.bind(a,e,t)):a._handleDoneLeaving(e,t)},a._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)?a.keysToEnter.push(e):a.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},a.childRefs=Object.create(null),a.state={children:(0,s.getChildMapping)(n.children)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var a in n){var o=t&&t.hasOwnProperty(a);!n[a]||o||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,s=e.props.childFactory(r),l=function(t){e.childRefs[n]=t};s===r&&o&&(l=(0,i.default)(r.ref,l)),t.push(a.default.cloneElement(s,{key:n,ref:l}))}};for(var o in this.state.children)n(o);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,a.default.createElement(this.props.component,s,t)},t}(a.default.Component);u.displayName="TransitionGroup",u.propTypes={},u.defaultProps={component:"span",childFactory:function(e){return e}},t.default=u,e.exports=t.default},thKT:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n("l/Rs");!function(e){function t(t,n){this.$field=t,this.options=e.extend({on_invalid:null,format:"%H:%M %z",am:"am",pm:"pm"},n),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(n){return e(this).each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,n){e.set_time(n)})},_s_to_time:function(e){if("object"===r(Date.Parsing)){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var n,i=e.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i),a=!i;if(!a){var o=+i[1]%12,s=+i[3]||0,l=(i[4]||"").match(/p/i);i[4]||(l=+i[1]>=12),+i[1]>23&&(a=!0),+i[1]>12&&i[4]&&(a=!0),s>59&&(a=!0),+i[1]<1&&i[4]&&(a=!0);var u=""+(o+(l?12:0));1===u.length&&(u="0"+u);var c=""+s;1===c.length&&(c="0"+c),n=u+":"+c}return a?this.options.on_invalid:n},_time_to_s:function(t){if("object"===r(Date.Parsing)){var n=Date.parse(t);return n?n.toString("h:mm tt"):this.options.on_invalid}var i=t&&t.match(/(\d\d):(\d\d)/);if(i){var a=this.options.format,o=+i[1],s=+i[2],l=o>=12?this.options.pm:this.options.am,u=""+(o%12?o%12:12),c=""+s;return 1===c.length&&(c="0"+c),e([["%Hh",o],["%H",u],["%M",c],["%z",l]]).each(function(e,t){a=a.replace(t[0],t[1])}),a}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(n("l/Rs"))},thyB:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=e.find(".js-block-user").data("is-blocking"),n=e.find(".js-follow-user");t?n.addClass("hidden"):n.removeClass("hidden")}n("LNuh"),(0,a.default)(".js-social-actions").livequery(function(){var e=(0,a.default)(this);o(e),e.on("ksr:block_user ksr:unblock_user",function(){e.find(".js-follow-user").trigger("ksr:set_to_follow"),o(e)})})},tlQw:function(e,t,n){var r=n("6u75").parse;function i(e){return e.replace(/[\s,]+/g," ").trim()}var a={},o={};var s=!0;function l(e){var t=i(e);if(a[t])return a[t];var n=r(e);if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=function e(t,n){var r=Object.prototype.toString.call(t);if("[object Array]"===r)return t.map(function(t){return e(t,n)});if("[object Object]"!==r)throw new Error("Unexpected input.");n&&t.loc&&delete t.loc,t.loc&&(delete t.loc.startToken,delete t.loc.endToken);var i,a,o,s=Object.keys(t);for(i in s)s.hasOwnProperty(i)&&(a=t[s[i]],"[object Object]"!==(o=Object.prototype.toString.call(a))&&"[object Array]"!==o||(t[s[i]]=e(a,!0)));return t}(n=function(e){for(var t,n={},r=[],a=0;a<e.definitions.length;a++){var l=e.definitions[a];if("FragmentDefinition"===l.kind){var u=l.name.value,c=i((t=l.loc).source.body.substring(t.start,t.end));o.hasOwnProperty(u)&&!o[u][c]?(s&&console.warn("Warning: fragment with name "+u+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),o[u][c]=!0):o.hasOwnProperty(u)||(o[u]={},o[u][c]=!0),n[c]||(n[c]=!0,r.push(l))}else r.push(l)}return e.definitions=r,e}(n),!1),a[t]=n,n}function u(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;r<e.length;r++)e[r]&&e[r].kind&&"Document"===e[r].kind?n+=e[r].loc.source.body:n+=e[r],n+=t[r];return l(n)}u.default=u,u.resetCaches=function(){a={},o={}},u.disableFragmentWarnings=function(){s=!1},e.exports=u},tryQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Honeybadger=void 0;var r,i=n("tskP"),a=(r=i)&&r.__esModule?r:{default:r},o=n("pS1G");if(window.honeybadgerConfiguration){var s=window.honeybadgerConfiguration;/(kickstarter\.com|d\.rip)$/.test(window.location.hostname)||(s.disabled=!0),a.default.configure(s)}"function"==typeof a.default.setContext&&a.default.setContext((0,o.buildHoneybadgerContext)()),"function"==typeof a.default.beforeNotify&&a.default.beforeNotify(function(e){if(/(ksr|drip)\.test/.test(window.location.hostname))return console.error("Honeybadger in development",e),!1}),t.Honeybadger=a.default},twwy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackApplePayTokenCreated=t.trackApplePayShowSheet=t.trackApplePayShowButtons=t.trackApplePayErroredStripe=t.trackApplePayErroredShippingSelection=t.trackApplePayErroredReward=t.trackApplePayErroredKSR=t.trackApplePayCancelled=void 0;var r=n("orEx"),i=n("4RZc");t.trackApplePayCancelled=function(){(0,i.track)("Canceled Apple Pay Sheet",{context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredKSR=function(e){var t=e.type;(0,i.track)("Apple Pay Kickstarter Errored",{type:t,context:(0,r.getContextFromPathName)(window.location.pathname)}),(0,i.track)("Errored Apple Pay Kickstarter",{type:t,context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredReward=function(e){var t=e.type;(0,i.track)("Apple Pay Errored Reward Continue",{type:t,context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredShippingSelection=function(){(0,i.track)("Apple Pay Shipping Selection Errored",{context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayErroredStripe=function(e){var t=e.type;(0,i.track)("Apple Pay Stripe Token Errored",{type:t,context:(0,r.getContextFromPathName)(window.location.pathname)}),(0,i.track)("Errored Apple Pay Stripe Token",{type:t,context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayShowButtons=function(){(0,i.track)("Showed Apple Pay Buttons",{context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayShowSheet=function(){(0,i.track)("Apple Pay Show Sheet",{context:(0,r.getContextFromPathName)(window.location.pathname)}),(0,i.track)("Showed Apple Pay Sheet",{context:(0,r.getContextFromPathName)(window.location.pathname)})},t.trackApplePayTokenCreated=function(){(0,i.track)("Apple Pay Stripe Token Created",{context:(0,r.getContextFromPathName)(window.location.pathname)}),(0,i.track)("Created Apple Pay Stripe Token",{context:(0,r.getContextFromPathName)(window.location.pathname)})}},txGb:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("8NzR")),a=u(n("+bVi")),o=u(n("9VV1")),s=u(n("wmCY")),l=n("4RZc");function u(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#mobile_index",function(){var e,t=(0,r.default)(".js-device-container"),n=1,i=1,u=!1;function c(){var e,t,n,i=(0,r.default)(".js-tablet"),a=(0,r.default)(".js-tablet-item"),o=(0,r.default)(".js-tablet-screenshots"),s=.875*(0,r.default)(".js-device-container").outerWidth();.75*(0,r.default)(window).width()<=640?(0,r.default)(".js-device-container").css({width:"100%",height:Math.round(.65625*(0,r.default)(".js-device-container").width())}):(0,r.default)(".js-device-container").css({width:640,height:Math.round(420)}),i.css({width:s}),o.css({width:"100"*a.length+"%"}),a.css({width:100/a.length+"%"}),e=(0,r.default)(".js-phone"),t=(0,r.default)(".js-phone-item"),n=(0,r.default)(".js-phone-screenshots"),e.css({height:.78*(0,r.default)(".js-tablet").outerHeight(),width:Math.round(.78*(0,r.default)(".js-tablet").outerHeight()*.5625)}),n.css({width:"100"*t.length+"%"}),t.css({width:100/t.length+"%"})}(0,r.default)(document).on("submit",".js-send-mobile-link-form",function(e){e.preventDefault();var t=(0,r.default)(this);""===t.find(".js-email-or-phone").val()?(0,o.default)({error:s.default.t("onloads.views.mobile.index.phone_cant_be_blank")}):u||(u=!0,r.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find(".js-email-or-phone").val(),platform:t.find(".js-platform").val()},success:function(e){e.success?(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().removeClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.success),t.closest(".js-get-the-app-form-container").find(".js-form-retry").hide(),t.hide()):e.error&&(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().addClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.error))},complete:function(){u=!1}}))}),a.default["not-ios"]&&((0,r.default)(".js-get-the-app-button").on("click",function(e){var t=(0,r.default)(this).closest(".js-get-the-app-container");(0,l.track)("Mobile Promo Reveal Form"),t.find(".js-get-the-app-button-container").css({marginTop:-(0,r.default)(this).outerHeight()}),t.addClass("is-open"),setTimeout(function(){t.find(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,r.default)(".js-email-or-phone").on("focusout",function(){var e=(0,r.default)(this).closest(".js-get-the-app-container");""===(0,r.default)(this).val()&&e.is(".is-open")&&(e.find(".js-get-the-app-button-container").css({marginTop:0}),e.removeClass("is-open"),(0,l.track)("Mobile Promo Close Form"))}),(0,r.default)(".js-form-retry").on("click",function(e){var t=(0,r.default)(this).closest(".js-get-the-app-container");t.find(".js-get-the-app-button-container").css({marginTop:-(0,r.default)(".js-get-the-app-button").outerHeight()}),t.removeClass("is-open"),t.find(".js-form-text").html(""),t.find(".js-form-message").hide(),(0,l.track)("Mobile Promo Form Retry"),e.preventDefault()})),(0,r.default)(document).resize(function(){c()}),setTimeout(function(){c(),t.removeClass("is-loading")},1400),clearInterval(e),e=setInterval(function(){(0,r.default)(".js-tablet-screenshots").css({marginLeft:-100*n+"%"}),(n+=1)>=(0,r.default)(".js-tablet-item").length&&(n=0),(0,r.default)(".js-phone-screenshots").css({marginLeft:-100*i+"%"}),(i+=1)>=(0,r.default)(".js-phone-item").length&&(i=0)},5e3)})},"uA/L":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strong=t.Em=t.Div=t.Span=t.Label=t.Paragraph=t.Heading=t.FONTS=t.DEFAULT_FONT=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r};var s=t.DEFAULT_FONT="helvetica",l=t.FONTS={helvetica:{sizes:{"headline-500":"type-38 type-48-sm type-60-md type-100-lg","headline-400":"type-38 type-48-sm type-60-md type-80-lg","headline-300":"type-21 type-38-md type-48-lg","headline-200":"type-24 type-28-md type-38-lg","headline-100":"type-21 type-24-md type-28-lg","subhead-600":"type-18 type-21-md","subhead-500":"type-16 type-21-md","subhead-400":"type-14 type-21-md","subhead-300":"type-16 type-18-md","subhead-200":"type-14 type-18-md","body-200":"type-14 type-16-md","body-100":"type-13 type-14-md","caption-200":"type-12 type-13-md","caption-100":"type-12"},variants:{italic:"text-italic"},weights:{light:"light",normal:"normal",medium:"medium",bold:"bold"}}},u=function(e){var t=e.atoms,n=void 0===t?[]:t,r=e.children,i=e.color,a=e.font,u=void 0===a?l[s]:a,c=e.italic,d=void 0!==c&&c,f=e.level,h=e.style,p=e.tag,m=e.type,g=e.weight,v=f?"h"+f:p,_=(m?[u.sizes[m]]:[]).concat(i?[i]:[]).concat(d?[u.variants.italic]:[]).concat(g?[u.weights[g]]:[]).concat(n).join(" ");return o.default.createElement(v,{style:h,className:_},r)};t.Heading=function(e){var t=e.level,n=void 0===t?3:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["level"]);return o.default.createElement(u,i({level:n},r),r.children)};t.Paragraph=function(e){return o.default.createElement(u,i({},e,{tag:"p"}),e.children)},t.Label=function(e){return o.default.createElement(u,i({},e,{tag:"label"}),e.children)},t.Span=function(e){return o.default.createElement(u,i({},e,{tag:"span"}),e.children)},t.Div=function(e){return o.default.createElement(u,i({},e,{tag:"div"}),e.children)},t.Em=function(e){return o.default.createElement(u,i({},e,{tag:"em",italic:!0}),e.children)},t.Strong=function(e){return o.default.createElement(u,i({},e,{tag:"strong",weight:"medium"}),e.children)}},uQxE:function(e,t,n){"use strict";var r=h(n("l/Rs")),i=h(n("shXp")),a=h(n("9VV1")),o=h(n("wmCY")),s=n("Tvaj"),l=h(n("xgGG")),u=h(n("MA+5")),c=h(n("WO7S")),d=n("4RZc"),f=h(n("hBlz"));function h(e){return e&&e.__esModule?e:{default:e}}n("hsYx"),n("452R"),n("v6Dq"),n("mjY1"),(0,r.default)(function(){function e(){return(0,f.default)(window.location)}if(window.backers){var t,n=[],h=e(),p=!1,m=h.query(!0).show_responses||KSR.store.getItem("backer_report_show_responses");t=new l.default(null,(0,r.default)("#main"),"backer_report/_index",{mobius_on:"backers"}),(0,d.track)("Backer Report View"),i.default.has(h.query(!0),"show_responses")&&KSR.store.setItem("backer_report_show_responses",h.query(!0).show_responses),"string"==typeof m&&(m="true"===m),t.on_change_params(function(){n=[],(0,r.default)("form.term").term_form().bind("submit",function(e){e.preventDefault();var n=(0,r.default)(this);t.set_params(n.serialize_without_blank()),(0,d.track)("Backer Report Search",{term:n.find(":input").val()})}),function(){var t=e().query(!0).reward_id,n=(0,r.default)(".NS-backer_report__header .remote_modal_dialog");if(t&&n.length>0){var i=(0,f.default)(n.attr("href")).removeSearch("reward_id").addSearch("reward_id",t);n.attr("href",i)}}(),(0,r.default)("form.term .text").trigger("keydown"),t.get("params.reward_id")||"dropped"===t.get("params.status")||((0,r.default)("#reward, #reward_message, ul.dropdown li.all").remove(),(0,r.default)(".reward_tiers .title > span.reward b").text(o.default.t("onloads.views.backer_report.index.All_rewards")));var i=(0,r.default)("#main input[name=note]:visible, #main input[name=note_not]:visible");i.focus(),i.val(i.val()),t.change()}),(0,r.default)(document).on("click","#main table th",function(n){var i,a=(0,r.default)(this).data("sort"),o=e(),s=o.search(!0);a&&(n.preventDefault(),"asc"===s.asc_or_desc&&s.sort_by===a?(i="desc",o.removeSearch("asc_or_desc").addSearch("asc_or_desc",i)):(i="asc",o.removeSearch("asc_or_desc").addSearch("asc_or_desc",i)),o.removeSearch("sort_by").addSearch("sort_by",a),(0,d.track)("Backer Report Sort",{selected_sort:a,selected_order:i}),t.set_params(o.query()))}),t.on_change(function(){var e=(0,r.default)("#main");i.default.each(this.get("backers"),function(r){i.default.contains(n,r.id)||(n.push(r.id),r.project_is_successful="successful"===t.get("project.state"),r.showMessages=t.get("showMessages"),r.showRewards=t.get("showRewards"),r.show_responses=m,r.disputed_filter_enabled="true"===t.get("params.disputed"),r.dispute_status=t.get("dispute_statuses")[r.id],e.find("table tbody").append((0,u.default)("backer_report/_row",r)))})}),(0,r.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.params&&t.set_params(e.params),"string"==typeof e.modal_url?r.default.open_remote_modal_dialog(e.modal_url):(p=!0,(0,r.default)(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),p=!1))}),(0,r.default)(window).on("set_params",function(e,n){t.set_params(n)}),(0,r.default)(document).on("click","#main .dropdown a",function(e){var n,a=(0,r.default)(this),o=a.closest(".dropdown"),s=o.closest(".ksr-dropdown");o.find("a").removeClass("selected"),a.addClass("selected"),n={},(0,r.default)(".dropdown a.selected").each(function(){var e=(0,r.default)(this);i.default.extend(n,(0,f.default)(e.attr("href")).query(!0))}),t.set_params(r.default.param(n),!0),e.preventDefault(),s.hasClass("reward_tiers")?(0,d.track)("Backer Report Reward Filter",{selected_tier:r.default.trim((0,r.default)(this).find("b").text())}):s.hasClass("views")&&(0,d.track)("Backer Report Views Filter",{selected_tier:r.default.trim((0,r.default)("#main .reward_tiers .title b").text()),selected_view:r.default.trim((0,r.default)(this).find("span").text())})}),(0,r.default)(document).on("keyup","form.aggregations input[name=note], form.aggregations input[name=note_not]",function(e){13===e.which&&(0,r.default)(this).trigger("change")}),(0,r.default)(document).on("click","#main table tbody tr a",function(){g((0,r.default)(this).closest("tr"))}),(0,r.default)(window).on("backer_completed",function(e,t,n){(0,r.default)("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+t+"]").toggleClass("completed",n)}),(0,r.default)(window).on("creator_backing_note:added",function(e,t,n){(0,r.default)("#main table tbody tr[data-backing_id="+t+"] td.notes a").text(n)}),(0,r.default)(window).on("message_sent",function(e,t,n){(0,r.default)("#main table tbody tr[data-backing_id="+t+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+n+")")}),(0,r.default)(window).on("modal_dialog:opened",function(t){var n=(0,r.default)(t.target).data("modal_dialog");History.busy()||History.pushState({modal_url:n.remote_url},null,e().hash("").toString())}),(0,r.default)(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=(0,r.default)(e.target),n=t.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),i=(0,r.default)('tr[data-backing_id="'+n+'"]'),a=i.prev("tr"),o=i.next("tr"),s=t.find(".NS_backers__info");o.length&&(0,r.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),v(),(0,d.track)("Backer Info Modal Next",{event_type:"click"})}).prependTo(s.find(".controls")),a.length&&(0,r.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),_(),(0,d.track)("Backer Info Modal Previous",{event_type:"click"})}).prependTo(s.find(".controls"))}),(0,r.default)(window).on("closed.modal_dialog",function(){if(!p){var e=r.default.param(t.get("params")),n=h.clone();History.pushState({params:e},null,n.query(e).hash("").toString())}}),(0,r.default)(window).on("keydown",function(e){if(!(0,r.default)(e.target).is(":input"))switch(e.keyCode){case s.J:case s.RIGHT:v(),(0,d.track)("Backer Info Modal Next",{event_type:"keyboard"});break;case s.K:case s.LEFT:_(),(0,d.track)("Backer Info Modal Previous",{event_type:"keyboard"});break;case s.ENTER:(0,r.default)(".NS_backers__info:visible").trigger("close").length||(0,r.default)("#main tbody tr.selected td.backer a").click();break;case s.ESC:(0,r.default)(".NS_backers__info:visible").trigger("close")}}),(0,r.default)(window).on("message_thread_read",function(e,t){(0,r.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").removeClass("notification-indicator--active")}),(0,r.default)(window).on("message_thread_unread",function(e,t){(0,r.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").addClass("notification-indicator--active")}),(0,r.default)(".NS_message_batches__new").livequery(function(){var e=(0,r.default)(".NS_message_batches__new"),t=e.find("form");t.find("textarea").validates_presence(),t.on("submit",function(n){n.preventDefault(),t.validate()&&((0,d.track)("Message Tier Sent"),r.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(){e.find("textarea").val(""),t.hide(),e.find(".success").show()},error:function(e){(0,a.default)({error:e.statusText})}}))})}),t.set((0,c.default)(window.backers)),t.change_params(h.query()),window.backers=t}function g(e){e.is(".selected")||((0,r.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),p=!0,(0,r.default)(".NS_backers__info:visible").trigger("close").length&&e.find(".backer a").click(),p=!1,e.index()>e.parent().children().length-10&&!t.mobius.paused&&t.mobius.load_next())}function v(){var e=(0,r.default)("#main tbody tr.selected");e.length?g(e.next()):g((0,r.default)("#main tbody tr:first"))}function _(){var e=(0,r.default)("#main tbody tr.selected");e.length?g(e.prev()):g((0,r.default)("#main tbody tr:last"))}})},uVjx:function(e,t,n){n("l/Rs"),n("l/Rs");(function(e){var t,n=0,r=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(n){var r,i,a;for(a=0;null!=(i=n[a]);a++)try{(r=e._data(i,"events"))&&r.remove&&e(i).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,r){var i,a,o,s,l={},u=t.split(".")[0];return t=t.split(".")[1],i=u+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[u]=e[u]||{},a=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(r,function(t,r){var i,a;e.isFunction(r)?l[t]=(i=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=i,this._superApply=a,e=r.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=r}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a&&s.widgetEventPrefix||t},l,{constructor:o,namespace:u,widgetName:t,widgetFullName:i}),a?(e.each(a._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,i,a=r.call(arguments,1),o=0,s=a.length;o<s;o++)for(n in a[o])i=a[o][n],a[o].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,s=r.call(arguments,1),l=this;return o?this.each(function(){var n,r=e.data(this,i);return"instance"===a?(l=r,!1):r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(n=r[a].apply(r,s))!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):(s.length&&(a=e.widget.extend.apply(null,[a].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(a||{}),t._init&&t._init()):e.data(this,i,new n(a,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(r=t.split(".")).shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),a=0;a<r.length-1;a++)i[r[a]]=i[r[a]]||{},i=i[r[a]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,a=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=r.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?i.delegate(c,u,s):n.bind(u,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,a,o=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,a){"string"==typeof i&&(i={effect:i});var o,s=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=a,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,a):r.queue(function(n){e(this)[t](),a&&a.call(r[0]),n()})}});e.widget})(n("l/Rs"))},uVwQ:function(e,t,n){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchThanksPageRecommendedProjects"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"imageWidth"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommended"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"staffPicks"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"recommended"},value:{kind:"Variable",name:{kind:"Name",value:"recommended"}}},{kind:"Argument",name:{kind:"Name",value:"staffPicks"},value:{kind:"Variable",name:{kind:"Name",value:"staffPicks"}}},{kind:"Argument",name:{kind:"Name",value:"similarTo"},value:{kind:"Variable",name:{kind:"Name",value:"projectId"}}},{kind:"Argument",name:{kind:"Name",value:"backed"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"created"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"collaborated"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"LIVE"}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"6"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"projectCardFragment"},directives:[]}]}}]}}]}}],loc:{start:0,end:434}};r.loc.source={body:'#import "javascripts/project-cards/fragment.graphql"\n\nquery FetchThanksPageRecommendedProjects($projectId: String, $imageWidth: Int!, $recommended: Boolean!, $staffPicks: Boolean) {\n  projects(\n    recommended: $recommended,\n    staffPicks: $staffPicks,\n    similarTo: $projectId,\n    backed: false,\n    created: false,\n    collaborated: false,\n    state: LIVE,\n    first: 6\n  ) {\n    nodes {\n      ...projectCardFragment\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};r.definitions=r.definitions.concat(n("pawd").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}));var a={};function o(e,t){return e.definitions.find(function(e){return!!e.name&&e.name.value==t})}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})}(e,t),a[e.name.value]=t}}),e.exports=r,e.exports.FetchThanksPageRecommendedProjects=function(e,t){var n=Object.assign({},e),r=o(e,t);n.definitions=[r];for(var i=a[t]||new Set,s=new Set,l=new Set(i);l.size>0;){var u=l;l=new Set,u.forEach(function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach(function(e){l.add(e)}))})}return s.forEach(function(t){var r=o(e,t);r&&n.definitions.push(r)}),n}(r,"FetchThanksPageRecommendedProjects")},uWqJ:function(e,t,n){"use strict";var r=g(n("MA+5")),i=g(n("l/Rs")),a=g(n("shXp")),o=n("ZG75"),s=g(n("WoYN")),l=g(n("Eaq5")),u=g(n("8NzR")),c=g(n("L3hI")),d=n("Tvaj"),f=n("4RZc"),h=g(n("hBlz")),p=n("Z6GA"),m=n("8lQX");function g(e){return e&&e.__esModule?e:{default:e}}n("452R"),n("v6Dq"),n("mjY1"),(0,u.default)("#backings_index",function(e){function t(){return(0,h.default)(History.getState().url)}var n,u=!1,g=t();function v(e){return e.closest("section").data("collection_state")}function _(e){return e.closest("section").find("table")}function y(t){e.find("#backing_"+t.get("id")).each(function(){var e=(0,i.default)(this),n=v(e);e.replaceWith(b(t,n))})}function b(e,t){return(0,r.default)("backings/_row_"+t,(0,s.default)(i.default.extend({},e.get())))}function w(e){return _(e).hasClass("table_loading")}function E(e){w(e)||e.is(".selected")||((0,i.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),u=!0,(0,i.default)(".NS_backings__info:visible").trigger("close").length&&e.find("a.more").click(),u=!1)}function k(){var e=(0,i.default)("#main tbody tr.selected");e.length?E(e.next()):E((0,i.default)("#main tbody tr:first"))}function S(){var e=(0,i.default)("#main tbody tr.selected");e.length?E(e.prev()):E((0,i.default)("#main tbody tr:last"))}e.on("click","#main table tbody tr td a.more",function(){(0,f.track)("Backings Show Modal",{how_triggered:"row"})}),e.on("backer_completed",function(e,t,n){var r=o.Backing.find(t);r.set("backer_completed_at",n),y(r)});var C=!1;e.on("click","a.backer_completed_at",function(e){e.preventDefault(),setTimeout(function(){C=!0,e.target.checked=!e.target.checked,(0,i.default)(e.target).change()},0)}),e.on("change","a.backer_completed_at input.checkbox",function(e){if(C){C=!1;var t=(0,i.default)(this),n=t.closest("a"),r=t.is(":checked");w(t)||i.default.ajax({url:n.attr("href"),data:{"backing[backer_completed]":r},dataType:"json",type:"PUT",success:function(e){e.backing&&n.trigger("backer_completed",[e.backing.id,e.backing.backer_completed_at])}})}else e.preventDefault()}),e.on("message_sent",function(e,t,n){var r=o.Backing.find(t);r.set("messages",{count:n,last_activity_at:(0,m.unix)(new Date)}),y(r)}),e.on("click","a.more span.ss-icon",function(){(0,f.track)("Backings Show Modal",{how_triggered:"icon"})}),e.on("click","table th.sortable",function(e){var t=(0,i.default)(this),r=t.closest("table"),s=v(t),l=t.hasClass("asc")?"asc":"desc",u=Math.min(r.find("tbody tr").length,150),d=t.data("sort"),p=(0,h.default)(r.data("url"));e.preventDefault(),(0,f.track)("Backings "+c.default.capitalize(s)+" Sort",{selected_sort:d}),p.addSearch({direction:l,sort:d,page:1,per_page:u}),n&&n.abort(),n=i.default.ajax({url:p.toString(),dataType:"json",beforeSend:function(){_(t).addClass("table_loading")},complete:function(){_(t).removeClass("table_loading"),n=void 0},success:function(e){var n;n=a.default.map(e.backings,function(e){return b(new o.Backing(e),s)}),r.find("tbody").html(n),r.data({sort:d,direction:l}),r.find("th").not(t).removeClass("active asc").addClass("desc"),t.addClass("active").removeClass(l).addClass("desc"===l?"asc":"desc"),r.find("tbody tr").length<e.total&&t.closest("section").find("a.show_more_backings").show()}})}),(0,i.default)(document).on("click","a.show_more_backings",function(e){var t=(0,i.default)(this),r=_(t),s=v(t),l=r.data("sort");e.preventDefault(),w(t)||((0,f.track)("Backings "+c.default.capitalize(s)+" More",{selected_sort:l}),n&&n.abort(),n=i.default.ajax({url:r.data("url"),data:{direction:r.data("direction"),page:Math.floor(r.find("tbody tr").length/150)+1,per_page:150,sort:l},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),n=void 0},success:function(e){var n,i=v(t),s=r.find("tbody tr").length,l=0;s<150&&(l=s),n=a.default.chain(e.backings).rest(l).map(function(e){return b(new o.Backing(e),i)}).value(),r.find("tbody").append(n),r.find("tbody tr").length>=e.total&&t.hide()}}))}),(0,i.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.modal_url?i.default.open_remote_modal_dialog(e.modal_url):(u=!0,(0,i.default)(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),u=!1))}),e.on("click","#main table tbody tr a.remote_modal_dialog",function(){E((0,i.default)(this).closest("tr"))}),(0,i.default)(window).on("modal_dialog:opened",function(e){var n=(0,i.default)(e.target).data("modal_dialog");History.busy()||History.pushState({modal_url:n.remote_url},null,t().hash("").toString())}),(0,i.default)(window).on("modal_dialog:remote_dialog_loaded",function(t){var n=(0,i.default)(t.target),r=n.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),a=e.find("#backing_"+r),o=a.prev("tr"),s=a.next("tr"),l=n.find(".NS_backings__info");s.length&&(0,i.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),k()}).prependTo(l.find(".controls")),o.length&&(0,i.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),S()}).prependTo(l.find(".controls"))}),(0,i.default)(window).on("closed.modal_dialog",function(){if(!u){var e=g.clone();History.pushState(null,null,e.hash("").toString())}}),(0,i.default)(window).on("keydown",function(e){if(!(0,i.default)(e.target).is(":input"))switch(e.keyCode){case d.J:case d.RIGHT:k();break;case d.K:case d.LEFT:S();break;case d.ENTER:(0,i.default)(".NS_backings__info:visible").trigger("close").length||(0,i.default)("#main tbody tr.selected td a.more").click()}}),a.default.each(["active","collected","uncollected"],function(e){var t=JSON.parse((0,p.unescape)(window[e]));t.backings=a.default.map(t.backings,function(e){return new o.Backing(e)}),(0,i.default)("#"+e).append(function(e,t){return(0,r.default)("backings/_"+t,(0,l.default)(i.default.extend({},e)),["backings/_row_"+t])}(t,e))})})},ubEc:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=n("8Ml/"),o=s(n("shXp"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body.country_signups",function(){(0,r.default)("input#signup_email").validates_presence().validates_email(),(0,r.default)("form#new_signup").on("submit",function(e){var t=(0,r.default)(this);if(e.preventDefault(),!t.validate())return(0,r.default)("#signup_email").addClass("errored"),(0,r.default)(".error_message").show(),!1;r.default.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(){(0,r.default)(".error_message").hide(),(0,r.default)(".submitting").hide(),(0,r.default)(".submitted").show()},error:function(){t.find("#signup_email").addClass("errored")}})}),(0,a.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=o.default.debounce(a.trackProjectCards,150)})},ucfE:function(e,t,n){"use strict";var r=a(n("l/Rs")),i=a(n("8NzR"));function a(e){return e&&e.__esModule?e:{default:e}}n("9DJv"),(0,i.default)(".js-could-have-post-media",function(e){e.on("click",".js-post-media-link",function(e){var t=(0,r.default)(".js-post-media-content"),n=t.find(".js-image"),i=t.find(".js-link");n.html(""),i.text(""),n.append('<img src="'+(0,r.default)(this).data("large-image")+'" />'),i.text((0,r.default)(this).data("post-title")),i.attr("href",(0,r.default)(this).data("post-link")),(0,r.default)("#post_media").modal_dialog(),e.preventDefault()})})},"ug+k":function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("OH6m"),(0,a.default)(function(){(0,a.default)(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0}),(0,a.default)(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0}),(0,a.default)(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0}),(0,a.default)(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})})},uxlr:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=n("4RZc"),o=s(n("hBlz"));function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#events_filmfest2014",function(){var e=document.location.protocol+"//",t=function(t,n){var i,a=(0,r.default)('iframe[src*="embed.vhx.tv"]');void 0===n&&(n=null),i=JSON.stringify({method:t,params:n}),a.length&&a[0].contentWindow.postMessage(i,e+"embed.vhx.tv")},n=function(){t("play")},i=function(){t("pause")};(0,r.default)(window).on("message",function(t){if(t.originalEvent.origin===e+"embed.vhx.tv")switch(JSON.parse(t.originalEvent.data).event_type){case"start":(0,a.track)("2014 Kickstarter Film Festival Start Program");break;case"play":(0,a.track)("2014 Kickstarter Film Festival Play Program");break;case"pause":(0,a.track)("2014 Kickstarter Film Festival Pause Program");break;case"finish":(0,a.track)("2014 Kickstarter Film Festival Finish Program");break;case"fullscreen":(0,a.track)("2014 Kickstarter Film Festival Fullscreen Program")}}),(0,a.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet"),(0,r.default)(".js-open_video").on("click",function(e){var t=(0,r.default)(this).closest("section");t.find(".js-content").fadeOut(600,function(){t.closest("section").find(".js-video").fadeIn(function(){var e=(0,o.default)(),t=(0,r.default)('<iframe width="100%" height="auto" frameborder="0" webkitallowfullscreen="" src="//embed.vhx.tv/videos/8138?parent_url='+e.protocol()+"://"+e.host()+'" mozallowfullscreen="" id="host_player" class="video" allowfullscreen=""></iframe>');(0,r.default)(this).find(".videowrapper").html(t),t.on("load",function(){n()})})}),e.preventDefault()}),(0,r.default)(".js-video_close").on("click",function(e){var t=(0,r.default)(this).closest("section");t.find(".js-video").fadeOut(600,function(){t.closest("section").find(".js-content").fadeIn()}),i(),e.preventDefault()})})},v4vi:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)try{e(n).triggerHandler("remove")}catch(e){}i(t)},e.widget=function(t,n,r){var i,a,o,s,l={},u=t.split(".")[0];t=t.split(".")[1],i=u+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[u]=e[u]||{},a=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(r,function(t,r){var i,a;e.isFunction(r)?l[t]=(i=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=i,this._superApply=a,e=r.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=r}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},l,{constructor:o,namespace:u,widgetName:t,widgetFullName:i}),a?(e.each(a._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var n,i,a=r.call(arguments,1),o=0,s=a.length;o<s;o++)for(n in a[o])i=a[o][n],a[o].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,s=r.call(arguments,1),l=this;return a=!o&&s.length?e.widget.extend.apply(null,[a].concat(s)):a,o?this.each(function(){var n,r=e.data(this,i);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(n=r[a].apply(r,s))!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,i);t?t.option(a||{})._init():e.data(this,i,new n(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(r=t.split(".")).shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),a=0;a<r.length-1;a++)i[r[a]]=i[r[a]]||{},i=i[r[a]];if(t=r.pop(),void 0===n)return void 0===i[t]?null:i[t];i[t]=n}else{if(void 0===n)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,a=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=r.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?i.delegate(c,u,s):n.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,a,o=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,a){"string"==typeof i&&(i={effect:i});var o,s=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=a,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,a):r.queue(function(n){e(this)[t](),a&&a.call(r[0]),n()})}})}(r)},v6Dq:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,a=e.setInterval||a,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){return e===o.getHashByIndex()},o.isHashEqual=function(e,t){return(e=encodeURIComponent(e).replace(/%25/g,"%"))===(t=encodeURIComponent(t).replace(/%25/g,"%"))},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var r,i=o.getHashByState(e);return r={discardedState:e,backState:n,forwardState:t},o.discardedStates[i]=r,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t,r,i,s,l="",u=Boolean(o.getHash());return o.isInternetExplorer()?(t="historyjs-iframe",(r=n.createElement("iframe")).setAttribute("id",t),r.setAttribute("src","#"),r.style.display="none",n.body.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.close(),i="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(r.contentWindow.document);return t!==l?(l=t,n!==t&&(i=n=t,r.contentWindow.document.open(),r.contentWindow.document.close(),r.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==i&&(i=n,u&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==l&&(l=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(a(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,r,i=t&&t.newURL||o.getLocationHref(),a=o.getHashByUrl(i);return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(n=o.extractState(o.getFullUrl(a||o.getLocationHref()),!0),o.isLastSavedState(n)?(o.busy(!1),!1):(o.getHashByState(n),(r=o.discardedState(n))?(o.getHashByIndex(-2)===o.getHashByState(r.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(n.data,n.title,encodeURI(n.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var a=o.createStateObject(t,n,r),s=o.getHashByState(a),l=o.getState(!1),u=o.getHashByState(l),c=o.getHash(),d=o.expectedStateId==a.id;return o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),s===u?(o.busy(!1),!1):(o.saveState(a),d||o.Adapter.trigger(e,"statechange"),o.isHashEqual(s,c)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){if(r=encodeURI(r).replace(/%25/g,"%"),o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var a=o.createStateObject(t,n,r),s=o.getHashByState(a),l=o.getState(!1),u=o.getHashByState(l),c=o.getStateByIndex(-2);return o.discardState(l,a,c),s===u?(o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),o.saveState(a),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(a.data,a.title,a.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}}(window)},vWMs:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("9VV1"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#admin-menu",function(e){var t=function(t,n){return r.default.ajax({url:t,data:{project:{ksr_rating:n}},type:"PUT",dataType:"JSON"}).then(function(){e.find(".rating .ss-star").removeClass("selected"),e.find(".rating .ss-star").slice(0,n).addClass("selected")})};(0,r.default)(document).on("keydown",function(n){var r,i;n.ctrlKey&&(n.which>=49&&n.which<=53&&(r=n.which-48,i=e.find(".rating a")[0].href,t(i,r).then(function(){(0,a.default)({info:r+"★"})})))}),e.find(".rating a").on("click",function(n){n.preventDefault(),t(this.href,(0,r.default)(this).data("rating")),e.trigger("ksr_admin:nav_open")})})},vf3z:function(e,t,n){"use strict";var r=n("l/Rs");n("l/Rs");!function(e){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e(document).on("click","a[data-method]",function(r){var i=e(this),a=i.prop("href"),o=i.data("method"),s=i.prop("target"),l=e('<form method="post" action="'+a+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';void 0!==n&&void 0!==t&&(u+='<input name="'+n+'" value="'+t+'" type="hidden" />'),s&&l.prop("target",s),l.hide().append(u).appendTo("body"),l[0].submit(),r.preventDefault()}),t&&e.ajaxPrefilter(function(e,n,r){e.crossDomain||r.setRequestHeader("X-CSRF-Token",t)})}(r)},w02R:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#help_stats",function(){var e=(0,r.default)(".bubble");function t(e){e.find(".category_row").slideToggle("fast"),e.find(".default_sort").toggleClass("tablesorter-headerDesc"),e.closest("table").toggleClass("collapsed"),e.find(".arrow").toggleClass("flipped"),e.hasClass("collapsed")?(e.find(".details").text(a.default.t("onloads.views.help.stats.See_Categories")),ga("send","event","Help Stats","Collapsed",e.attr("name"))):(e.find(".details").text(a.default.t("onloads.views.help.stats.Hide_Categories")),ga("send","event","Help Stats","Expanded",e.attr("name")))}function n(){e.fadeOut("fast")}function i(t,i,a){var o,s,l,u,c,d;void 0!==a?(e.find(".content").html('<span class="num date">'+i+"</span>"+a),o=(0,r.default)(t),s=o.offset(),l=o.closest("table, .explanation").offset(),u=e.width(),c=e.height(),d=parseInt(e.css("padding-right").replace("px",""),10),o.closest(".explanation").length&&(s.left=s.left-50),e.css({position:"absolute",left:s.left-u-(d-1)+90,top:l.top-c-20}),e.find(".nipple").css({left:u+5,top:c+12,position:"absolute"}),e.fadeIn("fast")):n()}(0,r.default)(".toggle_details").click(function(){t((0,r.default)(this).closest("table"))}),(0,r.default)("th").click(function(){var e=(0,r.default)(this).closest("table");e.hasClass("collapsed")&&t(e)}),(0,r.default)("td, th").hover(function(){var e=(0,r.default)(this).closest("table").find("th").eq((0,r.default)(this).index()),t=e.data("header-explanation");i(this,e.html().replace("<br>"," "),t)}),(0,r.default)(".explanation").hover(function(){var e=(0,r.default)(this),t=e.find("[data-header-explanation]"),n=t.data("header-explanation");i(t,e.find("p").text(),n)}),(0,r.default)("table, .explanation").mouseleave(function(){n()})})},w6g1:function(e,t,n){n("l/Rs"),n("l/Rs");(function(e,t){e.fn.spin=function(n,r){return this.each(function(){var i=e(this),a=i.data();a.spinner&&(a.spinner.stop(),delete a.spinner),!1!==n&&(n=e.extend({color:r||i.css("color")},e.fn.spin.presets[n]||n),a.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}})(n("l/Rs"),n("lQ6a"))},wGdM:function(e,t,n){"use strict";var r=h(n("l/Rs")),i=h(n("shXp")),a=h(n("+bVi")),o=h(n("L3hI")),s=h(n("wmCY")),l=h(n("hBlz"));n("M99n"),n("aTdG");var u,c=h(n("YC2V")),d=h(n("c5nH")),f=n("yloT");function h(e){return e&&e.__esModule?e:{default:e}}(u=function(e,t){this.reward_data=t,this.id=this.reward_data.id||this.constants.NO_REWARD_ID,this.shipping_rules=this.reward_data.shipping_rules||[],this.pledge_url=t.urls?new l.default(t.urls.api.reward):void 0,this.shipping_enabled=this.reward_data.shipping_enabled||!1,this.index=t.index,this.closed_height=t.closed_height,this.prefilledNoRewardVal=e.data("prefillAmount");var n=e.find(".input__currency-conversion");this.el={$rw:e,$select:e.find("select"),$form:e.find("form"),$form_wrapper:e.find(".js-form-wrapper"),$description:e.find("div.pledge__reward-description"),$truncate_link:e.find("a.pledge__reward-description-toggle"),$truncate_link_span:e.find("a.pledge__reward-description-toggle span"),$pledge_input:e.find('input[name="backing[amount]"]'),$radio:e.find(".js-pledge-radio"),$submit:e.find(".js-reward-continue-button"),$continueAndApplePayButtons:e.find(".js-pledge-button"),$input_currency:e.find(".input__currency-conversion")},this.el.$pledge_input.on("keyup",function(){var e=(0,f.stringToMoney)((0,r.default)(this).val()),t=isNaN(e)?0:e,i=parseFloat(d.default.data.fx_rate,10),a=d.default.data.usd_type;if(isNaN(i))n.addClass("hide");else{var l=o.default.money(t*i,{currency:d.default.data.current_currency,usd_type:a,precision:t<=2?2:0});n.text(s.default.t("library.controllers.reward_controller.About")+l)}}),this.state={is_selected:!1,is_truncated:!1,is_truncate_worthy:this.el.$description.height()>=this.constants.TRUNCATE_HEIGHT,submit_halted:!1,is_shipping_populated:!!this.shipping_rules.length},e.data("reward",this),this.el.$form_wrapper.aria_set_hidden()}).prototype.constants=Object.freeze({MAX_FETCH_RETRIES:3,FETCH_TIMEOUT:1e3,TRUNCATE_HEIGHT:80,TRUNCATE_LINK_TEXT:s.default.t("library.controllers.reward_controller.Read_More"),UNTRUNCATE_LINK_TEXT:s.default.t("library.controllers.reward_controller.Less"),NO_REWARD_ID:0}),u.prototype.toggle_description_truncation=function(){var e=this.el.$truncate_link.text().trim();this.state.is_truncate_worthy||this.state.is_truncated?(this.state.is_truncated=!this.state.is_truncated,this.el.$description.toggleClass("pledge__reward-description--truncated"),this.el.$description.toggleClass("pledge__reward-description--expanded"),this.el.$truncate_link_span.text(e===this.constants.TRUNCATE_LINK_TEXT?this.constants.UNTRUNCATE_LINK_TEXT:this.constants.TRUNCATE_LINK_TEXT),this.el.$truncate_link.toggleClass("more")):this.el.$truncate_link.addClass("hide")},u.prototype.hide_truncation_link=function(){this.el.$truncate_link.addClass("hide")},u.prototype.show_truncation_link=function(){this.el.$truncate_link.removeClass("hide")},u.prototype.toggle_pledge_form=function(){if(this.state.is_selected=!this.state.is_selected,this.toggle_pledge_form_classes(),this.el.$radio.length&&this.toggle_checkout_elements(),this.state.is_selected){this.inject_csrf_token(),this.handle_shipping_rules();var e=(0,r.default)(document).scrollTop();this.preselect_shipping_country(),this.focus_shipping_select(),(0,r.default)(document).scrollTop(e),this.id===this.constants.NO_REWARD_ID&&((0,r.default)(".js-no-reward-form-input").val()||(0,r.default)(".js-no-reward-form-input").val(this.prefilledNoRewardVal).select())}else this.el.$form_wrapper.aria_deactivate_keyboard_tabindex().aria_set_hidden()},u.prototype.toggle_pledge_form_classes=function(){this.el.$rw.toggleClass("pledge--available").toggleClass("pledge--selected"),this.el.$form_wrapper.toggleClass("pledge__checkout--is-visible")},u.prototype.reset_pledge_form=function(){this.el.$pledge_input.hasClass("error")&&(this.el.$pledge_input.removeClass("error"),this.el.$submit.removeClass("disabled"),this.update_pledge_total())},u.prototype.toggle_checkout_elements=function(){this.state.is_selected?this.el.$radio.prop("checked")||(this.el.$radio.prop("checked",!0),this.el.$radio.trigger("change")):this.el.$radio.prop("checked",!1)},u.prototype.handle_shipping_rules=function(){!this.state.is_shipping_populated&&this.shipping_enabled&&(this.show_loader(),this.shipping_rules.length?this.render_reward_select():this.fetch_reward_shipping_rules())},u.prototype.fetch_reward_shipping_rules=function(e){e=e||0,r.default.ajax({url:this.pledge_url,type:"get",dataType:"json",timeout:this.constants.FETCH_TIMEOUT,success:function(e){this.shipping_rules=e.shipping_rules,this.render_reward_select()}.bind(this),error:function(t,n){"timeout"===n&&e<this.constants.MAX_FETCH_RETRIES&&this.fetch_reward_shipping_rules(e+1)}.bind(this)})},u.prototype.show_loader=function(){this.el.$submit.addClass("is-loading").prop("disabled",!0)},u.prototype.hide_loader=function(e){setTimeout(function(){this.el.$submit.removeClass("is-loading").prop("disabled",!1)}.bind(this),e)},u.prototype.render_reward_select=function(){var e={select:this.el.$select,reward:this};this.state.is_selected&&setTimeout(function(){(0,r.default)(document).trigger("render_shipping_select",e),this.state.is_shipping_populated=!0,this.hide_loader(300)}.bind(this),this.transition_duration())},u.prototype.validate=function(){var e=this.is_country_selected(),t=this.is_pledge_high_enough();return this.shipping_enabled&&!e?this.throw_country_error():this.reset_country_error(),t?this.reset_pledge_error():this.throw_pledge_error(),!(!e&&this.shipping_enabled||!t||(this.enable_submit_button(),0))},u.prototype.transition_duration=function(){if(!r.default.support.transitionEvent())return 0;var e=this.el.$form_wrapper.css("transition-duration");return/ms$/.test(e)?parseFloat(e,10)||0:1e3*parseFloat(e,10)||0},u.prototype.focus_shipping_select=function(){this.el.$form_wrapper.aria_activate_keyboard_tabindex().aria_set_visible(),a.default["not-mobile"]?(this.el.$pledge_input.focus(),this.el.$pledge_input.val(this.el.$pledge_input.val())):this.el.$submit.focus()},u.prototype.inject_csrf_token=function(){var e=(0,r.default)("meta[name=csrf-param]").attr("content"),t=(0,r.default)("meta[name=csrf-token]").attr("content");this.el.$form.find("input[name="+e+"]").length||this.el.$form.append((0,r.default)("<input />",{type:"hidden",name:e,value:t}))},u.prototype.preselect_shipping_country=function(){this.el.$select.val()||this.el.$select.val(c.default.get("location_id"))},u.prototype.update_pledge_total=function(e){var t;t=e&&e.amount?e.amount:this.reward_data.minimum;var n=parseInt(this.el.$select.val(),10),r=this.get_shipping_rule(n),i=t+(r.length?parseFloat(r[0].cost):0),a=o.default.format_number(i,{precision:0});if(this.id===this.constants.NO_REWARD_ID)this.el.$pledge_input.val("");else{this.el.$pledge_input.val(a);var l=(0,f.stringToMoney)(this.el.$pledge_input.val()),u=isNaN(l)?0:l,c=parseFloat(d.default.data.fx_rate,10),h=d.default.data.usd_type;if(isNaN(c))this.el.$input_currency.addClass("hide");else{var p=o.default.money(u*c,{currency:d.default.data.current_currency,usd_type:h,precision:0});this.el.$input_currency.text(s.default.t("library.controllers.reward_controller.About")+p)}}},u.prototype.get_shipping_rule=function(e){return i.default.filter(this.shipping_rules,function(t){return t.location_id===e})},u.prototype.get_current_pledge_amount=function(){return(0,f.stringToMoney)(this.el.$pledge_input.val())},u.prototype.is_country_selected=function(){return!!this.el.$select.val()},u.prototype.throw_country_error=function(){this.el.$select.parent().addClass("error"),this.disable_submit_button()},u.prototype.reset_country_error=function(){this.el.$select.parent().removeClass("error")},u.prototype.is_pledge_high_enough=function(){var e,t=this.get_current_pledge_amount();if(this.shipping_rules.length){var n=parseInt(this.el.$select.val(),10),r=this.get_shipping_rule(n),i=r.length?parseFloat(r[0].cost):0;e=this.reward_data.minimum+i}else e=this.reward_data.minimum;return t>=e},u.prototype.reset_pledge_error=function(){this.el.$pledge_input.removeClass("error")},u.prototype.throw_pledge_error=function(){this.el.$pledge_input.addClass("error"),this.disable_submit_button()},u.prototype.disable_submit_button=function(){this.el.$submit.addClass("disabled")},u.prototype.enable_submit_button=function(){this.el.$submit.removeClass("disabled")},window.RewardController=u},wJt9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlaggingWorkflow=void 0;var r,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n("GiK3"),o=(r=a)&&r.__esModule?r:{default:r},s=n("JIXV"),l=n("J1uj"),u=n("1B3E"),c=n("7fY0"),d=n("Z5jf"),f=n("7e+d"),h=n("Gks7");var p=function(e){return"project_page.flagging."+e},m=function(e){return(0,d.boundT)(p(e))},g=[{label:m("dropdown.prohibited_items"),value:"PROHIBITED_ITEMS",placeholder:m("dropdown.pi_placeholder")},{label:m("dropdown.charity"),value:"CHARITY",placeholder:m("dropdown.charity_placeholder")},{label:m("dropdown.resale"),value:"RESALE",placeholder:m("dropdown.resale_placeholder")},{label:m("dropdown.false_claims"),value:"FALSE_CLAIMS",placeholder:m("dropdown.false_claims_placeholder")},{label:m("dropdown.misrep_support"),value:"MISREP_SUPPORT",placeholder:m("dropdown.misrep_placeholder")},{label:m("dropdown.not_project"),value:"NOT_PROJECT",placeholder:m("dropdown.not_project_placeholder")}],v={name:"blue","primary-light":"blue","primary-dark":"blue","primary-accent":"ksr-green-400"};t.FlaggingWorkflow=function(e){var t=e.state,n=e.dispatch,r=e.DropdownComponent;return t.form.flaggingFormStatus===s.FLAGGING_CREATED?o.default.createElement("div",null,m("Flagging_success_message")):o.default.createElement(l.RadioGroup,{id:"project-flagging-radio-group",radioGroupOptions:function(e,t){var n,a=e.container,s=e.dropdown,l=e.form,v=a.hasBackedProject,_=a.projectState,y=(n=s.currentIndex,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(e){return null!==n?g[n][e]:null})})("value","placeholder"),b=i(y,2),w=b[0],E=b[1],k=void 0;return k=(0,h.showPostFundingOption)(v,_)?[{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:m("Post_funding_issues_heading"),labelBody:m("Post_funding_issues_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement(u.FlaggingForm,{kind:"POST_FUNDING_ISSUES",state:l,dispatch:t,placeholder:m("Post_funding_placeholder")})),value:"post-funding"}]:[],[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(k),[{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:o.default.createElement(d.BoundTranslate,{i18nKey:p("Our_rules_label_heading"),ourRulesLink:f.ourRulesLink}),labelBody:o.default.createElement(d.BoundTranslate,{i18nKey:p("Our_rules_label_body"),prohibitedItemsLink:f.prohibitedItemsLink})}),expandedComponent:o.default.createElement("div",null,o.default.createElement(r,{state:s,dispatch:t,options:g,placeholder:m("dropdown.Select_an_option"),size:"x-small"}),o.default.createElement(u.FlaggingForm,{kind:w,state:l,dispatch:t,placeholder:E})),value:"rules"},{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:o.default.createElement(d.BoundTranslate,{i18nKey:p("Community_guidelines_label_heading"),communityGuidelinesLink:f.communityGuidelinesLink}),labelBody:m("Community_guidelines_label_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement(u.FlaggingForm,{kind:"GUIDELINES_VIOLATION",state:l,dispatch:t,placeholder:m("Community_guidelines_placeholder")})),value:"guidelines"},{label:o.default.createElement(c.RadioButtonLabel,{labelHeader:m("Intellect_prop_label_heading"),labelBody:m("Intellect_prop_label_body")}),expandedComponent:o.default.createElement("div",null,o.default.createElement("p",null,o.default.createElement(d.BoundTranslate,{i18nKey:p("Intellect_prop_expanded"),copyrightPolicyLink:f.copyrightPolicyLink,trademarkPolicyLink:f.trademarkPolicyLink}))),value:"ip"}])}(t,n),theme:v,state:t.radioButtons,dispatch:n})}},wTuk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("GiK3")),i=l(n("KSGD")),a=l(n("7VtR")),o=n("tryQ"),s=n("0n0W");function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.contentId,n=e.kind,i=e.hasFlaggings,l=e.mutate;return r.default.createElement(a.default,{onSubmit:function(){return l({variables:{contentId:t,kind:n},refetchQueries:[{query:s.GET_COMMENT_WITH_REPLIES,variables:{id:t}}]}).catch(function(e){o.Honeybadger.notify(JSON.stringify(e),{context:{tags:"project_community"}})})},hasFlaggings:i})};u.propTypes={contentId:i.default.string,kind:i.default.string,mutate:i.default.func.isRequired},t.default=u},wWf7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initiateWatchingUpdate=function(e){return{type:"INITIATE_WATCHING_UPDATE",project:e}},t.updateField=function(e,t){return{type:"FIELD_CHANGED",field:e,value:t}},t.submitForm=function(){return{type:"FORM_SUBMITTED"}},t.touchField=function(e){return{type:"TOUCH_FIELD",field:e}},t.touchAllFields=function(){return{type:"TOUCH_ALL_FIELDS"}},t.updateWatch=function(){return{type:"WATCHING_UPDATE"}},t.mutationSucceeded=function(e,t){return{type:"WATCHING_UPDATE_SUCCESS",isWatching:e,pid:t}},t.closeAndDontShowModal=function(){return{type:"CONFIRM_MODAL"}},t.exitConfirmModal=function(){return{type:"EXIT_CONFIRM_MODAL"}},t.exitEmailModal=function(){return{type:"EXIT_EMAIL_MODAL"}},t.emailFormError=function(e){return{type:"EMAIL_FORM_ERROR",error:e}},t.requestError=function(e){return{type:"REQUEST_ERROR",error:e}},t.exitLogInModal=function(){return{type:"EXIT_LOGIN_MODAL"}},t.noopAction=function(){return{type:"NOOP"}},t.noopConfirm=function(){return{type:"NOOP_CONFIRM_BUTTON"}}},"wbn/":function(e,t,n){"use strict";var r=m(n("l/Rs")),i=m(n("shXp")),a=m(n("wmCY")),o=m(n("YC2V")),s=m(n("c5nH")),l=m(n("eF8u")),u=m(n("L3hI")),c=m(n("8NzR")),d=n("4RZc"),f=n("I2cB"),h=n("Z6GA"),p=n("yloT");function m(e){return e&&e.__esModule?e:{default:e}}(0,c.default)("body#pledges_edit",function(e){var t=e.find("#confirm-adjust-pledge"),n=e.selector+" form.manage_pledge";if((0,r.default)(n).length){var c,m="",g=["net_amount","shipping_amount","amount"],v=function(){return a.default.t("onloads.views.pledges.edit.No_change")},_=function(){return a.default.t("onloads.views.pledges.edit.No_thanks_I_just_want_to_help_the_project")},y={type:"truncate_zeros",currency:s.default.get("currency")},b={type:"truncate_zeros",currency:window.current_currency},w=i.default.clone(o.default.get()),E={reward:{$display_title:t.find("#js-pledge__reward-title"),$description:t.find("#js-pledge__reward-description"),$truncate_link:t.find("#js-modal-desc-toggle span"),changed:!1},net_amount:{$old:t.find("#js-confirm-adjust-pledge-amount__old"),$new:t.find("#js-confirm-adjust-pledge-amount__new"),$icon:t.find("#js-pledge__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__pledge"),labelText:a.default.t("onloads.views.pledges.edit.Pledge_amount"),changed:!1},shipping_amount:{$old:t.find("#js-confirm-adjust-shipping-amount__old"),$new:t.find("#js-confirm-adjust-shipping-amount__new"),$icon:t.find("#js-shipping__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__shipping"),labelText:a.default.t("onloads.views.pledges.edit.Shipping"),changed:!1},amount:{$old:t.find("#js-confirm-adjust-total-amount__old"),$new:t.find("#js-confirm-adjust-total-amount__new"),$icon:t.find("#js-total__detail-comparison__icon"),$label:t.find("#js-pledge__detail-label__total"),labelText:a.default.t("onloads.views.pledges.edit.Total"),changed:!1},converted_amount:{$container:t.find("#js-confirm-adjust-total-converted-amount"),$new:t.find("#js-confirm-adjust-total-converted-amount__new"),changed:!1}},k=e.hasClass("convert-currency"),S=f.maybe.fromNullable(l.default).chain(function(e){return f.maybe.fromNullable(e.get("location"))}).chain((0,h.maybeProp)("country")).getOrElse(null),C=s.default.get("country")!==S,T=s.default.get("currency_symbol")===a.default.t("number.currency.format.unit"),A=C&&T,R=a.default.t("onloads.views.pledges.edit.in_currency",{currency:s.default.get("currency")});void 0!==o.default&&(o.default.on_change("reward",function(e){E.reward.changed=e.reward.id!==w.reward.id}),o.default.on_change("shipping_amount",function(e){E.shipping_amount.changed=e.shipping_amount!==w.shipping_amount}),o.default.on_change("amount",function(e){E.net_amount.changed=o.default.get("net_amount")!==w.net_amount,E.amount.changed=e.amount!==w.amount})),(0,r.default)(document).on("submit",n,function(e){e.preventDefault(),c=(0,r.default)(e.target),P(),r.default.each(g,function(e,t){x(t)}),k&&function(){var e=E.converted_amount;if(E.amount.changed){var t=o.default.get("amount")*s.default.get("fx_rate"),n=u.default.money(t,b);e.$new.html(n),e.$container.removeClass("hide")}else e.$container.addClass("hide")}(),t.modal_dialog().find(".js-confirm-yes").focus(),E.reward.$description.prop("scrollHeight")<80?E.reward.$truncate_link.parent().addClass("hide"):E.reward.$truncate_link.parent().removeClass("hide")}),(0,r.default)(".flash-error").livequery(function(){var e,t=(0,p.stringToMoney)((0,r.default)(".text#backing_amount").attr("value"));e=void 0!==(0,r.default)(".radio:checked").attr("alt")?(0,p.stringToMoney)((0,r.default)(".radio:checked").attr("alt")):null,(0,d.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,r.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),(0,r.default)(document).on("click","body#pledges_edit #js-modal-desc-toggle",function(e){e.preventDefault(),(0,r.default)(e.currentTarget).hasClass("more")?(E.reward.$description.removeClass("pledge__reward-description--truncated").addClass("pledge__reward-description--expanded"),E.reward.$truncate_link.text("Less"),E.reward.$truncate_link.parent().removeClass("more")):I()}),(0,r.default)(document).on("click","body#pledges_edit .js-confirm-yes",function(e){e.preventDefault(),c.removeClass("submitting-non-ajax"),(0,r.default)(document).off("submit",n),c.submit()}),(0,r.default)(document).on("before_close.modal_dialog",function(){c.removeClass("submitting-non-ajax"),I()})}function x(e){var t=E[e],n=t.labelText;if(t.changed){var r=u.default.money(o.default.get(e),y),i=u.default.money(w[e],y);t.$new.html(r),t.$old.html(i),n+=" "+R,function(e){E[e].$new.removeClass("hide"),m=E[e].$icon.attr("class").replace(/hide/g,""),E[e].$icon.attr("class",m)}(e)}else t.$old.html(v()),function(e){E[e].$new.addClass("hide"),m=E[e].$icon.attr("class")+" hide",E[e].$icon.attr("class",m)}(e);A&&t.$label.html(n)}function P(){var e,t=E.reward;t.changed?(e=o.default.get("reward").id?u.default.paragraphize(o.default.get("reward").description):_(),t.$description.html(e),t.$display_title.html(o.default.get("reward").title_for_backing_tier),E.reward.$description.parent().removeClass("pledge__detail-comparison__old").addClass("pledge__reward-description-wrap")):(t.$description.html(v()),E.reward.$description.parent().addClass("pledge__detail-comparison__old").removeClass("pledge__reward-description-wrap"))}function I(){E.reward.$description.addClass("pledge__reward-description--truncated").removeClass("pledge__reward-description--expanded"),E.reward.$truncate_link.text("More"),E.reward.$truncate_link.parent().addClass("more")}})},wgDV:function(e,t,n){n("l/Rs"),n("l/Rs");!function(){var e={version:"0.9.0",name:"PluginDetect",addPlugin:function(t,n){t&&e.isString(t)&&n&&e.isFunc(n.getVersion)&&(t=t.replace(/\s/g,"").toLowerCase(),e.Plugins[t]=n,e.isDefined(n.getVersionDone)||(n.installed=null,n.version=null,n.version0=null,n.getVersionDone=null,n.pluginName=t))},uniqueName:function(){return e.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(t,n){var r;try{r=e.hasOwnPROP.call(t,n)}catch(e){}return!!r},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(e){return void 0!==e},isArray:function(t){return e.rgx.arr.test(e.toString.call(t))},isString:function(t){return e.rgx.str.test(e.toString.call(t))},isNum:function(t){return e.rgx.num.test(e.toString.call(t))},isStrNum:function(t){return e.isString(t)&&/\d/.test(t)},isFunc:function(t){return e.rgx.fun.test(e.toString.call(t))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(t,n){var r=e.isStrNum(t)?(e.isDefined(n)?new RegExp(n):e.getNumRegx).exec(t):null;return r?r[0]:null},compareNums:function(t,n,r){var i,a,o,s=parseInt;if(e.isStrNum(t)&&e.isStrNum(n)){if(e.isDefined(r)&&r.compareNums)return r.compareNums(t,n);for(i=t.split(e.splitNumRegx),a=n.split(e.splitNumRegx),o=0;o<Math.min(i.length,a.length);o++){if(s(i[o],10)>s(a[o],10))return 1;if(s(i[o],10)<s(a[o],10))return-1}}return 0},formatNum:function(t,n){var r,i;if(!e.isStrNum(t))return null;for(e.isNum(n)||(n=4),n--,i=t.replace(/\s/g,"").split(e.splitNumRegx).concat(["0","0","0","0"]),r=0;r<4;r++)/^(0+)(.+)$/.test(i[r])&&(i[r]=RegExp.$2),(r>n||!/\d/.test(i[r]))&&(i[r]="0");return i.slice(0,4).join(",")},pd:{getPROP:function(e,t,n){try{e&&(n=e[t])}catch(e){}return n},findNavPlugin:function(t){if(t.dbug)return t.dbug;var n=null;if(window.navigator){var r,i,a,o,s,l,u={Find:e.isString(t.find)?new RegExp(t.find,"i"):t.find,Find2:e.isString(t.find2)?new RegExp(t.find2,"i"):t.find2,Avoid:t.avoid?e.isString(t.avoid)?new RegExp(t.avoid,"i"):t.avoid:0,Num:t.num?/\d/:0},c=navigator.mimeTypes,d=navigator.plugins;if(t.mimes&&c)for(o=e.isArray(t.mimes)?[].concat(t.mimes):e.isString(t.mimes)?[t.mimes]:[],r=0;r<o.length;r++){i=0;try{e.isString(o[r])&&/[^\s]/.test(o[r])&&(i=c[o[r]].enabledPlugin)}catch(e){}if(i&&((a=this.findNavPlugin_(i,u)).obj&&(n=a.obj),n&&!e.dbug))return n}if(t.plugins&&d){for(s=e.isArray(t.plugins)?[].concat(t.plugins):e.isString(t.plugins)?[t.plugins]:[],r=0;r<s.length;r++){i=0;try{s[r]&&e.isString(s[r])&&(i=d[s[r]])}catch(e){}if(i&&((a=this.findNavPlugin_(i,u)).obj&&(n=a.obj),n&&!e.dbug))return n}if(l=d.length,e.isNum(l))for(r=0;r<l;r++){i=0;try{i=d[r]}catch(e){}if(i&&((a=this.findNavPlugin_(i,u)).obj&&(n=a.obj),n&&!e.dbug))return n}}}return n},findNavPlugin_:function(e,t){var n=e.description||"",r=e.name||"",i={};return(!t.Find.test(n)||t.Find2&&!t.Find2.test(r)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!t.Find.test(r)||t.Find2&&!t.Find2.test(n)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))||t.Avoid&&(t.Avoid.test(n)||t.Avoid.test(r))||(i.obj=e),i},getVersionDelimiter:",",findPlugin:function(t){var n,r={status:-3,plugin:0};return e.isString(t)?1==t.length?(this.getVersionDelimiter=t,r):(t=t.toLowerCase().replace(/\s/g,""),(n=e.Plugins[t])&&n.getVersion?(r.plugin=n,r.status=1,r):r):r}},getPluginFileVersion:function(t,n){var r,i,a,o,s=-1;if(!t)return n;if(t.version&&(r=e.getNum(t.version+"")),!r||!n)return n||r||null;for(i=e.formatNum(n).split(e.splitNumRegx),a=e.formatNum(r).split(e.splitNumRegx),o=0;o<i.length;o++){if(s>-1&&o>s&&"0"!=i[o])return n;if(a[o]!=i[o]&&(-1==s&&(s=o),"0"!=i[o]))return n}return r},AXO:function(){var e;try{e=new window.ActiveXObject}catch(e){}return e?null:window.ActiveXObject}(),getAXO:function(t){var n=null;try{n=new e.AXO(t)}catch(t){e.errObj=t}return n&&(e.browser.ActiveXEnabled=!0),n},browser:{detectPlatform:function(){var t,n=window.navigator&&navigator.platform||"";if(e.OS=100,n){var r=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(t=r.length-2;t>=0;t-=2)if(r[t]&&new RegExp(r[t],"i").test(n)){e.OS=r[t+1];break}}},detectIE:function(){var t,n,r,i,a=this,o=document,s=window.navigator&&navigator.userAgent||"";a.ActiveXFilteringEnabled=!1,a.ActiveXEnabled=!1;try{a.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(e){}for(r=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"].concat(i=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"]),t=0;t<r.length&&(!e.getAXO(r[t])||e.dbug);t++);if(a.ActiveXEnabled&&a.ActiveXFilteringEnabled)for(t=0;t<i.length;t++)if(e.getAXO(i[t])){a.ActiveXFilteringEnabled=!1;break}n=o.documentMode;try{o.documentMode=""}catch(e){}a.isIE=a.ActiveXEnabled,a.isIE=a.isIE||e.isNum(o.documentMode)||new Function("return/*@cc_on!@*/!1")();try{o.documentMode=n}catch(e){}a.verIE=null,a.isIE&&(a.verIE=(e.isNum(o.documentMode)&&o.documentMode>=7?o.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(s)?parseFloat(RegExp.$1,10):7)),a.betterIE()},betterIE:function(){var t=this,n=document;if(t.verIEtrue=null,t.docModeIE=null,t.isIE){var r,i,a=n.createElement("div"),o=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{a.style.behavior="url(#default#clientcaps)"}catch(e){}for(i=0;i<o.length;i++){try{t.verIEtrue=a.getComponentVersion(o[i],"componentid").replace(/,/g,".")}catch(e){}if(t.verIEtrue&&!e.dbug)break}r=parseFloat(t.verIEtrue||"0",10),t.docModeIE=n.documentMode||(/back/i.test(n.compatMode||"")?5:r)||t.verIE,t.verIE=r||t.docModeIE}},detectNonIE:function(){var t=this,n=window.navigator?navigator:{},r=t.isIE?"":n.userAgent||"",i=n.vendor||"",a=n.product||"";t.isGecko=/Gecko/i.test(a)&&/Gecko\s*\/\s*\d/i.test(r),t.verGecko=t.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(r)?RegExp.$1:"0.9"):null,t.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(r),t.verOpera=t.isOpera?e.formatNum(RegExp.$2):null,t.isChrome=!t.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(r),t.verChrome=t.isChrome?e.formatNum(RegExp.$2):null,t.isSafari=!t.isOpera&&!t.isChrome&&(/Apple/i.test(i)||!i)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(r),t.verSafari=t.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(r)?e.formatNum(RegExp.$1):null},init:function(){var e=this;e.detectPlatform(),e.detectIE(),e.detectNonIE()}},init:{hasRun:0,library:function(){window[e.name]=e;var t=document;e.win.init(),e.head=t.getElementsByTagName("head")[0]||t.getElementsByTagName("body")[0]||t.body||null,e.browser.init(),this.hasRun=1}},ev:{addEvent:function(e,t,n){e&&t&&n&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=this.concatFn(n,e["on"+t]))},removeEvent:function(e,t,n){e&&t&&n&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))},concatFn:function(e,t){return function(){e(),"function"==typeof t&&t()}},handler:function(e,t,n,r,i){return function(){e(t,n,r,i)}},handlerOnce:function(t,n,r,i){return function(){var a=e.uniqueName();t[a]||(t[a]=1,t(n,r,i))}},handlerWait:function(e,t,n,r,i){var a=this;return function(){a.setTimeout(a.handler(t,n,r,i),e)}},setTimeout:function(t,n){e.win&&e.win.unload||setTimeout(t,n)},fPush:function(t,n){e.isArray(n)&&(e.isFunc(t)||e.isArray(t)&&t.length>0&&e.isFunc(t[0]))&&n.push(t)},call0:function(t){var n=e.isArray(t)?t.length:-1;n>0&&e.isFunc(t[0])?t[0](e,n>1?t[1]:0,n>2?t[2]:0,n>3?t[3]:0):e.isFunc(t)&&t(e)},callArray0:function(t){var n;if(e.isArray(t))for(;t.length;)n=t[0],t.splice(0,1),e.win&&e.win.unload&&t!==e.win.unloadHndlrs||this.call0(n)},call:function(e){this.call0(e),this.ifDetectDoneCallHndlrs()},callArray:function(e){this.callArray0(e),this.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var t,n,r=this;if(r.allDoneHndlrs.length&&(!e.win||e.win.loaded&&!e.win.loadPrvtHndlrs.length&&!e.win.loadPblcHndlrs.length)){if(e.Plugins)for(t in e.Plugins)if(e.hasOwn(e.Plugins,t)&&(n=e.Plugins[t])&&e.isFunc(n.getVersion)&&(3==n.OTF||n.DoneHndlrs&&n.DoneHndlrs.length||n.BIHndlrs&&n.BIHndlrs.length))return;r.callArray0(r.allDoneHndlrs)}}},getVersion:function(t,n,r){var i,a,o=e.pd.findPlugin(t);return o.status<0?null:(1!=(i=o.plugin).getVersionDone&&(i.getVersion(null,n,r),null===i.getVersionDone&&(i.getVersionDone=1)),a=(a=i.version||i.version0)?a.replace(e.splitNumRegx,e.pd.getVersionDelimiter):a)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var n,r,i,a,o=navigator.mimeTypes,s=e.isArray(t)?[].concat(t):e.isString(t)?[t]:[];for(a=s.length,i=0;i<a;i++){n=0;try{e.isString(s[i])&&/[^\s]/.test(s[i])&&(n=o[s[i]])}catch(e){}if((r=n?n.enabledPlugin:0)&&(r.name||r.description))return n}}return null},getInfo:function(t,n,r){var i,a=null,o=e.pd.findPlugin(t);return o.status<0?a:(i=o.plugin,e.isFunc(i.getInfo)&&(null===i.getVersionDone&&(e.getVersion?e.getVersion(t,n,r):e.isMinVersion(t,"0",n,r)),a=i.getInfo()),a)},onDetectionDone:function(t,n,r,i){var a,o=e.pd.findPlugin(t);return-3==o.status?-1:(a=o.plugin,e.isArray(a.DoneHndlrs)||(a.DoneHndlrs=[]),1!=a.getVersionDone&&(e.getVersion?e.getVersion(t,r,i):e.isMinVersion(t,"0",r,i)),-.5!=a.installed&&.5!=a.installed?(e.ev.call(n),1):(e.ev.fPush(n,a.DoneHndlrs),0))},codebase:{isDisabled:function(){return e.browser.ActiveXEnabled&&e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(e,t){return 0},search:function(t){var n,r=this,i=(t.$$,0);if(n=t.searchHasRun||r.isDisabled()?1:0,t.searchHasRun=1,n)return t.version||null;r.init(t);var a,o,s,l,u,c=t.DIGITMAX,d=99999999,f=[0,0,0,0],h=[0,0,0,0],p=function(e,n){var a,o=[].concat(f);return o[e]=n,(a=r.isActiveXObject(t,o.join(",")))?(i=1,f[e]=n):h[e]=n,a};for(a=0;a<h.length;a++){for(f[a]=Math.floor(t.DIGITMIN[a])||0,l=f.join(","),u=f.slice(0,a).concat([d,d,d,d]).slice(0,f.length).join(","),s=0;s<c.length;s++)e.isArray(c[s])&&(c[s].push(0),c[s][a]>h[a]&&e.compareNums(u,t.Lower[s])>=0&&e.compareNums(l,t.Upper[s])<0&&(h[a]=Math.floor(c[s][a])));for(o=0;o<30;o++){if(h[a]-f[a]<=16){for(s=h[a];s>=f[a]+(a?1:0)&&!p(a,s);s--);break}p(a,Math.round((h[a]+f[a])/2))}if(!i)break;h[a]=f[a]}return i&&(t.version=r.convert(t,f.join(",")).v),t.version||null},emptyNode:function(e){try{e.innerHTML=""}catch(e){}},HTML:[],len:0,onUnload:function(e,t){var n,r,i=t.HTML;for(n=0;n<i.length;n++)(r=i[n])&&(i[n]=0,t.emptyNode(r.span()),r.span=0,r.spanObj=0,r=0);t.iframe=0},init:function(t){var n,r,i=this;if(!i.iframe){var a,o=e.DOM;a=o.iframe.insert(0,"$.codebase{ }"),i.iframe=a,o.iframe.write(a," "),o.iframe.close(a)}if(!t.init)for(t.init=1,e.ev.fPush([i.onUnload,i],e.win.unloadHndlrs),t.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',r=t.classID||t.$$.classID||"",t.tagB='" '+(/clsid\s*:/i.test(r)?'classid="':'type="')+r+'">'+e.openTag+"/object>",n=0;n<t.Lower.length;n++)t.Lower[n]=e.formatNum(t.Lower[n]),t.Upper[n]=e.formatNum(t.Upper[n])},isActiveXObject:function(t,n){var r=this,i=0,a=(t.$$,(e.DOM.iframe.doc(r.iframe)||document).createElement("span"));return t.min&&e.compareNums(n,t.min)<=0?1:t.max&&e.compareNums(n,t.max)>=0?0:(a.innerHTML=t.tagA+n+t.tagB,e.pd.getPROP(a.firstChild,"object")&&(i=1),i?(t.min=n,r.HTML.push({spanObj:a,span:r.span})):(t.max=n,a.innerHTML=""),i)},span:function(){return this.spanObj},convert_:function(t,n,r,i){var a=t.convert[n];return a?e.isFunc(a)?e.formatNum(a(r.split(e.splitNumRegx),i).join(",")):r:a},convert:function(t,n,r){var i,a,o,s=this;if(a={v:n=e.formatNum(n),x:-1},n)for(i=0;i<t.Lower.length;i++)if((o=s.convert_(t,i,t.Lower[i]))&&e.compareNums(n,r?o:t.Lower[i])>=0&&(!i||e.compareNums(n,r?s.convert_(t,i,t.Upper[i]):t.Upper[i])<0)){a.v=s.convert_(t,i,n,r),a.x=i;break}return a},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var t=this;t.hasRun||(t.hasRun=1,/complete/i.test(document.readyState||"")?t.loaded=!0:e.ev.addEvent(window,"load",t.onLoad),e.ev.addEvent(window,"unload",t.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var t=e.win;t.unload||(t.unload=!0,e.ev.removeEvent(window,"load",t.onLoad),e.ev.removeEvent(window,"unload",t.onUnload),e.ev.callArray(t.unloadHndlrs))},onLoad:function(){var t=e.win;t.loaded||t.unload||t.cancel||(t.loaded=!0,e.ev.callArray(t.loadPrvtHndlrs),e.ev.callArray(t.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var t=e.browser,n=t.isIE?0:1;return t.ActiveXEnabled&&(n=1),!!n},objectTagUsingActiveX:function(){var t=0;return e.browser.ActiveXEnabled&&(t=1),!!t},objectProperty:function(t){return t&&t.tagName&&e.browser.isIE?/applet/i.test(t.tagName)?!this.objectTag()||e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?1:0:e.isDefined(e.pd.getPROP(document.createElement(t.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var t,n=this;n.div||((t=n.getDiv())?n.div=t:(n.div=document.createElement("div"),n.div.id=n.divID,n.setStyle(n.div,n.getStyle.div()),n.insertDivInBody(n.div)),e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs)),t=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(t){if(t&&/div|span/i.test(t.tagName||"")){e.browser.isIE&&this.setStyle(t,["display","none"]);try{t.innerHTML=""}catch(e){}}},removeNode:function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},onUnload:function(e,t){var n,r,i,a=t.HTML,o=a.length;if(o)for(r=o-1;r>=0;r--)(i=a[r])&&(a[r]=0,t.emptyNode(i.span()),t.removeNode(i.span()),i.span=0,i.spanObj=0,i.doc=0,i.objectProperty=0);n=t.getDiv(),t.emptyNode(n),t.removeNode(n),i=0,n=0,t.div=0},span:function(){var e=this;return e.spanObj||(e.spanObj=e.doc.getElementById(e.spanId)),e.spanObj||null},width:function(){var t,n,r=this.span();return t=r&&e.isNum(r.scrollWidth)?r.scrollWidth:-1,n=r&&e.isNum(r.offsetWidth)?r.offsetWidth:-1,r=0,n>0?n:t>0?t:Math.max(n,t)},obj:function(){var e=this.span();return e&&e.firstChild||null},readyState:function(){return e.browser.isIE&&e.isDefined(e.pd.getPROP(this.span(),"readyState"))?e.pd.getPROP(this.obj(),"readyState"):e.UNDEFINED},objectProperty:function(){var t,n=this;return n.DOM.isEnabled.objectProperty(n)&&(t=e.pd.getPROP(n.obj(),"object")),t},onLoadHdlr:function(e,t){t.loaded=1},getTagStatus:function(t,n,r,i,a,o,s){if(!t||!t.span())return-2;var l=t.width(),u=t.obj()?1:0,c=t.readyState(),d=t.objectProperty();if(d)return 1.5;var f=/clsid\s*\:/i,h=r&&f.test(r.outerHTML||"")?r:i&&f.test(i.outerHTML||"")?i:0,p=r&&!f.test(r.outerHTML||"")?r:i&&!f.test(i.outerHTML||"")?i:0,m=t&&f.test(t.outerHTML||"")?h:p;if(!(n&&n.span()&&m&&m.span()))return-2;var g=m.width(),v=n.width(),_=m.readyState();return l<0||g<0||v<=this.pluginSize?0:(s&&!t.pi&&e.isDefined(d)&&e.browser.isIE&&t.tagName==m.tagName&&t.time<=m.time&&l===g&&0===c&&0!==_&&(t.pi=1),g<v||!t.loaded||!n.loaded||!m.loaded?t.pi?-.1:0:l!=v&&u?l!=this.pluginSize||!u||e.isNum(c)&&4!==c?t.pi?-.5:-1:1:t.pi?-.5:-1)},setStyle:function(e,t){var n,r=e.style;if(r&&t)for(n=0;n<t.length;n+=2)try{r[t[n]]=t[n+1]}catch(e){}e=0,r=0},getStyle:{iframe:function(){return this.span()},span:function(t){var n=e.DOM;return t?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",n.pluginSize+3+"px","lineHeight",n.pluginSize+3+"px"])},div:function(){var t=e.DOM;return[].concat(this.Default).concat(["display","block","width",t.divWidth+"px","height",t.pluginSize+3+"px","fontSize",t.pluginSize+3+"px","lineHeight",t.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(t){var n=e.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(t?"hidden;":"visible;")+"display:inline;font-size:"+(n.pluginSize+3)+"px;line-height:"+(n.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(t,n){var r="pd33993399",i=null,a=n?window.top.document:window.document,o=a.getElementsByTagName("body")[0]||a.body;if(!o)try{a.write('<div id="'+r+'">.'+e.openTag+"/div>"),i=a.getElementById(r)}catch(e){}(o=a.getElementsByTagName("body")[0]||a.body)&&(o.insertBefore(t,o.firstChild),i&&o.removeChild(i)),t=0},iframe:{onLoad:function(t,n){e.ev.callArray(t)},insert:function(t,n){var r,i=this,a=e.DOM,o=document.createElement("iframe");a.setStyle(o,a.getStyle.iframe()),o.width=a.iframeWidth,o.height=a.iframeHeight,a.initDiv(),a.getDiv().appendChild(o);try{i.doc(o).open()}catch(e){}return o[e.uniqueName()]=[],r=e.ev.handlerOnce(e.isNum(t)&&t>0?e.ev.handlerWait(t,i.onLoad,o[e.uniqueName()],n):e.ev.handler(i.onLoad,o[e.uniqueName()],n)),e.ev.addEvent(o,"load",r),o.onload||(o.onload=r),e.ev.addEvent(i.win(o),"load",r),o},addHandler:function(t,n){t&&e.ev.fPush(n,t[e.uniqueName()])},close:function(e){try{this.doc(e).close()}catch(e){}},write:function(e,t){try{this.doc(e).write(t)}catch(e){}},win:function(e){try{return e.contentWindow}catch(e){}return null},doc:function(e){var t;try{t=e.contentWindow.document}catch(e){}try{t||(t=e.contentDocument)}catch(e){}return t||null}},insert:function(t,n,r,i,a,o,s){var l,u,c,d,f,h=this;if(s||(h.initDiv(),s=h.getDiv()),s&&(/div/i.test(s.tagName)&&(d=s.ownerDocument),/iframe/i.test(s.tagName)&&(d=h.iframe.doc(s))),d&&d.createElement||(d=document),e.isDefined(i)||(i=""),e.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),l=e.openTag+t+" ",l+='style="'+h.getStyle.plugin(o)+'" ';var p=1,m=1;for(f=0;f<n.length;f+=2)/[^\s]/.test(n[f+1])&&(l+=n[f]+'="'+n[f+1]+'" '),/width/i.test(n[f])&&(p=0),/height/i.test(n[f])&&(m=0);if(l+=(p?'width="'+h.pluginSize+'" ':"")+(m?'height="'+h.pluginSize+'" ':""),"embed"==t||"img"==t)l+=" />";else{for(l+=">",f=0;f<r.length;f+=2)/[^\s]/.test(r[f+1])&&(l+=e.openTag+'param name="'+r[f]+'" value="'+r[f+1]+'" />');l+=i+e.openTag+"/"+t+">"}}else t="",l=i;if(u={spanId:"",spanObj:null,span:h.span,loaded:null,tagName:t,outerHTML:l,DOM:h,time:(new Date).getTime(),width:h.width,obj:h.obj,readyState:h.readyState,objectProperty:h.objectProperty,doc:d},s&&s.parentNode)if(/iframe/i.test(s.tagName))h.iframe.addHandler(s,[h.onLoadHdlr,u]),u.loaded=0,u.spanId=e.name+"Span"+h.HTML.length,c='<span id="'+u.spanId+'" style="'+h.getStyle.span(1)+'">'+l+"</span>",h.iframe.write(s,c);else if(/div/i.test(s.tagName)){c=d.createElement("span"),h.setStyle(c,h.getStyle.span()),s.appendChild(c);try{c.innerHTML=l}catch(e){}u.spanObj=c}return c=0,s=0,h.HTML.push(u),u}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(t,n,r){var i,a=this;t&&e.isDefined(r)&&(t[a.any]||(t[a.any]=[]),t[a.valid]||(t[a.valid]=[]),t[a.any].push(r),(i=a.split(n,r))&&t[a.valid].push(i))},getValidLength:function(e){return e&&e[this.valid]?e[this.valid].length:0},getAnyLength:function(e){return e&&e[this.any]?e[this.any].length:0},getValid:function(e,t){var n=this;return e&&e[n.valid]?n.get(e[n.valid],t):null},getAny:function(e,t){var n=this;return e&&e[n.any]?n.get(e[n.any],t):null},get:function(t,n){var r=t.length-1,i=e.isNum(n)?n:r;return i<0||i>r?null:t[i]},split:function(t,n){var r,i,a=null;return t=t?t.replace(".","\\."):"",i=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),e.isString(n)&&i.test(n)&&(a={name:(r=RegExp.$1.split("/"))[r.length-1],ext:RegExp.$2,full:n},r[r.length-1]="",a.path=r.join("/")),a}},Plugins:{}};e.init.library();var t={setPluginStatus:function(t,n,r){var i=this;i.version=n?e.formatNum(n,3):null,i.installed=i.version?1:r?r>0?.7:-.1:t?0:-1,i.getVersionDone=.7==i.installed||-.1==i.installed||0===i.nav.done?0:1},getVersion:function(t,n){var r,i=this,a=null,o=0;n=e.browser.isIE?0:n,o&&!e.dbug||!i.nav.query(n).installed||(o=1),a&&!e.dbug||!i.nav.query(n).version||(a=i.nav.version),(r=a?0:i.codebase.isMin(t))?i.setPluginStatus(0,0,r):(a&&!e.dbug||(r=i.codebase.search())&&(o=1,a=r),o&&!e.dbug||!i.axo.query().installed||(o=1),a&&!e.dbug||!i.axo.query().version||(a=i.axo.version),i.setPluginStatus(o,a))},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(t){var n,r,i=this,a={installed:0,version:null,plugin:null};return(n=e.pd.findNavPlugin({find:i.find,find2:t?0:i.find2,avoid:t?0:i.avoid,mimes:i.mimeType,plugins:i.plugins}))&&(a.plugin=n,a.installed=1,r=new RegExp(i.find,"i"),n.name&&r.test(n.name+"")&&(a.version=e.getNum(n.name+""))),a},query:function(t){var n,r,i=this;if(t=t?1:0,null===i.done){if(e.hasMimeType(i.mimeType)){(r=i.detect(1)).installed&&(n=i.detect(0),i.result=[n,n.installed?n:r]);var a,o=i.result[0],s=i.result[1],l=new RegExp(i.avoid,"i"),u=new RegExp(i.find3filename,"i");o=o?o.plugin:0,s=s?s.plugin:0,o||!s||!s.name||s.description&&!/^[\s]*$/.test(s.description+"")||l.test(s.name+"")||(a=(s.filename||"")+"",/^.*[\\\/]([^\\\/]*)$/.test(a)&&(a=RegExp.$1),a&&u.test(a)&&!l.test(a)&&(i.result[0]=i.result[1]))}i.done=i.result[0]===i.result[1]?1:0}return i.result[t]&&(i.installed=i.result[t].installed,i.version=i.result[t].version),i}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(n){var r,i=0;return this.$$=t,e.isStrNum(n)&&((r=n.split(e.splitNumRegx)).length>3&&parseInt(r[3],10)>0&&(r[3]="9999"),n=r.join(","),i=e.codebase.isMin(this,n)),i},search:function(){return this.$$=t,e.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(e,t){return t?[e[0],e[1]+e[2],e[3],"0"]:[e[0],e[1].charAt(0),e[1].charAt(1),e[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var t,n,r,i=this,a=i.hasRun||!e.browser.ActiveXEnabled;if(i.hasRun=1,a)return i;for(n=0;n<i.progID.length&&(!(t=e.getAXO(i.progID[n]))||(i.installed=1,!(r=e.pd.getPROP(t,"QuickTimeVersion"))||!r.toString||(r=r.toString(16),i.version=parseInt(r.charAt(0)||"0",16)+"."+parseInt(r.charAt(1)||"0",16)+"."+parseInt(r.charAt(2)||"0",16),e.dbug)));n++);return i}}};e.addPlugin("quicktime",t);var n={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var t=this,r=n;t.mimeObj=e.hasMimeType(r.mimeType),t.mimeObj&&(t.pluginObj=t.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(e){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var e=this;return null===e.pluginObj&&(e.pluginObj=n.navMime.pluginObj||n.navigator.pluginObj||0),e.pluginObj},getNavPluginName:function(){var e=this.getPluginObj();return e&&e.name||""},getNavPluginDescription:function(){var e=this.getPluginObj();return e&&e.description||""},Plugin2Status:0,setPlugin2Status:function(t){e.isNum(t)&&(this.Plugin2Status=t)},getPlugin2Status:function(){var t,n,r,i,a,o=this;return 0===o.Plugin2Status&&(n=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,r=/Classic.*Java.*Plug-?in/i,i=o.getNavPluginDescription(),a=o.getNavPluginName(),n.test(i)||n.test(a)?o.setPlugin2Status(1):r.test(i)||r.test(a)?o.setPlugin2Status(-1):e.browser.isIE&&/Sun|Oracle/i.test(o.getVendor())&&((t=o.isMinJre4Plugin2())>0?o.setPlugin2Status(1):t<0&&o.setPlugin2Status(-1))),o.Plugin2Status},isMinJre4Plugin2:function(t){var r,i=n,a="",o=i.applet.getResult()[0];return a=1==e.OS?"1,6,0,10":2==e.OS?"1,6,0,12":(e.OS,"1,6,0,10"),t||(t=(o&&!i.applet.isRange(o)?o:0)||i.version,r=i.applet.codebase,t=t||(r.min&&a?r.isMin(a)>0?a:"0,0,0,0":0)),(t=e.formatNum(e.getNum(t)))?e.compareNums(t,a)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,0,0")<0||t.isOpera&&e.compareNums(t.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,2,0")>=0||t.isChrome||1==e.OS&&t.isOpera&&e.compareNums(t.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var e,t=this,n=t.getNavPluginName(),r=t.getNavPluginDescription(),i="";if(n||r)for(e=0;e<t.VENDORS.length;e++)if(t.VENDORS_reg[e].test(n)||t.VENDORS_reg[e].test(r)){i=t.VENDORS[e];break}return i},OracleMin:"1,7,0,0",OracleOrSun:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?0:2]},OracleOrApple:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?1:2]},getVendor:function(){var t,r,i=this,a=n,o=a.vendor||a.applet.getResult()[1]||"";return o||(r=a.DTK.version,t=a.applet.codebase,(r=r||t.version||(t.min?t.isMin(i.OracleMin)>0?i.OracleMin:"0,0,0,0":0))?o=i.OracleOrSun(r):(o=i.getNavVendor()||"")||a.version&&(2==e.OS?o=i.OracleOrApple(a.version):1!=e.OS&&3!=e.OS||(o=i.OracleOrSun(a.version)))),o},isPlugin2InstalledEnabled:function(){var e=this,t=-1,r=n.installed,i=e.getPlugin2Status(),a=e.BrowserRequiresPlugin2(),o=e.BrowserForbidsPlugin2(),s=e.isMinJre4Plugin2();return null!==r&&r>=-.1&&(i>=3?t=1:i<=-3||(2==i?t=1:-2==i||(a&&i>=0&&s>0?t=1:o&&i<=0&&s<0||(a?t=1:o||(i>0?t=1:i<0||s<0||(t=0)))))),t},result:{getDeploymentToolkitObj:function(){var e=n,t=e.info,r=e.DTK;return r.query(1),t.updateResult(),r.status&&r.HTML?r.HTML.obj():r.status}},updateResult:function(){var t,r=this,i=n,a=i.applet,o=i.installed,s=i.DTK,l=a.results,u=r.result;for(u.DeployTK_versions=[].concat(e.isArray(s.VERSIONS)?s.VERSIONS:[]),u.vendor=r.getVendor(),u.isPlugin2=r.isPlugin2InstalledEnabled(),u.OTF=i.OTF<3?0:3==i.OTF?1:2,u.JavaAppletObj=null,t=0;t<l.length;t++)if(l[t][0]&&a.HTML[t]&&a.HTML[t].obj()){u.JavaAppletObj=a.HTML[t].obj();break}var c=[null,null,null,null];for(t=0;t<l.length;t++)l[t][0]?c[t]=1:null!==l[t][0]?(i.NOTF&&i.NOTF.isAppletActive(t),a.active[t]>0?c[t]=0:a.allowed[t]>=1&&3!=i.OTF&&(a.isDisabled.single(t)||-.2==o||-1==o||a.active[t]<0||3==t&&/Microsoft/i.test(u.vendor))&&(c[t]=-1)):3==t&&l[0][0]?c[t]=0:a.isDisabled.single(t)&&(c[t]=-1);u.objectTag=c[1],u.appletTag=c[2],u.objectTagActiveX=c[3],u.name=r.getNavPluginName(),u.description=r.getNavPluginDescription(),u.All_versions=[].concat(u.DeployTK_versions.length?u.DeployTK_versions:e.isString(i.version)?[i.version]:[]);var d=u.All_versions;for(t=0;t<d.length;t++)d[t]=e.formatNum(e.getNum(d[t]));return u}},getInfo:function(){var e=this.info;return e.updateResult(),e.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(t,n,r){var i,a=this,o=a.applet,s=a.verify,l=a.navigator,u=null,c=null,d=null;null===a.getVersionDone&&(a.OTF=0,l.init(),s&&s.init()),o.setVerifyTagsArray(r),e.file.save(a,".jar",n),0!==a.getVersionDone?(u&&!e.dbug||!a.navMime.query().version||(u=a.navMime.version),u&&!e.dbug||!a.navPlugin.query().version||(u=a.navPlugin.version),u&&!e.dbug||!a.DTK.query().version||(u=a.DTK.version),a.nonAppletDetectionOk(u)&&(d=u),a.setPluginStatus(d,c,u,t),o.should_Insert_Query_Any()&&(i=o.insert_Query_Any(t))[0]&&(d=i[0],c=i[1]),a.setPluginStatus(d,c,u,t)):o.should_Insert_Query_Any()&&(i=o.insert_Query_Any(t),a.setPluginStatus(i[0],i[1],u,t))},nonAppletDetectionOk:function(t){var n=this.navigator,r=e.browser,i=1;return t&&n.javaEnabled()&&(r.isIE||n.mimeObj)||(i=0),i},setPluginStatus:function(t,n,r,i){var a,o=this,s=0,l=o.applet;r=r||o.version0,(a=l.isRange(t))&&(l.setRange(a,i)==t&&(s=a),t=0),o.OTF<3&&(o.installed=s?s>0?.7:-.1:t?1:r?-.2:-1),2==o.OTF&&o.NOTF&&!o.applet.getResult()[0]&&(o.installed=r?-.2:-1),3==o.OTF&&-.5!=o.installed&&.5!=o.installed&&(o.installed=o.NOTF.isJavaActive(1)>=1?.5:-.5),4!=o.OTF||-.5!=o.installed&&.5!=o.installed||(t?o.installed=1:s?o.installed=s>0?.7:-.1:o.NOTF.isJavaActive(1)>=1?r?(o.installed=1,t=r):o.installed=0:o.installed=r?-.2:-1),r&&(o.version0=e.formatNum(e.getNum(r))),t&&!s&&(o.version=e.formatNum(e.getNum(t))),n&&e.isString(n)&&(o.vendor=n),o.vendor||(o.vendor=""),o.verify&&o.verify.isEnabled()?o.getVersionDone=0:1!=o.getVersionDone&&(o.OTF<2?o.getVersionDone=0:o.getVersionDone=o.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(t){return this.HTML?1:t||e.dbug?0:this.hasRun||!e.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(t){var r,i,a,o=this,s=n,l=e.DOM.altHTML,u={},c=null,d=null,f=o.isDisabled(t);if(o.hasRun=1,f)return o;if(o.status=0,e.DOM.isEnabled.objectTagUsingActiveX())for(r=0;r<o.classID.length&&(o.HTML=e.DOM.insert("object",["classid",o.classID[r]],[],l),c=o.HTML.obj(),!e.pd.getPROP(c,"jvms"));r++);else(i=e.hasMimeType(o.mimeType))&&i.type&&(o.HTML=e.DOM.insert("object",["type",i.type],[],l),c=o.HTML.obj());if(c){try{Math.abs(s.info.getPlugin2Status())<2&&(o.Plugin2Status=c.isPlugin2())}catch(e){}null!==o.Plugin2Status&&(o.Plugin2Status?s.info.setPlugin2Status(2):(e.DOM.isEnabled.objectTagUsingActiveX()||s.info.getPlugin2Status()<=0)&&s.info.setPlugin2Status(-2));try{if((a=e.pd.getPROP(c,"jvms"))&&(d=a.getLength(),e.isNum(d)))for(o.status=d>0?1:-1,r=0;r<d;r++)(i=e.getNum(a.get(d-1-r).version))&&(o.VERSIONS.push(i),u["a"+e.formatNum(i)]=1)}catch(e){}o.VERSIONS.length&&(o.version=e.formatNum(o.VERSIONS[0]))}return o}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var e=n;return this.hasRun||!e.navigator.mimeObj?1:0},update:function(t){var n=this,r=t?t.enabledPlugin:0,i=t&&n.regexJPI.test(t.type||"")?e.formatNum(e.getNum(RegExp.$1)):0;i&&r&&(r.description||r.name)&&e.compareNums(i,n.version||e.formatNum("0"))>0&&(n.version=i,n.mimeObj=t,n.pluginObj=r,n.mimetype=t.type)},query:function(){var t,r,i,a,o,s,l=this,u=n,c=navigator.mimeTypes,d=l.isDisabled();if(l.hasRun=1,d)return l;if(s=c.length,e.isNum(s))for(t=0;t<s;t++){i=0;try{i=c[t]}catch(e){}l.update(i)}if(!l.version||e.dbug)for(o=e.isArray(u.mimeType)?u.mimeType:[u.mimeType],t=0;t<o.length;t++){i=0;try{i=c[o[t]]}catch(e){}if(s=(a=i?i.enabledPlugin:0)?a.length:null,e.isNum(s))for(r=0;r<s;r++){i=0;try{i=a[r]}catch(e){}l.update(i)}}return l}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var t=n,r=0,i=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,a=e.pd.findNavPlugin({find:i,mimes:t.mimeType,plugins:1});return a&&(i.test(a.name||"")||i.test(a.description||""))&&parseInt(RegExp.$1,10)>=5&&(r="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),r},getPluginNum:function(){var t,r,i,a,o=this,s=n,l=0;return i=/Java[^\d]*Plug-in/i,(a=e.pd.findNavPlugin({find:i,num:1,mimes:s.mimeType,plugins:1,dbug:0}))&&(t=o.checkPluginNum(a.description,i),r=o.checkPluginNum(a.name,i),l=t&&r?e.compareNums(t,r)>0?t:r:t||r),l||(i=/Java.*\d.*Plug-in/i,(a=e.pd.findNavPlugin({find:i,mimes:s.mimeType,plugins:1,dbug:0}))&&(t=o.checkPluginNum(a.description,i),r=o.checkPluginNum(a.name,i),l=t&&r?e.compareNums(t,r)>0?t:r:t||r)),l},checkPluginNum:function(t,n){var r,i;return(r=n.test(t)?e.formatNum(e.getNum(t)):0)&&e.compareNums(r,e.formatNum("10"))>=0&&(i=r.split(e.splitNumRegx),r=e.formatNum("1,"+(parseInt(i[0],10)-3)+",0,"+i[1])),r&&(e.compareNums(r,e.formatNum("1,3"))<0||e.compareNums(r,e.formatNum("2"))>=0)&&(r=0),r},query:function(){var t,r=this,i=n,a=0,o=r.hasRun||!i.navigator.mimeObj;return r.hasRun=1,o?r:(a&&!e.dbug||(t=r.getPlatformNum())&&(a=t),a&&!e.dbug||(t=r.getPluginNum())&&(a=t),a&&(r.version=e.formatNum(a)),r)}},applet:{codebase:{isMin:function(t){return this.$$=n,e.codebase.isMin(this,t)},search:function(){return this.$$=n,e.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(e,t){return t?[parseInt(e[0],10)>1?"99":parseInt(e[1],10)+3+"",e[3],"0","0"]:["1",parseInt(e[0],10)-3+"","0",e[1]]},function(e,t){return t?[e[1],e[2],e[3]+"0","0"]:["1",e[0],e[1],e[2].substring(0,e[2].length-1||1)]},0,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},0,1,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e,t=this.results,n=[];for(e=t.length-1;e>=0&&!(n=t[e])[0];e--);return n=[].concat(n)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(e){var t;for(t=0;t<this.allowed.length;t++)if(this.allowed[t]===e)return 1;return 0},saveAsVerifyTagsArray:function(t){var n,r=this;if(e.isArray(t)){for(n=1;n<r.allowed.length;n++)t.length>n-1&&e.isNum(t[n-1])&&(t[n-1]<0&&(t[n-1]=0),t[n-1]>3&&(t[n-1]=3),r.allowed[n]=t[n-1]);r.allowed[0]=r.allowed[3]}},setVerifyTagsArray:function(t){var r=this,i=n;null===i.getVersionDone&&r.saveAsVerifyTagsArray(i.getVerifyTagsDefault()),e.dbug?r.saveAsVerifyTagsArray([3,3,3]):t&&r.saveAsVerifyTagsArray(t)},isDisabled:{single:function(t){return this.all()?1:1==t?!e.DOM.isEnabled.objectTag():2==t?this.AppletTag():0===t?e.codebase.isDisabled():3==t?!e.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var t,r=this,i=n.navigator,a=e.browser;return null===r.all_&&(t=a.isOpera&&e.compareNums(a.verOpera,"13,0,0,0")<0&&!i.javaEnabled()||r.AppletTag()&&!e.DOM.isEnabled.objectTag()||!i.mimeObj&&!a.isIE?1:0,r.all_=t),r.all_},AppletTag:function(){var t=n.navigator;return e.browser.isIE?!t.javaEnabled():0},VerifyTagsDefault_1:function(){var t=e.browser,n=1;return t.isIE&&!t.ActiveXEnabled&&(n=0),(t.isIE&&t.verIE<9||t.verGecko&&e.compareNums(t.verGecko,e.formatNum("2"))<0||t.isSafari&&(!t.verSafari||e.compareNums(t.verSafari,e.formatNum("4"))<0)||t.isOpera&&e.compareNums(t.verOpera,e.formatNum("11"))<0)&&(n=0),n}},can_Insert_Query:function(e){var t=this,n=t.results[0][0],r=t.getResult()[0];return t.HTML[e]||0===e&&null!==n&&!t.isRange(n)||0===e&&r&&!t.isRange(r)?0:!t.isDisabled.single(e)},can_Insert_Query_Any:function(){var e;for(e=0;e<this.results.length;e++)if(this.can_Insert_Query(e))return 1;return 0},should_Insert_Query:function(e){var t=this,r=t.allowed,i=n,a=t.getResult()[0];return a=a&&(e>0||!t.isRange(a)),t.can_Insert_Query(e)&&0!==r[e]?3==r[e]||2.8==r[e]&&!a?1:i.nonAppletDetectionOk(i.version0)||2!=r[e]&&(1!=r[e]||a)?0:1:0},should_Insert_Query_Any:function(){var e;for(e=0;e<this.allowed.length;e++)if(this.should_Insert_Query(e))return 1;return 0},query:function(t){var r,i,a=this,o=n,s=null,l=null,u=a.results,c=a.HTML[t];if(c&&c.obj()&&!u[t][0]&&!o.bridgeDisabled&&(r=c.obj(),i=c.readyState(),!e.isNum(i)||4==i)){try{s=e.getNum(r.getVersion()+""),l=r.getVendor()+"",r.statusbar((e.win.loaded," "))}catch(e){}!s||!e.isStrNum(s)||e.dbug&&o.OTF<3||(u[t]=[s,l],a.active[t]=2)}},isRange:function(e){return/^[<>]/.test(e||"")?">"==e.charAt(0)?1:-1:0},setRange:function(t,n){return(t?t>0?">":"<":"")+(e.isString(n)?n:"")},insertJavaTag:function(t,r,i,a,o){var s=n,l=e.file.getValid(s),u=l.name+l.ext,c=l.path,d=["archive",u,"code","A.class"],f=(a?["width",a]:[]).concat(o?["height",o]:[]),h=["mayscript","true"],p=["scriptable","true","codebase_lookup","false"].concat(h),m=s.navigator,g=!e.browser.isIE&&m.mimeObj&&m.mimeObj.type?m.mimeObj.type:s.mimeType[0];return 1==t?(e.browser.isIE,e.DOM.insert("object",["type",g].concat(f),["codebase",c].concat(d).concat(p),i,s,0,r)):2==t?e.browser.isIE?e.DOM.insert("applet",["alt",i].concat(h).concat(d).concat(f),["codebase",c].concat(p),i,s,0,r):e.DOM.insert("applet",["codebase",c,"alt",i].concat(h).concat(d).concat(f),[].concat(p),i,s,0,r):3==t?e.browser.isIE?e.DOM.insert("object",["classid",s.classID].concat(f),["codebase",c].concat(d).concat(p),i,s,0,r):e.DOM.insert():4==t?e.DOM.insert("embed",["codebase",c].concat(d).concat(["type",g]).concat(p).concat(f),[],i,s,0,r):e.DOM.insert()},insertIframe:function(t){return e.DOM.iframe.insert(99,t)},insert_Query_Any:function(t){var r,i,a=this,o=n,s=e.DOM,l=a.results,u=a.HTML,c=s.altHTML,d=e.file.getValid(o);return a.should_Insert_Query(0)&&(o.OTF<2&&(o.OTF=2),l[0]=[0,0],(r=t?a.codebase.isMin(t):a.codebase.search())&&(l[0][0]=t?a.setRange(r,t):r),a.active[0]=r?1.5:-1),d?(a.DummySpanTagHTML||(i=a.insertIframe("applet.DummySpanTagHTML"),a.DummySpanTagHTML=s.insert("",[],[],c,0,0,i),s.iframe.close(i)),a.should_Insert_Query(1)&&(o.OTF<2&&(o.OTF=2),i=a.insertIframe("applet.HTML[1]"),u[1]=a.insertJavaTag(1,i,c),s.iframe.close(i),l[1]=[0,0],a.query(1)),a.should_Insert_Query(2)&&(o.OTF<2&&(o.OTF=2),i=a.insertIframe("applet.HTML[2]"),u[2]=a.insertJavaTag(2,i,c),s.iframe.close(i),l[2]=[0,0],a.query(2)),a.should_Insert_Query(3)&&(o.OTF<2&&(o.OTF=2),i=a.insertIframe("applet.HTML[3]"),u[3]=a.insertJavaTag(3,i,c),s.iframe.close(i),l[3]=[0,0],a.query(3)),s.isEnabled.objectTag()&&(a.DummyObjTagHTML||!u[1]&&!u[2]||(i=a.insertIframe("applet.DummyObjTagHTML"),a.DummyObjTagHTML=s.insert("object",["type",o.mimeType_dummy],[],c,0,0,i),s.iframe.close(i)),!a.DummyObjTagHTML2&&u[3]&&(i=a.insertIframe("applet.DummyObjTagHTML2"),a.DummyObjTagHTML2=s.insert("object",["classid",o.classID_dummy],[],c,0,0,i),s.iframe.close(i))),o.NOTF.init(),a.getResult()):a.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var t=this,r=n;r.OTF<3&&t.shouldContinueQuery()&&(r.OTF=3,e.ev.setTimeout(t.onIntervalQuery,t.intervalLength))},allHTMLloaded:function(){var e,t=n.applet,r=[t.DummySpanTagHTML,t.DummyObjTagHTML,t.DummyObjTagHTML2].concat(t.HTML);for(e=0;e<r.length;e++)if(r[e]&&null!==r[e].loaded&&!r[e].loaded)return 0;return 1},shouldContinueQuery:function(){var e,t=this,r=n.applet,i=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return i}else t.count2=t.count;for(e=0;e<r.results.length;e++)r.HTML[e]&&!r.results[e][0]&&(r.allowed[e]>=2||1==r.allowed[e]&&!r.getResult()[0])&&(!t.count||t.isAppletActive(e)>=0)&&(i=1);return i},isJavaActive:function(e){var t,r,i=n,a=-9;for(t=0;t<i.applet.HTML.length;t++)(r=this.isAppletActive(t,e))>a&&(a=r);return a},isAppletActive:function(t,r){var i,a,o=n,s=o.navigator,l=o.applet,u=l.HTML[t],c=l.active,d=0,f=c[t];if(r||f>=1.5||!u||!u.span())return f;for(a=e.DOM.getTagStatus(u,l.DummySpanTagHTML,l.DummyObjTagHTML,l.DummyObjTagHTML2,this.count),i=0;i<c.length;i++)c[i]>0&&(d=1);return f=1!=a?a:e.browser.isIE||o.version0&&s.javaEnabled()&&s.mimeObj&&("object"==u.tagName||d)?1:0,c[t]=f,f},onIntervalQuery:function(){var t,r=n.NOTF;r.count++,3==n.OTF&&(t=r.queryAllApplets(),r.shouldContinueQuery()||r.queryCompleted(t)),3==n.OTF&&e.ev.setTimeout(r.onIntervalQuery,r.intervalLength)},queryAllApplets:function(){var e,t=n.applet;for(e=0;e<t.results.length;e++)t.query(e);return t.getResult()},queryCompleted:function(t){var r=n;r.OTF>=4||(r.OTF=4,this.isJavaActive(),r.setPluginStatus(t[0],t[1],0),e.ev.callArray(r.DoneHndlrs))}}};e.addPlugin("java",n);var r={mimeType:"application/x-shockwave-flash",setPluginStatus:function(t,n){var r,i=this;i.installed=n?1:t?0:-1,i.version=e.formatNum(n),r=(r=-1==i.installed||i.instance.version)||i.axo.version,i.getVersionDone=r?1:0},getVersion:function(t,n){var r=this,i=null,a=0;a&&!e.dbug||!r.navPlugin.query().installed||(a=1),i&&!e.dbug||!r.navPlugin.query().version||(i=r.navPlugin.version),a&&!e.dbug||!r.axo.query().installed||(a=1),i&&!e.dbug||!r.axo.query().version||(i=r.axo.version),(!a&&!i||n||e.dbug)&&r.instance.query().version&&(a=1,i=r.instance.version),r.setPluginStatus(a,i)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var t,n,i=this,a=r,o=i.hasRun||!e.hasMimeType(a.mimeType);return i.hasRun=1,o?i:((n=e.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:a.mimeType,plugins:["Shockwave Flash"]}))&&(i.installed=1,n.description&&(t=i.getNum(n.description))),t&&(t=e.getPluginFileVersion(n,t)),t&&(i.version=t),i)}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var t,n,r,i=this,a=i.hasRun;if(i.hasRun=1,a)return i;for(n=0;n<10;n++)if(r=e.getAXO(i.progID+(n?"."+n:""))){i.installed=1,t=0;try{t=e.getNum(r.GetVariable("$version")+"")}catch(e){}if(t&&(i.version=t,!e.dbug))break}return i}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=r,n=1;return!this.hasRun&&!e.DOM.isEnabled.objectTagUsingActiveX()&&e.DOM.isEnabled.objectTag()&&e.hasMimeType(t.mimeType)||(n=0),n},query:function(){var t=this,n=r,i=t.isEnabled();if(t.hasRun=1,i){t.HTML=e.DOM.insert("object",["type",n.mimeType],["play","false","menu","false"],"",n);try{t.version=e.getNum(t.HTML.obj().GetVariable("$version")+"")}catch(e){}}return t}}};e.addPlugin("flash",r);var i={getVersion:function(){var t,n=this,r=null;t&&!e.dbug||!n.nav.query().installed||(t=1),r&&!e.dbug||!n.nav.query().version||(r=n.nav.version),t&&!e.dbug||!n.axo.query().installed||(t=1),r&&!e.dbug||!n.axo.query().version||(r=n.axo.version),n.installed=r?1:t?0:-1,n.version=e.formatNum(r)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var t,n,r=this,i=r.hasRun||!e.hasMimeType(r.mimeType);return r.hasRun=1,i?r:((n=e.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:r.mimeType,plugins:"Shockwave for Director"}))&&n.description&&(t=e.getNum(n.description+"")),t&&(t=e.getPluginFileVersion(n,t)),n&&(r.installed=1),t&&(r.version=t),r)}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var t,n,r,i,a,o=this,s=!o.hasRun;if(o.hasRun=1,s)for(n=0;n<o.progID.length;n++)if(t=e.getAXO(o.progID[n])){o.installed=1,i="";try{i=t.ShockwaveVersion("")+""}catch(e){}if(/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i.test(i)&&(a=RegExp.$2,r=e.formatNum(RegExp.$1),a&&((r=r.split(e.splitNumRegx))[3]=a,r=r.join(","))),r&&(o.version=r,!e.dbug))break}return o}}};e.addPlugin("shockwave",i);var a={setPluginStatus:function(t,n){var r=this;t&&(r.version=e.formatNum(t)),r.installed=r.version?1:n?0:-1,r.getVersionDone=0===r.installed?0:1},getVersion:function(t,n){var r,i=this,a=null;r&&!e.dbug||!i.nav.query().installed||(r=1),r&&!e.dbug||!i.axo.query().installed||(r=1),a&&!e.dbug||!i.axo.query().version||(a=i.axo.version),(!r&&!a||n||e.dbug)&&i.FirefoxPlugin.query().version&&(r=1,a=i.FirefoxPlugin.version),i.setPluginStatus(a,r)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var t=this,n=a,r=t.hasRun||!e.hasMimeType(n.mimeType);return t.hasRun=1,r?t:(e.pd.findNavPlugin({find:n.find.join("|"),avoid:n.avoid,mimes:n.mimeType,plugins:n.plugins})&&(t.installed=1),t)}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var t=a,n=e.browser;return this.hasRun||n.isGecko&&e.compareNums(n.verGecko,e.formatNum("1.8"))<0||n.isOpera&&e.compareNums(n.verOpera,e.formatNum("10"))<0||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})?1:0},query:function(){var t,n=this,r=a,i=n.isDisabled();return n.hasRun=1,i?n:((t=e.pd.getPROP(e.DOM.insert("object",["type",e.hasMimeType(r.mimeType).type,"data",""],["src",""],"",r).obj(),"versionInfo"))&&(n.version=e.getNum(t)),n)}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var t,n,r,i=this,a=!i.hasRun;if(i.hasRun=1,a)for(n=0;n<i.progID.length&&(!(t=e.getAXO(i.progID[n]))||(i.installed=1,(r=e.pd.getPROP(t,"versionInfo",0))&&(r=e.getNum(r)),!r||(i.version=r,e.dbug)));n++);return i}},result:0,getInfo:function(){var t=this,n=t.installed;return t.result||(t.result={ActiveXPlugin:!!t.axo.version,FirefoxPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})),DllPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[1],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[1]})),Flip4macPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[2],avoid:t.avoid,mimes:t.mimeType,plugins:1}))},t.result.Scriptable=!(1!=n&&!t.result.FirefoxPlugin)),t.result}};e.addPlugin("windowsmediaplayer",a);var o={getVersion:function(){var t=this,n=null,r=0;r&&!e.dbug||!t.nav.query().installed||(r=1),n&&!e.dbug||!t.nav.query().version||(n=t.nav.version),r&&!e.dbug||!t.axo.query().installed||(r=1),n&&!e.dbug||!t.axo.query().version||(n=t.axo.version),t.version=e.formatNum(n),t.installed=n?1:r?0:-1},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var t,n,r,i=this,a=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,a?i:((r=e.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:i.mimeType,plugins:"Silverlight Plug-In"}))&&(i.installed=1),r&&r.description&&(n=e.formatNum(e.getNum(r.description+""))),n&&(t=n.split(e.splitNumRegx),parseInt(t[0],10)<2&&parseInt(t[2],10)>=30226&&(t[0]="2"),n=t.join(",")),n&&(i.version=n),i)}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(t,n){var r=this;try{return r.testVersion?e.compareNums(e.formatNum(r.testVersion.join(",")),e.formatNum(n.join(",")))>=0:t.IsVersionSupported(r.format(n))}catch(e){}return 0},format:function(e){return e[0]+"."+e[1]+"."+e[2]+this.make2digits(e[3])+this.make2digits(e[4])+"."+e[5]},make2digits:function(e){return(e<10?"0":"")+e},query:function(){var t,n,r=this,i=r.hasRun;if(r.hasRun=1,i)return r;if((n=e.getAXO(r.progID))&&(r.installed=1),n&&r.IsVersionSupported(n,r.mindigit)){var a,o=[].concat(r.mindigit);for(t=0;t<r.maxdigit.length;t++){for(a=0;r.maxdigit[t]-r.mindigit[t]>1&&a<20;)a++,0,o[t]=Math.round((r.maxdigit[t]+r.mindigit[t])/2),r.IsVersionSupported(n,o)?r.mindigit[t]=o[t]:r.maxdigit[t]=o[t];o[t]=r.mindigit[t]}r.version=r.format(o)}return r}}};e.addPlugin("silverlight",o);var s={compareNums:function(t,n){var r,i,a,o,s,l=t.split(e.splitNumRegx),u=n.split(e.splitNumRegx);for(r=0;r<Math.min(l.length,u.length);r++){if(/([\d]+)([a-z]?)/.test(l[r]),i=parseInt(RegExp.$1,10),o=2==r&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,/([\d]+)([a-z]?)/.test(u[r]),a=parseInt(RegExp.$1,10),s=2==r&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,i!=a)return i>a?1:-1;if(2==r&&o!=s)return o>s?1:-1}return 0},setPluginStatus:function(t,n,r){var i=this;i.installed=n?1:r?r>0?.7:-.1:t?0:-1,n&&(i.version=e.formatNum(n)),i.getVersionDone=.7==i.installed||-.1==i.installed?0:1},getVersion:function(t){var n,r,i=this,a=null;n&&!e.dbug||!i.nav.query().installed||(n=1),a&&!e.dbug||!i.nav.query().version||(a=i.nav.version),n&&!e.dbug||!i.axo.query().installed||(n=1),a&&!e.dbug||!i.axo.query().version||(a=i.axo.version),a&&!e.dbug||!(r=i.codebase.isMin(t))?(a&&!e.dbug||(r=i.codebase.search())&&(n=1,a=r),i.setPluginStatus(n,a,0)):i.setPluginStatus(0,0,r)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var t,n,r=this,i=r.hasRun||!e.hasMimeType(r.mimeType);return r.hasRun=1,i?r:((n=e.pd.findNavPlugin({find:r.find,avoid:r.avoid,mimes:r.mimeType,plugins:r.plugins}))&&(r.installed=1,n.description&&(t=e.getNum(n.description+"","[\\d][\\d\\.]*[a-z]*")),t&&(r.version=t)),r)}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var t,n,r=this,i=r.hasRun;return r.hasRun=1,i?r:((t=e.getAXO(r.progID))&&(r.installed=1,(n=e.getNum(e.pd.getPROP(t,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*"))&&(r.version=n)),r)}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(t){return this.$$=s,e.codebase.isMin(this,t)},search:function(){return this.$$=s,e.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};e.addPlugin("vlc",s);var l={OTF:null,setPluginStatus:function(){var t=this,n=t.OTF,r=t.nav.detected,i=t.nav.version,a=t.nav.precision,o=i,s=r>0,l=t.axo.detected,u=t.axo.version,c=t.axo.precision,d=t.doc.detected,f=t.doc.version,h=t.doc.precision,p=t.doc2.detected,m=t.doc2.version,g=t.doc2.precision;o=m||o||u||f,a=g||a||c||h,s=p>0||s||l>0||d>0,o=o||null,t.version=e.formatNum(o),t.precision=a;var v=-1;if(3==n?v=t.version?.5:-.5:o?v=1:s?v=0:-.5==l||-.5==d?v=-.15:!e.browser.isIE||e.browser.ActiveXEnabled&&!e.browser.ActiveXFilteringEnabled||(v=-1.5),t.installed=v,1!=t.getVersionDone){var _=1;t.verify&&t.verify.isEnabled()||.5==t.installed||-.5==t.installed?_=0:1==t.doc2.isDisabled()&&(_=0),t.getVersionDone=_}},getVersion:function(t,n){var r=this,i=0,a=r.verify;if(null===r.getVersionDone&&(r.OTF=0,a&&a.init()),e.file.save(r,".pdf",n),0===r.getVersionDone)return r.doc2.insertHTMLQuery(),void r.setPluginStatus();i&&!e.dbug||!r.nav.query().version||(i=1),i&&!e.dbug||!r.axo.query().version||(i=1),i&&!e.dbug||!r.doc.query().version||(i=1),r.doc2.insertHTMLQuery(),r.setPluginStatus()},getPrecision:function(t,n,r){if(e.isString(t)){n=n||"",r=r||"";var i,a="\\d+",o=[a,a,a,a];for(i=4;i>0;i--)if(new RegExp(n+o.slice(0,i).join("[\\.]")+r).test(t))return i}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var t,n=this,r=null;return n.detected||!e.hasMimeType(n.mimeType)?n:(t=e.pd.findNavPlugin({find:n.find,mimes:n.mimeType,plugins:n.plugins}),n.detected=t?1:-1,t&&(r=e.getNum(t.description)||e.getNum(t.name),(r=e.getPluginFileVersion(t,r))||(r=n.attempt3()),r&&(n.version=r,n.precision=l.getPrecision(r))),n)},attempt3:function(){var t=null;return 1==e.OS&&(e.hasMimeType("application/vnd.adobe.pdfxml")?t="9":e.hasMimeType("application/vnd.adobe.x-mars")?t="8":e.hasMimeType("application/vnd.adobe.xfdf")&&(t="6")),t}},activexQuery:function(t){var n,r,i,a,o="",s={precision:0,version:null};try{t&&(o=t.GetVersions()+"")}catch(e){}if(o&&e.isString(o)&&(n=/\=\s*[\d\.]+/g,a=o.match(n))){for(r=0;r<a.length;r++)(i=e.formatNum(e.getNum(a[r])))&&(!s.version||e.compareNums(i,s.version)>0)&&(s.version=i);s.precision=l.getPrecision(o,"\\=\\s*")}return s},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var t,n,r,i,a,o,s=this,u=l;if(s.detected)return s;for(s.detected=-1,(n=e.getAXO(s.progID_dummy))||(o=e.errObj),a=0;a<s.progID.length;a++)if(n=e.getAXO(s.progID[a])){if(s.detected=1,r=(t=u.activexQuery(n)).version,i=t.precision,!e.dbug&&r)break}else o&&e.errObj&&o!==e.errObj&&o.message!==e.errObj.message&&(s.detected=-.5);return r&&(s.version=r),i&&(s.precision=i),s}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var t=0;return this.HTML?t=1:e.dbug||e.DOM.isEnabled.objectTagUsingActiveX()||(t=1),t},query:function(){var t,n,r,i,a,o=this,s=l,u=e.DOM.altHTML;return o.isDisabled()?o:(t=e.DOM.iframe.insert(99,"Adobe Reader"),o.DummySpanTagHTML=e.DOM.insert("",[],[],u,s,1,t),o.HTML=e.DOM.insert("object",["classid",o.classID],[],u,s,1,t),o.DummyObjTagHTML2=e.DOM.insert("object",["classid",o.classID_dummy],[],u,s,1,t),e.DOM.iframe.close(t),a=e.DOM.getTagStatus(o.HTML,o.DummySpanTagHTML,o.DummyObjTagHTML1,o.DummyObjTagHTML2,0,0,1),r=(n=s.activexQuery(o.HTML.obj())).version,i=n.precision,o.detected=a>0||r?1:-.1==a||-.5==a?-.5:-1,r&&(o.version=r),i&&(o.precision=i),o)}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var t,n,r,i=l,a=i.axo,o=i.nav,s=i.doc,u=0;return this.HTML?u=2:e.dbug||(e.DOM.isEnabled.objectTagUsingActiveX()?(t=(o?o.version:0)||(a?a.version:0)||(s?s.version:0)||0,n=(o?o.precision:0)||(a?a.precision:0)||(s?s.precision:0)||0,(!t||!n||n>2||e.compareNums(e.formatNum(t),e.formatNum("11"))<0)&&(u=2)):u=2),u<2&&((r=e.file.getValid(i))&&r.full||(u=1)),u},handlerSet:0,onMessage:function(){var t=this;return function(n){t.version||(t.detected=1,e.isArray(n)&&(n=n[0]),(n=e.getNum(n+""))&&(/[.,_]/.test(n)||(n+="."),/^(\d+)[.,_](\d)(\d\d)(\d\d)/.test(n+="00000")&&(n=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4),t.version=e.formatNum(n),t.precision=3,l.setPluginStatus()))}},isDefinedMsgHandler:function(e,t){try{return e?e.messageHandler!==t:0}catch(e){}return 1},queryObject:function(){var e=this,t=e.HTML,n=t?t.obj():0;if(n){if(!e.handlerSet&&e.isDefinedMsgHandler(n)){try{n.messageHandler={onMessage:e.onMessage()}}catch(e){}e.handlerSet=1,e.count2=e.count,e.time2=(new Date).getTime()}e.detected||(e.count>3&&!e.handlerSet?e.detected=-1:e.time2&&e.count-e.count2>=e.maxCount&&(new Date).getTime()-e.time2>=e.intervalLength*e.maxCount&&(e.detected=-.5)),e.detected&&e.detected}},insertHTMLQuery:function(){var t,n,r=this,i=l,a=e.DOM.altHTML;return r.isDisabled()?r:(i.OTF<2&&(i.OTF=2),t=e.file.getValid(i).full,n=e.DOM.iframe.insert(0,"Adobe Reader"),e.DOM.iframe.write(n,'<script type="text/javascript"><\/script>'),r.HTML=e.DOM.insert("object",["data",t].concat(e.browser.isIE?["classid",r.classID]:["type",r.mimeType]),["src",t],a,i,0,n),e.DOM.iframe.addHandler(n,r.onIntervalQuery),i.OTF<3&&r.HTML&&(i.OTF=3),e.DOM.iframe.close(n),r)},onIntervalQuery:function(){var t=l,n=t.doc2;n.count++,3==t.OTF&&(n.queryObject(),n.detected&&n.queryCompleted()),3==t.OTF&&e.ev.setTimeout(n.onIntervalQuery,n.intervalLength)},queryCompleted:function(){var t=l;4!=t.OTF&&(t.OTF=4,t.setPluginStatus(),e.ev.callArray(t.DoneHndlrs))},z:0},getInfo:function(){var e=this;e.setPluginStatus();var t={OTF:e.OTF<3?0:3==e.OTF?1:2,DummyPDFused:!1,version:e.version,precision:e.precision};return 1!=e.doc2.detected&&-.5!=e.doc2.detected||(t.DummyPDFused=!0),t}};e.addPlugin("adobereader",l);var u={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(t,n){var r,i=this;n&&(i.version=e.formatNum(e.getNum(n))),i.installed=i.version?1:t?0:-1,r=(r=-1==i.installed||i.instance.version)||i.axo.version,i.getVersionDone=r?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var t,n=this,r=u,i=!n.hasRun&&e.hasMimeType(r.mimeType);return n.hasRun=1,i&&(t=e.pd.findNavPlugin({find:n.find,avoid:n.avoid,mimes:r.mimeType,plugins:n.plugins}),n.installed=t?1:0,(t=e.getPluginFileVersion(t))&&e.compareNums(e.formatNum(t),e.formatNum("15"))>=0&&(n.version=t)),n}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){var n,r,i,a=e.length,o=t.length;for(n=0;n<Math.max(a,o);n++){if((r=n<a?e[n]:0)>(i=n<o?t[n]:0))return 1;if(r<i)return-1}return 0},convertNum:function(t,n,r){var i,a,o,s=this,l=null;if(!t||!(i=e.formatNum(t)))return l;for(i=i.split(e.splitNumRegx),o=0;o<i.length;o++)i[o]=parseInt(i[o],10);if(0!==s.compare(i.slice(0,Math.min(n[0].length,i.length)),n[0]))return l;if(a=i.length>n[0].length?i.slice(n[0].length):[],s.compare(a,n[1])>0||s.compare(a,n[n.length-1])<0)return l;for(o=n.length-1;o>=1&&1!=o&&(0!==s.compare(n[o],a)||0!==s.compare(n[o],n[o-1]))&&!(s.compare(a,n[o])>=0&&s.compare(a,n[o-1])<0);o--);return r[0].join(".")+"."+r[o].join(".")},isEnabled:function(){return!this.hasRun&&1==e.OS&&e.hasMimeType(this.mimetype)?1:0},query:function(){var t,n,r,i=this,a=i.isEnabled();if(i.hasRun=1,a&&((n=e.pd.findNavPlugin({find:i.regStr,mimes:i.mimetype}))&&(t=e.formatNum(e.getNum(n.description))),t)){var o=t.split(e.splitNumRegx);r=1,i.compare(o,[6,0,12,200])<0?r=-1:i.compare(o,[6,0,12,1739])<=0&&i.compare(o,[6,0,12,857])>=0&&(r=-1),r<0&&(n=i.convertNum(t,i.q3,i.q1),i.version=n||t)}return i}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=u,n=1;return e.DOM.isEnabled.objectTag()?e.dbug||(this.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||e.browser.isGecko&&e.compareNums(e.browser.verGecko,e.formatNum("1,8"))<0||e.browser.isOpera&&e.compareNums(e.browser.verOpera,e.formatNum("10"))<0)&&(n=0):n=0,n},query:function(){var t,n=this,r=u,i=n.isEnabled();if(n.hasRun=1,i){n.HTML=e.DOM.insert("object",["type",r.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",r),t=n.HTML.obj();try{n.version=e.getNum(t.GetVersionInfo())}catch(e){}e.DOM.setStyle(t,["display","none"])}return n}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var t,n,r,i=this;if(!i.hasRun)for(i.hasRun=1,n=0;n<i.progID.length;n++)if(t=e.getAXO(i.progID[n])){i.installed=1,r=0;try{r=t.GetVersionInfo()+""}catch(e){}if(r&&(i.version=r,!e.dbug))break}return i}},getVersion:function(t,n){var r=this,i=null,a=0;a&&!e.dbug||!r.axo.query().installed||(a=1),i&&!e.dbug||!r.axo.query().version||(i=r.axo.version),a&&!e.dbug||!r.navObj.query().installed||(a=1),i&&!e.dbug||!r.navObj.query().version||(i=r.navObj.version),i&&!e.dbug||!r.JS.query().version||(a=1,i=r.JS.version),(!a&&!i||n||e.dbug)&&r.instance.query().version&&(a=1,i=r.instance.version),r.setPluginStatus(a,i)}};e.addPlugin("realplayer",u);var c={storage:{},codebase:{isMin:function(t){return this.$$=c,e.codebase.isMin(this,t)},search:function(){return this.$$=c,e.codebase.search(this)},classID:"",DIGITMAX:[[100,100,100,0]],DIGITMIN:[0,0,0,0],Upper:["99999"],Lower:["0"],convert:[1]},clone:function(t,n){var r,i;if(e.isNum(t)||e.isString(t)||null===t||e.isFunc(t)||t===e||t===e.Plugins||t===this)return t;if(t.window||t.firstChild||t.appendChild)return t;for(r in e.isArray(t)?i=[]:t&&(i={}),t)e.hasOwn(t,r)&&(0,i[r]=this.clone(t[r],r));return i},setPluginStatus:function(t,n,r){var i=this;i.getVersionDone=0,i.version=e.formatNum(n),i.installed=n?1:t?t>0?.7:-.1:r?-3:-1},getVersion:function(t,n,r){var i,a,o,s=this,l=null,u=null,c="";if(e.codebase.isDisabled())s.setPluginStatus(0,0);else if(n&&e.isString(n)&&/[^\s]+/.test(n)){if(c=(n=n.replace(/\s/g,"")).replace(/[\:\-\/]/g,"$"),e.isArray(r)){for(r.length||r.push(0),i=0;i<r.length;i++)if(e.isDefined(r[i])||(r[i]=0),!e.isNum(r[i])||r[i]<0||r[i]>99999999)return void s.setPluginStatus(0,0,1);if(c&&s.storage[c]){for(a=s.storage[c].codebase,o=0,i=0;i<Math.max(r.length,a.DIGITMAX[0].length);i++)if((i<r.length?r[i]:0)>(i<a.DIGITMAX[0].length?a.DIGITMAX[0][i]:0)){o=1;break}if(o&&a.version)for(o=a.version.split(e.splitNumRegx),i=0;i<Math.max(o.length,a.DIGITMAX[0].length);i++)if((i<o.length?o[i]:0)===(i<a.DIGITMAX[0].length?a.DIGITMAX[0][i]:0)){s.storage[c]=null;break}}}else r=[0];c&&!s.storage[c]&&(s.storage[c]={codebase:s.clone(s.codebase)},s.storage[c].codebase.classID=n,e.isArray(r)&&r.length&&(s.storage[c].codebase.DIGITMAX=[[].concat(r)])),t?(l=s.storage[c].codebase.isMin(t),u=s.storage[c].codebase.version):(l=0,u=s.storage[c].codebase.search()),s.setPluginStatus(l,u)}else s.setPluginStatus(0,0,1)}};e.addPlugin("activex",c)}()},whut:function(e,t,n){"use strict";var r=o(n("rXeC")),i=o(n("8NzR")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("FD+P"),(0,i.default)(".NS-forms_categorization_field",function(e){e.each(function(){var e=(0,r.default)(this),t=e.find(".template"),n=e.find("ol.selected");n.find("li").each(function(){var e,t;e=(0,r.default)(this),t=(0,r.default)('<a class="remove" href="#">'+a.default.t("onloads.views.forms.categorization_field.remove")+"</a>"),e.append(t)}),n.on("click","a.remove",function(e){var t=(0,r.default)(this).closest("li"),n=t.find(".destroy");e.preventDefault(),t.fadeOut(function(){n.length?n.val("1"):t.remove()})}),e.find(".new a").on("click",function(e){e.preventDefault(),n.append(t.clone_form_template())})})})},wtjs:function(e,t,n){"use strict";var r=o(n("l/Rs")),i=o(n("9VV1")),a=o(n("wmCY"));function o(e){return e&&e.__esModule?e:{default:e}}n("LNuh"),n("jN36"),(0,r.default)(function(){(0,r.default)("#account-setup-panel .NS_accounts__edit .account-pending").livequery(function(){r.default.pollster((0,r.default)(this).attr("data-url"),function(e){var t=e.identity.state;if("passed"===t)(0,i.default)({success:a.default.t("onloads.views.accounts.processing_state.Your_identity_and_banking_information_has_been_approved")});else{if("failed"!==t)return!1;(0,i.default)({error:a.default.t("onloads.views.accounts.processing_state.We_need_more_information_to_verify_your_identity")})}return(0,r.default)("#account-setup-panel").trigger("project_build:refresh"),!0})})})},wun9:function(e,t,n){"use strict";var r=o(n("rXeC")),i=o(n("8NzR")),a=n("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("#projects_learn_refresh",function(){(0,r.default)(".js-category-link").on("click",function(e){(0,r.default)(".js-category-link").removeClass("selected"),(0,r.default)(".js-category-link").addClass("o-medium"),(0,r.default)(this).addClass("selected"),(0,r.default)(this).removeClass("o-medium"),(0,r.default)(".js-category-panel").addClass("hide"),(0,r.default)('.js-category-panel[data-name="'+(0,r.default)(this).data("name")+'"]').removeClass("hide"),(0,a.track)("Learn More Project Category Select",{category_name:(0,r.default)(this).text()}),e.preventDefault()}),(0,r.default)(".js-category-link").first().click()})},x0LT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureRepliesPagination=t.onLoadMoreRepliesClick=t.onLoadMoreReplies=t.addNewPage=t.commentsWithNewReply=t.commentsWithNewComment=t.findCommentLocation=t.createOptimisticComment=t.sortRootComments=t.sortReplies=t.getLoginPath=t.isLoggedIn=t.canComment=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("M4fF"),a=h(n("DtRx")),o=h(n("2TQX")),s=h(n("NKE6")),l=h(n("YRFD")),u=n("P4S0"),c=n("tryQ"),d=n("VPQO"),f=n("EAgE");function h(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.canComment=function(e){var t=e.backing,n=e.creator,r=e.me,i=void 0===r?{}:r,a=n.id===i.id;return!!(t||a||i.isKsrAdmin)},t.isLoggedIn=function(e){return 0!==Object.keys(e).length},t.getLoginPath=function(e){var t=e.projectUrl;return(0,o.default)("/login",{ref:"comments",then:t+"/comments"})},t.sortReplies=function(e){return[].concat(p(e)).sort(function(e,t){return(0,s.default)(e.createdAt,t.createdAt)})},t.sortRootComments=function(e){return[].concat(p(e)).sort(function(e,t){return(0,l.default)(e.node.createdAt,t.node.createdAt)})},t.createOptimisticComment=function(e,t){return{__typename:"Mutation",createProjectComment:{__typename:"PostProjectCommentPayload",comment:{id:u.TEMP_COMMENT_ID_PREFIX+"-"+(0,a.default)(),body:e.body,createdAt:Math.round(Date.now()/1e3)-1,author:r({},t.author,{__typename:"User"}),authorIsProjectCreator:!1,authorIsProjectCollaborator:!1,hasFlaggings:!1,canReport:!1,parentId:t.parentId||null,replies:t.parentId?null:{__typename:"ProjectCommentReplyConnection",totalCount:0,nodes:[],pageInfo:{__typename:"PageInfo",startCursor:null,hasPreviousPage:!1}},__typename:"ProjectComment"}}}};var m=t.findCommentLocation=function(e,t){var n=t.parentId;return(0,i.findIndex)(e,{id:n})};t.commentsWithNewComment=function(e,t){return null==t?e:(e.unshift({__typename:"ProjectCommentEdge",cursor:null,node:t}),e)},t.commentsWithNewReply=function(e,t){if(null==t)return e;var n=m(e.map(function(e){return e.node}),t);if(-1===n)return e;var i=e[n],a=r({},i,{node:r({},i.node,{replies:r({},i.node.replies,{totalCount:i.node.replies.totalCount+1,nodes:[].concat(p(i.node.replies.nodes),[t]),pageInfo:r({},i.node.replies.pageInfo)})})});return[].concat(p(e)).map(function(e,t){return t===n?a:e})},t.addNewPage=function(e,t){var n=t.fetchMoreResult;return n?r({},n,{project:r({},n.project,{comments:r({},n.project.comments,{edges:[].concat(p(e.project.comments.edges),p(n.project.comments.edges)),pageInfo:r({},n.project.comments.pageInfo)})})}):e},t.onLoadMoreReplies=function(e){return function(t,n){var i=n.id,a=n.replyCursor,o=Date.now();return e.query({query:t,variables:{replyCursor:a,id:i}}).then(function(n){(0,d.telegraf)(f.TELEGRAF_METHODS.TIME,u.TELEGRAF_ACTIONS.LOAD_PREVIOUS_REPLIES_TIME,o-Date.now());var a=n.data,s=e.readQuery({query:t,variables:{id:i,replyCursor:null}}),l=r({},s,{node:r({},s.node,{replies:r({},s.node.replies,{nodes:[].concat(p(a.node.replies.nodes),p(s.node.replies.nodes)),pageInfo:r({},s.node.replies.pageInfo,a.node.replies.pageInfo)})})});e.writeQuery({query:t,variables:{id:i,replyCursor:null},data:l})}).catch(function(e){c.Honeybadger.notify(JSON.stringify(e))})}},t.onLoadMoreRepliesClick=function(e){return function(){(0,d.telegraf)(f.TELEGRAF_METHODS.INCREMENT,u.TELEGRAF_ACTIONS.LOAD_PREVIOUS_REPLIES),e.toggleRepliesLoading(),e.onLoadMoreReplies(e.client)(e.query,{id:e.commentId,replyCursor:e.replyCursor}).then(e.toggleRepliesLoading).catch(e.toggleRepliesLoading)}},t.configureRepliesPagination=function(e,t,n){return function(r,i,a,o){return function(s){return{onClick:o({commentId:n,client:e,query:t,replyCursor:s.pageInfo.startCursor,toggleRepliesLoading:i,onLoadMoreReplies:a}),loadingStatus:r,totalCount:s.totalCount,showingCount:s.nodes.length,hasMorePages:s.pageInfo.hasPreviousPage}}}}},xQXO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initFlaggingAction=function(e){return{type:"INIT_FLAGGING",projectSlug:e}},t.flaggingFetchSuccessAction=function(e){return{type:"FLAGGING_FETCH_SUCCESS",response:e}},t.flaggingFetchFailAction=function(e){return{type:"FLAGGING_FETCH_FAIL",error:e}}},xZTV:function(e,t,n){"use strict";var r=i(n("l/Rs"));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n("8NzR")).default)("body#country_signups_netherlands",function(e){var t=e.find(".video-banner");function n(){var e=(0,r.default)(window).height()-(0,r.default)("#header-wrap").height(),n=(0,r.default)(window).width(),i=n/e;t.css({height:e,"min-height":"660px"}),i<1.777777?t.find("video").css({height:e,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-t.find("video").width()/2}):(t.find("video").css({height:"auto",width:n,left:0,"margin-left":0,top:"50%","margin-top":-t.find("video").height()/2}),e<620&&t.find("video").css({"margin-top":-360}))}(0,r.default)(document).resize(function(){n()}),n()})},xgGG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("l/Rs")),i=u(n("shXp")),a=u(n("9VV1")),o=u(n("XDtq")),s=u(n("MA+5")),l=u(n("hBlz"));function u(e){return e&&e.__esModule?e:{default:e}}n("452R"),n("v6Dq"),n("mjY1");var c=o.default.extend();function d(){return(0,l.default)(window.location.href)}c.uri=c.prototype.uri=function(){return d()},c.on_initialize(function(e,t,n,r){this.$view=t,this.template=n,r.url?(0,l.default)(r.url).equals(d().clone().query(""))?this.original_uri=d():this.original_uri=(0,l.default)(r.url):this.original_uri=d(),this.current_params="",this.param_change_listeners=[],this.options=r,d().equals(window.location.href)?e&&this.change_params(d().query()):this.set_params(d().query(),!0),this.bind_events()}),c.prototype.on_change_params=function(e){this.param_change_listeners.push(e)},c.prototype.change_params=function(e){this.$view.html((0,s.default)(this.template,this.get())),this.options.mobius_on&&!this.mobius&&(this.mobius=this.init_mobius(this.options.mobius_on)),this.current_params=e,e!==d().query()?history.pushState({params:e},null,this.original_uri.query(e).hash("").toString()):history.replaceState({params:e},null,d().query(e).hash("").toString()),this.mobius&&function(){var t=this.$mobius_context();this.mobius.current_page=1,this.mobius.set_extra_params(e),this.mobius.$elem=this.$mobius_on(),t.get(0)!==this.mobius.options.$context.get(0)&&(this.mobius.options.$context=t,this.mobius.bind_events()),this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),(0,r.default)(".mobius_load_more").show()):(this.mobius.pause(),(0,r.default)(".mobius_load_more").hide())}.apply(this),i.default.each(this.param_change_listeners,function(t){"function"==typeof t&&t(e)}),this.change()},c.prototype.set_params=function(e,t){var n=this.original_uri.clone().query(e||!1),i=this;return!(!t&&e===this.current_params)&&(r.default.ajax({url:n.suffix("json").toString(),dataType:"json",success:function(t){i.set(t,{overwrite:!0}),i.change_params(e)},error:function(e){(0,a.default)({error:e.responseText})}}),!0)},c.prototype.bind_events=function(){var e=this;(0,r.default)(window).on("statechange",function(){var t=History.getState().data;t&&"string"==typeof t.params&&e.set_params(t.params)})},c.prototype.$mobius_on=function(){var e=this.$view.find(".mobius_on");return e.length||(e=this.$view),e},c.prototype.$mobius_context=function(){var e=this.$view.find(".mobius_context");return e.length||(e=(0,r.default)(window)),e},c.prototype.init_mobius=function(e){var t=this,n=this.$mobius_on(),i=this.$mobius_context();return this.$view.on("mobius:loaded_page",function(n,i,a){a[e]=t.get(e).concat(a[e]),i>=a.total_pages?(t.mobius.pause(),(0,r.default)(".mobius_load_more").hide()):(t.mobius.play(),(0,r.default)(".mobius_load_more").show()),delete a.params.page,t.set(a,{overwrite:!0})}),n.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:i,paused:!0}).data("mobius")},window.Location=c,t.default=c},xgez:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusPreviousOption=t.focusNextOption=t.radioGroupReducer=t.radioGroupOptionSelected=t.radioGroupKeydown=t.initialRadioGroupState=t.radioGroupWillHandleKey=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("EIRz"),a=n("Tvaj"),o=[a.DOWN,a.LEFT,a.RIGHT,a.SPACE,a.UP],s=(t.radioGroupWillHandleKey=function(e){return o.includes(e)},t.initialRadioGroupState={selectedOptionIndex:null}),l=(t.radioGroupKeydown=function(e,t,n,r){return{type:"RADIO_GROUP_KEYDOWN",keycode:e,target:t,currentIndex:n,maximumIndex:r}},t.radioGroupOptionSelected=function(e,t){return{type:"RADIO_GROUP_OPTION_SELECTED",index:t}},t.radioGroupReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"NOOP":return e;case"RADIO_GROUP_KEYDOWN":var n=t.currentIndex,i=t.keycode,a=t.target,o=t.maximumIndex;return c(i,a,n,o,e);case"RADIO_GROUP_OPTION_SELECTED":return r({},e,{selectedOptionIndex:t.index});default:return e}},t.focusNextOption=function(e){var t=e.nextElementSibling;t?t.focus():e.parentNode.firstChild.focus()}),u=t.focusPreviousOption=function(e){var t=e.previousElementSibling;t?t.focus():e.parentNode.lastChild.focus()},c=function(e,t,n,o,s){switch(e){case a.LEFT:case a.UP:return(0,i.loop)(r({},s,{selectedOptionIndex:f(s.selectedOptionIndex,o)}),i.Cmd.run(u,{args:[t]}));case a.RIGHT:case a.DOWN:return(0,i.loop)(r({},s,{selectedOptionIndex:d(s.selectedOptionIndex,o)}),i.Cmd.run(l,{args:[t]}));case a.SPACE:return r({},s,{selectedOptionIndex:n});default:return s}},d=function(e,t){return e>=t?0:e+1},f=function(e,t){return!e||e<1?t:e-1}},y3Mw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentsInit=void 0;var r=n("3zLD"),i=n("UFhm"),a=u(n("GiK3")),o=u(n("O27J")),s=u(n("IuKc")),l=n("tryQ");function u(e){return e&&e.__esModule?e:{default:e}}(t.commentsInit=function(){var e=(0,i.apolloClient)(null,l.Honeybadger.notify.bind(l.Honeybadger)),t=document.getElementById("react-project-comments");if(t){var n=t.dataset.project_pid;o.default.render(a.default.createElement(r.ApolloProvider,{client:e},a.default.createElement(s.default,{pid:n})),t)}})()},y5MZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("GiK3"),i=f(r),a=f(n("s9QN")),o=f(n("CF+r")),s=n("x0LT"),l=n("Ps9/"),u=n("MB1G"),c=n("P4S0"),d=f(n("bsLU"));function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.comments,n=e.pid,f=e.projectId,h=e.activateForm,p=e.deactivateForm,m=e.activeThreadId,g=e.userCanComment,v=e.author,_=e.pagination,y=e.currentCursor,b=e.refetch;return t?i.default.createElement(r.Fragment,null,i.default.createElement(o.default,null,i.default.createElement(d.default,{pid:n,currentCount:_.totalCount,refetch:b})),i.default.createElement("ul",{className:"bg-grey-100 p2 mb3"},(0,s.sortRootComments)(t).map(function(e,r){return i.default.createElement("li",{key:e.node.id,className:(0,u.isLastItem)(t,r)?"":"mb2"},i.default.createElement(o.default,null,i.default.createElement(a.default,{author:v,pid:n,projectId:f,activateForm:h,deactivateForm:p,activeThreadId:m,userCanComment:g,comment:e.node,currentCursor:y})))})),i.default.createElement(o.default,null,i.default.createElement(l.LoadMore,{buttonColor:"blue",buttonI18nKey:"project_page.comments.Load_more",remainingI18nKey:"project_page.comments.Comments_remaining",totalCount:_.totalCount,showingCount:_.showingCount,pageSize:c.PAGE_SIZE.COMMENTS,onClick:_.onClick,loading:_.loadingStatus,hasMorePages:_.hasMorePages}))):null}},yQDW:function(e,t,n){n("l/Rs"),n("l/Rs");!function(e){e.fn.unveil=function(t,n){var r,i=e(window),a=t||0,o=window.devicePixelRatio>1?"data-src-retina":"data-src",s=this;function l(){var t=s.filter(function(){var t=e(this);if(!t.is(":hidden")){var n=i.scrollTop(),r=n+i.height(),o=t.offset().top;return o+t.height()>=n-a&&o<=r+a}});r=t.trigger("unveil"),s=s.not(r)}return this.one("unveil",function(){var e=this.getAttribute(o);(e=e||this.getAttribute("data-src"))&&(this.setAttribute("src",e),"function"==typeof n&&n.call(this))}),i.scroll(l),i.resize(l),l(),this}}(window.jQuery||window.Zepto)},yR81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("tlQw"),a=(r=i)&&r.__esModule?r:{default:r},o=n("n+Gj");t.default=(0,a.default)(o.CREATE_FLAGGING_MUTATION)},yYdC:function(e,t,n){"use strict";var r,i=n("l/Rs"),a=(r=i)&&r.__esModule?r:{default:r};n("6TZa"),(0,a.default)(function(){(0,a.default)(document).ksrSelect()})},ybIR:function(e,t,n){"use strict";var r,i=n("wmCY"),a=(r=i)&&r.__esModule?r:{default:r};n("l/Rs");var o=n("l/Rs");!function(){function e(e){return e.html}o.fn.loadMore=function(t){o(this).each(function(){var n=o(this),r=n.find(".js-load-more--appendable"),i=n.find(".js-load-more--removable"),s=n.find(".js-load-more--button");i.length||(i=s),function(t,n,r,i,s){var l=t.mobius(o.extend({url:function(e){return e.data("href")||e.prop("href")}(n),dataType:"json",trigger_next:n,load_next_after:r},s)).data("mobius");t.on("mobius:loading_page",function(){var e=t.attr("data-exclude-ids"),r=l.options.perPage||6;e&&l.add_param("exclude_ids[]",e.split(",")),r&&l.add_param("per_page",r),n.prop("disabled",!0),n.data("previousHTML",n.html()),n.html(a.default.t("library.load_more.Loading"))}),t.on("mobius:loaded_page",function(t,a,s){var u=(l.options.responseToHTML||e)(s),c=o(u).hide();r.append(c),c.slideDown(),n.html(n.data("previousHTML")),n.prop("disabled",!1),"has_more"in s&&!s.has_more&&i.remove()})}(n,s,r,i,t)})}}()},yloT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.stringToMoney=function(e,t){if(!e)return 0;t=r({precision:2},t);var n=Math.max(2,t.precision);return parseFloat(e.replace(/[^0-9.,-]/g,"").replace(new RegExp("[\\.,](\\d{1,"+n+"}$)","g"),".$1").replace(new RegExp("[\\.,](?!\\d{1,"+n+"}$)","g"),""))}},ymRo:function(e,t,n){"use strict";var r=s(n("l/Rs")),i=s(n("8NzR")),a=n("16WZ"),o=n("Tvaj");function s(e){return e&&e.__esModule?e:{default:e}}(0,i.default)(".NS_layouts__admin_navigation",function(e){var t=(0,r.default)("a.open_panel",e),n=(0,r.default)("#admin_panel"),i=(0,r.default)("#admin-nav-prop"),s=(0,r.default)("#admin_panel_wrap");function l(){var t;s.is(":hidden")?(t=(0,r.default)("#admin_wrap"),e.detach().prependTo("body"),0!==s.offsetParent().scrollTop()&&s.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad"),s.trigger("opened"),s.slideDown(function(){i.height(t.height()),(0,a.rebindScroll)()})):s.slideUp(function(){(0,a.rebindScroll)()})}e.on("ksr_admin:nav_open",function(){s.is(":hidden")&&l()}),t.click(function(e){l(),e.preventDefault()}),(0,r.default)(window).on("keydown",function(e){if(e.which===o.SPACE&&!(0,r.default)(e.target).is(":input")&&!(0,r.default)(e.target).is("[contenteditable]"))if(s.is(":visible")){var t,a=n.find("details[open]").add("#running-board-wrap"),u=0;a.each(function(e){window.scrollY>=this.offsetTop-i.height()&&(u=e)}),(t=u===a.length-1?a.get(0):a.get(u+1))&&window.scrollTo(0,t.offsetTop-i.height()),e.preventDefault()}else l()}),"#admin_panel"===window.location.hash&&(r.default.fx.off=!0,l(),r.default.fx.off=!1)})},yqLu:function(e,t,n){"use strict";var r=l(n("l/Rs"));n("LNuh");var i,a,o=l(n("YC2V")),s=l(n("c5nH"));function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(document).on("livesearch:results",function(e,t){var n,a=(0,r.default)(e.target).val();n=t.projects?t.projects.length:t.length,i=(0,r.default)(e.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",i,"Term",a,parseInt(n,10))}),(0,r.default)(document).on("livesearch:searching",function(){a=!0}),(0,r.default)(document).on("livesearch:cancel",function(){a&&("undefined"!=typeof ga&&ga("send","event",i,"Cancels"),a=!1)}),(0,r.default)(document).ready(function(){(0,r.default)(".home-editorial-title").on("click",function(){var e=(0,r.default)(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),(0,r.default)(document).ready(function(){(0,r.default)(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),(0,r.default)(document).ready(function(){(0,r.default)("#results_properties").livequery(function(){var e=(0,r.default)(this).children("#number_of_results").text(),t=(0,r.default)(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),(0,r.default)(document).ready(function(){(0,r.default)("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=(0,r.default)(this).children(".message").html(),t=(0,r.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),(0,r.default)("#checkout-signup .fieldset-errors").livequery(function(){var e=(0,r.default)(this).children("ul").children(),t=(0,r.default)(document).attr("URL");r.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",n,t)})}),(0,r.default)("#sessions_new #growl_section .error").livequery(function(){var e=(0,r.default)(this).children(".message").html(),t=(0,r.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),(0,r.default)("#new_user .fieldset-errors").livequery(function(){var e=(0,r.default)(this).children("ul").children(),t=(0,r.default)(document).attr("URL");r.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",n,t)})})}),(0,r.default)(document).ready(function(){(0,r.default)(".share-box").on("click","a",function(){var e=(0,r.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,r.default)("#checkout-project-share").on("click","a",function(){var e=(0,r.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,r.default)(document).on("click",".clipster",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),(0,r.default)(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),(0,r.default)(function(){var e;(0,r.default)("#video-section object").livequery(function(){e=(0,r.default)(this)[0],(0,r.default)(document).attr("URL")}),(0,r.default)(document).on("click","#video-section",function(){(0,r.default)(document).attr("URL"),e&&("Project Page Video",function(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}(e))}),(0,r.default)(window).on("beforeunload",function(){0})}),(0,r.default)(document).on("modal_dialog:opened",function(e){var t=(0,r.default)(e.target).find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",t)}),(0,r.default)(document).ready(function(){(0,r.default)(".faq-question a").click(function(){var e=(0,r.default)("body[id]").length?(0,r.default)("body").attr("id"):"No ID",t=(0,r.default)(this).closest(".faq"),n=(0,r.default)(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,n)})}),(0,r.default)(document).ready(function(){(0,r.default)(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),(0,r.default)(document).ready(function(){(0,r.default)(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",(0,r.default)(this).text())})}),(0,r.default)(document).ready(function(){var e=0;(0,r.default)(".scissors").on("click",function(){e<2?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),(0,r.default)(document).ready(function(){if((0,r.default)("#checkouts_thanks").length&&"undefined"!=typeof ga&&o.default&&s.default){ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:o.default.get("id"),affiliation:s.default.get("slug"),revenue:o.default.get("net_amount"),shipping:o.default.get("shipping"),currency:s.default.get("currency")});var e=[s.default.get("name"),o.default.get("reward").title_for_backing_tier||"No Reward"].join("-");ga("ecommerce:addItem",{id:o.default.get("id"),name:e,sku:o.default.get("reward").id,category:s.default.get("category").name,price:o.default.get("reward").minimum,quantity:"1",currency:s.default.get("currency")}),ga("ecommerce:send")}}),(0,r.default)(document).ready(function(){var e=1;(0,r.default)(document).on("infinite_scroll:scrolled_to",function(t,n){if(n>e){var r=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",r),e=n}})})},zOWE:function(e,t,n){"use strict";var r=l(n("8NzR")),i=l(n("l/Rs")),a=l(n("+bVi")),o=l(n("wmCY")),s=n("4RZc");function l(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_mobile__universal_app_hero",function(e){var t,n=(0,i.default)(".js-ipad-frame"),r=1,l=1,u=(0,i.default)(".js-form-message",e),c=!1;function d(){var e=(0,i.default)(".js-ipad-inner"),t=.81836*n.outerWidth(),r=.86634*n.outerHeight(),a=(0,i.default)(".js-ipad-inner-content"),o=(0,i.default)(".js-ipad-inner-content > div");e.css({width:t,height:r,left:(n.outerWidth()-t)/2,top:(n.outerHeight()-r)/2}),a.css({width:t*o.length}),o.css({width:t,height:r}),function(){var e=(0,i.default)(".js-iphone-container"),t=(0,i.default)(".js-iphone-frame"),r=(0,i.default)(".js-iphone-inner"),a=(0,i.default)(".js-iphone-inner-content"),o=(0,i.default)(".js-iphone-inner-content > div");(0,i.default)(window).width()<(0,i.default)(".js-device-container").width()+.35*t.outerWidth()?e.css({right:0}):e.css({right:-.35*t.outerWidth()});t.css({height:.8141*n.outerHeight(),right:-.35*t.outerWidth()});var s=.86585*t.outerWidth(),l=.7537*t.outerHeight();r.css({width:s,height:l,left:(t.outerWidth()-s)/2,top:(t.outerHeight()-l)/2}),a.css({width:s*o.length}),o.css({width:s,height:l}),(0,i.default)(".js-iphone-video").css({width:s,height:l})}()}(0,i.default)(document).on("submit","#send_mobile_link_form",function(e){e.preventDefault();var t=(0,i.default)(this);c||(c=!0,i.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find("#email_or_phone").val()},success:function(e){e.success?(u.show().removeClass("error").html(e.success),t.remove()):e.error&&u.show().addClass("error").html(e.error)},complete:function(){c=!1}}))}),(0,i.default)(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(t){t.preventDefault(),(0,i.default)("#send_mobile_link_form",e).length||u.html(o.default.t("onloads.views.mobile.universal_app_hero.You_should_already_have_a_link_from_us"))}),a.default["not-ios"]&&(0,i.default)(".js-get-the-app-button").on("click",function(e){(0,s.track)("Mobile Promo Reveal Form"),(0,i.default)(".js-get-the-app-button-container").css({marginTop:-(0,i.default)(this).outerHeight()}),setTimeout(function(){(0,i.default)(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,i.default)(document).resize(function(){d()}),setTimeout(function(){d(),e.removeClass("loading")},500),clearInterval(t),t=setInterval(function(){(0,i.default)(".js-ipad-inner-content").css({marginLeft:-100*r+"%"}),(r+=1)>=(0,i.default)(".js-ipad-inner-content > div").length&&(r=0),(0,i.default)(".js-iphone-inner-content").css({marginLeft:-100*l+"%"}),(l+=1)>=(0,i.default)(".js-iphone-inner-content > div").length&&(l=0)},5e3)})},zSos:function(e,t,n){e.exports=n("bRLv").Observable},zZ2s:function(e,t,n){"use strict";var r=u(n("l/Rs")),i=u(n("8NzR")),a=u(n("9VV1")),o=u(n("wmCY")),s=n("Tvaj"),l=n("4RZc");function u(e){return e&&e.__esModule?e:{default:e}}(0,i.default)("body#survey_editability_edit",function(e){var t=(0,r.default)("form#disable_survey_editability_form",e),n=(0,r.default)("#send_editable_address_preview",e),i=(0,r.default)("form#enable_survey_editability_form",e),u=t.find("#disable_confirm_text").html(),c=i.find("#enable_confirm_text").html();(0,r.default)("input:text",e).on("keydown",function(e){e.which===s.ENTER&&e.preventDefault()}),n.on("click",function(e){e.preventDefault();var t=(0,r.default)(this);t.data("loading")||(t.data("loading",!0),r.default.post(t.attr("href"),{},function(e,n){"success"===n&&((0,a.default)({success:o.default.t("onloads.views.surveys.editability_form.A_preview_has_been_sent_to_your_email_address")}),t.data("loading",!1))})),(0,l.track)("Survey Editability Deadline Preview Sent")}),t.confirm_submit({title:o.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:u,yes_copy:o.default.t("onloads.views.surveys.editability_form.Send_notifications_now"),no_copy:o.default.t("onloads.views.surveys.editability_form.Cancel")}),i.confirm_submit({title:o.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:c,yes_copy:o.default.t("onloads.views.surveys.editability_form.Allow_changes_now"),no_copy:o.default.t("onloads.views.surveys.editability_form.Cancel")})})},zZmH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.formatError=function(e){return e||(0,o.default)(0,"Received null or undefined error."),r({},e.extensions,{message:e.message||"An unknown error occurred.",locations:e.locations,path:e.path})};var i,a=n("JiIc"),o=(i=a)&&i.__esModule?i:{default:i}},zcFO:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},zcvo:function(e,t,n){var r=n("l/Rs");n("l/Rs");!function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){var n,r=e(this),i=r.find('input[type="text"]'),a=t.target_input||r.find('input[type="hidden"]'),o=i.siblings(".ss-search");function s(){i.hide(),i.attr("disabled","disabled"),i.siblings(".ss-delete, .ss-search").hide();var n=e('<div class="field-selected"><span class="value">'+i.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");i.siblings("div.field-selected").remove(),i.after(n),i.siblings(".results").slideUp(),i.trigger("livesearch_selector:select",[i.val()]),n.find("a.cancel-link").click(function(e){e.preventDefault(),i.val(""),n.remove(),i.removeAttr("disabled"),i.siblings(".ss-delete, .ss-search").show(),i.show(),i.focus(),a.val(""),i.trigger("dirty"),i.trigger("livesearch_selector:unselect")})}r.addClass("search"),a.val()&&i.val()&&s(),t.url=t.url||r.closest("form").attr("action"),r.livesearch_pretty_input_dropdown(t),n=i.data("livesearch.input_dropdown"),i.on("livesearch:searching",function(){o.removeClass("ss-search").addClass("icon-loading-small")}),i.on("livesearch:results livesearch:ajax_error",function(){o.removeClass("icon-loading-small").addClass("ss-search")}),i.on("livesearch:results",function(){var e=i.siblings(".results");n.select(e.find("li:first"))}),r.on("livesearch:selected",function(e,t){t&&(i.val(t[0]),a.val(t[1]),s())})})}}(r)},"zn/B":function(e,t,n){"use strict";var r=h(n("l/Rs")),i=h(n("shXp")),a=h(n("+bVi")),o=n("4RZc"),s=n("16WZ"),l=n("dvbw"),u=h(n("hBlz"));n("M1ti");var c=n("ABD9"),d=n("nh5m"),f=n("y3Mw");function h(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(function(){var e=(0,r.default)(".NS_projects__project_nav"),t=(0,r.default)(".NS_projects__content"),n=e.find(".js-load-project-content");if(e.length&&t.length){if((0,r.default)(document).on("projectnav:description",function(){(0,c.projectFlaggingInit)(),(0,d.backerRewardsInit)()}),(0,r.default)(document).on("projectnav:comments",function(){(0,f.commentsInit)()}),(0,r.default)(window).on("resize",i.default.debounce(b,100)),function(){var e=window.location.pathname.replace(/\/\d*$/,""),t=i.default.map(n,function(e){return e.pathname.split("/").pop()});t.push("posts");var r=e.split("/").pop();i.default.contains(t,r)&&!window.location.hash&&w()}(),n.on("click",function(e){var t=(0,r.default)(this);if(e.preventDefault(),(0,u.default)(t.prop("href")).pathname()!==(0,u.default)(window.location).pathname()){var n=t.attr("data-content");y(t.attr("href"),n)}}),t.on("click",".js-faq-link",function(e){E(e,"Check")}),t.on("click",".js-add-faq-link",function(e){E(e,"Post")}),a.default["not-touchable"]){var h=skrollr.init({forceHeight:!1});(0,r.default)(document).one("ksr:video_player_resize",function(){h.refresh()})}(0,r.default)(document).resize(function(){b()});var p={about:!1,risks:!1,last_rewards:!1,recs:!1},m=i.default.debounce(function(){k("about",(0,r.default)(".js-project-nav"))&&C("about",S((0,r.default)(".js-project-nav"))),k("last_rewards",(0,r.default)(".js-project-rewards"),!0)&&C("last_rewards",S((0,r.default)(".js-project-rewards"))+(0,r.default)(".js-project-rewards").height()),k("risks",(0,r.default)(".js-risks"))&&C("risks",S((0,r.default)(".js-risks"))),k("recommended",(0,r.default)(".js-recs"))&&C("recommended",S((0,r.default)(".js-recs")))},1e3);if((0,r.default)(document).scroll(m),b(),a.default["not-touchable"]){var g=(0,r.default)("body"),v=(0,r.default)(".creator-nav"),_=g.hasClass("creator_nav_visible")?"calc(100% - "+v.width()+"px)":"100%";(0,s.setupScrollLocking)({offsets:[".js-admin-nav-wrap"],element:".js-project-nav",styles:function(){return{onLock:{width:_,right:0},offLock:{width:"100%"}}}})}}function y(i,a){var o=".js-project-"+a+"-content",s=t.find(o);!function(e,t){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.hash=t}(i,a),function(t){var r=e.find(".js-load-project-"+t);n.removeClass("is-active"),r.addClass("is-active"),b()}(a),t.find(".js-project-content").removeClass("visible").fadeOut(200,function(){(0,r.default)(this).empty(),window.setTimeout(function(){s.fadeIn()},200)}),r.default.ajax({url:i,cache:!1,success:function(e){s.html(e),w(),(0,r.default)(document).trigger("projectnav:"+a)}})}function b(){var t=e.find("a.is-active");t.length?e.find(".js-selected-indicator").show().css({left:(0,r.default)(".js-project-nav-scroll").scrollLeft()+t.position().left+parseInt(t.css("marginLeft")||0,10)+parseInt(t.css("paddingLeft")||0,10),width:t.width()}):e.find(".js-selected-indicator").hide()}function w(){(0,l.coreScroller)({to:t.position().top,easing:"easeOutQuint",duration:200})}function E(e,t){e.preventDefault(),y((0,r.default)(e.target).attr("href"),"faqs"),(0,o.track)("Clicked"+t+"FAQ",{context:(0,r.default)(e.target).data("context")})}function k(e,t,n){if(!p[e]&&!function(e){return 0===e.length||e.is(":hidden")}(t)){var i=n?t.height():0;return(0,r.default)(this).scrollTop()+(0,r.default)(this).height()>=S(t)+i}}function S(e){return e.offset().top}function C(e,t){(0,o.track)("Viewed Project Page Section",{context:e,page_pixel_length:(0,r.default)(document).height(),pixel_position:t}),p[e]=!0}})},zx33:function(e,t,n){"use strict";n("l/Rs");var r=n("l/Rs");r(function(){r.fn.sync_form=function(e){var t=r(this),n=function(){};e=e||{},t.data("updating")?t.data("dirty",(t.data("dirty")||[]).concat(e)):(t.data("updating",!0),r.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(i){(e.success||n).apply(this,arguments),t.trigger("form_synced",[i]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};r.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),i.url&&t.attr("action",i.url)},error:e.error,complete:function(){(e.complete||n).apply(this,arguments),t.data("updating",!1)}}))}})}},[3]);
//# sourceMappingURL=base.6163e4ad5d8cce3a2185.js.map